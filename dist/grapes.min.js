/*! grapesjs - 0.21.106 */
!function(t,e){'object'==typeof exports&&'object'==typeof module?module.exports=e():'function'==typeof define&&define.amd?define([],e):'object'==typeof exports?exports["grapesjs"]=e():t["grapesjs"]=e()}('undefined'!=typeof globalThis?globalThis:'undefined'!=typeof window?window:this,(()=>(()=>{var __webpack_modules__={8921:(t,e,n)=>{"use strict";var o,i;1&&(o=[n(5094),n(2838),n(5600)],void 0===(i=function(t,e,n){return function(t,e,n){var o=function(e,n){return t.js_beautify(e,n)};return o.js=t.js_beautify,o.css=e.css_beautify,o.html=n.html_beautify,o.js_beautify=t.js_beautify,o.css_beautify=e.css_beautify,o.html_beautify=n.html_beautify,o}(t,e,n)}.apply(e,o))||(t.exports=i))},2838:(t,e)=>{var n;!function(){var o;!function(){"use strict";var t=[,,function(t){function e(t){this.__parent=t,this.__character_count=0,this.__indent_count=-1,this.__alignment_count=0,this.__wrap_point_index=0,this.__wrap_point_character_count=0,this.__wrap_point_indent_count=-1,this.__wrap_point_alignment_count=0,this.__items=[]}function n(t,e){this.__cache=[''],this.__indent_size=t.indent_size,this.__indent_string=t.indent_char,t.indent_with_tabs||(this.__indent_string=new Array(t.indent_size+1).join(t.indent_char)),e=e||'',t.indent_level>0&&(e=new Array(t.indent_level+1).join(this.__indent_string)),this.__base_string=e,this.__base_string_length=e.length}function o(t,o){this.__indent_cache=new n(t,o),this.raw=!1,this._end_with_newline=t.end_with_newline,this.indent_size=t.indent_size,this.wrap_line_length=t.wrap_line_length,this.indent_empty_lines=t.indent_empty_lines,this.__lines=[],this.previous_line=null,this.current_line=null,this.next_line=new e(this),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1,this.__add_outputline()}e.prototype.clone_empty=function(){var t=new e(this.__parent);return t.set_indent(this.__indent_count,this.__alignment_count),t},e.prototype.item=function(t){return t<0?this.__items[this.__items.length+t]:this.__items[t]},e.prototype.has_match=function(t){for(var e=this.__items.length-1;e>=0;e--)if(this.__items[e].match(t))return!0;return!1},e.prototype.set_indent=function(t,e){this.is_empty()&&(this.__indent_count=t||0,this.__alignment_count=e||0,this.__character_count=this.__parent.get_indent_size(this.__indent_count,this.__alignment_count))},e.prototype._set_wrap_point=function(){this.__parent.wrap_line_length&&(this.__wrap_point_index=this.__items.length,this.__wrap_point_character_count=this.__character_count,this.__wrap_point_indent_count=this.__parent.next_line.__indent_count,this.__wrap_point_alignment_count=this.__parent.next_line.__alignment_count)},e.prototype._should_wrap=function(){return this.__wrap_point_index&&this.__character_count>this.__parent.wrap_line_length&&this.__wrap_point_character_count>this.__parent.next_line.__character_count},e.prototype._allow_wrap=function(){if(this._should_wrap()){this.__parent.add_new_line();var t=this.__parent.current_line;return t.set_indent(this.__wrap_point_indent_count,this.__wrap_point_alignment_count),t.__items=this.__items.slice(this.__wrap_point_index),this.__items=this.__items.slice(0,this.__wrap_point_index),t.__character_count+=this.__character_count-this.__wrap_point_character_count,this.__character_count=this.__wrap_point_character_count," "===t.__items[0]&&(t.__items.splice(0,1),t.__character_count-=1),!0}return!1},e.prototype.is_empty=function(){return 0===this.__items.length},e.prototype.last=function(){return this.is_empty()?null:this.__items[this.__items.length-1]},e.prototype.push=function(t){this.__items.push(t);var e=t.lastIndexOf('\n');-1!==e?this.__character_count=t.length-e:this.__character_count+=t.length},e.prototype.pop=function(){var t=null;return this.is_empty()||(t=this.__items.pop(),this.__character_count-=t.length),t},e.prototype._remove_indent=function(){this.__indent_count>0&&(this.__indent_count-=1,this.__character_count-=this.__parent.indent_size)},e.prototype._remove_wrap_indent=function(){this.__wrap_point_indent_count>0&&(this.__wrap_point_indent_count-=1)},e.prototype.trim=function(){for(;' '===this.last();)this.__items.pop(),this.__character_count-=1},e.prototype.toString=function(){var t='';return this.is_empty()?this.__parent.indent_empty_lines&&(t=this.__parent.get_indent_string(this.__indent_count)):(t=this.__parent.get_indent_string(this.__indent_count,this.__alignment_count),t+=this.__items.join('')),t},n.prototype.get_indent_size=function(t,e){var n=this.__base_string_length;return e=e||0,t<0&&(n=0),n+=t*this.__indent_size,n+=e},n.prototype.get_indent_string=function(t,e){var n=this.__base_string;return e=e||0,t<0&&(t=0,n=''),e+=t*this.__indent_size,this.__ensure_cache(e),n+=this.__cache[e]},n.prototype.__ensure_cache=function(t){for(;t>=this.__cache.length;)this.__add_column()},n.prototype.__add_column=function(){var t=this.__cache.length,e=0,n='';this.__indent_size&&t>=this.__indent_size&&(t-=(e=Math.floor(t/this.__indent_size))*this.__indent_size,n=new Array(e+1).join(this.__indent_string)),t&&(n+=new Array(t+1).join(' ')),this.__cache.push(n)},o.prototype.__add_outputline=function(){this.previous_line=this.current_line,this.current_line=this.next_line.clone_empty(),this.__lines.push(this.current_line)},o.prototype.get_line_number=function(){return this.__lines.length},o.prototype.get_indent_string=function(t,e){return this.__indent_cache.get_indent_string(t,e)},o.prototype.get_indent_size=function(t,e){return this.__indent_cache.get_indent_size(t,e)},o.prototype.is_empty=function(){return!this.previous_line&&this.current_line.is_empty()},o.prototype.add_new_line=function(t){return!(this.is_empty()||!t&&this.just_added_newline())&&(this.raw||this.__add_outputline(),!0)},o.prototype.get_code=function(t){this.trim(!0);var e=this.current_line.pop();e&&('\n'===e[e.length-1]&&(e=e.replace(/\n+$/g,'')),this.current_line.push(e)),this._end_with_newline&&this.__add_outputline();var n=this.__lines.join('\n');return'\n'!==t&&(n=n.replace(/[\n]/g,t)),n},o.prototype.set_wrap_point=function(){this.current_line._set_wrap_point()},o.prototype.set_indent=function(t,e){return t=t||0,e=e||0,this.next_line.set_indent(t,e),this.__lines.length>1?(this.current_line.set_indent(t,e),!0):(this.current_line.set_indent(),!1)},o.prototype.add_raw_token=function(t){for(var e=0;e<t.newlines;e++)this.__add_outputline();this.current_line.set_indent(-1),this.current_line.push(t.whitespace_before),this.current_line.push(t.text),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1},o.prototype.add_token=function(t){this.__add_space_before_token(),this.current_line.push(t),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=this.current_line._allow_wrap()},o.prototype.__add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&(this.non_breaking_space||this.set_wrap_point(),this.current_line.push(' '))},o.prototype.remove_indent=function(t){for(var e=this.__lines.length;t<e;)this.__lines[t]._remove_indent(),t++;this.current_line._remove_wrap_indent()},o.prototype.trim=function(t){for(t=void 0!==t&&t,this.current_line.trim();t&&this.__lines.length>1&&this.current_line.is_empty();)this.__lines.pop(),this.current_line=this.__lines[this.__lines.length-1],this.current_line.trim();this.previous_line=this.__lines.length>1?this.__lines[this.__lines.length-2]:null},o.prototype.just_added_newline=function(){return this.current_line.is_empty()},o.prototype.just_added_blankline=function(){return this.is_empty()||this.current_line.is_empty()&&this.previous_line.is_empty()},o.prototype.ensure_empty_line_above=function(t,n){for(var o=this.__lines.length-2;o>=0;){var i=this.__lines[o];if(i.is_empty())break;if(0!==i.item(0).indexOf(t)&&i.item(-1)!==n){this.__lines.splice(o+1,0,new e(this)),this.previous_line=this.__lines[this.__lines.length-2];break}o--}},t.exports.Output=o},,,,function(t){function e(t,e){this.raw_options=n(t,e),this.disabled=this._get_boolean('disabled'),this.eol=this._get_characters('eol','auto'),this.end_with_newline=this._get_boolean('end_with_newline'),this.indent_size=this._get_number('indent_size',4),this.indent_char=this._get_characters('indent_char',' '),this.indent_level=this._get_number('indent_level'),this.preserve_newlines=this._get_boolean('preserve_newlines',!0),this.max_preserve_newlines=this._get_number('max_preserve_newlines',32786),this.preserve_newlines||(this.max_preserve_newlines=0),this.indent_with_tabs=this._get_boolean('indent_with_tabs','\t'===this.indent_char),this.indent_with_tabs&&(this.indent_char='\t',1===this.indent_size&&(this.indent_size=4)),this.wrap_line_length=this._get_number('wrap_line_length',this._get_number('max_char')),this.indent_empty_lines=this._get_boolean('indent_empty_lines'),this.templating=this._get_selection_list('templating',['auto','none','django','erb','handlebars','php','smarty'],['auto'])}function n(t,e){var n,i={};for(n in t=o(t))n!==e&&(i[n]=t[n]);if(e&&t[e])for(n in t[e])i[n]=t[e][n];return i}function o(t){var e,n={};for(e in t){n[e.replace(/-/g,"_")]=t[e]}return n}e.prototype._get_array=function(t,e){var n=this.raw_options[t],o=e||[];return'object'==typeof n?null!==n&&'function'==typeof n.concat&&(o=n.concat()):'string'==typeof n&&(o=n.split(/[^a-zA-Z0-9_\/\-]+/)),o},e.prototype._get_boolean=function(t,e){var n=this.raw_options[t];return void 0===n?!!e:!!n},e.prototype._get_characters=function(t,e){var n=this.raw_options[t],o=e||'';return'string'==typeof n&&(o=n.replace(/\\r/,'\r').replace(/\\n/,'\n').replace(/\\t/,'\t')),o},e.prototype._get_number=function(t,e){var n=this.raw_options[t];e=parseInt(e,10),isNaN(e)&&(e=0);var o=parseInt(n,10);return isNaN(o)&&(o=e),o},e.prototype._get_selection=function(t,e,n){var o=this._get_selection_list(t,e,n);if(1!==o.length)throw new Error("Invalid Option Value: The option '"+t+"' can only be one of the following values:\n"+e+"\nYou passed in: '"+this.raw_options[t]+"'");return o[0]},e.prototype._get_selection_list=function(t,e,n){if(!e||0===e.length)throw new Error("Selection list cannot be empty.");if(n=n||[e[0]],!this._is_valid_selection(n,e))throw new Error("Invalid Default Value!");var o=this._get_array(t,n);if(!this._is_valid_selection(o,e))throw new Error("Invalid Option Value: The option '"+t+"' can contain only the following values:\n"+e+"\nYou passed in: '"+this.raw_options[t]+"'");return o},e.prototype._is_valid_selection=function(t,e){return t.length&&e.length&&!t.some((function(t){return-1===e.indexOf(t)}))},t.exports.Options=e,t.exports.normalizeOpts=o,t.exports.mergeOpts=n},,function(t){var e=RegExp.prototype.hasOwnProperty('sticky');function n(t){this.__input=t||'',this.__input_length=this.__input.length,this.__position=0}n.prototype.restart=function(){this.__position=0},n.prototype.back=function(){this.__position>0&&(this.__position-=1)},n.prototype.hasNext=function(){return this.__position<this.__input_length},n.prototype.next=function(){var t=null;return this.hasNext()&&(t=this.__input.charAt(this.__position),this.__position+=1),t},n.prototype.peek=function(t){var e=null;return t=t||0,(t+=this.__position)>=0&&t<this.__input_length&&(e=this.__input.charAt(t)),e},n.prototype.__match=function(t,n){t.lastIndex=n;var o=t.exec(this.__input);return!o||e&&t.sticky||o.index!==n&&(o=null),o},n.prototype.test=function(t,e){return e=e||0,(e+=this.__position)>=0&&e<this.__input_length&&!!this.__match(t,e)},n.prototype.testChar=function(t,e){var n=this.peek(e);return t.lastIndex=0,null!==n&&t.test(n)},n.prototype.match=function(t){var e=this.__match(t,this.__position);return e?this.__position+=e[0].length:e=null,e},n.prototype.read=function(t,e,n){var o,i='';return t&&(o=this.match(t))&&(i+=o[0]),!e||!o&&t||(i+=this.readUntil(e,n)),i},n.prototype.readUntil=function(t,e){var n,o=this.__position;t.lastIndex=this.__position;var i=t.exec(this.__input);return i?(o=i.index,e&&(o+=i[0].length)):o=this.__input_length,n=this.__input.substring(this.__position,o),this.__position=o,n},n.prototype.readUntilAfter=function(t){return this.readUntil(t,!0)},n.prototype.get_regexp=function(t,n){var o=null,i='g';return n&&e&&(i='y'),"string"==typeof t&&''!==t?o=new RegExp(t,i):t&&(o=new RegExp(t.source,i)),o},n.prototype.get_literal_regexp=function(t){return RegExp(t.replace(/[-\/\\^$*+?.()|[\]{}]/g,'\\$&'))},n.prototype.peekUntilAfter=function(t){var e=this.__position,n=this.readUntilAfter(t);return this.__position=e,n},n.prototype.lookBack=function(t){var e=this.__position-1;return e>=t.length&&this.__input.substring(e-t.length,e).toLowerCase()===t},t.exports.InputScanner=n},,,,,function(t){function e(t,e){t='string'==typeof t?t:t.source,e='string'==typeof e?e:e.source,this.__directives_block_pattern=new RegExp(t+/ beautify( \w+[:]\w+)+ /.source+e,'g'),this.__directive_pattern=/ (\w+)[:](\w+)/g,this.__directives_end_ignore_pattern=new RegExp(t+/\sbeautify\signore:end\s/.source+e,'g')}e.prototype.get_directives=function(t){if(!t.match(this.__directives_block_pattern))return null;var e={};this.__directive_pattern.lastIndex=0;for(var n=this.__directive_pattern.exec(t);n;)e[n[1]]=n[2],n=this.__directive_pattern.exec(t);return e},e.prototype.readIgnored=function(t){return t.readUntilAfter(this.__directives_end_ignore_pattern)},t.exports.Directives=e},,function(t,e,n){var o=n(16).Beautifier,i=n(17).Options;t.exports=function(t,e){return new o(t,e).beautify()},t.exports.defaultOptions=function(){return new i}},function(t,e,n){var o=n(17).Options,i=n(2).Output,r=n(8).InputScanner,s=new(0,n(13).Directives)(/\/\*/,/\*\//),a=/\r\n|[\r\n]/,l=/\r\n|[\r\n]/g,c=/\s/,u=/(?:\s|\n)+/g,p=/\/\*(?:[\s\S]*?)((?:\*\/)|$)/g,h=/\/\/(?:[^\n\r\u2028\u2029]*)/g;function d(t,e){this._source_text=t||'',this._options=new o(e),this._ch=null,this._input=null,this.NESTED_AT_RULE={page:!0,"font-face":!0,keyframes:!0,media:!0,supports:!0,document:!0},this.CONDITIONAL_GROUP_RULE={media:!0,supports:!0,document:!0},this.NON_SEMICOLON_NEWLINE_PROPERTY=["grid-template-areas","grid-template"]}d.prototype.eatString=function(t){var e='';for(this._ch=this._input.next();this._ch;){if(e+=this._ch,"\\"===this._ch)e+=this._input.next();else if(-1!==t.indexOf(this._ch)||"\n"===this._ch)break;this._ch=this._input.next()}return e},d.prototype.eatWhitespace=function(t){for(var e=c.test(this._input.peek()),n=0;c.test(this._input.peek());)this._ch=this._input.next(),t&&'\n'===this._ch&&(0===n||n<this._options.max_preserve_newlines)&&(n++,this._output.add_new_line(!0));return e},d.prototype.foundNestedPseudoClass=function(){for(var t=0,e=1,n=this._input.peek(e);n;){if("{"===n)return!0;if('('===n)t+=1;else if(')'===n){if(0===t)return!1;t-=1}else if(";"===n||"}"===n)return!1;e++,n=this._input.peek(e)}return!1},d.prototype.print_string=function(t){this._output.set_indent(this._indentLevel),this._output.non_breaking_space=!0,this._output.add_token(t)},d.prototype.preserveSingleSpace=function(t){t&&(this._output.space_before_token=!0)},d.prototype.indent=function(){this._indentLevel++},d.prototype.outdent=function(){this._indentLevel>0&&this._indentLevel--},d.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var t=this._source_text,e=this._options.eol;'auto'===e&&(e='\n',t&&a.test(t||'')&&(e=t.match(a)[0]));var n=(t=t.replace(l,'\n')).match(/^[\t ]*/)[0];this._output=new i(this._options,n),this._input=new r(t),this._indentLevel=0,this._nestedLevel=0,this._ch=null;for(var o,d,f=0,g=!1,m=!1,v=!1,y=!1,_=!1,O=this._ch,b=!1;1&&(o=''!==this._input.read(u),d=O,this._ch=this._input.next(),'\\'===this._ch&&this._input.hasNext()&&(this._ch+=this._input.next()),O=this._ch,this._ch);)if('/'===this._ch&&'*'===this._input.peek()){this._output.add_new_line(),this._input.back();var w=this._input.read(p),x=s.get_directives(w);x&&'start'===x.ignore&&(w+=s.readIgnored(this._input)),this.print_string(w),this.eatWhitespace(!0),this._output.add_new_line()}else if('/'===this._ch&&'/'===this._input.peek())this._output.space_before_token=!0,this._input.back(),this.print_string(this._input.read(h)),this.eatWhitespace(!0);else if('$'===this._ch){this.preserveSingleSpace(o),this.print_string(this._ch);var S=this._input.peekUntilAfter(/[: ,;{}()[\]\/='"]/g);S.match(/[ :]$/)&&(S=this.eatString(": ").replace(/\s+$/,''),this.print_string(S),this._output.space_before_token=!0),0===f&&-1!==S.indexOf(':')&&(m=!0,this.indent())}else if('@'===this._ch)if(this.preserveSingleSpace(o),'{'===this._input.peek())this.print_string(this._ch+this.eatString('}'));else{this.print_string(this._ch);var k=this._input.peekUntilAfter(/[: ,;{}()[\]\/='"]/g);k.match(/[ :]$/)&&(k=this.eatString(": ").replace(/\s+$/,''),this.print_string(k),this._output.space_before_token=!0),0===f&&-1!==k.indexOf(':')?(m=!0,this.indent()):k in this.NESTED_AT_RULE?(this._nestedLevel+=1,k in this.CONDITIONAL_GROUP_RULE&&(v=!0)):0!==f||m||(y=!0)}else if('#'===this._ch&&'{'===this._input.peek())this.preserveSingleSpace(o),this.print_string(this._ch+this.eatString('}'));else if('{'===this._ch)m&&(m=!1,this.outdent()),y=!1,v?(v=!1,g=this._indentLevel>=this._nestedLevel):g=this._indentLevel>=this._nestedLevel-1,this._options.newline_between_rules&&g&&this._output.previous_line&&'{'!==this._output.previous_line.item(-1)&&this._output.ensure_empty_line_above('/',','),this._output.space_before_token=!0,'expand'===this._options.brace_style?(this._output.add_new_line(),this.print_string(this._ch),this.indent(),this._output.set_indent(this._indentLevel)):('('===d?this._output.space_before_token=!1:','!==d&&this.indent(),this.print_string(this._ch)),this.eatWhitespace(!0),this._output.add_new_line();else if('}'===this._ch)this.outdent(),this._output.add_new_line(),'{'===d&&this._output.trim(!0),m&&(this.outdent(),m=!1),this.print_string(this._ch),g=!1,this._nestedLevel&&this._nestedLevel--,this.eatWhitespace(!0),this._output.add_new_line(),this._options.newline_between_rules&&!this._output.just_added_blankline()&&'}'!==this._input.peek()&&this._output.add_new_line(!0),')'===this._input.peek()&&(this._output.trim(!0),"expand"===this._options.brace_style&&this._output.add_new_line(!0));else if(":"===this._ch){for(var P=0;P<this.NON_SEMICOLON_NEWLINE_PROPERTY.length;P++)if(this._input.lookBack(this.NON_SEMICOLON_NEWLINE_PROPERTY[P])){b=!0;break}!g&&!v||this._input.lookBack("&")||this.foundNestedPseudoClass()||this._input.lookBack("(")||y||0!==f?(this._input.lookBack(" ")&&(this._output.space_before_token=!0),":"===this._input.peek()?(this._ch=this._input.next(),this.print_string("::")):this.print_string(':')):(this.print_string(':'),m||(m=!0,this._output.space_before_token=!0,this.eatWhitespace(!0),this.indent()))}else if('"'===this._ch||'\''===this._ch){var C='"'===d||'\''===d;this.preserveSingleSpace(C||o),this.print_string(this._ch+this.eatString(this._ch)),this.eatWhitespace(!0)}else if(';'===this._ch)b=!1,0===f?(m&&(this.outdent(),m=!1),y=!1,this.print_string(this._ch),this.eatWhitespace(!0),'/'!==this._input.peek()&&this._output.add_new_line()):(this.print_string(this._ch),this.eatWhitespace(!0),this._output.space_before_token=!0);else if('('===this._ch)if(this._input.lookBack("url"))this.print_string(this._ch),this.eatWhitespace(),f++,this.indent(),this._ch=this._input.next(),')'===this._ch||'"'===this._ch||'\''===this._ch?this._input.back():this._ch&&(this.print_string(this._ch+this.eatString(')')),f&&(f--,this.outdent()));else{var T=!1;this._input.lookBack("with")&&(T=!0),this.preserveSingleSpace(o||T),this.print_string(this._ch),m&&"$"===d&&this._options.selector_separator_newline?(this._output.add_new_line(),_=!0):(this.eatWhitespace(),f++,this.indent())}else if(')'===this._ch)f&&(f--,this.outdent()),_&&";"===this._input.peek()&&this._options.selector_separator_newline&&(_=!1,this.outdent(),this._output.add_new_line()),this.print_string(this._ch);else if(','===this._ch)this.print_string(this._ch),this.eatWhitespace(!0),!this._options.selector_separator_newline||m&&!_||0!==f||y?this._output.space_before_token=!0:this._output.add_new_line();else if('>'!==this._ch&&'+'!==this._ch&&'~'!==this._ch||m||0!==f)if(']'===this._ch)this.print_string(this._ch);else if('['===this._ch)this.preserveSingleSpace(o),this.print_string(this._ch);else if('='===this._ch)this.eatWhitespace(),this.print_string('='),c.test(this._ch)&&(this._ch='');else if('!'!==this._ch||this._input.lookBack("\\")){var E='"'===d||'\''===d;this.preserveSingleSpace(E||o),this.print_string(this._ch),!this._output.just_added_newline()&&'\n'===this._input.peek()&&b&&this._output.add_new_line()}else this._output.space_before_token=!0,this.print_string(this._ch);else this._options.space_around_combinator?(this._output.space_before_token=!0,this.print_string(this._ch),this._output.space_before_token=!0):(this.print_string(this._ch),this.eatWhitespace(),this._ch&&c.test(this._ch)&&(this._ch=''));return this._output.get_code(e)},t.exports.Beautifier=d},function(t,e,n){var o=n(6).Options;function i(t){o.call(this,t,'css'),this.selector_separator_newline=this._get_boolean('selector_separator_newline',!0),this.newline_between_rules=this._get_boolean('newline_between_rules',!0);var e=this._get_boolean('space_around_selector_separator');this.space_around_combinator=this._get_boolean('space_around_combinator')||e;var n=this._get_selection_list('brace_style',['collapse','expand','end-expand','none','preserve-inline']);this.brace_style='collapse';for(var i=0;i<n.length;i++)'expand'!==n[i]?this.brace_style='collapse':this.brace_style=n[i]}i.prototype=new o,t.exports.Options=i}],e={};var n=function n(o){var i=e[o];if(void 0!==i)return i.exports;var r=e[o]={exports:{}};return t[o](r,r.exports,n),r.exports}(15);o=n}();var i=o;1&&(void 0===(n=function(){return{css_beautify:i}}.apply(e,[]))||(t.exports=n))}()},5600:(t,e,n)=>{var o,i;!function(){var r;!function(){"use strict";var t=[,,function(t){function e(t){this.__parent=t,this.__character_count=0,this.__indent_count=-1,this.__alignment_count=0,this.__wrap_point_index=0,this.__wrap_point_character_count=0,this.__wrap_point_indent_count=-1,this.__wrap_point_alignment_count=0,this.__items=[]}function n(t,e){this.__cache=[''],this.__indent_size=t.indent_size,this.__indent_string=t.indent_char,t.indent_with_tabs||(this.__indent_string=new Array(t.indent_size+1).join(t.indent_char)),e=e||'',t.indent_level>0&&(e=new Array(t.indent_level+1).join(this.__indent_string)),this.__base_string=e,this.__base_string_length=e.length}function o(t,o){this.__indent_cache=new n(t,o),this.raw=!1,this._end_with_newline=t.end_with_newline,this.indent_size=t.indent_size,this.wrap_line_length=t.wrap_line_length,this.indent_empty_lines=t.indent_empty_lines,this.__lines=[],this.previous_line=null,this.current_line=null,this.next_line=new e(this),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1,this.__add_outputline()}e.prototype.clone_empty=function(){var t=new e(this.__parent);return t.set_indent(this.__indent_count,this.__alignment_count),t},e.prototype.item=function(t){return t<0?this.__items[this.__items.length+t]:this.__items[t]},e.prototype.has_match=function(t){for(var e=this.__items.length-1;e>=0;e--)if(this.__items[e].match(t))return!0;return!1},e.prototype.set_indent=function(t,e){this.is_empty()&&(this.__indent_count=t||0,this.__alignment_count=e||0,this.__character_count=this.__parent.get_indent_size(this.__indent_count,this.__alignment_count))},e.prototype._set_wrap_point=function(){this.__parent.wrap_line_length&&(this.__wrap_point_index=this.__items.length,this.__wrap_point_character_count=this.__character_count,this.__wrap_point_indent_count=this.__parent.next_line.__indent_count,this.__wrap_point_alignment_count=this.__parent.next_line.__alignment_count)},e.prototype._should_wrap=function(){return this.__wrap_point_index&&this.__character_count>this.__parent.wrap_line_length&&this.__wrap_point_character_count>this.__parent.next_line.__character_count},e.prototype._allow_wrap=function(){if(this._should_wrap()){this.__parent.add_new_line();var t=this.__parent.current_line;return t.set_indent(this.__wrap_point_indent_count,this.__wrap_point_alignment_count),t.__items=this.__items.slice(this.__wrap_point_index),this.__items=this.__items.slice(0,this.__wrap_point_index),t.__character_count+=this.__character_count-this.__wrap_point_character_count,this.__character_count=this.__wrap_point_character_count," "===t.__items[0]&&(t.__items.splice(0,1),t.__character_count-=1),!0}return!1},e.prototype.is_empty=function(){return 0===this.__items.length},e.prototype.last=function(){return this.is_empty()?null:this.__items[this.__items.length-1]},e.prototype.push=function(t){this.__items.push(t);var e=t.lastIndexOf('\n');-1!==e?this.__character_count=t.length-e:this.__character_count+=t.length},e.prototype.pop=function(){var t=null;return this.is_empty()||(t=this.__items.pop(),this.__character_count-=t.length),t},e.prototype._remove_indent=function(){this.__indent_count>0&&(this.__indent_count-=1,this.__character_count-=this.__parent.indent_size)},e.prototype._remove_wrap_indent=function(){this.__wrap_point_indent_count>0&&(this.__wrap_point_indent_count-=1)},e.prototype.trim=function(){for(;' '===this.last();)this.__items.pop(),this.__character_count-=1},e.prototype.toString=function(){var t='';return this.is_empty()?this.__parent.indent_empty_lines&&(t=this.__parent.get_indent_string(this.__indent_count)):(t=this.__parent.get_indent_string(this.__indent_count,this.__alignment_count),t+=this.__items.join('')),t},n.prototype.get_indent_size=function(t,e){var n=this.__base_string_length;return e=e||0,t<0&&(n=0),n+=t*this.__indent_size,n+=e},n.prototype.get_indent_string=function(t,e){var n=this.__base_string;return e=e||0,t<0&&(t=0,n=''),e+=t*this.__indent_size,this.__ensure_cache(e),n+=this.__cache[e]},n.prototype.__ensure_cache=function(t){for(;t>=this.__cache.length;)this.__add_column()},n.prototype.__add_column=function(){var t=this.__cache.length,e=0,n='';this.__indent_size&&t>=this.__indent_size&&(t-=(e=Math.floor(t/this.__indent_size))*this.__indent_size,n=new Array(e+1).join(this.__indent_string)),t&&(n+=new Array(t+1).join(' ')),this.__cache.push(n)},o.prototype.__add_outputline=function(){this.previous_line=this.current_line,this.current_line=this.next_line.clone_empty(),this.__lines.push(this.current_line)},o.prototype.get_line_number=function(){return this.__lines.length},o.prototype.get_indent_string=function(t,e){return this.__indent_cache.get_indent_string(t,e)},o.prototype.get_indent_size=function(t,e){return this.__indent_cache.get_indent_size(t,e)},o.prototype.is_empty=function(){return!this.previous_line&&this.current_line.is_empty()},o.prototype.add_new_line=function(t){return!(this.is_empty()||!t&&this.just_added_newline())&&(this.raw||this.__add_outputline(),!0)},o.prototype.get_code=function(t){this.trim(!0);var e=this.current_line.pop();e&&('\n'===e[e.length-1]&&(e=e.replace(/\n+$/g,'')),this.current_line.push(e)),this._end_with_newline&&this.__add_outputline();var n=this.__lines.join('\n');return'\n'!==t&&(n=n.replace(/[\n]/g,t)),n},o.prototype.set_wrap_point=function(){this.current_line._set_wrap_point()},o.prototype.set_indent=function(t,e){return t=t||0,e=e||0,this.next_line.set_indent(t,e),this.__lines.length>1?(this.current_line.set_indent(t,e),!0):(this.current_line.set_indent(),!1)},o.prototype.add_raw_token=function(t){for(var e=0;e<t.newlines;e++)this.__add_outputline();this.current_line.set_indent(-1),this.current_line.push(t.whitespace_before),this.current_line.push(t.text),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1},o.prototype.add_token=function(t){this.__add_space_before_token(),this.current_line.push(t),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=this.current_line._allow_wrap()},o.prototype.__add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&(this.non_breaking_space||this.set_wrap_point(),this.current_line.push(' '))},o.prototype.remove_indent=function(t){for(var e=this.__lines.length;t<e;)this.__lines[t]._remove_indent(),t++;this.current_line._remove_wrap_indent()},o.prototype.trim=function(t){for(t=void 0!==t&&t,this.current_line.trim();t&&this.__lines.length>1&&this.current_line.is_empty();)this.__lines.pop(),this.current_line=this.__lines[this.__lines.length-1],this.current_line.trim();this.previous_line=this.__lines.length>1?this.__lines[this.__lines.length-2]:null},o.prototype.just_added_newline=function(){return this.current_line.is_empty()},o.prototype.just_added_blankline=function(){return this.is_empty()||this.current_line.is_empty()&&this.previous_line.is_empty()},o.prototype.ensure_empty_line_above=function(t,n){for(var o=this.__lines.length-2;o>=0;){var i=this.__lines[o];if(i.is_empty())break;if(0!==i.item(0).indexOf(t)&&i.item(-1)!==n){this.__lines.splice(o+1,0,new e(this)),this.previous_line=this.__lines[this.__lines.length-2];break}o--}},t.exports.Output=o},function(t){t.exports.Token=function(t,e,n,o){this.type=t,this.text=e,this.comments_before=null,this.newlines=n||0,this.whitespace_before=o||'',this.parent=null,this.next=null,this.previous=null,this.opened=null,this.closed=null,this.directives=null}},,,function(t){function e(t,e){this.raw_options=n(t,e),this.disabled=this._get_boolean('disabled'),this.eol=this._get_characters('eol','auto'),this.end_with_newline=this._get_boolean('end_with_newline'),this.indent_size=this._get_number('indent_size',4),this.indent_char=this._get_characters('indent_char',' '),this.indent_level=this._get_number('indent_level'),this.preserve_newlines=this._get_boolean('preserve_newlines',!0),this.max_preserve_newlines=this._get_number('max_preserve_newlines',32786),this.preserve_newlines||(this.max_preserve_newlines=0),this.indent_with_tabs=this._get_boolean('indent_with_tabs','\t'===this.indent_char),this.indent_with_tabs&&(this.indent_char='\t',1===this.indent_size&&(this.indent_size=4)),this.wrap_line_length=this._get_number('wrap_line_length',this._get_number('max_char')),this.indent_empty_lines=this._get_boolean('indent_empty_lines'),this.templating=this._get_selection_list('templating',['auto','none','django','erb','handlebars','php','smarty'],['auto'])}function n(t,e){var n,i={};for(n in t=o(t))n!==e&&(i[n]=t[n]);if(e&&t[e])for(n in t[e])i[n]=t[e][n];return i}function o(t){var e,n={};for(e in t){n[e.replace(/-/g,"_")]=t[e]}return n}e.prototype._get_array=function(t,e){var n=this.raw_options[t],o=e||[];return'object'==typeof n?null!==n&&'function'==typeof n.concat&&(o=n.concat()):'string'==typeof n&&(o=n.split(/[^a-zA-Z0-9_\/\-]+/)),o},e.prototype._get_boolean=function(t,e){var n=this.raw_options[t];return void 0===n?!!e:!!n},e.prototype._get_characters=function(t,e){var n=this.raw_options[t],o=e||'';return'string'==typeof n&&(o=n.replace(/\\r/,'\r').replace(/\\n/,'\n').replace(/\\t/,'\t')),o},e.prototype._get_number=function(t,e){var n=this.raw_options[t];e=parseInt(e,10),isNaN(e)&&(e=0);var o=parseInt(n,10);return isNaN(o)&&(o=e),o},e.prototype._get_selection=function(t,e,n){var o=this._get_selection_list(t,e,n);if(1!==o.length)throw new Error("Invalid Option Value: The option '"+t+"' can only be one of the following values:\n"+e+"\nYou passed in: '"+this.raw_options[t]+"'");return o[0]},e.prototype._get_selection_list=function(t,e,n){if(!e||0===e.length)throw new Error("Selection list cannot be empty.");if(n=n||[e[0]],!this._is_valid_selection(n,e))throw new Error("Invalid Default Value!");var o=this._get_array(t,n);if(!this._is_valid_selection(o,e))throw new Error("Invalid Option Value: The option '"+t+"' can contain only the following values:\n"+e+"\nYou passed in: '"+this.raw_options[t]+"'");return o},e.prototype._is_valid_selection=function(t,e){return t.length&&e.length&&!t.some((function(t){return-1===e.indexOf(t)}))},t.exports.Options=e,t.exports.normalizeOpts=o,t.exports.mergeOpts=n},,function(t){var e=RegExp.prototype.hasOwnProperty('sticky');function n(t){this.__input=t||'',this.__input_length=this.__input.length,this.__position=0}n.prototype.restart=function(){this.__position=0},n.prototype.back=function(){this.__position>0&&(this.__position-=1)},n.prototype.hasNext=function(){return this.__position<this.__input_length},n.prototype.next=function(){var t=null;return this.hasNext()&&(t=this.__input.charAt(this.__position),this.__position+=1),t},n.prototype.peek=function(t){var e=null;return t=t||0,(t+=this.__position)>=0&&t<this.__input_length&&(e=this.__input.charAt(t)),e},n.prototype.__match=function(t,n){t.lastIndex=n;var o=t.exec(this.__input);return!o||e&&t.sticky||o.index!==n&&(o=null),o},n.prototype.test=function(t,e){return e=e||0,(e+=this.__position)>=0&&e<this.__input_length&&!!this.__match(t,e)},n.prototype.testChar=function(t,e){var n=this.peek(e);return t.lastIndex=0,null!==n&&t.test(n)},n.prototype.match=function(t){var e=this.__match(t,this.__position);return e?this.__position+=e[0].length:e=null,e},n.prototype.read=function(t,e,n){var o,i='';return t&&(o=this.match(t))&&(i+=o[0]),!e||!o&&t||(i+=this.readUntil(e,n)),i},n.prototype.readUntil=function(t,e){var n,o=this.__position;t.lastIndex=this.__position;var i=t.exec(this.__input);return i?(o=i.index,e&&(o+=i[0].length)):o=this.__input_length,n=this.__input.substring(this.__position,o),this.__position=o,n},n.prototype.readUntilAfter=function(t){return this.readUntil(t,!0)},n.prototype.get_regexp=function(t,n){var o=null,i='g';return n&&e&&(i='y'),"string"==typeof t&&''!==t?o=new RegExp(t,i):t&&(o=new RegExp(t.source,i)),o},n.prototype.get_literal_regexp=function(t){return RegExp(t.replace(/[-\/\\^$*+?.()|[\]{}]/g,'\\$&'))},n.prototype.peekUntilAfter=function(t){var e=this.__position,n=this.readUntilAfter(t);return this.__position=e,n},n.prototype.lookBack=function(t){var e=this.__position-1;return e>=t.length&&this.__input.substring(e-t.length,e).toLowerCase()===t},t.exports.InputScanner=n},function(t,e,n){var o=n(8).InputScanner,i=n(3).Token,r=n(10).TokenStream,s=n(11).WhitespacePattern,a={START:'TK_START',RAW:'TK_RAW',EOF:'TK_EOF'},l=function(t,e){this._input=new o(t),this._options=e||{},this.__tokens=null,this._patterns={},this._patterns.whitespace=new s(this._input)};l.prototype.tokenize=function(){var t;this._input.restart(),this.__tokens=new r,this._reset();for(var e=new i(a.START,''),n=null,o=[],s=new r;e.type!==a.EOF;){for(t=this._get_next_token(e,n);this._is_comment(t);)s.add(t),t=this._get_next_token(e,n);s.isEmpty()||(t.comments_before=s,s=new r),t.parent=n,this._is_opening(t)?(o.push(n),n=t):n&&this._is_closing(t,n)&&(t.opened=n,n.closed=t,n=o.pop(),t.parent=n),t.previous=e,e.next=t,this.__tokens.add(t),e=t}return this.__tokens},l.prototype._is_first_token=function(){return this.__tokens.isEmpty()},l.prototype._reset=function(){},l.prototype._get_next_token=function(t,e){this._readWhitespace();var n=this._input.read(/.+/g);return n?this._create_token(a.RAW,n):this._create_token(a.EOF,'')},l.prototype._is_comment=function(t){return!1},l.prototype._is_opening=function(t){return!1},l.prototype._is_closing=function(t,e){return!1},l.prototype._create_token=function(t,e){return new i(t,e,this._patterns.whitespace.newline_count,this._patterns.whitespace.whitespace_before_token)},l.prototype._readWhitespace=function(){return this._patterns.whitespace.read()},t.exports.Tokenizer=l,t.exports.TOKEN=a},function(t){function e(t){this.__tokens=[],this.__tokens_length=this.__tokens.length,this.__position=0,this.__parent_token=t}e.prototype.restart=function(){this.__position=0},e.prototype.isEmpty=function(){return 0===this.__tokens_length},e.prototype.hasNext=function(){return this.__position<this.__tokens_length},e.prototype.next=function(){var t=null;return this.hasNext()&&(t=this.__tokens[this.__position],this.__position+=1),t},e.prototype.peek=function(t){var e=null;return t=t||0,(t+=this.__position)>=0&&t<this.__tokens_length&&(e=this.__tokens[t]),e},e.prototype.add=function(t){this.__parent_token&&(t.parent=this.__parent_token),this.__tokens.push(t),this.__tokens_length+=1},t.exports.TokenStream=e},function(t,e,n){var o=n(12).Pattern;function i(t,e){o.call(this,t,e),e?this._line_regexp=this._input.get_regexp(e._line_regexp):this.__set_whitespace_patterns('',''),this.newline_count=0,this.whitespace_before_token=''}i.prototype=new o,i.prototype.__set_whitespace_patterns=function(t,e){t+='\\t ',e+='\\n\\r',this._match_pattern=this._input.get_regexp('['+t+e+']+',!0),this._newline_regexp=this._input.get_regexp('\\r\\n|['+e+']')},i.prototype.read=function(){this.newline_count=0,this.whitespace_before_token='';var t=this._input.read(this._match_pattern);if(' '===t)this.whitespace_before_token=' ';else if(t){var e=this.__split(this._newline_regexp,t);this.newline_count=e.length-1,this.whitespace_before_token=e[this.newline_count]}return t},i.prototype.matching=function(t,e){var n=this._create();return n.__set_whitespace_patterns(t,e),n._update(),n},i.prototype._create=function(){return new i(this._input,this)},i.prototype.__split=function(t,e){t.lastIndex=0;for(var n=0,o=[],i=t.exec(e);i;)o.push(e.substring(n,i.index)),n=i.index+i[0].length,i=t.exec(e);return n<e.length?o.push(e.substring(n,e.length)):o.push(''),o},t.exports.WhitespacePattern=i},function(t){function e(t,e){this._input=t,this._starting_pattern=null,this._match_pattern=null,this._until_pattern=null,this._until_after=!1,e&&(this._starting_pattern=this._input.get_regexp(e._starting_pattern,!0),this._match_pattern=this._input.get_regexp(e._match_pattern,!0),this._until_pattern=this._input.get_regexp(e._until_pattern),this._until_after=e._until_after)}e.prototype.read=function(){var t=this._input.read(this._starting_pattern);return this._starting_pattern&&!t||(t+=this._input.read(this._match_pattern,this._until_pattern,this._until_after)),t},e.prototype.read_match=function(){return this._input.match(this._match_pattern)},e.prototype.until_after=function(t){var e=this._create();return e._until_after=!0,e._until_pattern=this._input.get_regexp(t),e._update(),e},e.prototype.until=function(t){var e=this._create();return e._until_after=!1,e._until_pattern=this._input.get_regexp(t),e._update(),e},e.prototype.starting_with=function(t){var e=this._create();return e._starting_pattern=this._input.get_regexp(t,!0),e._update(),e},e.prototype.matching=function(t){var e=this._create();return e._match_pattern=this._input.get_regexp(t,!0),e._update(),e},e.prototype._create=function(){return new e(this._input,this)},e.prototype._update=function(){},t.exports.Pattern=e},function(t){function e(t,e){t='string'==typeof t?t:t.source,e='string'==typeof e?e:e.source,this.__directives_block_pattern=new RegExp(t+/ beautify( \w+[:]\w+)+ /.source+e,'g'),this.__directive_pattern=/ (\w+)[:](\w+)/g,this.__directives_end_ignore_pattern=new RegExp(t+/\sbeautify\signore:end\s/.source+e,'g')}e.prototype.get_directives=function(t){if(!t.match(this.__directives_block_pattern))return null;var e={};this.__directive_pattern.lastIndex=0;for(var n=this.__directive_pattern.exec(t);n;)e[n[1]]=n[2],n=this.__directive_pattern.exec(t);return e},e.prototype.readIgnored=function(t){return t.readUntilAfter(this.__directives_end_ignore_pattern)},t.exports.Directives=e},function(t,e,n){var o=n(12).Pattern,i={django:!1,erb:!1,handlebars:!1,php:!1,smarty:!1};function r(t,e){o.call(this,t,e),this.__template_pattern=null,this._disabled=Object.assign({},i),this._excluded=Object.assign({},i),e&&(this.__template_pattern=this._input.get_regexp(e.__template_pattern),this._excluded=Object.assign(this._excluded,e._excluded),this._disabled=Object.assign(this._disabled,e._disabled));var n=new o(t);this.__patterns={handlebars_comment:n.starting_with(/{{!--/).until_after(/--}}/),handlebars_unescaped:n.starting_with(/{{{/).until_after(/}}}/),handlebars:n.starting_with(/{{/).until_after(/}}/),php:n.starting_with(/<\?(?:[= ]|php)/).until_after(/\?>/),erb:n.starting_with(/<%[^%]/).until_after(/[^%]%>/),django:n.starting_with(/{%/).until_after(/%}/),django_value:n.starting_with(/{{/).until_after(/}}/),django_comment:n.starting_with(/{#/).until_after(/#}/),smarty:n.starting_with(/{(?=[^}{\s\n])/).until_after(/[^\s\n]}/),smarty_comment:n.starting_with(/{\*/).until_after(/\*}/),smarty_literal:n.starting_with(/{literal}/).until_after(/{\/literal}/)}}r.prototype=new o,r.prototype._create=function(){return new r(this._input,this)},r.prototype._update=function(){this.__set_templated_pattern()},r.prototype.disable=function(t){var e=this._create();return e._disabled[t]=!0,e._update(),e},r.prototype.read_options=function(t){var e=this._create();for(var n in i)e._disabled[n]=-1===t.templating.indexOf(n);return e._update(),e},r.prototype.exclude=function(t){var e=this._create();return e._excluded[t]=!0,e._update(),e},r.prototype.read=function(){var t='';t=this._match_pattern?this._input.read(this._starting_pattern):this._input.read(this._starting_pattern,this.__template_pattern);for(var e=this._read_template();e;)this._match_pattern?e+=this._input.read(this._match_pattern):e+=this._input.readUntil(this.__template_pattern),t+=e,e=this._read_template();return this._until_after&&(t+=this._input.readUntilAfter(this._until_pattern)),t},r.prototype.__set_templated_pattern=function(){var t=[];this._disabled.php||t.push(this.__patterns.php._starting_pattern.source),this._disabled.handlebars||t.push(this.__patterns.handlebars._starting_pattern.source),this._disabled.erb||t.push(this.__patterns.erb._starting_pattern.source),this._disabled.django||(t.push(this.__patterns.django._starting_pattern.source),t.push(this.__patterns.django_value._starting_pattern.source),t.push(this.__patterns.django_comment._starting_pattern.source)),this._disabled.smarty||t.push(this.__patterns.smarty._starting_pattern.source),this._until_pattern&&t.push(this._until_pattern.source),this.__template_pattern=this._input.get_regexp('(?:'+t.join('|')+')')},r.prototype._read_template=function(){var t='',e=this._input.peek();if('<'===e){var n=this._input.peek(1);this._disabled.php||this._excluded.php||'?'!==n||(t=t||this.__patterns.php.read()),this._disabled.erb||this._excluded.erb||'%'!==n||(t=t||this.__patterns.erb.read())}else'{'===e&&(this._disabled.handlebars||this._excluded.handlebars||(t=(t=(t=t||this.__patterns.handlebars_comment.read())||this.__patterns.handlebars_unescaped.read())||this.__patterns.handlebars.read()),this._disabled.django||(this._excluded.django||this._excluded.handlebars||(t=t||this.__patterns.django_value.read()),this._excluded.django||(t=(t=t||this.__patterns.django_comment.read())||this.__patterns.django.read())),this._disabled.smarty||this._disabled.django&&this._disabled.handlebars&&(t=(t=(t=t||this.__patterns.smarty_comment.read())||this.__patterns.smarty_literal.read())||this.__patterns.smarty.read()));return t},t.exports.TemplatablePattern=r},,,,function(t,e,n){var o=n(19).Beautifier,i=n(20).Options;t.exports=function(t,e,n,i){return new o(t,e,n,i).beautify()},t.exports.defaultOptions=function(){return new i}},function(t,e,n){var o=n(20).Options,i=n(2).Output,r=n(21).Tokenizer,s=n(21).TOKEN,a=/\r\n|[\r\n]/,l=/\r\n|[\r\n]/g,c=function(t,e){this.indent_level=0,this.alignment_size=0,this.max_preserve_newlines=t.max_preserve_newlines,this.preserve_newlines=t.preserve_newlines,this._output=new i(t,e)};c.prototype.current_line_has_match=function(t){return this._output.current_line.has_match(t)},c.prototype.set_space_before_token=function(t,e){this._output.space_before_token=t,this._output.non_breaking_space=e},c.prototype.set_wrap_point=function(){this._output.set_indent(this.indent_level,this.alignment_size),this._output.set_wrap_point()},c.prototype.add_raw_token=function(t){this._output.add_raw_token(t)},c.prototype.print_preserved_newlines=function(t){var e=0;t.type!==s.TEXT&&t.previous.type!==s.TEXT&&(e=t.newlines?1:0),this.preserve_newlines&&(e=t.newlines<this.max_preserve_newlines+1?t.newlines:this.max_preserve_newlines+1);for(var n=0;n<e;n++)this.print_newline(n>0);return 0!==e},c.prototype.traverse_whitespace=function(t){return!(!t.whitespace_before&&!t.newlines)&&(this.print_preserved_newlines(t)||(this._output.space_before_token=!0),!0)},c.prototype.previous_token_wrapped=function(){return this._output.previous_token_wrapped},c.prototype.print_newline=function(t){this._output.add_new_line(t)},c.prototype.print_token=function(t){t.text&&(this._output.set_indent(this.indent_level,this.alignment_size),this._output.add_token(t.text))},c.prototype.indent=function(){this.indent_level++},c.prototype.get_full_indent=function(t){return(t=this.indent_level+(t||0))<1?'':this._output.get_indent_string(t)};var u=function(t,e){var n=null,o=null;return e.closed?('script'===t?n='text/javascript':'style'===t&&(n='text/css'),n=function(t){for(var e=null,n=t.next;n.type!==s.EOF&&t.closed!==n;){if(n.type===s.ATTRIBUTE&&'type'===n.text){n.next&&n.next.type===s.EQUALS&&n.next.next&&n.next.next.type===s.VALUE&&(e=n.next.next.text);break}n=n.next}return e}(e)||n,n.search('text/css')>-1?o='css':n.search(/module|((text|application|dojo)\/(x-)?(javascript|ecmascript|jscript|livescript|(ld\+)?json|method|aspect))/)>-1?o='javascript':n.search(/(text|application|dojo)\/(x-)?(html)/)>-1?o='html':n.search(/test\/null/)>-1&&(o='null'),o):null};function p(t,e){return-1!==e.indexOf(t)}function h(t,e,n){this.parent=t||null,this.tag=e?e.tag_name:'',this.indent_level=n||0,this.parser_token=e||null}function d(t){this._printer=t,this._current_frame=null}function f(t,e,n,i){this._source_text=t||'',e=e||{},this._js_beautify=n,this._css_beautify=i,this._tag_stack=null;var r=new o(e,'html');this._options=r,this._is_wrap_attributes_force='force'===this._options.wrap_attributes.substr(0,'force'.length),this._is_wrap_attributes_force_expand_multiline='force-expand-multiline'===this._options.wrap_attributes,this._is_wrap_attributes_force_aligned='force-aligned'===this._options.wrap_attributes,this._is_wrap_attributes_aligned_multiple='aligned-multiple'===this._options.wrap_attributes,this._is_wrap_attributes_preserve='preserve'===this._options.wrap_attributes.substr(0,'preserve'.length),this._is_wrap_attributes_preserve_aligned='preserve-aligned'===this._options.wrap_attributes}d.prototype.get_parser_token=function(){return this._current_frame?this._current_frame.parser_token:null},d.prototype.record_tag=function(t){var e=new h(this._current_frame,t,this._printer.indent_level);this._current_frame=e},d.prototype._try_pop_frame=function(t){var e=null;return t&&(e=t.parser_token,this._printer.indent_level=t.indent_level,this._current_frame=t.parent),e},d.prototype._get_frame=function(t,e){for(var n=this._current_frame;n&&-1===t.indexOf(n.tag);){if(e&&-1!==e.indexOf(n.tag)){n=null;break}n=n.parent}return n},d.prototype.try_pop=function(t,e){var n=this._get_frame([t],e);return this._try_pop_frame(n)},d.prototype.indent_to_tag=function(t){var e=this._get_frame(t);e&&(this._printer.indent_level=e.indent_level)},f.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var t=this._source_text,e=this._options.eol;'auto'===this._options.eol&&(e='\n',t&&a.test(t)&&(e=t.match(a)[0]));var n=(t=t.replace(l,'\n')).match(/^[\t ]*/)[0],o={text:'',type:''},i=new g,u=new c(this._options,n),p=new r(t,this._options).tokenize();this._tag_stack=new d(u);for(var h=null,f=p.next();f.type!==s.EOF;)f.type===s.TAG_OPEN||f.type===s.COMMENT?i=h=this._handle_tag_open(u,f,i,o,p):f.type===s.ATTRIBUTE||f.type===s.EQUALS||f.type===s.VALUE||f.type===s.TEXT&&!i.tag_complete?h=this._handle_inside_tag(u,f,i,o):f.type===s.TAG_CLOSE?h=this._handle_tag_close(u,f,i):f.type===s.TEXT?h=this._handle_text(u,f,i):u.add_raw_token(f),o=h,f=p.next();return u._output.get_code(e)},f.prototype._handle_tag_close=function(t,e,n){var o={text:e.text,type:e.type};return t.alignment_size=0,n.tag_complete=!0,t.set_space_before_token(e.newlines||''!==e.whitespace_before,!0),n.is_unformatted?t.add_raw_token(e):('<'===n.tag_start_char&&(t.set_space_before_token('/'===e.text[0],!0),this._is_wrap_attributes_force_expand_multiline&&n.has_wrapped_attrs&&t.print_newline(!1)),t.print_token(e)),!n.indent_content||n.is_unformatted||n.is_content_unformatted||(t.indent(),n.indent_content=!1),n.is_inline_element||n.is_unformatted||n.is_content_unformatted||t.set_wrap_point(),o},f.prototype._handle_inside_tag=function(t,e,n,o){var i=n.has_wrapped_attrs,r={text:e.text,type:e.type};return t.set_space_before_token(e.newlines||''!==e.whitespace_before,!0),n.is_unformatted?t.add_raw_token(e):'{'===n.tag_start_char&&e.type===s.TEXT?t.print_preserved_newlines(e)?(e.newlines=0,t.add_raw_token(e)):t.print_token(e):(e.type===s.ATTRIBUTE?t.set_space_before_token(!0):(e.type===s.EQUALS||e.type===s.VALUE&&e.previous.type===s.EQUALS)&&t.set_space_before_token(!1),e.type===s.ATTRIBUTE&&'<'===n.tag_start_char&&((this._is_wrap_attributes_preserve||this._is_wrap_attributes_preserve_aligned)&&(t.traverse_whitespace(e),i=i||0!==e.newlines),this._is_wrap_attributes_force&&n.attr_count>=this._options.wrap_attributes_min_attrs&&(o.type!==s.TAG_OPEN||this._is_wrap_attributes_force_expand_multiline)&&(t.print_newline(!1),i=!0)),t.print_token(e),i=i||t.previous_token_wrapped(),n.has_wrapped_attrs=i),r},f.prototype._handle_text=function(t,e,n){var o={text:e.text,type:'TK_CONTENT'};return n.custom_beautifier_name?this._print_custom_beatifier_text(t,e,n):n.is_unformatted||n.is_content_unformatted?t.add_raw_token(e):(t.traverse_whitespace(e),t.print_token(e)),o},f.prototype._print_custom_beatifier_text=function(t,e,n){var o=this;if(''!==e.text){var i,r=e.text,s=1,a='',l='';'javascript'===n.custom_beautifier_name&&'function'==typeof this._js_beautify?i=this._js_beautify:'css'===n.custom_beautifier_name&&'function'==typeof this._css_beautify?i=this._css_beautify:'html'===n.custom_beautifier_name&&(i=function(t,e){return new f(t,e,o._js_beautify,o._css_beautify).beautify()}),"keep"===this._options.indent_scripts?s=0:"separate"===this._options.indent_scripts&&(s=-t.indent_level);var c=t.get_full_indent(s);if(r=r.replace(/\n[ \t]*$/,''),'html'!==n.custom_beautifier_name&&'<'===r[0]&&r.match(/^(<!--|<!\[CDATA\[)/)){var u=/^(<!--[^\n]*|<!\[CDATA\[)(\n?)([ \t\n]*)([\s\S]*)(-->|]]>)$/.exec(r);if(!u)return void t.add_raw_token(e);a=c+u[1]+'\n',r=u[4],u[5]&&(l=c+u[5]),r=r.replace(/\n[ \t]*$/,''),(u[2]||-1!==u[3].indexOf('\n'))&&(u=u[3].match(/[ \t]+$/))&&(e.whitespace_before=u[0])}if(r)if(i){var p=function(){this.eol='\n'};p.prototype=this._options.raw_options,r=i(c+r,new p)}else{var h=e.whitespace_before;h&&(r=r.replace(new RegExp('\n('+h+')?','g'),'\n')),r=c+r.replace(/\n/g,'\n'+c)}a&&(r=r?a+r+'\n'+l:a+l),t.print_newline(!1),r&&(e.text=r,e.whitespace_before='',e.newlines=0,t.add_raw_token(e),t.print_newline(!0))}},f.prototype._handle_tag_open=function(t,e,n,o,i){var r=this._get_tag_open_token(e);if(!n.is_unformatted&&!n.is_content_unformatted||n.is_empty_element||e.type!==s.TAG_OPEN||r.is_start_tag?(t.traverse_whitespace(e),this._set_tag_position(t,e,r,n,o),r.is_inline_element||t.set_wrap_point(),t.print_token(e)):(t.add_raw_token(e),r.start_tag_token=this._tag_stack.try_pop(r.tag_name)),r.is_start_tag&&this._is_wrap_attributes_force){var a,l=0;do{(a=i.peek(l)).type===s.ATTRIBUTE&&(r.attr_count+=1),l+=1}while(a.type!==s.EOF&&a.type!==s.TAG_CLOSE)}return(this._is_wrap_attributes_force_aligned||this._is_wrap_attributes_aligned_multiple||this._is_wrap_attributes_preserve_aligned)&&(r.alignment_size=e.text.length+1),r.tag_complete||r.is_unformatted||(t.alignment_size=r.alignment_size),r};var g=function(t,e){if(this.parent=t||null,this.text='',this.type='TK_TAG_OPEN',this.tag_name='',this.is_inline_element=!1,this.is_unformatted=!1,this.is_content_unformatted=!1,this.is_empty_element=!1,this.is_start_tag=!1,this.is_end_tag=!1,this.indent_content=!1,this.multiline_content=!1,this.custom_beautifier_name=null,this.start_tag_token=null,this.attr_count=0,this.has_wrapped_attrs=!1,this.alignment_size=0,this.tag_complete=!1,this.tag_start_char='',this.tag_check='',e){var n;this.tag_start_char=e.text[0],this.text=e.text,'<'===this.tag_start_char?(n=e.text.match(/^<([^\s>]*)/),this.tag_check=n?n[1]:''):(n=e.text.match(/^{{~?(?:[\^]|#\*?)?([^\s}]+)/),this.tag_check=n?n[1]:'',(e.text.startsWith('{{#>')||e.text.startsWith('{{~#>'))&&'>'===this.tag_check[0]&&('>'===this.tag_check&&null!==e.next?this.tag_check=e.next.text.split(' ')[0]:this.tag_check=e.text.split('>')[1])),this.tag_check=this.tag_check.toLowerCase(),e.type===s.COMMENT&&(this.tag_complete=!0),this.is_start_tag='/'!==this.tag_check.charAt(0),this.tag_name=this.is_start_tag?this.tag_check:this.tag_check.substr(1),this.is_end_tag=!this.is_start_tag||e.closed&&'/>'===e.closed.text;var o=2;'{'===this.tag_start_char&&this.text.length>=3&&'~'===this.text.charAt(2)&&(o=3),this.is_end_tag=this.is_end_tag||'{'===this.tag_start_char&&(this.text.length<3||/[^#\^]/.test(this.text.charAt(o)))}else this.tag_complete=!0};f.prototype._get_tag_open_token=function(t){var e=new g(this._tag_stack.get_parser_token(),t);return e.alignment_size=this._options.wrap_attributes_indent_size,e.is_end_tag=e.is_end_tag||p(e.tag_check,this._options.void_elements),e.is_empty_element=e.tag_complete||e.is_start_tag&&e.is_end_tag,e.is_unformatted=!e.tag_complete&&p(e.tag_check,this._options.unformatted),e.is_content_unformatted=!e.is_empty_element&&p(e.tag_check,this._options.content_unformatted),e.is_inline_element=p(e.tag_name,this._options.inline)||this._options.inline_custom_elements&&e.tag_name.includes("-")||'{'===e.tag_start_char,e},f.prototype._set_tag_position=function(t,e,n,o,i){if(n.is_empty_element||(n.is_end_tag?n.start_tag_token=this._tag_stack.try_pop(n.tag_name):(this._do_optional_end_element(n)&&(n.is_inline_element||t.print_newline(!1)),this._tag_stack.record_tag(n),'script'!==n.tag_name&&'style'!==n.tag_name||n.is_unformatted||n.is_content_unformatted||(n.custom_beautifier_name=u(n.tag_check,e)))),p(n.tag_check,this._options.extra_liners)&&(t.print_newline(!1),t._output.just_added_blankline()||t.print_newline(!0)),n.is_empty_element){if('{'===n.tag_start_char&&'else'===n.tag_check)this._tag_stack.indent_to_tag(['if','unless','each']),n.indent_content=!0,t.current_line_has_match(/{{#if/)||t.print_newline(!1);'!--'===n.tag_name&&i.type===s.TAG_CLOSE&&o.is_end_tag&&-1===n.text.indexOf('\n')||(n.is_inline_element||n.is_unformatted||t.print_newline(!1),this._calcluate_parent_multiline(t,n))}else if(n.is_end_tag){var r=!1;r=(r=n.start_tag_token&&n.start_tag_token.multiline_content)||!n.is_inline_element&&!(o.is_inline_element||o.is_unformatted)&&!(i.type===s.TAG_CLOSE&&n.start_tag_token===o)&&'TK_CONTENT'!==i.type,(n.is_content_unformatted||n.is_unformatted)&&(r=!1),r&&t.print_newline(!1)}else n.indent_content=!n.custom_beautifier_name,'<'===n.tag_start_char&&('html'===n.tag_name?n.indent_content=this._options.indent_inner_html:'head'===n.tag_name?n.indent_content=this._options.indent_head_inner_html:'body'===n.tag_name&&(n.indent_content=this._options.indent_body_inner_html)),n.is_inline_element||n.is_unformatted||'TK_CONTENT'===i.type&&!n.is_content_unformatted||t.print_newline(!1),this._calcluate_parent_multiline(t,n)},f.prototype._calcluate_parent_multiline=function(t,e){!e.parent||!t._output.just_added_newline()||(e.is_inline_element||e.is_unformatted)&&e.parent.is_inline_element||(e.parent.multiline_content=!0)};var m=['address','article','aside','blockquote','details','div','dl','fieldset','figcaption','figure','footer','form','h1','h2','h3','h4','h5','h6','header','hr','main','menu','nav','ol','p','pre','section','table','ul'],v=['a','audio','del','ins','map','noscript','video'];f.prototype._do_optional_end_element=function(t){var e=null;if(!t.is_empty_element&&t.is_start_tag&&t.parent){if('body'===t.tag_name)e=e||this._tag_stack.try_pop('head');else if('li'===t.tag_name)e=e||this._tag_stack.try_pop('li',['ol','ul','menu']);else if('dd'===t.tag_name||'dt'===t.tag_name)e=(e=e||this._tag_stack.try_pop('dt',['dl']))||this._tag_stack.try_pop('dd',['dl']);else if('p'===t.parent.tag_name&&-1!==m.indexOf(t.tag_name)){var n=t.parent.parent;n&&-1!==v.indexOf(n.tag_name)||(e=e||this._tag_stack.try_pop('p'))}else'rp'===t.tag_name||'rt'===t.tag_name?e=(e=e||this._tag_stack.try_pop('rt',['ruby','rtc']))||this._tag_stack.try_pop('rp',['ruby','rtc']):'optgroup'===t.tag_name?e=e||this._tag_stack.try_pop('optgroup',['select']):'option'===t.tag_name?e=e||this._tag_stack.try_pop('option',['select','datalist','optgroup']):'colgroup'===t.tag_name?e=e||this._tag_stack.try_pop('caption',['table']):'thead'===t.tag_name?e=(e=e||this._tag_stack.try_pop('caption',['table']))||this._tag_stack.try_pop('colgroup',['table']):'tbody'===t.tag_name||'tfoot'===t.tag_name?e=(e=(e=(e=e||this._tag_stack.try_pop('caption',['table']))||this._tag_stack.try_pop('colgroup',['table']))||this._tag_stack.try_pop('thead',['table']))||this._tag_stack.try_pop('tbody',['table']):'tr'===t.tag_name?e=(e=(e=e||this._tag_stack.try_pop('caption',['table']))||this._tag_stack.try_pop('colgroup',['table']))||this._tag_stack.try_pop('tr',['table','thead','tbody','tfoot']):'th'!==t.tag_name&&'td'!==t.tag_name||(e=(e=e||this._tag_stack.try_pop('td',['table','thead','tbody','tfoot','tr']))||this._tag_stack.try_pop('th',['table','thead','tbody','tfoot','tr']));return t.parent=this._tag_stack.get_parser_token(),e}},t.exports.Beautifier=f},function(t,e,n){var o=n(6).Options;function i(t){o.call(this,t,'html'),1===this.templating.length&&'auto'===this.templating[0]&&(this.templating=['django','erb','handlebars','php']),this.indent_inner_html=this._get_boolean('indent_inner_html'),this.indent_body_inner_html=this._get_boolean('indent_body_inner_html',!0),this.indent_head_inner_html=this._get_boolean('indent_head_inner_html',!0),this.indent_handlebars=this._get_boolean('indent_handlebars',!0),this.wrap_attributes=this._get_selection('wrap_attributes',['auto','force','force-aligned','force-expand-multiline','aligned-multiple','preserve','preserve-aligned']),this.wrap_attributes_min_attrs=this._get_number('wrap_attributes_min_attrs',2),this.wrap_attributes_indent_size=this._get_number('wrap_attributes_indent_size',this.indent_size),this.extra_liners=this._get_array('extra_liners',['head','body','/html']),this.inline=this._get_array('inline',['a','abbr','area','audio','b','bdi','bdo','br','button','canvas','cite','code','data','datalist','del','dfn','em','embed','i','iframe','img','input','ins','kbd','keygen','label','map','mark','math','meter','noscript','object','output','progress','q','ruby','s','samp','select','small','span','strong','sub','sup','svg','template','textarea','time','u','var','video','wbr','text','acronym','big','strike','tt']),this.inline_custom_elements=this._get_boolean('inline_custom_elements',!0),this.void_elements=this._get_array('void_elements',['area','base','br','col','embed','hr','img','input','keygen','link','menuitem','meta','param','source','track','wbr','!doctype','?xml','basefont','isindex']),this.unformatted=this._get_array('unformatted',[]),this.content_unformatted=this._get_array('content_unformatted',['pre','textarea']),this.unformatted_content_delimiter=this._get_characters('unformatted_content_delimiter'),this.indent_scripts=this._get_selection('indent_scripts',['normal','keep','separate'])}i.prototype=new o,t.exports.Options=i},function(t,e,n){var o=n(9).Tokenizer,i=n(9).TOKEN,r=n(13).Directives,s=n(14).TemplatablePattern,a=n(12).Pattern,l={TAG_OPEN:'TK_TAG_OPEN',TAG_CLOSE:'TK_TAG_CLOSE',ATTRIBUTE:'TK_ATTRIBUTE',EQUALS:'TK_EQUALS',VALUE:'TK_VALUE',COMMENT:'TK_COMMENT',TEXT:'TK_TEXT',UNKNOWN:'TK_UNKNOWN',START:i.START,RAW:i.RAW,EOF:i.EOF},c=new r(/<\!--/,/-->/),u=function(t,e){o.call(this,t,e),this._current_tag_name='';var n=new s(this._input).read_options(this._options),i=new a(this._input);if(this.__patterns={word:n.until(/[\n\r\t <]/),single_quote:n.until_after(/'/),double_quote:n.until_after(/"/),attribute:n.until(/[\n\r\t =>]|\/>/),element_name:n.until(/[\n\r\t >\/]/),handlebars_comment:i.starting_with(/{{!--/).until_after(/--}}/),handlebars:i.starting_with(/{{/).until_after(/}}/),handlebars_open:i.until(/[\n\r\t }]/),handlebars_raw_close:i.until(/}}/),comment:i.starting_with(/<!--/).until_after(/-->/),cdata:i.starting_with(/<!\[CDATA\[/).until_after(/]]>/),conditional_comment:i.starting_with(/<!\[/).until_after(/]>/),processing:i.starting_with(/<\?/).until_after(/\?>/)},this._options.indent_handlebars&&(this.__patterns.word=this.__patterns.word.exclude('handlebars')),this._unformatted_content_delimiter=null,this._options.unformatted_content_delimiter){var r=this._input.get_literal_regexp(this._options.unformatted_content_delimiter);this.__patterns.unformatted_content_delimiter=i.matching(r).until_after(r)}};(u.prototype=new o)._is_comment=function(t){return!1},u.prototype._is_opening=function(t){return t.type===l.TAG_OPEN},u.prototype._is_closing=function(t,e){return t.type===l.TAG_CLOSE&&e&&(('>'===t.text||'/>'===t.text)&&'<'===e.text[0]||'}}'===t.text&&'{'===e.text[0]&&'{'===e.text[1])},u.prototype._reset=function(){this._current_tag_name=''},u.prototype._get_next_token=function(t,e){var n=null;this._readWhitespace();var o=this._input.peek();return null===o?this._create_token(l.EOF,''):n=(n=(n=(n=(n=(n=(n=(n=(n=n||this._read_open_handlebars(o,e))||this._read_attribute(o,t,e))||this._read_close(o,e))||this._read_raw_content(o,t,e))||this._read_content_word(o))||this._read_comment_or_cdata(o))||this._read_processing(o))||this._read_open(o,e))||this._create_token(l.UNKNOWN,this._input.next())},u.prototype._read_comment_or_cdata=function(t){var e=null,n=null,o=null;'<'===t&&('!'===this._input.peek(1)&&((n=this.__patterns.comment.read())?(o=c.get_directives(n))&&'start'===o.ignore&&(n+=c.readIgnored(this._input)):n=this.__patterns.cdata.read()),n&&((e=this._create_token(l.COMMENT,n)).directives=o));return e},u.prototype._read_processing=function(t){var e=null,n=null;if('<'===t){var o=this._input.peek(1);'!'!==o&&'?'!==o||(n=(n=this.__patterns.conditional_comment.read())||this.__patterns.processing.read()),n&&((e=this._create_token(l.COMMENT,n)).directives=null)}return e},u.prototype._read_open=function(t,e){var n=null,o=null;return e||'<'===t&&(n=this._input.next(),'/'===this._input.peek()&&(n+=this._input.next()),n+=this.__patterns.element_name.read(),o=this._create_token(l.TAG_OPEN,n)),o},u.prototype._read_open_handlebars=function(t,e){var n=null,o=null;return e||this._options.indent_handlebars&&'{'===t&&'{'===this._input.peek(1)&&('!'===this._input.peek(2)?(n=(n=this.__patterns.handlebars_comment.read())||this.__patterns.handlebars.read(),o=this._create_token(l.COMMENT,n)):(n=this.__patterns.handlebars_open.read(),o=this._create_token(l.TAG_OPEN,n))),o},u.prototype._read_close=function(t,e){var n=null,o=null;return e&&('<'===e.text[0]&&('>'===t||'/'===t&&'>'===this._input.peek(1))?(n=this._input.next(),'/'===t&&(n+=this._input.next()),o=this._create_token(l.TAG_CLOSE,n)):'{'===e.text[0]&&'}'===t&&'}'===this._input.peek(1)&&(this._input.next(),this._input.next(),o=this._create_token(l.TAG_CLOSE,'}}'))),o},u.prototype._read_attribute=function(t,e,n){var o=null,i='';if(n&&'<'===n.text[0])if('='===t)o=this._create_token(l.EQUALS,this._input.next());else if('"'===t||"'"===t){var r=this._input.next();r+='"'===t?this.__patterns.double_quote.read():this.__patterns.single_quote.read(),o=this._create_token(l.VALUE,r)}else(i=this.__patterns.attribute.read())&&(o=e.type===l.EQUALS?this._create_token(l.VALUE,i):this._create_token(l.ATTRIBUTE,i));return o},u.prototype._is_content_unformatted=function(t){return-1===this._options.void_elements.indexOf(t)&&(-1!==this._options.content_unformatted.indexOf(t)||-1!==this._options.unformatted.indexOf(t))},u.prototype._read_raw_content=function(t,e,n){var o='';if(n&&'{'===n.text[0])o=this.__patterns.handlebars_raw_close.read();else if(e.type===l.TAG_CLOSE&&'<'===e.opened.text[0]&&'/'!==e.text[0]){var i=e.opened.text.substr(1).toLowerCase();if('script'===i||'style'===i){var r=this._read_comment_or_cdata(t);if(r)return r.type=l.TEXT,r;o=this._input.readUntil(new RegExp('</'+i+'[\\n\\r\\t ]*?>','ig'))}else this._is_content_unformatted(i)&&(o=this._input.readUntil(new RegExp('</'+i+'[\\n\\r\\t ]*?>','ig')))}return o?this._create_token(l.TEXT,o):null},u.prototype._read_content_word=function(t){var e='';if(this._options.unformatted_content_delimiter&&t===this._options.unformatted_content_delimiter[0]&&(e=this.__patterns.unformatted_content_delimiter.read()),e||(e=this.__patterns.word.read()),e)return this._create_token(l.TEXT,e)},t.exports.Tokenizer=u,t.exports.TOKEN=l}],e={};var n=function n(o){var i=e[o];if(void 0!==i)return i.exports;var r=e[o]={exports:{}};return t[o](r,r.exports,n),r.exports}(18);r=n}();var s=r;if(1)o=[n,n(5094),n(2838)],i=function(t){var e=n(5094),o=n(2838);return{html_beautify:function(t,n){return s(t,n,e.js_beautify,o.css_beautify)}}}.apply(e,o),void 0===i||(t.exports=i);else;}()},5094:(t,e)=>{var n;!function(){var o;!function(){"use strict";var t=[function(t,e,n){var o=n(1).Beautifier,i=n(5).Options;t.exports=function(t,e){return new o(t,e).beautify()},t.exports.defaultOptions=function(){return new i}},function(t,e,n){var o=n(2).Output,i=n(3).Token,r=n(4),s=n(5).Options,a=n(7).Tokenizer,l=n(7).line_starters,c=n(7).positionable_operators,u=n(7).TOKEN;function p(t,e){return-1!==e.indexOf(t)}function h(t,e){return t&&t.type===u.RESERVED&&t.text===e}function d(t,e){return t&&t.type===u.RESERVED&&p(t.text,e)}var f=['case','return','do','if','throw','else','await','break','continue','async'],g=function(t){for(var e={},n=0;n<t.length;n++)e[t[n].replace(/-/g,'_')]=t[n];return e}(['before-newline','after-newline','preserve-newline']),m=[g.before_newline,g.preserve_newline],v='BlockStatement',y='Statement',_='ObjectLiteral',O='ArrayLiteral',b='ForInitializer',w='Conditional',x='Expression';function S(t,e){e.multiline_frame||e.mode===b||e.mode===w||t.remove_indent(e.start_line_index)}function k(t){return t===O}function P(t){return p(t,[x,b,w])}function C(t,e){e=e||{},this._source_text=t||'',this._output=null,this._tokens=null,this._last_last_text=null,this._flags=null,this._previous_flags=null,this._flag_store=null,this._options=new s(e)}C.prototype.create_flags=function(t,e){var n=0;return t&&(n=t.indentation_level,!this._output.just_added_newline()&&t.line_indent_level>n&&(n=t.line_indent_level)),{mode:e,parent:t,last_token:t?t.last_token:new i(u.START_BLOCK,''),last_word:t?t.last_word:'',declaration_statement:!1,declaration_assignment:!1,multiline_frame:!1,inline_frame:!1,if_block:!1,else_block:!1,class_start_block:!1,do_block:!1,do_while:!1,import_block:!1,in_case_statement:!1,in_case:!1,case_body:!1,case_block:!1,indentation_level:n,alignment:0,line_indent_level:t?t.line_indent_level:n,start_line_index:this._output.get_line_number(),ternary_depth:0}},C.prototype._reset=function(t){var e=t.match(/^[\t ]*/)[0];this._last_last_text='',this._output=new o(this._options,e),this._output.raw=this._options.test_output_raw,this._flag_store=[],this.set_mode(v);var n=new a(t,this._options);return this._tokens=n.tokenize(),t},C.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var t=this._reset(this._source_text),e=this._options.eol;'auto'===this._options.eol&&(e='\n',t&&r.lineBreak.test(t||'')&&(e=t.match(r.lineBreak)[0]));for(var n=this._tokens.next();n;)this.handle_token(n),this._last_last_text=this._flags.last_token.text,this._flags.last_token=n,n=this._tokens.next();return this._output.get_code(e)},C.prototype.handle_token=function(t,e){t.type===u.START_EXPR?this.handle_start_expr(t):t.type===u.END_EXPR?this.handle_end_expr(t):t.type===u.START_BLOCK?this.handle_start_block(t):t.type===u.END_BLOCK?this.handle_end_block(t):t.type===u.WORD||t.type===u.RESERVED?this.handle_word(t):t.type===u.SEMICOLON?this.handle_semicolon(t):t.type===u.STRING?this.handle_string(t):t.type===u.EQUALS?this.handle_equals(t):t.type===u.OPERATOR?this.handle_operator(t):t.type===u.COMMA?this.handle_comma(t):t.type===u.BLOCK_COMMENT?this.handle_block_comment(t,e):t.type===u.COMMENT?this.handle_comment(t,e):t.type===u.DOT?this.handle_dot(t):t.type===u.EOF?this.handle_eof(t):(t.type,u.UNKNOWN,this.handle_unknown(t,e))},C.prototype.handle_whitespace_and_comments=function(t,e){var n=t.newlines,o=this._options.keep_array_indentation&&k(this._flags.mode);if(t.comments_before)for(var i=t.comments_before.next();i;)this.handle_whitespace_and_comments(i,e),this.handle_token(i,e),i=t.comments_before.next();if(o)for(var r=0;r<n;r+=1)this.print_newline(r>0,e);else if(this._options.max_preserve_newlines&&n>this._options.max_preserve_newlines&&(n=this._options.max_preserve_newlines),this._options.preserve_newlines&&n>1){this.print_newline(!1,e);for(var s=1;s<n;s+=1)this.print_newline(!0,e)}};var T=['async','break','continue','return','throw','yield'];C.prototype.allow_wrap_or_preserved_newline=function(t,e){if(e=void 0!==e&&e,!this._output.just_added_newline()){var n=this._options.preserve_newlines&&t.newlines||e;if(p(this._flags.last_token.text,c)||p(t.text,c)){var o=p(this._flags.last_token.text,c)&&p(this._options.operator_position,m)||p(t.text,c);n=n&&o}if(n)this.print_newline(!1,!0);else if(this._options.wrap_line_length){if(d(this._flags.last_token,T))return;this._output.set_wrap_point()}}},C.prototype.print_newline=function(t,e){if(!e&&';'!==this._flags.last_token.text&&','!==this._flags.last_token.text&&'='!==this._flags.last_token.text&&(this._flags.last_token.type!==u.OPERATOR||'--'===this._flags.last_token.text||'++'===this._flags.last_token.text))for(var n=this._tokens.peek();!(this._flags.mode!==y||this._flags.if_block&&h(n,'else')||this._flags.do_block);)this.restore_mode();this._output.add_new_line(t)&&(this._flags.multiline_frame=!0)},C.prototype.print_token_line_indentation=function(t){this._output.just_added_newline()&&(this._options.keep_array_indentation&&t.newlines&&('['===t.text||k(this._flags.mode))?(this._output.current_line.set_indent(-1),this._output.current_line.push(t.whitespace_before),this._output.space_before_token=!1):this._output.set_indent(this._flags.indentation_level,this._flags.alignment)&&(this._flags.line_indent_level=this._flags.indentation_level))},C.prototype.print_token=function(t){if(this._output.raw)this._output.add_raw_token(t);else{if(this._options.comma_first&&t.previous&&t.previous.type===u.COMMA&&this._output.just_added_newline()&&','===this._output.previous_line.last()){var e=this._output.previous_line.pop();this._output.previous_line.is_empty()&&(this._output.previous_line.push(e),this._output.trim(!0),this._output.current_line.pop(),this._output.trim()),this.print_token_line_indentation(t),this._output.add_token(','),this._output.space_before_token=!0}this.print_token_line_indentation(t),this._output.non_breaking_space=!0,this._output.add_token(t.text),this._output.previous_token_wrapped&&(this._flags.multiline_frame=!0)}},C.prototype.indent=function(){this._flags.indentation_level+=1,this._output.set_indent(this._flags.indentation_level,this._flags.alignment)},C.prototype.deindent=function(){this._flags.indentation_level>0&&(!this._flags.parent||this._flags.indentation_level>this._flags.parent.indentation_level)&&(this._flags.indentation_level-=1,this._output.set_indent(this._flags.indentation_level,this._flags.alignment))},C.prototype.set_mode=function(t){this._flags?(this._flag_store.push(this._flags),this._previous_flags=this._flags):this._previous_flags=this.create_flags(null,t),this._flags=this.create_flags(this._previous_flags,t),this._output.set_indent(this._flags.indentation_level,this._flags.alignment)},C.prototype.restore_mode=function(){this._flag_store.length>0&&(this._previous_flags=this._flags,this._flags=this._flag_store.pop(),this._previous_flags.mode===y&&S(this._output,this._previous_flags),this._output.set_indent(this._flags.indentation_level,this._flags.alignment))},C.prototype.start_of_object_property=function(){return this._flags.parent.mode===_&&this._flags.mode===y&&(':'===this._flags.last_token.text&&0===this._flags.ternary_depth||d(this._flags.last_token,['get','set']))},C.prototype.start_of_statement=function(t){var e=!1;return!!(e=(e=(e=(e=(e=(e=(e=e||d(this._flags.last_token,['var','let','const'])&&t.type===u.WORD)||h(this._flags.last_token,'do'))||!(this._flags.parent.mode===_&&this._flags.mode===y)&&d(this._flags.last_token,T)&&!t.newlines)||h(this._flags.last_token,'else')&&!(h(t,'if')&&!t.comments_before))||this._flags.last_token.type===u.END_EXPR&&(this._previous_flags.mode===b||this._previous_flags.mode===w))||this._flags.last_token.type===u.WORD&&this._flags.mode===v&&!this._flags.in_case&&!('--'===t.text||'++'===t.text)&&'function'!==this._last_last_text&&t.type!==u.WORD&&t.type!==u.RESERVED)||this._flags.mode===_&&(':'===this._flags.last_token.text&&0===this._flags.ternary_depth||d(this._flags.last_token,['get','set'])))&&(this.set_mode(y),this.indent(),this.handle_whitespace_and_comments(t,!0),this.start_of_object_property()||this.allow_wrap_or_preserved_newline(t,d(t,['do','for','if','while'])),!0)},C.prototype.handle_start_expr=function(t){this.start_of_statement(t)||this.handle_whitespace_and_comments(t);var e=x;if('['===t.text){if(this._flags.last_token.type===u.WORD||')'===this._flags.last_token.text)return d(this._flags.last_token,l)&&(this._output.space_before_token=!0),this.print_token(t),this.set_mode(e),this.indent(),void(this._options.space_in_paren&&(this._output.space_before_token=!0));e=O,k(this._flags.mode)&&('['!==this._flags.last_token.text&&(','!==this._flags.last_token.text||']'!==this._last_last_text&&'}'!==this._last_last_text)||this._options.keep_array_indentation||this.print_newline()),p(this._flags.last_token.type,[u.START_EXPR,u.END_EXPR,u.WORD,u.OPERATOR,u.DOT])||(this._output.space_before_token=!0)}else{if(this._flags.last_token.type===u.RESERVED)'for'===this._flags.last_token.text?(this._output.space_before_token=this._options.space_before_conditional,e=b):p(this._flags.last_token.text,['if','while','switch'])?(this._output.space_before_token=this._options.space_before_conditional,e=w):p(this._flags.last_word,['await','async'])?this._output.space_before_token=!0:'import'===this._flags.last_token.text&&''===t.whitespace_before?this._output.space_before_token=!1:(p(this._flags.last_token.text,l)||'catch'===this._flags.last_token.text)&&(this._output.space_before_token=!0);else if(this._flags.last_token.type===u.EQUALS||this._flags.last_token.type===u.OPERATOR)this.start_of_object_property()||this.allow_wrap_or_preserved_newline(t);else if(this._flags.last_token.type===u.WORD){this._output.space_before_token=!1;var n=this._tokens.peek(-3);if(this._options.space_after_named_function&&n){var o=this._tokens.peek(-4);d(n,['async','function'])||'*'===n.text&&d(o,['async','function'])?this._output.space_before_token=!0:this._flags.mode===_?'{'!==n.text&&','!==n.text&&('*'!==n.text||'{'!==o.text&&','!==o.text)||(this._output.space_before_token=!0):this._flags.parent&&this._flags.parent.class_start_block&&(this._output.space_before_token=!0)}}else this.allow_wrap_or_preserved_newline(t);(this._flags.last_token.type===u.RESERVED&&('function'===this._flags.last_word||'typeof'===this._flags.last_word)||'*'===this._flags.last_token.text&&(p(this._last_last_text,['function','yield'])||this._flags.mode===_&&p(this._last_last_text,['{',','])))&&(this._output.space_before_token=this._options.space_after_anon_function)}';'===this._flags.last_token.text||this._flags.last_token.type===u.START_BLOCK?this.print_newline():this._flags.last_token.type!==u.END_EXPR&&this._flags.last_token.type!==u.START_EXPR&&this._flags.last_token.type!==u.END_BLOCK&&'.'!==this._flags.last_token.text&&this._flags.last_token.type!==u.COMMA||this.allow_wrap_or_preserved_newline(t,t.newlines),this.print_token(t),this.set_mode(e),this._options.space_in_paren&&(this._output.space_before_token=!0),this.indent()},C.prototype.handle_end_expr=function(t){for(;this._flags.mode===y;)this.restore_mode();this.handle_whitespace_and_comments(t),this._flags.multiline_frame&&this.allow_wrap_or_preserved_newline(t,']'===t.text&&k(this._flags.mode)&&!this._options.keep_array_indentation),this._options.space_in_paren&&(this._flags.last_token.type!==u.START_EXPR||this._options.space_in_empty_paren?this._output.space_before_token=!0:(this._output.trim(),this._output.space_before_token=!1)),this.deindent(),this.print_token(t),this.restore_mode(),S(this._output,this._previous_flags),this._flags.do_while&&this._previous_flags.mode===w&&(this._previous_flags.mode=x,this._flags.do_block=!1,this._flags.do_while=!1)},C.prototype.handle_start_block=function(t){this.handle_whitespace_and_comments(t);var e=this._tokens.peek(),n=this._tokens.peek(1);'switch'===this._flags.last_word&&this._flags.last_token.type===u.END_EXPR?(this.set_mode(v),this._flags.in_case_statement=!0):this._flags.case_body?this.set_mode(v):n&&(p(n.text,[':',','])&&p(e.type,[u.STRING,u.WORD,u.RESERVED])||p(e.text,['get','set','...'])&&p(n.type,[u.WORD,u.RESERVED]))?p(this._last_last_text,['class','interface'])&&!p(n.text,[':',','])?this.set_mode(v):this.set_mode(_):this._flags.last_token.type===u.OPERATOR&&'=>'===this._flags.last_token.text?this.set_mode(v):p(this._flags.last_token.type,[u.EQUALS,u.START_EXPR,u.COMMA,u.OPERATOR])||d(this._flags.last_token,['return','throw','import','default'])?this.set_mode(_):this.set_mode(v),this._flags.last_token&&d(this._flags.last_token.previous,['class','extends'])&&(this._flags.class_start_block=!0);var o=!e.comments_before&&'}'===e.text,i=o&&'function'===this._flags.last_word&&this._flags.last_token.type===u.END_EXPR;if(this._options.brace_preserve_inline){var r=0,s=null;this._flags.inline_frame=!0;do{if(r+=1,(s=this._tokens.peek(r-1)).newlines){this._flags.inline_frame=!1;break}}while(s.type!==u.EOF&&(s.type!==u.END_BLOCK||s.opened!==t))}("expand"===this._options.brace_style||"none"===this._options.brace_style&&t.newlines)&&!this._flags.inline_frame?this._flags.last_token.type!==u.OPERATOR&&(i||this._flags.last_token.type===u.EQUALS||d(this._flags.last_token,f)&&'else'!==this._flags.last_token.text)?this._output.space_before_token=!0:this.print_newline(!1,!0):(!k(this._previous_flags.mode)||this._flags.last_token.type!==u.START_EXPR&&this._flags.last_token.type!==u.COMMA||((this._flags.last_token.type===u.COMMA||this._options.space_in_paren)&&(this._output.space_before_token=!0),(this._flags.last_token.type===u.COMMA||this._flags.last_token.type===u.START_EXPR&&this._flags.inline_frame)&&(this.allow_wrap_or_preserved_newline(t),this._previous_flags.multiline_frame=this._previous_flags.multiline_frame||this._flags.multiline_frame,this._flags.multiline_frame=!1)),this._flags.last_token.type!==u.OPERATOR&&this._flags.last_token.type!==u.START_EXPR&&(p(this._flags.last_token.type,[u.START_BLOCK,u.SEMICOLON])&&!this._flags.inline_frame?this.print_newline():this._output.space_before_token=!0)),this.print_token(t),this.indent(),o||this._options.brace_preserve_inline&&this._flags.inline_frame||this.print_newline()},C.prototype.handle_end_block=function(t){for(this.handle_whitespace_and_comments(t);this._flags.mode===y;)this.restore_mode();var e=this._flags.last_token.type===u.START_BLOCK;this._flags.inline_frame&&!e?this._output.space_before_token=!0:"expand"===this._options.brace_style?e||this.print_newline():e||(k(this._flags.mode)&&this._options.keep_array_indentation?(this._options.keep_array_indentation=!1,this.print_newline(),this._options.keep_array_indentation=!0):this.print_newline()),this.restore_mode(),this.print_token(t)},C.prototype.handle_word=function(t){if(t.type===u.RESERVED)if(p(t.text,['set','get'])&&this._flags.mode!==_)t.type=u.WORD;else if('import'===t.text&&p(this._tokens.peek().text,['(','.']))t.type=u.WORD;else if(p(t.text,['as','from'])&&!this._flags.import_block)t.type=u.WORD;else if(this._flags.mode===_){':'===this._tokens.peek().text&&(t.type=u.WORD)}if(this.start_of_statement(t)?d(this._flags.last_token,['var','let','const'])&&t.type===u.WORD&&(this._flags.declaration_statement=!0):!t.newlines||P(this._flags.mode)||this._flags.last_token.type===u.OPERATOR&&'--'!==this._flags.last_token.text&&'++'!==this._flags.last_token.text||this._flags.last_token.type===u.EQUALS||!this._options.preserve_newlines&&d(this._flags.last_token,['var','let','const','set','get'])?this.handle_whitespace_and_comments(t):(this.handle_whitespace_and_comments(t),this.print_newline()),this._flags.do_block&&!this._flags.do_while){if(h(t,'while'))return this._output.space_before_token=!0,this.print_token(t),this._output.space_before_token=!0,void(this._flags.do_while=!0);this.print_newline(),this._flags.do_block=!1}if(this._flags.if_block)if(!this._flags.else_block&&h(t,'else'))this._flags.else_block=!0;else{for(;this._flags.mode===y;)this.restore_mode();this._flags.if_block=!1,this._flags.else_block=!1}if(this._flags.in_case_statement&&d(t,['case','default']))return this.print_newline(),this._flags.case_block||!this._flags.case_body&&!this._options.jslint_happy||this.deindent(),this._flags.case_body=!1,this.print_token(t),void(this._flags.in_case=!0);if(this._flags.last_token.type!==u.COMMA&&this._flags.last_token.type!==u.START_EXPR&&this._flags.last_token.type!==u.EQUALS&&this._flags.last_token.type!==u.OPERATOR||this.start_of_object_property()||p(this._flags.last_token.text,['+','-'])&&':'===this._last_last_text&&this._flags.parent.mode===_||this.allow_wrap_or_preserved_newline(t),h(t,'function'))return(p(this._flags.last_token.text,['}',';'])||this._output.just_added_newline()&&!p(this._flags.last_token.text,['(','[','{',':','=',','])&&this._flags.last_token.type!==u.OPERATOR)&&(this._output.just_added_blankline()||t.comments_before||(this.print_newline(),this.print_newline(!0))),this._flags.last_token.type===u.RESERVED||this._flags.last_token.type===u.WORD?d(this._flags.last_token,['get','set','new','export'])||d(this._flags.last_token,T)||h(this._flags.last_token,'default')&&'export'===this._last_last_text||'declare'===this._flags.last_token.text?this._output.space_before_token=!0:this.print_newline():this._flags.last_token.type===u.OPERATOR||'='===this._flags.last_token.text?this._output.space_before_token=!0:(this._flags.multiline_frame||!P(this._flags.mode)&&!k(this._flags.mode))&&this.print_newline(),this.print_token(t),void(this._flags.last_word=t.text);var e='NONE';(this._flags.last_token.type===u.END_BLOCK?this._previous_flags.inline_frame?e='SPACE':d(t,['else','catch','finally','from'])?"expand"===this._options.brace_style||"end-expand"===this._options.brace_style||"none"===this._options.brace_style&&t.newlines?e='NEWLINE':(e='SPACE',this._output.space_before_token=!0):e='NEWLINE':this._flags.last_token.type===u.SEMICOLON&&this._flags.mode===v?e='NEWLINE':this._flags.last_token.type===u.SEMICOLON&&P(this._flags.mode)?e='SPACE':this._flags.last_token.type===u.STRING?e='NEWLINE':this._flags.last_token.type===u.RESERVED||this._flags.last_token.type===u.WORD||'*'===this._flags.last_token.text&&(p(this._last_last_text,['function','yield'])||this._flags.mode===_&&p(this._last_last_text,['{',',']))?e='SPACE':this._flags.last_token.type===u.START_BLOCK?e=this._flags.inline_frame?'SPACE':'NEWLINE':this._flags.last_token.type===u.END_EXPR&&(this._output.space_before_token=!0,e='NEWLINE'),d(t,l)&&')'!==this._flags.last_token.text&&(e=this._flags.inline_frame||'else'===this._flags.last_token.text||'export'===this._flags.last_token.text?'SPACE':'NEWLINE'),d(t,['else','catch','finally']))?(this._flags.last_token.type!==u.END_BLOCK||this._previous_flags.mode!==v||"expand"===this._options.brace_style||"end-expand"===this._options.brace_style||"none"===this._options.brace_style&&t.newlines)&&!this._flags.inline_frame?this.print_newline():(this._output.trim(!0),'}'!==this._output.current_line.last()&&this.print_newline(),this._output.space_before_token=!0):'NEWLINE'===e?d(this._flags.last_token,f)||'declare'===this._flags.last_token.text&&d(t,['var','let','const'])?this._output.space_before_token=!0:this._flags.last_token.type!==u.END_EXPR?this._flags.last_token.type===u.START_EXPR&&d(t,['var','let','const'])||':'===this._flags.last_token.text||(h(t,'if')&&h(t.previous,'else')?this._output.space_before_token=!0:this.print_newline()):d(t,l)&&')'!==this._flags.last_token.text&&this.print_newline():this._flags.multiline_frame&&k(this._flags.mode)&&','===this._flags.last_token.text&&'}'===this._last_last_text?this.print_newline():'SPACE'===e&&(this._output.space_before_token=!0);!t.previous||t.previous.type!==u.WORD&&t.previous.type!==u.RESERVED||(this._output.space_before_token=!0),this.print_token(t),this._flags.last_word=t.text,t.type===u.RESERVED&&('do'===t.text?this._flags.do_block=!0:'if'===t.text?this._flags.if_block=!0:'import'===t.text?this._flags.import_block=!0:this._flags.import_block&&h(t,'from')&&(this._flags.import_block=!1))},C.prototype.handle_semicolon=function(t){this.start_of_statement(t)?this._output.space_before_token=!1:this.handle_whitespace_and_comments(t);for(var e=this._tokens.peek();!(this._flags.mode!==y||this._flags.if_block&&h(e,'else')||this._flags.do_block);)this.restore_mode();this._flags.import_block&&(this._flags.import_block=!1),this.print_token(t)},C.prototype.handle_string=function(t){(!t.text.startsWith("`")||0!==t.newlines||''!==t.whitespace_before||')'!==t.previous.text&&this._flags.last_token.type!==u.WORD)&&(this.start_of_statement(t)?this._output.space_before_token=!0:(this.handle_whitespace_and_comments(t),this._flags.last_token.type===u.RESERVED||this._flags.last_token.type===u.WORD||this._flags.inline_frame?this._output.space_before_token=!0:this._flags.last_token.type===u.COMMA||this._flags.last_token.type===u.START_EXPR||this._flags.last_token.type===u.EQUALS||this._flags.last_token.type===u.OPERATOR?this.start_of_object_property()||this.allow_wrap_or_preserved_newline(t):!t.text.startsWith("`")||this._flags.last_token.type!==u.END_EXPR||']'!==t.previous.text&&')'!==t.previous.text||0!==t.newlines?this.print_newline():this._output.space_before_token=!0)),this.print_token(t)},C.prototype.handle_equals=function(t){this.start_of_statement(t)||this.handle_whitespace_and_comments(t),this._flags.declaration_statement&&(this._flags.declaration_assignment=!0),this._output.space_before_token=!0,this.print_token(t),this._output.space_before_token=!0},C.prototype.handle_comma=function(t){this.handle_whitespace_and_comments(t,!0),this.print_token(t),this._output.space_before_token=!0,this._flags.declaration_statement?(P(this._flags.parent.mode)&&(this._flags.declaration_assignment=!1),this._flags.declaration_assignment?(this._flags.declaration_assignment=!1,this.print_newline(!1,!0)):this._options.comma_first&&this.allow_wrap_or_preserved_newline(t)):this._flags.mode===_||this._flags.mode===y&&this._flags.parent.mode===_?(this._flags.mode===y&&this.restore_mode(),this._flags.inline_frame||this.print_newline()):this._options.comma_first&&this.allow_wrap_or_preserved_newline(t)},C.prototype.handle_operator=function(t){var e='*'===t.text&&(d(this._flags.last_token,['function','yield'])||p(this._flags.last_token.type,[u.START_BLOCK,u.COMMA,u.END_BLOCK,u.SEMICOLON])),n=p(t.text,['-','+'])&&(p(this._flags.last_token.type,[u.START_BLOCK,u.START_EXPR,u.EQUALS,u.OPERATOR])||p(this._flags.last_token.text,l)||','===this._flags.last_token.text);if(this.start_of_statement(t));else{var o=!e;this.handle_whitespace_and_comments(t,o)}if('*'!==t.text||this._flags.last_token.type!==u.DOT)if('::'!==t.text)if(p(t.text,['-','+'])&&this.start_of_object_property())this.print_token(t);else{if(this._flags.last_token.type===u.OPERATOR&&p(this._options.operator_position,m)&&this.allow_wrap_or_preserved_newline(t),':'===t.text&&this._flags.in_case)return this.print_token(t),this._flags.in_case=!1,this._flags.case_body=!0,void(this._tokens.peek().type!==u.START_BLOCK?(this.indent(),this.print_newline(),this._flags.case_block=!1):(this._flags.case_block=!0,this._output.space_before_token=!0));var i=!0,r=!0,s=!1;if(':'===t.text?0===this._flags.ternary_depth?i=!1:(this._flags.ternary_depth-=1,s=!0):'?'===t.text&&(this._flags.ternary_depth+=1),!n&&!e&&this._options.preserve_newlines&&p(t.text,c)){var a=':'===t.text,h=a&&s,_=a&&!s;switch(this._options.operator_position){case g.before_newline:return this._output.space_before_token=!_,this.print_token(t),a&&!h||this.allow_wrap_or_preserved_newline(t),void(this._output.space_before_token=!0);case g.after_newline:return this._output.space_before_token=!0,!a||h?this._tokens.peek().newlines?this.print_newline(!1,!0):this.allow_wrap_or_preserved_newline(t):this._output.space_before_token=!1,this.print_token(t),void(this._output.space_before_token=!0);case g.preserve_newline:return _||this.allow_wrap_or_preserved_newline(t),i=!(this._output.just_added_newline()||_),this._output.space_before_token=i,this.print_token(t),void(this._output.space_before_token=!0)}}if(e){this.allow_wrap_or_preserved_newline(t),i=!1;var O=this._tokens.peek();r=O&&p(O.type,[u.WORD,u.RESERVED])}else if('...'===t.text)this.allow_wrap_or_preserved_newline(t),i=this._flags.last_token.type===u.START_BLOCK,r=!1;else if(p(t.text,['--','++','!','~'])||n){if(this._flags.last_token.type!==u.COMMA&&this._flags.last_token.type!==u.START_EXPR||this.allow_wrap_or_preserved_newline(t),i=!1,r=!1,t.newlines&&('--'===t.text||'++'===t.text||'~'===t.text)){var b=d(this._flags.last_token,f)&&t.newlines;b&&(this._previous_flags.if_block||this._previous_flags.else_block)&&this.restore_mode(),this.print_newline(b,!0)}';'===this._flags.last_token.text&&P(this._flags.mode)&&(i=!0),this._flags.last_token.type===u.RESERVED?i=!0:this._flags.last_token.type===u.END_EXPR?i=!(']'===this._flags.last_token.text&&('--'===t.text||'++'===t.text)):this._flags.last_token.type===u.OPERATOR&&(i=p(t.text,['--','-','++','+'])&&p(this._flags.last_token.text,['--','-','++','+']),p(t.text,['+','-'])&&p(this._flags.last_token.text,['--','++'])&&(r=!0)),(this._flags.mode!==v||this._flags.inline_frame)&&this._flags.mode!==y||'{'!==this._flags.last_token.text&&';'!==this._flags.last_token.text||this.print_newline()}this._output.space_before_token=this._output.space_before_token||i,this.print_token(t),this._output.space_before_token=r}else this.print_token(t);else this.print_token(t)},C.prototype.handle_block_comment=function(t,e){return this._output.raw?(this._output.add_raw_token(t),void(t.directives&&'end'===t.directives.preserve&&(this._output.raw=this._options.test_output_raw))):t.directives?(this.print_newline(!1,e),this.print_token(t),'start'===t.directives.preserve&&(this._output.raw=!0),void this.print_newline(!1,!0)):r.newline.test(t.text)||t.newlines?void this.print_block_commment(t,e):(this._output.space_before_token=!0,this.print_token(t),void(this._output.space_before_token=!0))},C.prototype.print_block_commment=function(t,e){var n,o=function(t){for(var e=[],n=(t=t.replace(r.allLineBreaks,'\n')).indexOf("\n");-1!==n;)e.push(t.substring(0,n)),n=(t=t.substring(n+1)).indexOf("\n");return t.length&&e.push(t),e}(t.text),i=!1,s=!1,a=t.whitespace_before,l=a.length;if(this.print_newline(!1,e),this.print_token_line_indentation(t),this._output.add_token(o[0]),this.print_newline(!1,e),o.length>1){for(i=function(t,e){for(var n=0;n<t.length;n++)if(t[n].trim().charAt(0)!==e)return!1;return!0}(o=o.slice(1),'*'),s=function(t,e){for(var n,o=0,i=t.length;o<i;o++)if((n=t[o])&&0!==n.indexOf(e))return!1;return!0}(o,a),i&&(this._flags.alignment=1),n=0;n<o.length;n++)i?(this.print_token_line_indentation(t),this._output.add_token(o[n].replace(/^\s+/g,''))):s&&o[n]?(this.print_token_line_indentation(t),this._output.add_token(o[n].substring(l))):(this._output.current_line.set_indent(-1),this._output.add_token(o[n])),this.print_newline(!1,e);this._flags.alignment=0}},C.prototype.handle_comment=function(t,e){t.newlines?this.print_newline(!1,e):this._output.trim(!0),this._output.space_before_token=!0,this.print_token(t),this.print_newline(!1,e)},C.prototype.handle_dot=function(t){this.start_of_statement(t)||this.handle_whitespace_and_comments(t,!0),this._flags.last_token.text.match('^[0-9]+$')&&(this._output.space_before_token=!0),d(this._flags.last_token,f)?this._output.space_before_token=!1:this.allow_wrap_or_preserved_newline(t,')'===this._flags.last_token.text&&this._options.break_chained_methods),this._options.unindent_chained_methods&&this._output.just_added_newline()&&this.deindent(),this.print_token(t)},C.prototype.handle_unknown=function(t,e){this.print_token(t),'\n'===t.text[t.text.length-1]&&this.print_newline(!1,e)},C.prototype.handle_eof=function(t){for(;this._flags.mode===y;)this.restore_mode();this.handle_whitespace_and_comments(t)},t.exports.Beautifier=C},function(t){function e(t){this.__parent=t,this.__character_count=0,this.__indent_count=-1,this.__alignment_count=0,this.__wrap_point_index=0,this.__wrap_point_character_count=0,this.__wrap_point_indent_count=-1,this.__wrap_point_alignment_count=0,this.__items=[]}function n(t,e){this.__cache=[''],this.__indent_size=t.indent_size,this.__indent_string=t.indent_char,t.indent_with_tabs||(this.__indent_string=new Array(t.indent_size+1).join(t.indent_char)),e=e||'',t.indent_level>0&&(e=new Array(t.indent_level+1).join(this.__indent_string)),this.__base_string=e,this.__base_string_length=e.length}function o(t,o){this.__indent_cache=new n(t,o),this.raw=!1,this._end_with_newline=t.end_with_newline,this.indent_size=t.indent_size,this.wrap_line_length=t.wrap_line_length,this.indent_empty_lines=t.indent_empty_lines,this.__lines=[],this.previous_line=null,this.current_line=null,this.next_line=new e(this),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1,this.__add_outputline()}e.prototype.clone_empty=function(){var t=new e(this.__parent);return t.set_indent(this.__indent_count,this.__alignment_count),t},e.prototype.item=function(t){return t<0?this.__items[this.__items.length+t]:this.__items[t]},e.prototype.has_match=function(t){for(var e=this.__items.length-1;e>=0;e--)if(this.__items[e].match(t))return!0;return!1},e.prototype.set_indent=function(t,e){this.is_empty()&&(this.__indent_count=t||0,this.__alignment_count=e||0,this.__character_count=this.__parent.get_indent_size(this.__indent_count,this.__alignment_count))},e.prototype._set_wrap_point=function(){this.__parent.wrap_line_length&&(this.__wrap_point_index=this.__items.length,this.__wrap_point_character_count=this.__character_count,this.__wrap_point_indent_count=this.__parent.next_line.__indent_count,this.__wrap_point_alignment_count=this.__parent.next_line.__alignment_count)},e.prototype._should_wrap=function(){return this.__wrap_point_index&&this.__character_count>this.__parent.wrap_line_length&&this.__wrap_point_character_count>this.__parent.next_line.__character_count},e.prototype._allow_wrap=function(){if(this._should_wrap()){this.__parent.add_new_line();var t=this.__parent.current_line;return t.set_indent(this.__wrap_point_indent_count,this.__wrap_point_alignment_count),t.__items=this.__items.slice(this.__wrap_point_index),this.__items=this.__items.slice(0,this.__wrap_point_index),t.__character_count+=this.__character_count-this.__wrap_point_character_count,this.__character_count=this.__wrap_point_character_count," "===t.__items[0]&&(t.__items.splice(0,1),t.__character_count-=1),!0}return!1},e.prototype.is_empty=function(){return 0===this.__items.length},e.prototype.last=function(){return this.is_empty()?null:this.__items[this.__items.length-1]},e.prototype.push=function(t){this.__items.push(t);var e=t.lastIndexOf('\n');-1!==e?this.__character_count=t.length-e:this.__character_count+=t.length},e.prototype.pop=function(){var t=null;return this.is_empty()||(t=this.__items.pop(),this.__character_count-=t.length),t},e.prototype._remove_indent=function(){this.__indent_count>0&&(this.__indent_count-=1,this.__character_count-=this.__parent.indent_size)},e.prototype._remove_wrap_indent=function(){this.__wrap_point_indent_count>0&&(this.__wrap_point_indent_count-=1)},e.prototype.trim=function(){for(;' '===this.last();)this.__items.pop(),this.__character_count-=1},e.prototype.toString=function(){var t='';return this.is_empty()?this.__parent.indent_empty_lines&&(t=this.__parent.get_indent_string(this.__indent_count)):(t=this.__parent.get_indent_string(this.__indent_count,this.__alignment_count),t+=this.__items.join('')),t},n.prototype.get_indent_size=function(t,e){var n=this.__base_string_length;return e=e||0,t<0&&(n=0),n+=t*this.__indent_size,n+=e},n.prototype.get_indent_string=function(t,e){var n=this.__base_string;return e=e||0,t<0&&(t=0,n=''),e+=t*this.__indent_size,this.__ensure_cache(e),n+=this.__cache[e]},n.prototype.__ensure_cache=function(t){for(;t>=this.__cache.length;)this.__add_column()},n.prototype.__add_column=function(){var t=this.__cache.length,e=0,n='';this.__indent_size&&t>=this.__indent_size&&(t-=(e=Math.floor(t/this.__indent_size))*this.__indent_size,n=new Array(e+1).join(this.__indent_string)),t&&(n+=new Array(t+1).join(' ')),this.__cache.push(n)},o.prototype.__add_outputline=function(){this.previous_line=this.current_line,this.current_line=this.next_line.clone_empty(),this.__lines.push(this.current_line)},o.prototype.get_line_number=function(){return this.__lines.length},o.prototype.get_indent_string=function(t,e){return this.__indent_cache.get_indent_string(t,e)},o.prototype.get_indent_size=function(t,e){return this.__indent_cache.get_indent_size(t,e)},o.prototype.is_empty=function(){return!this.previous_line&&this.current_line.is_empty()},o.prototype.add_new_line=function(t){return!(this.is_empty()||!t&&this.just_added_newline())&&(this.raw||this.__add_outputline(),!0)},o.prototype.get_code=function(t){this.trim(!0);var e=this.current_line.pop();e&&('\n'===e[e.length-1]&&(e=e.replace(/\n+$/g,'')),this.current_line.push(e)),this._end_with_newline&&this.__add_outputline();var n=this.__lines.join('\n');return'\n'!==t&&(n=n.replace(/[\n]/g,t)),n},o.prototype.set_wrap_point=function(){this.current_line._set_wrap_point()},o.prototype.set_indent=function(t,e){return t=t||0,e=e||0,this.next_line.set_indent(t,e),this.__lines.length>1?(this.current_line.set_indent(t,e),!0):(this.current_line.set_indent(),!1)},o.prototype.add_raw_token=function(t){for(var e=0;e<t.newlines;e++)this.__add_outputline();this.current_line.set_indent(-1),this.current_line.push(t.whitespace_before),this.current_line.push(t.text),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1},o.prototype.add_token=function(t){this.__add_space_before_token(),this.current_line.push(t),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=this.current_line._allow_wrap()},o.prototype.__add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&(this.non_breaking_space||this.set_wrap_point(),this.current_line.push(' '))},o.prototype.remove_indent=function(t){for(var e=this.__lines.length;t<e;)this.__lines[t]._remove_indent(),t++;this.current_line._remove_wrap_indent()},o.prototype.trim=function(t){for(t=void 0!==t&&t,this.current_line.trim();t&&this.__lines.length>1&&this.current_line.is_empty();)this.__lines.pop(),this.current_line=this.__lines[this.__lines.length-1],this.current_line.trim();this.previous_line=this.__lines.length>1?this.__lines[this.__lines.length-2]:null},o.prototype.just_added_newline=function(){return this.current_line.is_empty()},o.prototype.just_added_blankline=function(){return this.is_empty()||this.current_line.is_empty()&&this.previous_line.is_empty()},o.prototype.ensure_empty_line_above=function(t,n){for(var o=this.__lines.length-2;o>=0;){var i=this.__lines[o];if(i.is_empty())break;if(0!==i.item(0).indexOf(t)&&i.item(-1)!==n){this.__lines.splice(o+1,0,new e(this)),this.previous_line=this.__lines[this.__lines.length-2];break}o--}},t.exports.Output=o},function(t){t.exports.Token=function(t,e,n,o){this.type=t,this.text=e,this.comments_before=null,this.newlines=n||0,this.whitespace_before=o||'',this.parent=null,this.next=null,this.previous=null,this.opened=null,this.closed=null,this.directives=null}},function(t,e){var n="\\x24\\x30-\\x39\\x41-\\x5a\\x5f\\x61-\\x7a",o="\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05d0-\\u05ea\\u05f0-\\u05f2\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u08a0\\u08a2-\\u08ac\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097f\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c33\\u0c35-\\u0c39\\u0c3d\\u0c58\\u0c59\\u0c60\\u0c61\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d60\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0e01-\\u0e30\\u0e32\\u0e33\\u0e40-\\u0e46\\u0e81\\u0e82\\u0e84\\u0e87\\u0e88\\u0e8a\\u0e8d\\u0e94-\\u0e97\\u0e99-\\u0e9f\\u0ea1-\\u0ea3\\u0ea5\\u0ea7\\u0eaa\\u0eab\\u0ead-\\u0eb0\\u0eb2\\u0eb3\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0edc-\\u0edf\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u1000-\\u102a\\u103f\\u1050-\\u1055\\u105a-\\u105d\\u1061\\u1065\\u1066\\u106e-\\u1070\\u1075-\\u1081\\u108e\\u10a0-\\u10c5\\u10c7\\u10cd\\u10d0-\\u10fa\\u10fc-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f4\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f0\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1780-\\u17b3\\u17d7\\u17dc\\u1820-\\u1877\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191c\\u1950-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19c1-\\u19c7\\u1a00-\\u1a16\\u1a20-\\u1a54\\u1aa7\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bba-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1ce9-\\u1cec\\u1cee-\\u1cf1\\u1cf5\\u1cf6\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2cf2\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u2e2f\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u309d-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312d\\u3131-\\u318e\\u31a0-\\u31ba\\u31f0-\\u31ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua697\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua78e\\ua790-\\ua793\\ua7a0-\\ua7aa\\ua7f8-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uaa60-\\uaa76\\uaa7a\\uaa80-\\uaaaf\\uaab1\\uaab5\\uaab6\\uaab9-\\uaabd\\uaac0\\uaac2\\uaadb-\\uaadd\\uaae0-\\uaaea\\uaaf2-\\uaaf4\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uabc0-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\uf900-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc",i="\\u0300-\\u036f\\u0483-\\u0487\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u0620-\\u0649\\u0672-\\u06d3\\u06e7-\\u06e8\\u06fb-\\u06fc\\u0730-\\u074a\\u0800-\\u0814\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0840-\\u0857\\u08e4-\\u08fe\\u0900-\\u0903\\u093a-\\u093c\\u093e-\\u094f\\u0951-\\u0957\\u0962-\\u0963\\u0966-\\u096f\\u0981-\\u0983\\u09bc\\u09be-\\u09c4\\u09c7\\u09c8\\u09d7\\u09df-\\u09e0\\u0a01-\\u0a03\\u0a3c\\u0a3e-\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a66-\\u0a71\\u0a75\\u0a81-\\u0a83\\u0abc\\u0abe-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acd\\u0ae2-\\u0ae3\\u0ae6-\\u0aef\\u0b01-\\u0b03\\u0b3c\\u0b3e-\\u0b44\\u0b47\\u0b48\\u0b4b-\\u0b4d\\u0b56\\u0b57\\u0b5f-\\u0b60\\u0b66-\\u0b6f\\u0b82\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcd\\u0bd7\\u0be6-\\u0bef\\u0c01-\\u0c03\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62-\\u0c63\\u0c66-\\u0c6f\\u0c82\\u0c83\\u0cbc\\u0cbe-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5\\u0cd6\\u0ce2-\\u0ce3\\u0ce6-\\u0cef\\u0d02\\u0d03\\u0d46-\\u0d48\\u0d57\\u0d62-\\u0d63\\u0d66-\\u0d6f\\u0d82\\u0d83\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0df2\\u0df3\\u0e34-\\u0e3a\\u0e40-\\u0e45\\u0e50-\\u0e59\\u0eb4-\\u0eb9\\u0ec8-\\u0ecd\\u0ed0-\\u0ed9\\u0f18\\u0f19\\u0f20-\\u0f29\\u0f35\\u0f37\\u0f39\\u0f41-\\u0f47\\u0f71-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u1000-\\u1029\\u1040-\\u1049\\u1067-\\u106d\\u1071-\\u1074\\u1082-\\u108d\\u108f-\\u109d\\u135d-\\u135f\\u170e-\\u1710\\u1720-\\u1730\\u1740-\\u1750\\u1772\\u1773\\u1780-\\u17b2\\u17dd\\u17e0-\\u17e9\\u180b-\\u180d\\u1810-\\u1819\\u1920-\\u192b\\u1930-\\u193b\\u1951-\\u196d\\u19b0-\\u19c0\\u19c8-\\u19c9\\u19d0-\\u19d9\\u1a00-\\u1a15\\u1a20-\\u1a53\\u1a60-\\u1a7c\\u1a7f-\\u1a89\\u1a90-\\u1a99\\u1b46-\\u1b4b\\u1b50-\\u1b59\\u1b6b-\\u1b73\\u1bb0-\\u1bb9\\u1be6-\\u1bf3\\u1c00-\\u1c22\\u1c40-\\u1c49\\u1c5b-\\u1c7d\\u1cd0-\\u1cd2\\u1d00-\\u1dbe\\u1e01-\\u1f15\\u200c\\u200d\\u203f\\u2040\\u2054\\u20d0-\\u20dc\\u20e1\\u20e5-\\u20f0\\u2d81-\\u2d96\\u2de0-\\u2dff\\u3021-\\u3028\\u3099\\u309a\\ua640-\\ua66d\\ua674-\\ua67d\\ua69f\\ua6f0-\\ua6f1\\ua7f8-\\ua800\\ua806\\ua80b\\ua823-\\ua827\\ua880-\\ua881\\ua8b4-\\ua8c4\\ua8d0-\\ua8d9\\ua8f3-\\ua8f7\\ua900-\\ua909\\ua926-\\ua92d\\ua930-\\ua945\\ua980-\\ua983\\ua9b3-\\ua9c0\\uaa00-\\uaa27\\uaa40-\\uaa41\\uaa4c-\\uaa4d\\uaa50-\\uaa59\\uaa7b\\uaae0-\\uaae9\\uaaf2-\\uaaf3\\uabc0-\\uabe1\\uabec\\uabed\\uabf0-\\uabf9\\ufb20-\\ufb28\\ufe00-\\ufe0f\\ufe20-\\ufe26\\ufe33\\ufe34\\ufe4d-\\ufe4f\\uff10-\\uff19\\uff3f",r="\\\\u[0-9a-fA-F]{4}|\\\\u\\{[0-9a-fA-F]+\\}",s="(?:"+r+"|["+"\\x23\\x24\\x40\\x41-\\x5a\\x5f\\x61-\\x7a"+o+"])",a="(?:"+r+"|["+n+o+i+"])*";e.identifier=new RegExp(s+a,'g'),e.identifierStart=new RegExp(s),e.identifierMatch=new RegExp("(?:"+r+"|["+n+o+i+"])+");e.newline=/[\n\r\u2028\u2029]/,e.lineBreak=new RegExp('\r\n|'+e.newline.source),e.allLineBreaks=new RegExp(e.lineBreak.source,'g')},function(t,e,n){var o=n(6).Options,i=['before-newline','after-newline','preserve-newline'];function r(t){o.call(this,t,'js');var e=this.raw_options.brace_style||null;"expand-strict"===e?this.raw_options.brace_style="expand":"collapse-preserve-inline"===e?this.raw_options.brace_style="collapse,preserve-inline":void 0!==this.raw_options.braces_on_own_line&&(this.raw_options.brace_style=this.raw_options.braces_on_own_line?"expand":"collapse");var n=this._get_selection_list('brace_style',['collapse','expand','end-expand','none','preserve-inline']);this.brace_preserve_inline=!1,this.brace_style="collapse";for(var r=0;r<n.length;r++)"preserve-inline"===n[r]?this.brace_preserve_inline=!0:this.brace_style=n[r];this.unindent_chained_methods=this._get_boolean('unindent_chained_methods'),this.break_chained_methods=this._get_boolean('break_chained_methods'),this.space_in_paren=this._get_boolean('space_in_paren'),this.space_in_empty_paren=this._get_boolean('space_in_empty_paren'),this.jslint_happy=this._get_boolean('jslint_happy'),this.space_after_anon_function=this._get_boolean('space_after_anon_function'),this.space_after_named_function=this._get_boolean('space_after_named_function'),this.keep_array_indentation=this._get_boolean('keep_array_indentation'),this.space_before_conditional=this._get_boolean('space_before_conditional',!0),this.unescape_strings=this._get_boolean('unescape_strings'),this.e4x=this._get_boolean('e4x'),this.comma_first=this._get_boolean('comma_first'),this.operator_position=this._get_selection('operator_position',i),this.test_output_raw=this._get_boolean('test_output_raw'),this.jslint_happy&&(this.space_after_anon_function=!0)}r.prototype=new o,t.exports.Options=r},function(t){function e(t,e){this.raw_options=n(t,e),this.disabled=this._get_boolean('disabled'),this.eol=this._get_characters('eol','auto'),this.end_with_newline=this._get_boolean('end_with_newline'),this.indent_size=this._get_number('indent_size',4),this.indent_char=this._get_characters('indent_char',' '),this.indent_level=this._get_number('indent_level'),this.preserve_newlines=this._get_boolean('preserve_newlines',!0),this.max_preserve_newlines=this._get_number('max_preserve_newlines',32786),this.preserve_newlines||(this.max_preserve_newlines=0),this.indent_with_tabs=this._get_boolean('indent_with_tabs','\t'===this.indent_char),this.indent_with_tabs&&(this.indent_char='\t',1===this.indent_size&&(this.indent_size=4)),this.wrap_line_length=this._get_number('wrap_line_length',this._get_number('max_char')),this.indent_empty_lines=this._get_boolean('indent_empty_lines'),this.templating=this._get_selection_list('templating',['auto','none','django','erb','handlebars','php','smarty'],['auto'])}function n(t,e){var n,i={};for(n in t=o(t))n!==e&&(i[n]=t[n]);if(e&&t[e])for(n in t[e])i[n]=t[e][n];return i}function o(t){var e,n={};for(e in t){n[e.replace(/-/g,"_")]=t[e]}return n}e.prototype._get_array=function(t,e){var n=this.raw_options[t],o=e||[];return'object'==typeof n?null!==n&&'function'==typeof n.concat&&(o=n.concat()):'string'==typeof n&&(o=n.split(/[^a-zA-Z0-9_\/\-]+/)),o},e.prototype._get_boolean=function(t,e){var n=this.raw_options[t];return void 0===n?!!e:!!n},e.prototype._get_characters=function(t,e){var n=this.raw_options[t],o=e||'';return'string'==typeof n&&(o=n.replace(/\\r/,'\r').replace(/\\n/,'\n').replace(/\\t/,'\t')),o},e.prototype._get_number=function(t,e){var n=this.raw_options[t];e=parseInt(e,10),isNaN(e)&&(e=0);var o=parseInt(n,10);return isNaN(o)&&(o=e),o},e.prototype._get_selection=function(t,e,n){var o=this._get_selection_list(t,e,n);if(1!==o.length)throw new Error("Invalid Option Value: The option '"+t+"' can only be one of the following values:\n"+e+"\nYou passed in: '"+this.raw_options[t]+"'");return o[0]},e.prototype._get_selection_list=function(t,e,n){if(!e||0===e.length)throw new Error("Selection list cannot be empty.");if(n=n||[e[0]],!this._is_valid_selection(n,e))throw new Error("Invalid Default Value!");var o=this._get_array(t,n);if(!this._is_valid_selection(o,e))throw new Error("Invalid Option Value: The option '"+t+"' can contain only the following values:\n"+e+"\nYou passed in: '"+this.raw_options[t]+"'");return o},e.prototype._is_valid_selection=function(t,e){return t.length&&e.length&&!t.some((function(t){return-1===e.indexOf(t)}))},t.exports.Options=e,t.exports.normalizeOpts=o,t.exports.mergeOpts=n},function(t,e,n){var o=n(8).InputScanner,i=n(9).Tokenizer,r=n(9).TOKEN,s=n(13).Directives,a=n(4),l=n(12).Pattern,c=n(14).TemplatablePattern;function u(t,e){return-1!==e.indexOf(t)}var p={START_EXPR:'TK_START_EXPR',END_EXPR:'TK_END_EXPR',START_BLOCK:'TK_START_BLOCK',END_BLOCK:'TK_END_BLOCK',WORD:'TK_WORD',RESERVED:'TK_RESERVED',SEMICOLON:'TK_SEMICOLON',STRING:'TK_STRING',EQUALS:'TK_EQUALS',OPERATOR:'TK_OPERATOR',COMMA:'TK_COMMA',BLOCK_COMMENT:'TK_BLOCK_COMMENT',COMMENT:'TK_COMMENT',DOT:'TK_DOT',UNKNOWN:'TK_UNKNOWN',START:r.START,RAW:r.RAW,EOF:r.EOF},h=new s(/\/\*/,/\*\//),d=/0[xX][0123456789abcdefABCDEF_]*n?|0[oO][01234567_]*n?|0[bB][01_]*n?|\d[\d_]*n|(?:\.\d[\d_]*|\d[\d_]*\.?[\d_]*)(?:[eE][+-]?[\d_]+)?/,f=/[0-9]/,g=/[^\d\.]/,m=(">>> === !== &&= ??= ||= "+"<< && >= ** != == <= >> || ?? |> "+"< / - + > : & % ? ^ | *").split(' '),v=">>>= "+"... >>= <<= === >>> !== **= &&= ??= ||= "+"=> ^= :: /= << <= == && -= >= >> != -- += ** || ?? ++ %= &= *= |= |> "+"= ! ? > < : / ^ - + * & % ~ |";v=(v='\\?\\.(?!\\d) '+(v=v.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&"))).replace(/ /g,'|');var y,_=new RegExp(v),O='continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function,import,export'.split(','),b=O.concat(['do','in','of','else','get','set','new','catch','finally','typeof','yield','async','await','from','as','class','extends']),w=new RegExp('^(?:'+b.join('|')+')$'),x=function(t,e){i.call(this,t,e),this._patterns.whitespace=this._patterns.whitespace.matching(/\u00A0\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff/.source,/\u2028\u2029/.source);var n=new l(this._input),o=new c(this._input).read_options(this._options);this.__patterns={template:o,identifier:o.starting_with(a.identifier).matching(a.identifierMatch),number:n.matching(d),punct:n.matching(_),comment:n.starting_with(/\/\//).until(/[\n\r\u2028\u2029]/),block_comment:n.starting_with(/\/\*/).until_after(/\*\//),html_comment_start:n.matching(/<!--/),html_comment_end:n.matching(/-->/),include:n.starting_with(/#include/).until_after(a.lineBreak),shebang:n.starting_with(/#!/).until_after(a.lineBreak),xml:n.matching(/[\s\S]*?<(\/?)([-a-zA-Z:0-9_.]+|{[^}]+?}|!\[CDATA\[[^\]]*?\]\]|)(\s*{[^}]+?}|\s+[-a-zA-Z:0-9_.]+|\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{([^{}]|{[^}]+?})+?}))*\s*(\/?)\s*>/),single_quote:o.until(/['\\\n\r\u2028\u2029]/),double_quote:o.until(/["\\\n\r\u2028\u2029]/),template_text:o.until(/[`\\$]/),template_expression:o.until(/[`}\\]/)}};(x.prototype=new i)._is_comment=function(t){return t.type===p.COMMENT||t.type===p.BLOCK_COMMENT||t.type===p.UNKNOWN},x.prototype._is_opening=function(t){return t.type===p.START_BLOCK||t.type===p.START_EXPR},x.prototype._is_closing=function(t,e){return(t.type===p.END_BLOCK||t.type===p.END_EXPR)&&e&&(']'===t.text&&'['===e.text||')'===t.text&&'('===e.text||'}'===t.text&&'{'===e.text)},x.prototype._reset=function(){y=!1},x.prototype._get_next_token=function(t,e){var n=null;this._readWhitespace();var o=this._input.peek();return null===o?this._create_token(p.EOF,''):n=(n=(n=(n=(n=(n=(n=(n=(n=(n=n||this._read_non_javascript(o))||this._read_string(o))||this._read_pair(o,this._input.peek(1)))||this._read_word(t))||this._read_singles(o))||this._read_comment(o))||this._read_regexp(o,t))||this._read_xml(o,t))||this._read_punctuation())||this._create_token(p.UNKNOWN,this._input.next())},x.prototype._read_word=function(t){var e;return''!==(e=this.__patterns.identifier.read())?(e=e.replace(a.allLineBreaks,'\n'),t.type!==p.DOT&&(t.type!==p.RESERVED||'set'!==t.text&&'get'!==t.text)&&w.test(e)?'in'!==e&&'of'!==e||t.type!==p.WORD&&t.type!==p.STRING?this._create_token(p.RESERVED,e):this._create_token(p.OPERATOR,e):this._create_token(p.WORD,e)):''!==(e=this.__patterns.number.read())?this._create_token(p.WORD,e):void 0},x.prototype._read_singles=function(t){var e=null;return'('===t||'['===t?e=this._create_token(p.START_EXPR,t):')'===t||']'===t?e=this._create_token(p.END_EXPR,t):'{'===t?e=this._create_token(p.START_BLOCK,t):'}'===t?e=this._create_token(p.END_BLOCK,t):';'===t?e=this._create_token(p.SEMICOLON,t):'.'===t&&g.test(this._input.peek(1))?e=this._create_token(p.DOT,t):','===t&&(e=this._create_token(p.COMMA,t)),e&&this._input.next(),e},x.prototype._read_pair=function(t,e){var n=null;return'#'===t&&'{'===e&&(n=this._create_token(p.START_BLOCK,t+e)),n&&(this._input.next(),this._input.next()),n},x.prototype._read_punctuation=function(){var t=this.__patterns.punct.read();if(''!==t)return'='===t?this._create_token(p.EQUALS,t):'?.'===t?this._create_token(p.DOT,t):this._create_token(p.OPERATOR,t)},x.prototype._read_non_javascript=function(t){var e='';if('#'===t){if(this._is_first_token()&&(e=this.__patterns.shebang.read()))return this._create_token(p.UNKNOWN,e.trim()+'\n');if(e=this.__patterns.include.read())return this._create_token(p.UNKNOWN,e.trim()+'\n');t=this._input.next();var n='#';if(this._input.hasNext()&&this._input.testChar(f)){do{n+=t=this._input.next()}while(this._input.hasNext()&&'#'!==t&&'='!==t);return'#'===t||('['===this._input.peek()&&']'===this._input.peek(1)?(n+='[]',this._input.next(),this._input.next()):'{'===this._input.peek()&&'}'===this._input.peek(1)&&(n+='{}',this._input.next(),this._input.next())),this._create_token(p.WORD,n)}this._input.back()}else if('<'===t&&this._is_first_token()){if(e=this.__patterns.html_comment_start.read()){for(;this._input.hasNext()&&!this._input.testChar(a.newline);)e+=this._input.next();return y=!0,this._create_token(p.COMMENT,e)}}else if(y&&'-'===t&&(e=this.__patterns.html_comment_end.read()))return y=!1,this._create_token(p.COMMENT,e);return null},x.prototype._read_comment=function(t){var e=null;if('/'===t){var n='';if('*'===this._input.peek(1)){n=this.__patterns.block_comment.read();var o=h.get_directives(n);o&&'start'===o.ignore&&(n+=h.readIgnored(this._input)),n=n.replace(a.allLineBreaks,'\n'),(e=this._create_token(p.BLOCK_COMMENT,n)).directives=o}else'/'===this._input.peek(1)&&(n=this.__patterns.comment.read(),e=this._create_token(p.COMMENT,n))}return e},x.prototype._read_string=function(t){if('`'===t||"'"===t||'"'===t){var e=this._input.next();return this.has_char_escapes=!1,e+='`'===t?this._read_string_recursive('`',!0,'${'):this._read_string_recursive(t),this.has_char_escapes&&this._options.unescape_strings&&(e=function(t){var e='',n=0,i=new o(t),r=null;for(;i.hasNext();)if((r=i.match(/([\s]|[^\\]|\\\\)+/g))&&(e+=r[0]),'\\'===i.peek()){if(i.next(),'x'===i.peek())r=i.match(/x([0-9A-Fa-f]{2})/g);else{if('u'!==i.peek()){e+='\\',i.hasNext()&&(e+=i.next());continue}(r=i.match(/u([0-9A-Fa-f]{4})/g))||(r=i.match(/u\{([0-9A-Fa-f]+)\}/g))}if(!r)return t;if((n=parseInt(r[1],16))>126&&n<=255&&0===r[0].indexOf('x'))return t;e+=n>=0&&n<32||n>1114111?'\\'+r[0]:34===n||39===n||92===n?'\\'+String.fromCharCode(n):String.fromCharCode(n)}return e}(e)),this._input.peek()===t&&(e+=this._input.next()),e=e.replace(a.allLineBreaks,'\n'),this._create_token(p.STRING,e)}return null},x.prototype._allow_regexp_or_xml=function(t){return t.type===p.RESERVED&&u(t.text,['return','case','throw','else','do','typeof','yield'])||t.type===p.END_EXPR&&')'===t.text&&t.opened.previous.type===p.RESERVED&&u(t.opened.previous.text,['if','while','for'])||u(t.type,[p.COMMENT,p.START_EXPR,p.START_BLOCK,p.START,p.END_BLOCK,p.OPERATOR,p.EQUALS,p.EOF,p.SEMICOLON,p.COMMA])},x.prototype._read_regexp=function(t,e){if('/'===t&&this._allow_regexp_or_xml(e)){for(var n=this._input.next(),o=!1,i=!1;this._input.hasNext()&&(o||i||this._input.peek()!==t)&&!this._input.testChar(a.newline);)n+=this._input.peek(),o?o=!1:(o='\\'===this._input.peek(),'['===this._input.peek()?i=!0:']'===this._input.peek()&&(i=!1)),this._input.next();return this._input.peek()===t&&(n+=this._input.next(),n+=this._input.read(a.identifier)),this._create_token(p.STRING,n)}return null},x.prototype._read_xml=function(t,e){if(this._options.e4x&&"<"===t&&this._allow_regexp_or_xml(e)){var n='',o=this.__patterns.xml.read_match();if(o){for(var i=o[2].replace(/^{\s+/,'{').replace(/\s+}$/,'}'),r=0===i.indexOf('{'),s=0;o;){var l=!!o[1],c=o[2];if(!(!!o[o.length-1]||"![CDATA["===c.slice(0,8))&&(c===i||r&&c.replace(/^{\s+/,'{').replace(/\s+}$/,'}'))&&(l?--s:++s),n+=o[0],s<=0)break;o=this.__patterns.xml.read_match()}return o||(n+=this._input.match(/[\s\S]*/g)[0]),n=n.replace(a.allLineBreaks,'\n'),this._create_token(p.STRING,n)}}return null},x.prototype._read_string_recursive=function(t,e,n){var o,i;'\''===t?i=this.__patterns.single_quote:'"'===t?i=this.__patterns.double_quote:'`'===t?i=this.__patterns.template_text:'}'===t&&(i=this.__patterns.template_expression);for(var r=i.read(),s='';this._input.hasNext();){if((s=this._input.next())===t||!e&&a.newline.test(s)){this._input.back();break}'\\'===s&&this._input.hasNext()?('x'===(o=this._input.peek())||'u'===o?this.has_char_escapes=!0:'\r'===o&&'\n'===this._input.peek(1)&&this._input.next(),s+=this._input.next()):n&&('${'===n&&'$'===s&&'{'===this._input.peek()&&(s+=this._input.next()),n===s&&(s+='`'===t?this._read_string_recursive('}',e,'`'):this._read_string_recursive('`',e,'${'),this._input.hasNext()&&(s+=this._input.next()))),r+=s+=i.read()}return r},t.exports.Tokenizer=x,t.exports.TOKEN=p,t.exports.positionable_operators=m.slice(),t.exports.line_starters=O.slice()},function(t){var e=RegExp.prototype.hasOwnProperty('sticky');function n(t){this.__input=t||'',this.__input_length=this.__input.length,this.__position=0}n.prototype.restart=function(){this.__position=0},n.prototype.back=function(){this.__position>0&&(this.__position-=1)},n.prototype.hasNext=function(){return this.__position<this.__input_length},n.prototype.next=function(){var t=null;return this.hasNext()&&(t=this.__input.charAt(this.__position),this.__position+=1),t},n.prototype.peek=function(t){var e=null;return t=t||0,(t+=this.__position)>=0&&t<this.__input_length&&(e=this.__input.charAt(t)),e},n.prototype.__match=function(t,n){t.lastIndex=n;var o=t.exec(this.__input);return!o||e&&t.sticky||o.index!==n&&(o=null),o},n.prototype.test=function(t,e){return e=e||0,(e+=this.__position)>=0&&e<this.__input_length&&!!this.__match(t,e)},n.prototype.testChar=function(t,e){var n=this.peek(e);return t.lastIndex=0,null!==n&&t.test(n)},n.prototype.match=function(t){var e=this.__match(t,this.__position);return e?this.__position+=e[0].length:e=null,e},n.prototype.read=function(t,e,n){var o,i='';return t&&(o=this.match(t))&&(i+=o[0]),!e||!o&&t||(i+=this.readUntil(e,n)),i},n.prototype.readUntil=function(t,e){var n,o=this.__position;t.lastIndex=this.__position;var i=t.exec(this.__input);return i?(o=i.index,e&&(o+=i[0].length)):o=this.__input_length,n=this.__input.substring(this.__position,o),this.__position=o,n},n.prototype.readUntilAfter=function(t){return this.readUntil(t,!0)},n.prototype.get_regexp=function(t,n){var o=null,i='g';return n&&e&&(i='y'),"string"==typeof t&&''!==t?o=new RegExp(t,i):t&&(o=new RegExp(t.source,i)),o},n.prototype.get_literal_regexp=function(t){return RegExp(t.replace(/[-\/\\^$*+?.()|[\]{}]/g,'\\$&'))},n.prototype.peekUntilAfter=function(t){var e=this.__position,n=this.readUntilAfter(t);return this.__position=e,n},n.prototype.lookBack=function(t){var e=this.__position-1;return e>=t.length&&this.__input.substring(e-t.length,e).toLowerCase()===t},t.exports.InputScanner=n},function(t,e,n){var o=n(8).InputScanner,i=n(3).Token,r=n(10).TokenStream,s=n(11).WhitespacePattern,a={START:'TK_START',RAW:'TK_RAW',EOF:'TK_EOF'},l=function(t,e){this._input=new o(t),this._options=e||{},this.__tokens=null,this._patterns={},this._patterns.whitespace=new s(this._input)};l.prototype.tokenize=function(){var t;this._input.restart(),this.__tokens=new r,this._reset();for(var e=new i(a.START,''),n=null,o=[],s=new r;e.type!==a.EOF;){for(t=this._get_next_token(e,n);this._is_comment(t);)s.add(t),t=this._get_next_token(e,n);s.isEmpty()||(t.comments_before=s,s=new r),t.parent=n,this._is_opening(t)?(o.push(n),n=t):n&&this._is_closing(t,n)&&(t.opened=n,n.closed=t,n=o.pop(),t.parent=n),t.previous=e,e.next=t,this.__tokens.add(t),e=t}return this.__tokens},l.prototype._is_first_token=function(){return this.__tokens.isEmpty()},l.prototype._reset=function(){},l.prototype._get_next_token=function(t,e){this._readWhitespace();var n=this._input.read(/.+/g);return n?this._create_token(a.RAW,n):this._create_token(a.EOF,'')},l.prototype._is_comment=function(t){return!1},l.prototype._is_opening=function(t){return!1},l.prototype._is_closing=function(t,e){return!1},l.prototype._create_token=function(t,e){return new i(t,e,this._patterns.whitespace.newline_count,this._patterns.whitespace.whitespace_before_token)},l.prototype._readWhitespace=function(){return this._patterns.whitespace.read()},t.exports.Tokenizer=l,t.exports.TOKEN=a},function(t){function e(t){this.__tokens=[],this.__tokens_length=this.__tokens.length,this.__position=0,this.__parent_token=t}e.prototype.restart=function(){this.__position=0},e.prototype.isEmpty=function(){return 0===this.__tokens_length},e.prototype.hasNext=function(){return this.__position<this.__tokens_length},e.prototype.next=function(){var t=null;return this.hasNext()&&(t=this.__tokens[this.__position],this.__position+=1),t},e.prototype.peek=function(t){var e=null;return t=t||0,(t+=this.__position)>=0&&t<this.__tokens_length&&(e=this.__tokens[t]),e},e.prototype.add=function(t){this.__parent_token&&(t.parent=this.__parent_token),this.__tokens.push(t),this.__tokens_length+=1},t.exports.TokenStream=e},function(t,e,n){var o=n(12).Pattern;function i(t,e){o.call(this,t,e),e?this._line_regexp=this._input.get_regexp(e._line_regexp):this.__set_whitespace_patterns('',''),this.newline_count=0,this.whitespace_before_token=''}i.prototype=new o,i.prototype.__set_whitespace_patterns=function(t,e){t+='\\t ',e+='\\n\\r',this._match_pattern=this._input.get_regexp('['+t+e+']+',!0),this._newline_regexp=this._input.get_regexp('\\r\\n|['+e+']')},i.prototype.read=function(){this.newline_count=0,this.whitespace_before_token='';var t=this._input.read(this._match_pattern);if(' '===t)this.whitespace_before_token=' ';else if(t){var e=this.__split(this._newline_regexp,t);this.newline_count=e.length-1,this.whitespace_before_token=e[this.newline_count]}return t},i.prototype.matching=function(t,e){var n=this._create();return n.__set_whitespace_patterns(t,e),n._update(),n},i.prototype._create=function(){return new i(this._input,this)},i.prototype.__split=function(t,e){t.lastIndex=0;for(var n=0,o=[],i=t.exec(e);i;)o.push(e.substring(n,i.index)),n=i.index+i[0].length,i=t.exec(e);return n<e.length?o.push(e.substring(n,e.length)):o.push(''),o},t.exports.WhitespacePattern=i},function(t){function e(t,e){this._input=t,this._starting_pattern=null,this._match_pattern=null,this._until_pattern=null,this._until_after=!1,e&&(this._starting_pattern=this._input.get_regexp(e._starting_pattern,!0),this._match_pattern=this._input.get_regexp(e._match_pattern,!0),this._until_pattern=this._input.get_regexp(e._until_pattern),this._until_after=e._until_after)}e.prototype.read=function(){var t=this._input.read(this._starting_pattern);return this._starting_pattern&&!t||(t+=this._input.read(this._match_pattern,this._until_pattern,this._until_after)),t},e.prototype.read_match=function(){return this._input.match(this._match_pattern)},e.prototype.until_after=function(t){var e=this._create();return e._until_after=!0,e._until_pattern=this._input.get_regexp(t),e._update(),e},e.prototype.until=function(t){var e=this._create();return e._until_after=!1,e._until_pattern=this._input.get_regexp(t),e._update(),e},e.prototype.starting_with=function(t){var e=this._create();return e._starting_pattern=this._input.get_regexp(t,!0),e._update(),e},e.prototype.matching=function(t){var e=this._create();return e._match_pattern=this._input.get_regexp(t,!0),e._update(),e},e.prototype._create=function(){return new e(this._input,this)},e.prototype._update=function(){},t.exports.Pattern=e},function(t){function e(t,e){t='string'==typeof t?t:t.source,e='string'==typeof e?e:e.source,this.__directives_block_pattern=new RegExp(t+/ beautify( \w+[:]\w+)+ /.source+e,'g'),this.__directive_pattern=/ (\w+)[:](\w+)/g,this.__directives_end_ignore_pattern=new RegExp(t+/\sbeautify\signore:end\s/.source+e,'g')}e.prototype.get_directives=function(t){if(!t.match(this.__directives_block_pattern))return null;var e={};this.__directive_pattern.lastIndex=0;for(var n=this.__directive_pattern.exec(t);n;)e[n[1]]=n[2],n=this.__directive_pattern.exec(t);return e},e.prototype.readIgnored=function(t){return t.readUntilAfter(this.__directives_end_ignore_pattern)},t.exports.Directives=e},function(t,e,n){var o=n(12).Pattern,i={django:!1,erb:!1,handlebars:!1,php:!1,smarty:!1};function r(t,e){o.call(this,t,e),this.__template_pattern=null,this._disabled=Object.assign({},i),this._excluded=Object.assign({},i),e&&(this.__template_pattern=this._input.get_regexp(e.__template_pattern),this._excluded=Object.assign(this._excluded,e._excluded),this._disabled=Object.assign(this._disabled,e._disabled));var n=new o(t);this.__patterns={handlebars_comment:n.starting_with(/{{!--/).until_after(/--}}/),handlebars_unescaped:n.starting_with(/{{{/).until_after(/}}}/),handlebars:n.starting_with(/{{/).until_after(/}}/),php:n.starting_with(/<\?(?:[= ]|php)/).until_after(/\?>/),erb:n.starting_with(/<%[^%]/).until_after(/[^%]%>/),django:n.starting_with(/{%/).until_after(/%}/),django_value:n.starting_with(/{{/).until_after(/}}/),django_comment:n.starting_with(/{#/).until_after(/#}/),smarty:n.starting_with(/{(?=[^}{\s\n])/).until_after(/[^\s\n]}/),smarty_comment:n.starting_with(/{\*/).until_after(/\*}/),smarty_literal:n.starting_with(/{literal}/).until_after(/{\/literal}/)}}r.prototype=new o,r.prototype._create=function(){return new r(this._input,this)},r.prototype._update=function(){this.__set_templated_pattern()},r.prototype.disable=function(t){var e=this._create();return e._disabled[t]=!0,e._update(),e},r.prototype.read_options=function(t){var e=this._create();for(var n in i)e._disabled[n]=-1===t.templating.indexOf(n);return e._update(),e},r.prototype.exclude=function(t){var e=this._create();return e._excluded[t]=!0,e._update(),e},r.prototype.read=function(){var t='';t=this._match_pattern?this._input.read(this._starting_pattern):this._input.read(this._starting_pattern,this.__template_pattern);for(var e=this._read_template();e;)this._match_pattern?e+=this._input.read(this._match_pattern):e+=this._input.readUntil(this.__template_pattern),t+=e,e=this._read_template();return this._until_after&&(t+=this._input.readUntilAfter(this._until_pattern)),t},r.prototype.__set_templated_pattern=function(){var t=[];this._disabled.php||t.push(this.__patterns.php._starting_pattern.source),this._disabled.handlebars||t.push(this.__patterns.handlebars._starting_pattern.source),this._disabled.erb||t.push(this.__patterns.erb._starting_pattern.source),this._disabled.django||(t.push(this.__patterns.django._starting_pattern.source),t.push(this.__patterns.django_value._starting_pattern.source),t.push(this.__patterns.django_comment._starting_pattern.source)),this._disabled.smarty||t.push(this.__patterns.smarty._starting_pattern.source),this._until_pattern&&t.push(this._until_pattern.source),this.__template_pattern=this._input.get_regexp('(?:'+t.join('|')+')')},r.prototype._read_template=function(){var t='',e=this._input.peek();if('<'===e){var n=this._input.peek(1);this._disabled.php||this._excluded.php||'?'!==n||(t=t||this.__patterns.php.read()),this._disabled.erb||this._excluded.erb||'%'!==n||(t=t||this.__patterns.erb.read())}else'{'===e&&(this._disabled.handlebars||this._excluded.handlebars||(t=(t=(t=t||this.__patterns.handlebars_comment.read())||this.__patterns.handlebars_unescaped.read())||this.__patterns.handlebars.read()),this._disabled.django||(this._excluded.django||this._excluded.handlebars||(t=t||this.__patterns.django_value.read()),this._excluded.django||(t=(t=t||this.__patterns.django_comment.read())||this.__patterns.django.read())),this._disabled.smarty||this._disabled.django&&this._disabled.handlebars&&(t=(t=(t=t||this.__patterns.smarty_comment.read())||this.__patterns.smarty_literal.read())||this.__patterns.smarty.read()));return t},t.exports.TemplatablePattern=r}],e={};var n=function n(o){var i=e[o];if(void 0!==i)return i.exports;var r=e[o]={exports:{}};return t[o](r,r.exports,n),r.exports}(0);o=n}();var i=o;1&&(void 0===(n=function(){return{js_beautify:i}}.apply(e,[]))||(t.exports=n))}()},3410:(t,e,n)=>{var o,i,r;1&&(i=[n(9050),n(2316)],void 0===(r='function'==typeof(o=function(t,e){var n=Array.prototype.slice;function o(t,e,n){return n.length<=4?t.call(e,n[0],n[1],n[2],n[3]):t.apply(e,n)}function i(t,e){return n.call(t,e)}function r(e,n){return null!=e&&(t.isArray(n)||(n=i(arguments,1)),t.all(n,(function(t){return t in e})))}var s=function(){var e=!1,n=-1;function o(){n++,e=!0,t.defer((function(){e=!1}))}return function(){return e||o(),n}}();function a(){this.registeredObjects=[],this.cidIndexes=[]}function l(e,n,o,i){for(var r,s=0,a=n.length;s<a;s++)if(r=n[s]){if("on"===e){if(!i.objectRegistry.register(r))continue}else if(!i.objectRegistry.unregister(r))continue;t.isFunction(r[e])&&r[e]("all",o,i)}}function c(e,n){var o=n.type,i=n.undoTypes,r=!i[o]||i[o][e];t.isFunction(r)&&r(n.object,n.before,n.after,n.options)}function u(e,o,i,r,s){if(!(i.isCurrentlyUndoRedoing||"undo"===e&&-1===i.pointer||"redo"===e&&i.pointer===i.length-1)){i.isCurrentlyUndoRedoing=!0;var a,l,c="undo"===e;for(s?l=c&&i.pointer===i.length-1||!c&&-1===i.pointer?t.clone(i.models):n.apply(i.models,c?[0,i.pointer]:[i.pointer,i.length-1]):(a=i.at(c?i.pointer:i.pointer+1),l=r?i.where({magicFusionIndex:a.get("magicFusionIndex")}):[a]),i.pointer+=(c?-1:1)*l.length;a=c?l.pop():l.shift();)a[e]();i.isCurrentlyUndoRedoing=!1,o.trigger(e,o)}}function p(t,e){var n=t.condition,i=typeof n;return"function"===i?!!o(n,t,e):"boolean"!==i||n}function h(t,e,n,i){if(t.track&&!t.isCurrentlyUndoRedoing&&e in i&&p(i[e],n)){var a=o(i[e]["on"],i[e],n);if(r(a,"object","before","after")){if(a.type=e,a.magicFusionIndex=s(),a.undoTypes=i,t.pointer<t.length-1)for(var l=t.length-t.pointer-1;l--;)t.pop();t.pointer=t.length,t.add(a),t.length>t.maximumStackLength&&(t.shift(),t.pointer--)}}}a.prototype={isRegistered:function(e){return e&&e.cid?this.registeredObjects[e.cid]:t.contains(this.registeredObjects,e)},register:function(t){return!this.isRegistered(t)&&(t&&t.cid?(this.registeredObjects[t.cid]=t,this.cidIndexes.push(t.cid)):this.registeredObjects.push(t),!0)},unregister:function(e){if(this.isRegistered(e)){if(e&&e.cid)delete this.registeredObjects[e.cid],this.cidIndexes.splice(t.indexOf(this.cidIndexes,e.cid),1);else{var n=t.indexOf(this.registeredObjects,e);this.registeredObjects.splice(n,1)}return!0}return!1},get:function(){return t.map(this.cidIndexes,(function(t){return this.registeredObjects[t]}),this).concat(this.registeredObjects)}};var d={add:{undo:function(t,e,n,o){t.remove(n,o)},redo:function(t,e,n,o){o.index&&(o.at=o.index),t.add(n,o)},on:function(e,n,o){return{object:n,before:void 0,after:e,options:t.clone(o)}}},remove:{undo:function(t,e,n,o){"index"in o&&(o.at=o.index),t.add(e,o)},redo:function(t,e,n,o){t.remove(e,o)},on:function(e,n,o){return{object:n,before:e,after:void 0,options:t.clone(o)}}},change:{undo:function(e,n,o,i){t.isEmpty(n)?t.each(t.keys(o),e.unset,e):(e.set(n),i&&i.unsetData&&i.unsetData.before&&i.unsetData.before.length&&t.each(i.unsetData.before,e.unset,e))},redo:function(e,n,o,i){t.isEmpty(o)?t.each(t.keys(n),e.unset,e):(e.set(o),i&&i.unsetData&&i.unsetData.after&&i.unsetData.after.length&&t.each(i.unsetData.after,e.unset,e))},on:function(e,n){var o=e.changedAttributes(),i=t.keys(o),r=t.pick(e.previousAttributes(),i),s=t.keys(r),a=(n||(n={})).unsetData={after:[],before:[]};return i.length!=s.length&&(i.length>s.length?t.each(i,(function(t){t in r||a.before.push(t)}),this):t.each(s,(function(t){t in o||a.after.push(t)}))),{object:e,before:r,after:o,options:t.clone(n)}}},reset:{undo:function(t,e,n){t.reset(e)},redo:function(t,e,n){t.reset(n)},on:function(e,n){return{object:e,before:n.previousModels,after:t.clone(e.models)}}}};function f(){}function g(e,n,o,i){if("object"==typeof n)return t.each(n,(function(t,n){2===e?g(e,t,o,i):g(e,n,t,o)}));switch(e){case 0:r(o,"undo","redo","on")&&t.all(t.pick(o,"undo","redo","on"),t.isFunction)&&(i[n]=o);break;case 1:i[n]&&t.isObject(o)&&(i[n]=t.extend({},i[n],o));break;case 2:delete i[n]}return this}f.prototype=d;var m=e.Model.extend({defaults:{type:null,object:null,before:null,after:null,magicFusionIndex:null},undo:function(t){c("undo",this.attributes)},redo:function(t){c("redo",this.attributes)}}),v=e.Collection.extend({model:m,pointer:-1,track:!1,isCurrentlyUndoRedoing:!1,maximumStackLength:1/0,setMaxLength:function(t){this.maximumStackLength=t}}),y=e.Model.extend({defaults:{maximumStackLength:1/0,track:!1},initialize:function(e){this.stack=new v,this.objectRegistry=new a,this.undoTypes=new f,this.stack.setMaxLength(this.get("maximumStackLength")),this.on("change:maximumStackLength",(function(t,e){this.stack.setMaxLength(e)}),this),e&&e.track&&this.startTracking(),e&&e.register&&(t.isArray(e.register)||t.isArguments(e.register)?o(this.register,this,e.register):this.register(e.register))},startTracking:function(){this.set("track",!0),this.stack.track=!0},stopTracking:function(){this.set("track",!1),this.stack.track=!1},isTracking:function(){return this.get("track")},_addToStack:function(t){h(this.stack,t,i(arguments,1),this.undoTypes)},register:function(){l("on",arguments,this._addToStack,this)},unregister:function(){l("off",arguments,this._addToStack,this)},unregisterAll:function(){o(this.unregister,this,this.objectRegistry.get())},undo:function(t){u("undo",this,this.stack,t)},undoAll:function(){u("undo",this,this.stack,!1,!0)},redo:function(t){u("redo",this,this.stack,t)},redoAll:function(){u("redo",this,this.stack,!1,!0)},isAvailable:function(t){var e=this.stack,n=e.length;switch(t){case"undo":return n>0&&e.pointer>-1;case"redo":return n>0&&e.pointer<n-1;default:return!1}},merge:function(e){for(var n,o=t.isArray(e)?e:i(arguments);n=o.pop();)n instanceof y&&n.stack instanceof v&&(n.stack=this.stack)},addUndoType:function(t,e){g(0,t,e,this.undoTypes)},changeUndoType:function(t,e){g(1,t,e,this.undoTypes)},removeUndoType:function(t){g(2,t,void 0,this.undoTypes)},clear:function(){this.stack.reset(),this.stack.pointer=-1}});return t.extend(y,{defaults:function(e){t.extend(y.prototype.defaults,e)},addUndoType:function(t,e){g(0,t,e,d)},changeUndoType:function(t,e){g(1,t,e,d)},removeUndoType:function(t){g(2,t,void 0,d)}}),e.UndoManager=y})?o.apply(e,i):o)||(t.exports=r))},2316:(t,e,n)=>{var o,i;!function(r){var s='object'==typeof self&&self.self===self&&self||'object'==typeof n.g&&n.g.global===n.g&&n.g;if(1)o=[n(9050),n(2815),e],i=function(t,e,n){s.Backbone=function(t,e,n,o){var i=t.Backbone,r=Array.prototype.slice;e.VERSION='1.4.1',e.$=o,e.noConflict=function(){return t.Backbone=i,this},e.emulateHTTP=!1,e.emulateJSON=!1;var s,a=e.Events={},l=/\s+/,c=function(t,e,o,i,r){var s,a=0;if(o&&'object'==typeof o){void 0!==i&&'context'in r&&void 0===r.context&&(r.context=i);for(s=n.keys(o);a<s.length;a++)e=c(t,e,s[a],o[s[a]],r)}else if(o&&l.test(o))for(s=o.split(l);a<s.length;a++)e=t(e,s[a],i,r);else e=t(e,o,i,r);return e};a.on=function(t,e,n){(this._events=c(u,this._events||{},t,e,{context:n,ctx:this,listening:s}),s)&&((this._listeners||(this._listeners={}))[s.id]=s,s.interop=!1);return this},a.listenTo=function(t,e,o){if(!t)return this;var i=t._listenId||(t._listenId=n.uniqueId('l')),r=this._listeningTo||(this._listeningTo={}),a=s=r[i];a||(this._listenId||(this._listenId=n.uniqueId('l')),a=s=r[i]=new m(this,t));var l=p(t,e,o,this);if(s=void 0,l)throw l;return a.interop&&a.on(e,o),this};var u=function(t,e,n,o){if(n){var i=t[e]||(t[e]=[]),r=o.context,s=o.ctx,a=o.listening;a&&a.count++,i.push({callback:n,context:r,ctx:r||s,listening:a})}return t},p=function(t,e,n,o){try{t.on(e,n,o)}catch(t){return t}};a.off=function(t,e,n){return this._events?(this._events=c(h,this._events,t,e,{context:n,listeners:this._listeners}),this):this},a.stopListening=function(t,e,o){var i=this._listeningTo;if(!i)return this;for(var r=t?[t._listenId]:n.keys(i),s=0;s<r.length;s++){var a=i[r[s]];if(!a)break;a.obj.off(e,o,this),a.interop&&a.off(e,o)}return n.isEmpty(i)&&(this._listeningTo=void 0),this};var h=function(t,e,o,i){if(t){var r,s=i.context,a=i.listeners,l=0;if(e||s||o){for(r=e?[e]:n.keys(t);l<r.length;l++){var c=t[e=r[l]];if(!c)break;for(var u=[],p=0;p<c.length;p++){var h=c[p];if(o&&o!==h.callback&&o!==h.callback._callback||s&&s!==h.context)u.push(h);else{var d=h.listening;d&&d.off(e,o)}}u.length?t[e]=u:delete t[e]}return t}for(r=n.keys(a);l<r.length;l++)a[r[l]].cleanup()}};a.once=function(t,e,n){var o=c(d,{},t,e,this.off.bind(this));return'string'==typeof t&&null==n&&(e=void 0),this.on(o,e,n)},a.listenToOnce=function(t,e,n){var o=c(d,{},e,n,this.stopListening.bind(this,t));return this.listenTo(t,o)};var d=function(t,e,o,i){if(o){var r=t[e]=n.once((function(){i(e,r),o.apply(this,arguments)}));r._callback=o}return t};a.trigger=function(t){if(!this._events)return this;for(var e=Math.max(0,arguments.length-1),n=Array(e),o=0;o<e;o++)n[o]=arguments[o+1];return c(f,this._events,t,void 0,n),this};var f=function(t,e,n,o){if(t){var i=t[e],r=t.all;i&&r&&(r=r.slice()),i&&g(i,o),r&&g(r,[e].concat(o))}return t},g=function(t,e){var n,o=-1,i=t.length,r=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++o<i;)(n=t[o]).callback.call(n.ctx);return;case 1:for(;++o<i;)(n=t[o]).callback.call(n.ctx,r);return;case 2:for(;++o<i;)(n=t[o]).callback.call(n.ctx,r,s);return;case 3:for(;++o<i;)(n=t[o]).callback.call(n.ctx,r,s,a);return;default:for(;++o<i;)(n=t[o]).callback.apply(n.ctx,e);return}},m=function(t,e){this.id=t._listenId,this.listener=t,this.obj=e,this.interop=!0,this.count=0,this._events=void 0};m.prototype.on=a.on,m.prototype.off=function(t,e){var n;this.interop?(this._events=c(h,this._events,t,e,{context:void 0,listeners:void 0}),n=!this._events):(this.count--,n=0===this.count),n&&this.cleanup()},m.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},a.bind=a.on,a.unbind=a.off,n.extend(e,a);var v=e.Model=function(t,e){var o=t||{};e||(e={}),this.preinitialize.apply(this,arguments),this.cid=n.uniqueId(this.cidPrefix),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(o=this.parse(o,e)||{});var i=n.result(this,'defaults');o=n.defaults(n.extend({},i,o),i),this.set(o,e),this.changed={},this.initialize.apply(this,arguments)};n.extend(v.prototype,a,{changed:null,validationError:null,idAttribute:'id',cidPrefix:'c',preinitialize:function(){},initialize:function(){},toJSON:function(t){return n.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return n.escape(this.get(t))},has:function(t){return null!=this.get(t)},matches:function(t){return!!n.iteratee(t,this)(this.attributes)},set:function(t,e,o){if(null==t)return this;var i;if('object'==typeof t?(i=t,o=e):(i={})[t]=e,o||(o={}),!this._validate(i,o))return!1;var r=o.unset,s=o.silent,a=[],l=this._changing;this._changing=!0,l||(this._previousAttributes=n.clone(this.attributes),this.changed={});var c=this.attributes,u=this.changed,p=this._previousAttributes;for(var h in i)e=i[h],n.isEqual(c[h],e)||a.push(h),n.isEqual(p[h],e)?delete u[h]:u[h]=e,r?delete c[h]:c[h]=e;if(this.idAttribute in i){var d=this.id;this.id=this.get(this.idAttribute),this.trigger('changeId',this,d,o)}if(!s){a.length&&(this._pending=o);for(var f=0;f<a.length;f++)this.trigger('change:'+a[f],this,c[a[f]],o)}if(l)return this;if(!s)for(;this._pending;)o=this._pending,this._pending=!1,this.trigger('change',this,o);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,n.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var o in this.attributes)e[o]=void 0;return this.set(e,n.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!n.isEmpty(this.changed):n.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&n.clone(this.changed);var e,o=this._changing?this._previousAttributes:this.attributes,i={};for(var r in t){var s=t[r];n.isEqual(o[r],s)||(i[r]=s,e=!0)}return!!e&&i},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(t){t=n.extend({parse:!0},t);var e=this,o=t.success;return t.success=function(n){var i=t.parse?e.parse(n,t):n;if(!e.set(i,t))return!1;o&&o.call(t.context,e,n,t),e.trigger('sync',e,n,t)},B(this,t),this.sync('read',this,t)},save:function(t,e,o){var i;null==t||'object'==typeof t?(i=t,o=e):(i={})[t]=e;var r=(o=n.extend({validate:!0,parse:!0},o)).wait;if(i&&!r){if(!this.set(i,o))return!1}else if(!this._validate(i,o))return!1;var s=this,a=o.success,l=this.attributes;o.success=function(t){s.attributes=l;var e=o.parse?s.parse(t,o):t;if(r&&(e=n.extend({},i,e)),e&&!s.set(e,o))return!1;a&&a.call(o.context,s,t,o),s.trigger('sync',s,t,o)},B(this,o),i&&r&&(this.attributes=n.extend({},l,i));var c=this.isNew()?'create':o.patch?'patch':'update';'patch'!==c||o.attrs||(o.attrs=i);var u=this.sync(c,this,o);return this.attributes=l,u},destroy:function(t){t=t?n.clone(t):{};var e=this,o=t.success,i=t.wait,r=function(){e.stopListening(),e.trigger('destroy',e,e.collection,t)};t.success=function(n){i&&r(),o&&o.call(t.context,e,n,t),e.isNew()||e.trigger('sync',e,n,t)};var s=!1;return this.isNew()?n.defer(t.success):(B(this,t),s=this.sync('delete',this,t)),i||r(),s},url:function(){var t=n.result(this,'urlRoot')||n.result(this.collection,'url')||Y();if(this.isNew())return t;var e=this.get(this.idAttribute);return t.replace(/[^\/]$/,'$&/')+encodeURIComponent(e)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},n.extend({},t,{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=n.extend({},this.attributes,t);var o=this.validationError=this.validate(t,e)||null;return!o||(this.trigger('invalid',this,o,n.extend(e,{validationError:o})),!1)}});var y=e.Collection=function(t,e){e||(e={}),this.preinitialize.apply(this,arguments),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,n.extend({silent:!0},e))},_={add:!0,remove:!0,merge:!0},O={add:!0,remove:!1},b=function(t,e,n){n=Math.min(Math.max(n,0),t.length);var o,i=Array(t.length-n),r=e.length;for(o=0;o<i.length;o++)i[o]=t[o+n];for(o=0;o<r;o++)t[o+n]=e[o];for(o=0;o<i.length;o++)t[o+r+n]=i[o]};n.extend(y.prototype,a,{model:v,preinitialize:function(){},initialize:function(){},toJSON:function(t){return this.map((function(e){return e.toJSON(t)}))},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,n.extend({merge:!1},e,O))},remove:function(t,e){e=n.extend({},e);var o=!n.isArray(t);t=o?[t]:t.slice();var i=this._removeModels(t,e);return!e.silent&&i.length&&(e.changes={added:[],merged:[],removed:i},this.trigger('update',this,e)),o?i[0]:i},set:function(t,e){if(null!=t){(e=n.extend({},_,e)).parse&&!this._isModel(t)&&(t=this.parse(t,e)||[]);var o=!n.isArray(t);t=o?[t]:t.slice();var i=e.at;null!=i&&(i=+i),i>this.length&&(i=this.length),i<0&&(i+=this.length+1);var r,s,a=[],l=[],c=[],u=[],p={},h=e.add,d=e.merge,f=e.remove,g=!1,m=this.comparator&&null==i&&!1!==e.sort,v=n.isString(this.comparator)?this.comparator:null;for(s=0;s<t.length;s++){r=t[s];var y=this.get(r);if(y){if(d&&r!==y){var O=this._isModel(r)?r.attributes:r;e.parse&&(O=y.parse(O,e)),y.set(O,e),c.push(y),m&&!g&&(g=y.hasChanged(v))}p[y.cid]||(p[y.cid]=!0,a.push(y)),t[s]=y}else h&&(r=t[s]=this._prepareModel(r,e))&&(l.push(r),this._addReference(r,e),p[r.cid]=!0,a.push(r))}if(f){for(s=0;s<this.length;s++)p[(r=this.models[s]).cid]||u.push(r);u.length&&this._removeModels(u,e)}var w=!1,x=!m&&h&&f;if(a.length&&x?(w=this.length!==a.length||n.some(this.models,(function(t,e){return t!==a[e]})),this.models.length=0,b(this.models,a,0),this.length=this.models.length):l.length&&(m&&(g=!0),b(this.models,l,null==i?this.length:i),this.length=this.models.length),g&&this.sort({silent:!0}),!e.silent){for(s=0;s<l.length;s++)null!=i&&(e.index=i+s),(r=l[s]).trigger('add',r,this,e);(g||w)&&this.trigger('sort',this,e),(l.length||u.length||c.length)&&(e.changes={added:l,removed:u,merged:c},this.trigger('update',this,e))}return o?t[0]:t}},reset:function(t,e){e=e?n.clone(e):{};for(var o=0;o<this.models.length;o++)this._removeReference(this.models[o],e);return e.previousModels=this.models,this._reset(),t=this.add(t,n.extend({silent:!0},e)),e.silent||this.trigger('reset',this,e),t},push:function(t,e){return this.add(t,n.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t)},unshift:function(t,e){return this.add(t,n.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t)},slice:function(){return r.apply(this.models,arguments)},get:function(t){if(null!=t)return this._byId[t]||this._byId[this.modelId(this._isModel(t)?t.attributes:t,t.idAttribute)]||t.cid&&this._byId[t.cid]},has:function(t){return null!=this.get(t)},at:function(t){return t<0&&(t+=this.length),this.models[t]},where:function(t,e){return this[e?'find':'filter'](t)},findWhere:function(t){return this.where(t,!0)},sort:function(t){var e=this.comparator;if(!e)throw new Error('Cannot sort a set without a comparator');t||(t={});var o=e.length;return n.isFunction(e)&&(e=e.bind(this)),1===o||n.isString(e)?this.models=this.sortBy(e):this.models.sort(e),t.silent||this.trigger('sort',this,t),this},pluck:function(t){return this.map(t+'')},fetch:function(t){var e=(t=n.extend({parse:!0},t)).success,o=this;return t.success=function(n){var i=t.reset?'reset':'set';o[i](n,t),e&&e.call(t.context,o,n,t),o.trigger('sync',o,n,t)},B(this,t),this.sync('read',this,t)},create:function(t,e){var o=(e=e?n.clone(e):{}).wait;if(!(t=this._prepareModel(t,e)))return!1;o||this.add(t,e);var i=this,r=e.success;return e.success=function(t,e,n){o&&i.add(t,n),r&&r.call(n.context,t,e,n)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(t,e){return t[e||this.model.prototype.idAttribute||'id']},values:function(){return new x(this,S)},keys:function(){return new x(this,k)},entries:function(){return new x(this,P)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){return this._isModel(t)?(t.collection||(t.collection=this),t):((e=e?n.clone(e):{}).collection=this,(o=this.model.prototype?new this.model(t,e):this.model(t,e)).validationError?(this.trigger('invalid',this,o.validationError,e),!1):o);var o},_removeModels:function(t,e){for(var n=[],o=0;o<t.length;o++){var i=this.get(t[o]);if(i){var r=this.indexOf(i);this.models.splice(r,1),this.length--,delete this._byId[i.cid];var s=this.modelId(i.attributes,i.idAttribute);null!=s&&delete this._byId[s],e.silent||(e.index=r,i.trigger('remove',i,this,e)),n.push(i),this._removeReference(i,e)}}return n},_isModel:function(t){return t instanceof v},_addReference:function(t,e){this._byId[t.cid]=t;var n=this.modelId(t.attributes,t.idAttribute);null!=n&&(this._byId[n]=t),t.on('all',this._onModelEvent,this)},_removeReference:function(t,e){delete this._byId[t.cid];var n=this.modelId(t.attributes,t.idAttribute);null!=n&&delete this._byId[n],this===t.collection&&delete t.collection,t.off('all',this._onModelEvent,this)},_onModelEvent:function(t,e,n,o){if(e){if(('add'===t||'remove'===t)&&n!==this)return;if('destroy'===t&&this.remove(e,o),'changeId'===t){var i=this.modelId(e.previousAttributes(),e.idAttribute),r=this.modelId(e.attributes,e.idAttribute);null!=i&&delete this._byId[i],null!=r&&(this._byId[r]=e)}}this.trigger.apply(this,arguments)}});var w='function'==typeof Symbol&&Symbol.iterator;w&&(y.prototype[w]=y.prototype.values);var x=function(t,e){this._collection=t,this._kind=e,this._index=0},S=1,k=2,P=3;w&&(x.prototype[w]=function(){return this});x.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var t,e=this._collection.at(this._index);if(this._index++,this._kind===S)t=e;else{var n=this._collection.modelId(e.attributes,e.idAttribute);t=this._kind===k?n:[n,e]}return{value:t,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var C=e.View=function(t){this.cid=n.uniqueId('view'),this.preinitialize.apply(this,arguments),n.extend(this,n.pick(t,E)),this._ensureElement(),this.initialize.apply(this,arguments)},T=/^(\S+)\s*(.*)$/,E=['model','collection','el','id','attributes','className','tagName','events'];n.extend(C.prototype,a,{tagName:'div',$:function(t){return this.$el.find(t)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(t){return this.undelegateEvents(),this._setElement(t),this.delegateEvents(),this},_setElement:function(t){this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0]},delegateEvents:function(t){if(t||(t=n.result(this,'events')),!t)return this;for(var e in this.undelegateEvents(),t){var o=t[e];if(n.isFunction(o)||(o=this[o]),o){var i=e.match(T);this.delegate(i[1],i[2],o.bind(this))}}return this},delegate:function(t,e,n){return this.$el.on(t+'.delegateEvents'+this.cid,e,n),this},undelegateEvents:function(){return this.$el&&this.$el.off('.delegateEvents'+this.cid),this},undelegate:function(t,e,n){return this.$el.off(t+'.delegateEvents'+this.cid,e,n),this},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){if(this.el)this.setElement(n.result(this,'el'));else{var t=n.extend({},n.result(this,'attributes'));this.id&&(t.id=n.result(this,'id')),this.className&&(t['class']=n.result(this,'className')),this.setElement(this._createElement(n.result(this,'tagName'))),this._setAttributes(t)}},_setAttributes:function(t){this.$el.attr(t)}});var A=function(t,e,n,o){switch(e){case 1:return function(){return t[n](this[o])};case 2:return function(e){return t[n](this[o],e)};case 3:return function(e,i){return t[n](this[o],$(e,this),i)};case 4:return function(e,i,r){return t[n](this[o],$(e,this),i,r)};default:return function(){var e=r.call(arguments);return e.unshift(this[o]),t[n].apply(t,e)}}},Q=function(t,e,o,i){n.each(o,(function(n,o){e[o]&&(t.prototype[o]=A(e,n,o,i))}))},$=function(t,e){return n.isFunction(t)?t:n.isObject(t)&&!e._isModel(t)?j(t):n.isString(t)?function(e){return e.get(t)}:t},j=function(t){var e=n.matches(t);return function(t){return e(t.attributes)}},R={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},M={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};n.each([[y,R,'models'],[v,M,'attributes']],(function(t){var e=t[0],o=t[1],i=t[2];e.mixin=function(t){var o=n.reduce(n.functions(t),(function(t,e){return t[e]=0,t}),{});Q(e,t,o,i)},Q(e,n,o,i)})),e.sync=function(t,o,i){var r=V[t];n.defaults(i||(i={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var s={type:r,dataType:'json'};if(i.url||(s.url=n.result(o,'url')||Y()),null!=i.data||!o||'create'!==t&&'update'!==t&&'patch'!==t||(s.contentType='application/json',s.data=JSON.stringify(i.attrs||o.toJSON(i))),i.emulateJSON&&(s.contentType='application/x-www-form-urlencoded',s.data=s.data?{model:s.data}:{}),i.emulateHTTP&&('PUT'===r||'DELETE'===r||'PATCH'===r)){s.type='POST',i.emulateJSON&&(s.data._method=r);var a=i.beforeSend;i.beforeSend=function(t){if(t.setRequestHeader('X-HTTP-Method-Override',r),a)return a.apply(this,arguments)}}'GET'===s.type||i.emulateJSON||(s.processData=!1);var l=i.error;i.error=function(t,e,n){i.textStatus=e,i.errorThrown=n,l&&l.call(i.context,t,e,n)};var c=i.xhr=e.ajax(n.extend(s,i));return o.trigger('request',o,c,i),c};var V={create:'POST',update:'PUT',patch:'PATCH',delete:'DELETE',read:'GET'};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var Z=e.Router=function(t){t||(t={}),this.preinitialize.apply(this,arguments),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},D=/\((.*?)\)/g,I=/(\(\?)?:\w+/g,N=/\*\w+/g,W=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(Z.prototype,a,{preinitialize:function(){},initialize:function(){},route:function(t,o,i){n.isRegExp(t)||(t=this._routeToRegExp(t)),n.isFunction(o)&&(i=o,o=''),i||(i=this[o]);var r=this;return e.history.route(t,(function(n){var s=r._extractParameters(t,n);!1!==r.execute(i,s,o)&&(r.trigger.apply(r,['route:'+o].concat(s)),r.trigger('route',o,s),e.history.trigger('route',r,o,s))})),this},execute:function(t,e,n){t&&t.apply(this,e)},navigate:function(t,n){return e.history.navigate(t,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,'routes');for(var t,e=n.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(W,'\\$&').replace(D,'(?:$1)?').replace(I,(function(t,e){return e?t:'([^/?]+)'})).replace(N,'([^?]*?)'),new RegExp('^'+t+'(?:\\?([\\s\\S]*))?$')},_extractParameters:function(t,e){var o=t.exec(e).slice(1);return n.map(o,(function(t,e){return e===o.length-1?t||null:t?decodeURIComponent(t):null}))}});var X=e.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),'undefined'!=typeof window&&(this.location=window.location,this.history=window.history)},L=/^[#\/]|\s+$/g,z=/^\/+|\/+$/g,U=/#.*$/;X.started=!1,n.extend(X.prototype,a,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,'$&/')===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+'/'===this.root},decodeFragment:function(t){return decodeURI(t.replace(/%25/g,'%2525'))},getSearch:function(){var t=this.location.href.replace(/#.*/,'').match(/\?.+/);return t?t[0]:''},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:''},getPath:function(){var t=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return'/'===t.charAt(0)?t.slice(1):t},getFragment:function(t){return null==t&&(t=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),t.replace(L,'')},start:function(t){if(X.started)throw new Error('Backbone.history has already been started');if(X.started=!0,this.options=n.extend({root:'/'},this.options,t),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange='onhashchange'in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=('/'+this.root+'/').replace(z,'/'),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var e=this.root.slice(0,-1)||'/';return this.location.replace(e+'#'+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement('iframe'),this.iframe.src='javascript:0',this.iframe.style.display='none',this.iframe.tabIndex=-1;var o=document.body,i=o.insertBefore(this.iframe,o.firstChild).contentWindow;i.document.open(),i.document.close(),i.location.hash='#'+this.fragment}var r=window.addEventListener||function(t,e){return attachEvent('on'+t,e)};if(this._usePushState?r('popstate',this.checkUrl,!1):this._useHashChange&&!this.iframe?r('hashchange',this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var t=window.removeEventListener||function(t,e){return detachEvent('on'+t,e)};this._usePushState?t('popstate',this.checkUrl,!1):this._useHashChange&&!this.iframe&&t('hashchange',this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),X.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();if(e===this.fragment&&this.iframe&&(e=this.getHash(this.iframe.contentWindow)),e===this.fragment)return!1;this.iframe&&this.navigate(e),this.loadUrl()},loadUrl:function(t){return!!this.matchRoot()&&(t=this.fragment=this.getFragment(t),n.some(this.handlers,(function(e){if(e.route.test(t))return e.callback(t),!0})))},navigate:function(t,e){if(!X.started)return!1;e&&!0!==e||(e={trigger:!!e}),t=this.getFragment(t||'');var n=this.root;''!==t&&'?'!==t.charAt(0)||(n=n.slice(0,-1)||'/');var o=n+t;t=t.replace(U,'');var i=this.decodeFragment(t);if(this.fragment!==i){if(this.fragment=i,this._usePushState)this.history[e.replace?'replaceState':'pushState']({},document.title,o);else{if(!this._wantsHashChange)return this.location.assign(o);if(this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getHash(this.iframe.contentWindow)){var r=this.iframe.contentWindow;e.replace||(r.document.open(),r.document.close()),this._updateHash(r.location,t,e.replace)}}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,n){if(n){var o=t.href.replace(/(javascript:|#).*$/,'');t.replace(o+'#'+e)}else t.hash='#'+e}}),e.history=new X;var q=function(t,e){var o,i=this;return o=t&&n.has(t,'constructor')?t.constructor:function(){return i.apply(this,arguments)},n.extend(o,i,e),o.prototype=n.create(i.prototype,t),o.prototype.constructor=o,o.__super__=i.prototype,o};v.extend=y.extend=Z.extend=C.extend=X.extend=q;var Y=function(){throw new Error('A "url" property or function must be specified')},B=function(t,e){var n=e.error;e.error=function(o){n&&n.call(e.context,t,o,e),t.trigger('error',t,o,e)}};return e}(s,n,t,e)}.apply(e,o),void 0===i||(t.exports=i);else;}()},8728:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var o,i=n(6847),r=void 0&&(void 0).__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});const s=function(t){function e(e,n,o){var i=t.call(this,n,o)||this;return i._module=e,i}return r(e,t),Object.defineProperty(e.prototype,"module",{get:function(){return this._module},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"config",{get:function(){return this._module.config},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"em",{get:function(){return this._module.em},enumerable:!1,configurable:!0}),e}(i.Hn)},2201:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a,q:()=>i});var o,i,r=n(8728),s=void 0&&(void 0).__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});!function(t){t["Select"]="select",t["Hover"]="hover",t["Spacing"]="spacing",t["Target"]="target",t["Resize"]="resize"}(i||(i={}));const a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.defaults=function(){return{id:'',type:''}},Object.defineProperty(e.prototype,"type",{get:function(){return this.get('type')||''},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"component",{get:function(){var t;return this.get('component')||(null===(t=this.get('componentView'))||void 0===t?void 0:t.model)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"componentView",{get:function(){var t;return this.get('componentView')||(null===(t=this.get('component'))||void 0===t?void 0:t.getView())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"el",{get:function(){var t;return null===(t=this.componentView)||void 0===t?void 0:t.el},enumerable:!1,configurable:!0}),e.prototype.getBoxRect=function(t){var e=this.el,n=this.em.Canvas.getCanvasView(),o=this.get('boxRect');return o||(e&&n?n.getElBoxRect(e,t):{x:0,y:0,width:0,height:0})},e.prototype.getStyle=function(t){void 0===t&&(t={});var e=t.boxRect||this.getBoxRect(t),n=e.width,o=e.height,i=e.x,r=e.y;return{width:"".concat(n,"px"),height:"".concat(o,"px"),top:'0',left:'0',position:'absolute',translate:"".concat(i,"px ").concat(r,"px")}},e.prototype.isType=function(t){return this.type===t},e}(r.Z)},8809:(t,e,n)=>{"use strict";n.d(e,{Z:()=>Gy});var o=n(6847);class i{lineAt(t){if(t<0||t>this.length)throw new RangeError(`Invalid position ${t} in document of length ${this.length}`);return this.lineInner(t,!1,1,0)}line(t){if(t<1||t>this.lines)throw new RangeError(`Invalid line number ${t} in ${this.lines}-line document`);return this.lineInner(t,!0,1,0)}replace(t,e,n){[t,e]=d(this,t,e);let o=[];return this.decompose(0,t,o,2),n.length&&n.decompose(0,n.length,o,1|2),this.decompose(e,this.length,o,1),s.from(o,this.length-(e-t)+n.length)}append(t){return this.replace(this.length,this.length,t)}slice(t,e=this.length){[t,e]=d(this,t,e);let n=[];return this.decompose(t,e,n,0),s.from(n,e-t)}eq(t){if(t==this)return!0;if(t.length!=this.length||t.lines!=this.lines)return!1;let e=this.scanIdentical(t,1),n=this.length-this.scanIdentical(t,-1),o=new c(this),i=new c(t);for(let t=e,r=e;;){if(o.next(t),i.next(t),t=0,o.lineBreak!=i.lineBreak||o.done!=i.done||o.value!=i.value)return!1;if(r+=o.value.length,o.done||r>=n)return!0}}iter(t=1){return new c(this,t)}iterRange(t,e=this.length){return new u(this,t,e)}iterLines(t,e){let n;if(null==t)n=this.iter();else{null==e&&(e=this.lines+1);let o=this.line(t).from;n=this.iterRange(o,Math.max(o,e==this.lines+1?this.length:e<=1?0:this.line(e-1).to))}return new p(n)}toString(){return this.sliceString(0)}toJSON(){let t=[];return this.flatten(t),t}constructor(){}static of(t){if(0==t.length)throw new RangeError("A document must have at least one line");return 1!=t.length||t[0]?t.length<=32?new r(t):s.from(r.split(t,[])):i.empty}}class r extends i{constructor(t,e=function(t){let e=-1;for(let n of t)e+=n.length+1;return e}(t)){super(),this.text=t,this.length=e}get lines(){return this.text.length}get children(){return null}lineInner(t,e,n,o){for(let i=0;;i++){let r=this.text[i],s=o+r.length;if((e?n:s)>=t)return new h(o,s,n,r);o=s+1,n++}}decompose(t,e,n,o){let i=t<=0&&e>=this.length?this:new r(l(this.text,t,e),Math.min(e,this.length)-Math.max(0,t));if(1&o){let t=n.pop(),e=a(i.text,t.text.slice(),0,i.length);if(e.length<=32)n.push(new r(e,t.length+i.length));else{let t=e.length>>1;n.push(new r(e.slice(0,t)),new r(e.slice(t)))}}else n.push(i)}replace(t,e,n){if(!(n instanceof r))return super.replace(t,e,n);[t,e]=d(this,t,e);let o=a(this.text,a(n.text,l(this.text,0,t)),e),i=this.length+n.length-(e-t);return o.length<=32?new r(o,i):s.from(r.split(o,[]),i)}sliceString(t,e=this.length,n="\n"){[t,e]=d(this,t,e);let o="";for(let i=0,r=0;i<=e&&r<this.text.length;r++){let s=this.text[r],a=i+s.length;i>t&&r&&(o+=n),t<a&&e>i&&(o+=s.slice(Math.max(0,t-i),e-i)),i=a+1}return o}flatten(t){for(let e of this.text)t.push(e)}scanIdentical(){return 0}static split(t,e){let n=[],o=-1;for(let i of t)n.push(i),o+=i.length+1,32==n.length&&(e.push(new r(n,o)),n=[],o=-1);return o>-1&&e.push(new r(n,o)),e}}class s extends i{constructor(t,e){super(),this.children=t,this.length=e,this.lines=0;for(let e of t)this.lines+=e.lines}lineInner(t,e,n,o){for(let i=0;;i++){let r=this.children[i],s=o+r.length,a=n+r.lines-1;if((e?a:s)>=t)return r.lineInner(t,e,n,o);o=s+1,n=a+1}}decompose(t,e,n,o){for(let i=0,r=0;r<=e&&i<this.children.length;i++){let s=this.children[i],a=r+s.length;if(t<=a&&e>=r){let i=o&((r<=t?1:0)|(a>=e?2:0));r>=t&&a<=e&&!i?n.push(s):s.decompose(t-r,e-r,n,i)}r=a+1}}replace(t,e,n){if([t,e]=d(this,t,e),n.lines<this.lines)for(let o=0,i=0;o<this.children.length;o++){let r=this.children[o],a=i+r.length;if(t>=i&&e<=a){let l=r.replace(t-i,e-i,n),c=this.lines-r.lines+l.lines;if(l.lines<c>>5-1&&l.lines>c>>5+1){let i=this.children.slice();return i[o]=l,new s(i,this.length-(e-t)+n.length)}return super.replace(i,a,l)}i=a+1}return super.replace(t,e,n)}sliceString(t,e=this.length,n="\n"){[t,e]=d(this,t,e);let o="";for(let i=0,r=0;i<this.children.length&&r<=e;i++){let s=this.children[i],a=r+s.length;r>t&&i&&(o+=n),t<a&&e>r&&(o+=s.sliceString(t-r,e-r,n)),r=a+1}return o}flatten(t){for(let e of this.children)e.flatten(t)}scanIdentical(t,e){if(!(t instanceof s))return 0;let n=0,[o,i,r,a]=e>0?[0,0,this.children.length,t.children.length]:[this.children.length-1,t.children.length-1,-1,-1];for(;;o+=e,i+=e){if(o==r||i==a)return n;let s=this.children[o],l=t.children[i];if(s!=l)return n+s.scanIdentical(l,e);n+=s.length+1}}static from(t,e=t.reduce(((t,e)=>t+e.length+1),-1)){let n=0;for(let e of t)n+=e.lines;if(n<32){let n=[];for(let e of t)e.flatten(n);return new r(n,e)}let o=Math.max(32,n>>5),i=o<<1,a=o>>1,l=[],c=0,u=-1,p=[];function h(t){let e;if(t.lines>i&&t instanceof s)for(let e of t.children)h(e);else t.lines>a&&(c>a||!c)?(d(),l.push(t)):t instanceof r&&c&&(e=p[p.length-1])instanceof r&&t.lines+e.lines<=32?(c+=t.lines,u+=t.length+1,p[p.length-1]=new r(e.text.concat(t.text),e.length+1+t.length)):(c+t.lines>o&&d(),c+=t.lines,u+=t.length+1,p.push(t))}function d(){0!=c&&(l.push(1==p.length?p[0]:s.from(p,u)),u=-1,c=p.length=0)}for(let e of t)h(e);return d(),1==l.length?l[0]:new s(l,e)}}function a(t,e,n=0,o=1e9){for(let i=0,r=0,s=!0;r<t.length&&i<=o;r++){let a=t[r],l=i+a.length;l>=n&&(l>o&&(a=a.slice(0,o-i)),i<n&&(a=a.slice(n-i)),s?(e[e.length-1]+=a,s=!1):e.push(a)),i=l+1}return e}function l(t,e,n){return a(t,[""],e,n)}i.empty=new r([""],0);class c{constructor(t,e=1){this.dir=e,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[t],this.offsets=[e>0?1:(t instanceof r?t.text.length:t.children.length)<<1]}nextInner(t,e){for(this.done=this.lineBreak=!1;;){let n=this.nodes.length-1,o=this.nodes[n],i=this.offsets[n],s=i>>1,a=o instanceof r?o.text.length:o.children.length;if(s==(e>0?a:0)){if(0==n)return this.done=!0,this.value="",this;e>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((1&i)==(e>0?0:1)){if(this.offsets[n]+=e,0==t)return this.lineBreak=!0,this.value="\n",this;t--}else if(o instanceof r){let i=o.text[s+(e<0?-1:0)];if(this.offsets[n]+=e,i.length>Math.max(0,t))return this.value=0==t?i:e>0?i.slice(t):i.slice(0,i.length-t),this;t-=i.length}else{let i=o.children[s+(e<0?-1:0)];t>i.length?(t-=i.length,this.offsets[n]+=e):(e<0&&this.offsets[n]--,this.nodes.push(i),this.offsets.push(e>0?1:(i instanceof r?i.text.length:i.children.length)<<1))}}}next(t=0){return t<0&&(this.nextInner(-t,-this.dir),t=this.value.length),this.nextInner(t,this.dir)}}class u{constructor(t,e,n){this.value="",this.done=!1,this.cursor=new c(t,e>n?-1:1),this.pos=e>n?t.length:0,this.from=Math.min(e,n),this.to=Math.max(e,n)}nextInner(t,e){if(e<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;t+=Math.max(0,e<0?this.pos-this.to:this.from-this.pos);let n=e<0?this.pos-this.from:this.to-this.pos;t>n&&(t=n),n-=t;let{value:o}=this.cursor.next(t);return this.pos+=(o.length+t)*e,this.value=o.length<=n?o:e<0?o.slice(o.length-n):o.slice(0,n),this.done=!this.value,this}next(t=0){return t<0?t=Math.max(t,this.from-this.pos):t>0&&(t=Math.min(t,this.to-this.pos)),this.nextInner(t,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&""!=this.value}}class p{constructor(t){this.inner=t,this.afterBreak=!0,this.value="",this.done=!1}next(t=0){let{done:e,lineBreak:n,value:o}=this.inner.next(t);return e&&this.afterBreak?(this.value="",this.afterBreak=!1):e?(this.done=!0,this.value=""):n?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=o,this.afterBreak=!1),this}get lineBreak(){return!1}}"undefined"!=typeof Symbol&&(i.prototype[Symbol.iterator]=function(){return this.iter()},c.prototype[Symbol.iterator]=u.prototype[Symbol.iterator]=p.prototype[Symbol.iterator]=function(){return this});class h{constructor(t,e,n,o){this.from=t,this.to=e,this.number=n,this.text=o}get length(){return this.to-this.from}}function d(t,e,n){return[e=Math.max(0,Math.min(t.length,e)),Math.max(e,Math.min(t.length,n))]}let f="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map((t=>t?parseInt(t,36):1));for(let t=1;t<f.length;t++)f[t]+=f[t-1];function g(t){for(let e=1;e<f.length;e+=2)if(f[e]>t)return f[e-1]<=t;return!1}function m(t){return t>=127462&&t<=127487}const v=8205;function y(t,e,n=!0,o=!0){return(n?_:O)(t,e,o)}function _(t,e,n){if(e==t.length)return e;e&&b(t.charCodeAt(e))&&w(t.charCodeAt(e-1))&&e--;let o=x(t,e);for(e+=k(o);e<t.length;){let i=x(t,e);if(o==v||i==v||n&&g(i))e+=k(i),o=i;else{if(!m(i))break;{let n=0,o=e-2;for(;o>=0&&m(x(t,o));)n++,o-=2;if(n%2==0)break;e+=2}}}return e}function O(t,e,n){for(;e>0;){let o=_(t,e-2,n);if(o<e)return o;e--}return 0}function b(t){return t>=56320&&t<57344}function w(t){return t>=55296&&t<56320}function x(t,e){let n=t.charCodeAt(e);if(!w(n)||e+1==t.length)return n;let o=t.charCodeAt(e+1);return b(o)?(n-55296<<10)+(o-56320)+65536:n}function S(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(1023&t)+56320))}function k(t){return t<65536?1:2}const P=/\r\n?|\n/;var C=function(t){return t[t["Simple"]=0]="Simple",t[t["TrackDel"]=1]="TrackDel",t[t["TrackBefore"]=2]="TrackBefore",t[t["TrackAfter"]=3]="TrackAfter",t}(C||(C={}));class T{constructor(t){this.sections=t}get length(){let t=0;for(let e=0;e<this.sections.length;e+=2)t+=this.sections[e];return t}get newLength(){let t=0;for(let e=0;e<this.sections.length;e+=2){let n=this.sections[e+1];t+=n<0?this.sections[e]:n}return t}get empty(){return 0==this.sections.length||2==this.sections.length&&this.sections[1]<0}iterGaps(t){for(let e=0,n=0,o=0;e<this.sections.length;){let i=this.sections[e++],r=this.sections[e++];r<0?(t(n,o,i),o+=i):o+=r,n+=i}}iterChangedRanges(t,e=!1){$(this,t,e)}get invertedDesc(){let t=[];for(let e=0;e<this.sections.length;){let n=this.sections[e++],o=this.sections[e++];o<0?t.push(n,o):t.push(o,n)}return new T(t)}composeDesc(t){return this.empty?t:t.empty?this:R(this,t)}mapDesc(t,e=!1){return t.empty?this:j(this,t,e)}mapPos(t,e=-1,n=C.Simple){let o=0,i=0;for(let r=0;r<this.sections.length;){let s=this.sections[r++],a=this.sections[r++],l=o+s;if(a<0){if(l>t)return i+(t-o);i+=s}else{if(n!=C.Simple&&l>=t&&(n==C.TrackDel&&o<t&&l>t||n==C.TrackBefore&&o<t||n==C.TrackAfter&&l>t))return null;if(l>t||l==t&&e<0&&!s)return t==o||e<0?i:i+a;i+=a}o=l}if(t>o)throw new RangeError(`Position ${t} is out of range for changeset of length ${o}`);return i}touchesRange(t,e=t){for(let n=0,o=0;n<this.sections.length&&o<=e;){let i=o+this.sections[n++];if(this.sections[n++]>=0&&o<=e&&i>=t)return!(o<t&&i>e)||"cover";o=i}return!1}toString(){let t="";for(let e=0;e<this.sections.length;){let n=this.sections[e++],o=this.sections[e++];t+=(t?" ":"")+n+(o>=0?":"+o:"")}return t}toJSON(){return this.sections}static fromJSON(t){if(!Array.isArray(t)||t.length%2||t.some((t=>"number"!=typeof t)))throw new RangeError("Invalid JSON representation of ChangeDesc");return new T(t)}static create(t){return new T(t)}}class E extends T{constructor(t,e){super(t),this.inserted=e}apply(t){if(this.length!=t.length)throw new RangeError("Applying change set to a document with the wrong length");return $(this,((e,n,o,i,r)=>t=t.replace(o,o+(n-e),r)),!1),t}mapDesc(t,e=!1){return j(this,t,e,!0)}invert(t){let e=this.sections.slice(),n=[];for(let o=0,r=0;o<e.length;o+=2){let s=e[o],a=e[o+1];if(a>=0){e[o]=a,e[o+1]=s;let l=o>>1;for(;n.length<l;)n.push(i.empty);n.push(s?t.slice(r,r+s):i.empty)}r+=s}return new E(e,n)}compose(t){return this.empty?t:t.empty?this:R(this,t,!0)}map(t,e=!1){return t.empty?this:j(this,t,e,!0)}iterChanges(t,e=!1){$(this,t,e)}get desc(){return T.create(this.sections)}filter(t){let e=[],n=[],o=[],i=new M(this);t:for(let r=0,s=0;;){let a=r==t.length?1e9:t[r++];for(;s<a||s==a&&0==i.len;){if(i.done)break t;let t=Math.min(i.len,a-s);A(o,t,-1);let r=-1==i.ins?-1:0==i.off?i.ins:0;A(e,t,r),r>0&&Q(n,e,i.text),i.forward(t),s+=t}let l=t[r++];for(;s<l;){if(i.done)break t;let t=Math.min(i.len,l-s);A(e,t,-1),A(o,t,-1==i.ins?-1:0==i.off?i.ins:0),i.forward(t),s+=t}}return{changes:new E(e,n),filtered:T.create(o)}}toJSON(){let t=[];for(let e=0;e<this.sections.length;e+=2){let n=this.sections[e],o=this.sections[e+1];o<0?t.push(n):0==o?t.push([n]):t.push([n].concat(this.inserted[e>>1].toJSON()))}return t}static of(t,e,n){let o=[],r=[],s=0,a=null;function l(t=!1){if(!t&&!o.length)return;s<e&&A(o,e-s,-1);let n=new E(o,r);a=a?a.compose(n.map(a)):n,o=[],r=[],s=0}return function t(c){if(Array.isArray(c))for(let e of c)t(e);else if(c instanceof E){if(c.length!=e)throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${e})`);l(),a=a?a.compose(c.map(a)):c}else{let{from:t,to:a=t,insert:u}=c;if(t>a||t<0||a>e)throw new RangeError(`Invalid change range ${t} to ${a} (in doc of length ${e})`);let p=u?"string"==typeof u?i.of(u.split(n||P)):u:i.empty,h=p.length;if(t==a&&0==h)return;t<s&&l(),t>s&&A(o,t-s,-1),A(o,a-t,h),Q(r,o,p),s=a}}(t),l(!a),a}static empty(t){return new E(t?[t,-1]:[],[])}static fromJSON(t){if(!Array.isArray(t))throw new RangeError("Invalid JSON representation of ChangeSet");let e=[],n=[];for(let o=0;o<t.length;o++){let r=t[o];if("number"==typeof r)e.push(r,-1);else{if(!Array.isArray(r)||"number"!=typeof r[0]||r.some(((t,e)=>e&&"string"!=typeof t)))throw new RangeError("Invalid JSON representation of ChangeSet");if(1==r.length)e.push(r[0],0);else{for(;n.length<o;)n.push(i.empty);n[o]=i.of(r.slice(1)),e.push(r[0],n[o].length)}}}return new E(e,n)}static createSet(t,e){return new E(t,e)}}function A(t,e,n,o=!1){if(0==e&&n<=0)return;let i=t.length-2;i>=0&&n<=0&&n==t[i+1]?t[i]+=e:0==e&&0==t[i]?t[i+1]+=n:o?(t[i]+=e,t[i+1]+=n):t.push(e,n)}function Q(t,e,n){if(0==n.length)return;let o=e.length-2>>1;if(o<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<o;)t.push(i.empty);t.push(n)}}function $(t,e,n){let o=t.inserted;for(let r=0,s=0,a=0;a<t.sections.length;){let l=t.sections[a++],c=t.sections[a++];if(c<0)r+=l,s+=l;else{let u=r,p=s,h=i.empty;for(;u+=l,p+=c,c&&o&&(h=h.append(o[a-2>>1])),!(n||a==t.sections.length||t.sections[a+1]<0);)l=t.sections[a++],c=t.sections[a++];e(r,u,s,p,h),r=u,s=p}}}function j(t,e,n,o=!1){let i=[],r=o?[]:null,s=new M(t),a=new M(e);for(let t=-1;;)if(-1==s.ins&&-1==a.ins){let t=Math.min(s.len,a.len);A(i,t,-1),s.forward(t),a.forward(t)}else if(a.ins>=0&&(s.ins<0||t==s.i||0==s.off&&(a.len<s.len||a.len==s.len&&!n))){let e=a.len;for(A(i,a.ins,-1);e;){let n=Math.min(s.len,e);s.ins>=0&&t<s.i&&s.len<=n&&(A(i,0,s.ins),r&&Q(r,i,s.text),t=s.i),s.forward(n),e-=n}a.next()}else{if(!(s.ins>=0)){if(s.done&&a.done)return r?E.createSet(i,r):T.create(i);throw new Error("Mismatched change set lengths")}{let e=0,n=s.len;for(;n;)if(-1==a.ins){let t=Math.min(n,a.len);e+=t,n-=t,a.forward(t)}else{if(!(0==a.ins&&a.len<n))break;n-=a.len,a.next()}A(i,e,t<s.i?s.ins:0),r&&t<s.i&&Q(r,i,s.text),t=s.i,s.forward(s.len-n)}}}function R(t,e,n=!1){let o=[],i=n?[]:null,r=new M(t),s=new M(e);for(let t=!1;;){if(r.done&&s.done)return i?E.createSet(o,i):T.create(o);if(0==r.ins)A(o,r.len,0,t),r.next();else if(0!=s.len||s.done){if(r.done||s.done)throw new Error("Mismatched change set lengths");{let e=Math.min(r.len2,s.len),n=o.length;if(-1==r.ins){let n=-1==s.ins?-1:s.off?0:s.ins;A(o,e,n,t),i&&n&&Q(i,o,s.text)}else-1==s.ins?(A(o,r.off?0:r.len,e,t),i&&Q(i,o,r.textBit(e))):(A(o,r.off?0:r.len,s.off?0:s.ins,t),i&&!s.off&&Q(i,o,s.text));t=(r.ins>e||s.ins>=0&&s.len>e)&&(t||o.length>n),r.forward2(e),s.forward(e)}}else A(o,0,s.ins,t),i&&Q(i,o,s.text),s.next()}}class M{constructor(t){this.set=t,this.i=0,this.next()}next(){let{sections:t}=this.set;this.i<t.length?(this.len=t[this.i++],this.ins=t[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return-2==this.ins}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:t}=this.set,e=this.i-2>>1;return e>=t.length?i.empty:t[e]}textBit(t){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length&&!t?i.empty:e[n].slice(this.off,null==t?void 0:this.off+t)}forward(t){t==this.len?this.next():(this.len-=t,this.off+=t)}forward2(t){-1==this.ins?this.forward(t):t==this.ins?this.next():(this.ins-=t,this.off+=t)}}class V{constructor(t,e,n){this.from=t,this.to=e,this.flags=n}get anchor(){return 32&this.flags?this.to:this.from}get head(){return 32&this.flags?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return 8&this.flags?-1:16&this.flags?1:0}get bidiLevel(){let t=7&this.flags;return 7==t?null:t}get goalColumn(){let t=this.flags>>6;return 16777215==t?void 0:t}map(t,e=-1){let n,o;return this.empty?n=o=t.mapPos(this.from,e):(n=t.mapPos(this.from,1),o=t.mapPos(this.to,-1)),n==this.from&&o==this.to?this:new V(n,o,this.flags)}extend(t,e=t){if(t<=this.anchor&&e>=this.anchor)return Z.range(t,e);let n=Math.abs(t-this.anchor)>Math.abs(e-this.anchor)?t:e;return Z.range(this.anchor,n)}eq(t,e=!1){return!(this.anchor!=t.anchor||this.head!=t.head||e&&this.empty&&this.assoc!=t.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(t){if(!t||"number"!=typeof t.anchor||"number"!=typeof t.head)throw new RangeError("Invalid JSON representation for SelectionRange");return Z.range(t.anchor,t.head)}static create(t,e,n){return new V(t,e,n)}}class Z{constructor(t,e){this.ranges=t,this.mainIndex=e}map(t,e=-1){return t.empty?this:Z.create(this.ranges.map((n=>n.map(t,e))),this.mainIndex)}eq(t,e=!1){if(this.ranges.length!=t.ranges.length||this.mainIndex!=t.mainIndex)return!1;for(let n=0;n<this.ranges.length;n++)if(!this.ranges[n].eq(t.ranges[n],e))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return 1==this.ranges.length?this:new Z([this.main],0)}addRange(t,e=!0){return Z.create([t].concat(this.ranges),e?0:this.mainIndex+1)}replaceRange(t,e=this.mainIndex){let n=this.ranges.slice();return n[e]=t,Z.create(n,this.mainIndex)}toJSON(){return{ranges:this.ranges.map((t=>t.toJSON())),main:this.mainIndex}}static fromJSON(t){if(!t||!Array.isArray(t.ranges)||"number"!=typeof t.main||t.main>=t.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new Z(t.ranges.map((t=>V.fromJSON(t))),t.main)}static single(t,e=t){return new Z([Z.range(t,e)],0)}static create(t,e=0){if(0==t.length)throw new RangeError("A selection needs at least one range");for(let n=0,o=0;o<t.length;o++){let i=t[o];if(i.empty?i.from<=n:i.from<n)return Z.normalized(t.slice(),e);n=i.to}return new Z(t,e)}static cursor(t,e=0,n,o){return V.create(t,t,(0==e?0:e<0?8:16)|(null==n?7:Math.min(6,n))|(null!=o?o:16777215)<<6)}static range(t,e,n,o){let i=(null!=n?n:16777215)<<6|(null==o?7:Math.min(6,o));return e<t?V.create(e,t,32|16|i):V.create(t,e,(e>t?8:0)|i)}static normalized(t,e=0){let n=t[e];t.sort(((t,e)=>t.from-e.from)),e=t.indexOf(n);for(let n=1;n<t.length;n++){let o=t[n],i=t[n-1];if(o.empty?o.from<=i.to:o.from<i.to){let r=i.from,s=Math.max(o.to,i.to);n<=e&&e--,t.splice(--n,2,o.anchor>o.head?Z.range(s,r):Z.range(r,s))}}return new Z(t,e)}}function D(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let I=0;class N{constructor(t,e,n,o,i){this.combine=t,this.compareInput=e,this.compare=n,this.isStatic=o,this.id=I++,this.default=t([]),this.extensions="function"==typeof i?i(this):i}get reader(){return this}static define(t={}){return new N(t.combine||(t=>t),t.compareInput||((t,e)=>t===e),t.compare||(t.combine?(t,e)=>t===e:W),!!t.static,t.enables)}of(t){return new X([],this,0,t)}compute(t,e){if(this.isStatic)throw new Error("Can't compute a static facet");return new X(t,this,1,e)}computeN(t,e){if(this.isStatic)throw new Error("Can't compute a static facet");return new X(t,this,2,e)}from(t,e){return e||(e=t=>t),this.compute([t],(n=>e(n.field(t))))}}function W(t,e){return t==e||t.length==e.length&&t.every(((t,n)=>t===e[n]))}class X{constructor(t,e,n,o){this.dependencies=t,this.facet=e,this.type=n,this.value=o,this.id=I++}dynamicSlot(t){var e;let n=this.value,o=this.facet.compareInput,i=this.id,r=t[i]>>1,s=2==this.type,a=!1,l=!1,c=[];for(let n of this.dependencies)"doc"==n?a=!0:"selection"==n?l=!0:0==(1&(null!==(e=t[n.id])&&void 0!==e?e:1))&&c.push(t[n.id]);return{create:t=>(t.values[r]=n(t),1),update(t,e){if(a&&e.docChanged||l&&(e.docChanged||e.selection)||z(t,c)){let e=n(t);if(s?!L(e,t.values[r],o):!o(e,t.values[r]))return t.values[r]=e,1}return 0},reconfigure:(t,e)=>{let a,l=e.config.address[i];if(null!=l){let i=rt(e,l);if(this.dependencies.every((n=>n instanceof N?e.facet(n)===t.facet(n):!(n instanceof Y)||e.field(n,!1)==t.field(n,!1)))||(s?L(a=n(t),i,o):o(a=n(t),i)))return t.values[r]=i,0}else a=n(t);return t.values[r]=a,1}}}}function L(t,e,n){if(t.length!=e.length)return!1;for(let o=0;o<t.length;o++)if(!n(t[o],e[o]))return!1;return!0}function z(t,e){let n=!1;for(let o of e)1&it(t,o)&&(n=!0);return n}function U(t,e,n){let o=n.map((e=>t[e.id])),i=n.map((t=>t.type)),r=o.filter((t=>!(1&t))),s=t[e.id]>>1;function a(t){let n=[];for(let e=0;e<o.length;e++){let r=rt(t,o[e]);if(2==i[e])for(let t of r)n.push(t);else n.push(r)}return e.combine(n)}return{create(t){for(let e of o)it(t,e);return t.values[s]=a(t),1},update(t,n){if(!z(t,r))return 0;let o=a(t);return e.compare(o,t.values[s])?0:(t.values[s]=o,1)},reconfigure(t,i){let r=z(t,o),l=i.config.facets[e.id],c=i.facet(e);if(l&&!r&&W(n,l))return t.values[s]=c,0;let u=a(t);return e.compare(u,c)?(t.values[s]=c,0):(t.values[s]=u,1)}}}const q=N.define({static:!0});class Y{constructor(t,e,n,o,i){this.id=t,this.createF=e,this.updateF=n,this.compareF=o,this.spec=i,this.provides=void 0}static define(t){let e=new Y(I++,t.create,t.update,t.compare||((t,e)=>t===e),t);return t.provide&&(e.provides=t.provide(e)),e}create(t){let e=t.facet(q).find((t=>t.field==this));return((null==e?void 0:e.create)||this.createF)(t)}slot(t){let e=t[this.id]>>1;return{create:t=>(t.values[e]=this.create(t),1),update:(t,n)=>{let o=t.values[e],i=this.updateF(o,n);return this.compareF(o,i)?0:(t.values[e]=i,1)},reconfigure:(t,n)=>null!=n.config.address[this.id]?(t.values[e]=n.field(this),0):(t.values[e]=this.create(t),1)}}init(t){return[this,q.of({field:this,create:t})]}get extension(){return this}}const B=4,F=3,G=2,H=1;function K(t){return e=>new tt(e,t)}const J={highest:K(0),high:K(H),default:K(G),low:K(F),lowest:K(B)};class tt{constructor(t,e){this.inner=t,this.prec=e}}class et{of(t){return new nt(this,t)}reconfigure(t){return et.reconfigure.of({compartment:this,extension:t})}get(t){return t.config.compartments.get(this)}}class nt{constructor(t,e){this.compartment=t,this.inner=e}}class ot{constructor(t,e,n,o,i,r){for(this.base=t,this.compartments=e,this.dynamicSlots=n,this.address=o,this.staticValues=i,this.facets=r,this.statusTemplate=[];this.statusTemplate.length<n.length;)this.statusTemplate.push(0)}staticFacet(t){let e=this.address[t.id];return null==e?t.default:this.staticValues[e>>1]}static resolve(t,e,n){let o=[],i=Object.create(null),r=new Map;for(let n of function(t,e,n){let o=[[],[],[],[],[]],i=new Map;function r(t,s){let a=i.get(t);if(null!=a){if(a<=s)return;let e=o[a].indexOf(t);e>-1&&o[a].splice(e,1),t instanceof nt&&n.delete(t.compartment)}if(i.set(t,s),Array.isArray(t))for(let e of t)r(e,s);else if(t instanceof nt){if(n.has(t.compartment))throw new RangeError(`Duplicate use of compartment in extensions`);let o=e.get(t.compartment)||t.inner;n.set(t.compartment,o),r(o,s)}else if(t instanceof tt)r(t.inner,t.prec);else if(t instanceof Y)o[s].push(t),t.provides&&r(t.provides,s);else if(t instanceof X)o[s].push(t),t.facet.extensions&&r(t.facet.extensions,G);else{let e=t.extension;if(!e)throw new Error(`Unrecognized extension value in extension set (${t}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);r(e,s)}}return r(t,G),o.reduce(((t,e)=>t.concat(e)))}(t,e,r))n instanceof Y?o.push(n):(i[n.facet.id]||(i[n.facet.id]=[])).push(n);let s=Object.create(null),a=[],l=[];for(let t of o)s[t.id]=l.length<<1,l.push((e=>t.slot(e)));let c=null==n?void 0:n.config.facets;for(let t in i){let e=i[t],o=e[0].facet,r=c&&c[t]||[];if(e.every((t=>0==t.type)))if(s[o.id]=a.length<<1|1,W(r,e))a.push(n.facet(o));else{let t=o.combine(e.map((t=>t.value)));a.push(n&&o.compare(t,n.facet(o))?n.facet(o):t)}else{for(let t of e)0==t.type?(s[t.id]=a.length<<1|1,a.push(t.value)):(s[t.id]=l.length<<1,l.push((e=>t.dynamicSlot(e))));s[o.id]=l.length<<1,l.push((t=>U(t,o,e)))}}let u=l.map((t=>t(s)));return new ot(t,r,u,s,a,i)}}function it(t,e){if(1&e)return 2;let n=e>>1,o=t.status[n];if(4==o)throw new Error("Cyclic dependency between fields and/or facets");if(2&o)return o;t.status[n]=4;let i=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|i}function rt(t,e){return 1&e?t.config.staticValues[e>>1]:t.values[e>>1]}const st=N.define(),at=N.define({combine:t=>t.some((t=>t)),static:!0}),lt=N.define({combine:t=>t.length?t[0]:void 0,static:!0}),ct=N.define(),ut=N.define(),pt=N.define(),ht=N.define({combine:t=>!!t.length&&t[0]});class dt{constructor(t,e){this.type=t,this.value=e}static define(){return new ft}}class ft{of(t){return new dt(this,t)}}class gt{constructor(t){this.map=t}of(t){return new mt(this,t)}}class mt{constructor(t,e){this.type=t,this.value=e}map(t){let e=this.type.map(this.value,t);return void 0===e?void 0:e==this.value?this:new mt(this.type,e)}is(t){return this.type==t}static define(t={}){return new gt(t.map||(t=>t))}static mapEffects(t,e){if(!t.length)return t;let n=[];for(let o of t){let t=o.map(e);t&&n.push(t)}return n}}mt.reconfigure=mt.define(),mt.appendConfig=mt.define();class vt{constructor(t,e,n,o,i,r){this.startState=t,this.changes=e,this.selection=n,this.effects=o,this.annotations=i,this.scrollIntoView=r,this._doc=null,this._state=null,n&&D(n,e.newLength),i.some((t=>t.type==vt.time))||(this.annotations=i.concat(vt.time.of(Date.now())))}static create(t,e,n,o,i,r){return new vt(t,e,n,o,i,r)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(t){for(let e of this.annotations)if(e.type==t)return e.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(t){let e=this.annotation(vt.userEvent);return!(!e||!(e==t||e.length>t.length&&e.slice(0,t.length)==t&&"."==e[t.length]))}}function yt(t,e){let n=[];for(let o=0,i=0;;){let r,s;if(o<t.length&&(i==e.length||e[i]>=t[o]))r=t[o++],s=t[o++];else{if(!(i<e.length))return n;r=e[i++],s=e[i++]}!n.length||n[n.length-1]<r?n.push(r,s):n[n.length-1]<s&&(n[n.length-1]=s)}}function _t(t,e,n){var o;let i,r,s;return n?(i=e.changes,r=E.empty(e.changes.length),s=t.changes.compose(e.changes)):(i=e.changes.map(t.changes),r=t.changes.mapDesc(e.changes,!0),s=t.changes.compose(i)),{changes:s,selection:e.selection?e.selection.map(r):null===(o=t.selection)||void 0===o?void 0:o.map(i),effects:mt.mapEffects(t.effects,i).concat(mt.mapEffects(e.effects,r)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function Ot(t,e,n){let o=e.selection,i=xt(e.annotations);return e.userEvent&&(i=i.concat(vt.userEvent.of(e.userEvent))),{changes:e.changes instanceof E?e.changes:E.of(e.changes||[],n,t.facet(lt)),selection:o&&(o instanceof Z?o:Z.single(o.anchor,o.head)),effects:xt(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function bt(t,e,n){let o=Ot(t,e.length?e[0]:{},t.doc.length);e.length&&!1===e[0].filter&&(n=!1);for(let i=1;i<e.length;i++){!1===e[i].filter&&(n=!1);let r=!!e[i].sequential;o=_t(o,Ot(t,e[i],r?o.changes.newLength:t.doc.length),r)}let i=vt.create(t,o.changes,o.selection,o.effects,o.annotations,o.scrollIntoView);return function(t){let e=t.startState,n=e.facet(pt),o=t;for(let i=n.length-1;i>=0;i--){let r=n[i](t);r&&Object.keys(r).length&&(o=_t(o,Ot(e,r,t.changes.newLength),!0))}return o==t?t:vt.create(e,t.changes,t.selection,o.effects,o.annotations,o.scrollIntoView)}(n?function(t){let e=t.startState,n=!0;for(let o of e.facet(ct)){let e=o(t);if(!1===e){n=!1;break}Array.isArray(e)&&(n=!0===n?e:yt(n,e))}if(!0!==n){let o,i;if(!1===n)i=t.changes.invertedDesc,o=E.empty(e.doc.length);else{let e=t.changes.filter(n);o=e.changes,i=e.filtered.mapDesc(e.changes).invertedDesc}t=vt.create(e,o,t.selection&&t.selection.map(i),mt.mapEffects(t.effects,i),t.annotations,t.scrollIntoView)}let o=e.facet(ut);for(let n=o.length-1;n>=0;n--){let i=o[n](t);t=i instanceof vt?i:Array.isArray(i)&&1==i.length&&i[0]instanceof vt?i[0]:bt(e,xt(i),!1)}return t}(i):i)}vt.time=dt.define(),vt.userEvent=dt.define(),vt.addToHistory=dt.define(),vt.remote=dt.define();const wt=[];function xt(t){return null==t?wt:Array.isArray(t)?t:[t]}var St=function(t){return t[t["Word"]=0]="Word",t[t["Space"]=1]="Space",t[t["Other"]=2]="Other",t}(St||(St={}));const kt=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Pt;try{Pt=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(t){}function Ct(t){return e=>{if(!/\S/.test(e))return St.Space;if(function(t){if(Pt)return Pt.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||kt.test(n)))return!0}return!1}(e))return St.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return St.Word;return St.Other}}class Tt{constructor(t,e,n,o,i,r){this.config=t,this.doc=e,this.selection=n,this.values=o,this.status=t.statusTemplate.slice(),this.computeSlot=i,r&&(r._state=this);for(let t=0;t<this.config.dynamicSlots.length;t++)it(this,t<<1);this.computeSlot=null}field(t,e=!0){let n=this.config.address[t.id];if(null!=n)return it(this,n),rt(this,n);if(e)throw new RangeError("Field is not present in this state")}update(...t){return bt(this,t,!0)}applyTransaction(t){let e,n=this.config,{base:o,compartments:i}=n;for(let e of t.effects)e.is(et.reconfigure)?(n&&(i=new Map,n.compartments.forEach(((t,e)=>i.set(e,t))),n=null),i.set(e.value.compartment,e.value.extension)):e.is(mt.reconfigure)?(n=null,o=e.value):e.is(mt.appendConfig)&&(n=null,o=xt(o).concat(e.value));if(n)e=t.startState.values.slice();else{n=ot.resolve(o,i,this),e=new Tt(n,this.doc,this.selection,n.dynamicSlots.map((()=>null)),((t,e)=>e.reconfigure(t,this)),null).values}let r=t.startState.facet(at)?t.newSelection:t.newSelection.asSingle();new Tt(n,t.newDoc,r,e,((e,n)=>n.update(e,t)),t)}replaceSelection(t){return"string"==typeof t&&(t=this.toText(t)),this.changeByRange((e=>({changes:{from:e.from,to:e.to,insert:t},range:Z.cursor(e.from+t.length)})))}changeByRange(t){let e=this.selection,n=t(e.ranges[0]),o=this.changes(n.changes),i=[n.range],r=xt(n.effects);for(let n=1;n<e.ranges.length;n++){let s=t(e.ranges[n]),a=this.changes(s.changes),l=a.map(o);for(let t=0;t<n;t++)i[t]=i[t].map(l);let c=o.mapDesc(a,!0);i.push(s.range.map(c)),o=o.compose(l),r=mt.mapEffects(r,l).concat(mt.mapEffects(xt(s.effects),c))}return{changes:o,selection:Z.create(i,e.mainIndex),effects:r}}changes(t=[]){return t instanceof E?t:E.of(t,this.doc.length,this.facet(Tt.lineSeparator))}toText(t){return i.of(t.split(this.facet(Tt.lineSeparator)||P))}sliceDoc(t=0,e=this.doc.length){return this.doc.sliceString(t,e,this.lineBreak)}facet(t){let e=this.config.address[t.id];return null==e?t.default:(it(this,e),rt(this,e))}toJSON(t){let e={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(t)for(let n in t){let o=t[n];o instanceof Y&&null!=this.config.address[o.id]&&(e[n]=o.spec.toJSON(this.field(t[n]),this))}return e}static fromJSON(t,e={},n){if(!t||"string"!=typeof t.doc)throw new RangeError("Invalid JSON representation for EditorState");let o=[];if(n)for(let e in n)if(Object.prototype.hasOwnProperty.call(t,e)){let i=n[e],r=t[e];o.push(i.init((t=>i.spec.fromJSON(r,t))))}return Tt.create({doc:t.doc,selection:Z.fromJSON(t.selection),extensions:e.extensions?o.concat([e.extensions]):o})}static create(t={}){let e=ot.resolve(t.extensions||[],new Map),n=t.doc instanceof i?t.doc:i.of((t.doc||"").split(e.staticFacet(Tt.lineSeparator)||P)),o=t.selection?t.selection instanceof Z?t.selection:Z.single(t.selection.anchor,t.selection.head):Z.single(0);return D(o,n.length),e.staticFacet(at)||(o=o.asSingle()),new Tt(e,n,o,e.dynamicSlots.map((()=>null)),((t,e)=>e.create(t)),null)}get tabSize(){return this.facet(Tt.tabSize)}get lineBreak(){return this.facet(Tt.lineSeparator)||"\n"}get readOnly(){return this.facet(ht)}phrase(t,...e){for(let e of this.facet(Tt.phrases))if(Object.prototype.hasOwnProperty.call(e,t)){t=e[t];break}return e.length&&(t=t.replace(/\$(\$|\d*)/g,((t,n)=>{if("$"==n)return"$";let o=+(n||1);return!o||o>e.length?t:e[o-1]}))),t}languageDataAt(t,e,n=-1){let o=[];for(let i of this.facet(st))for(let r of i(this,e,n))Object.prototype.hasOwnProperty.call(r,t)&&o.push(r[t]);return o}charCategorizer(t){return Ct(this.languageDataAt("wordChars",t).join(""))}wordAt(t){let{text:e,from:n,length:o}=this.doc.lineAt(t),i=this.charCategorizer(t),r=t-n,s=t-n;for(;r>0;){let t=y(e,r,!1);if(i(e.slice(t,r))!=St.Word)break;r=t}for(;s<o;){let t=y(e,s);if(i(e.slice(s,t))!=St.Word)break;s=t}return r==s?null:Z.range(r+n,s+n)}}function Et(t,e,n={}){let o={};for(let e of t)for(let t of Object.keys(e)){let i=e[t],r=o[t];if(void 0===r)o[t]=i;else if(r===i||void 0===i);else{if(!Object.hasOwnProperty.call(n,t))throw new Error("Config merge conflict for field "+t);o[t]=n[t](r,i)}}for(let t in e)void 0===o[t]&&(o[t]=e[t]);return o}Tt.allowMultipleSelections=at,Tt.tabSize=N.define({combine:t=>t.length?t[0]:4}),Tt.lineSeparator=lt,Tt.readOnly=ht,Tt.phrases=N.define({compare(t,e){let n=Object.keys(t),o=Object.keys(e);return n.length==o.length&&n.every((n=>t[n]==e[n]))}}),Tt.languageData=st,Tt.changeFilter=ct,Tt.transactionFilter=ut,Tt.transactionExtender=pt,et.reconfigure=mt.define();class At{eq(t){return this==t}range(t,e=t){return Qt.create(t,e,this)}}At.prototype.startSide=At.prototype.endSide=0,At.prototype.point=!1,At.prototype.mapMode=C.TrackDel;class Qt{constructor(t,e,n){this.from=t,this.to=e,this.value=n}static create(t,e,n){return new Qt(t,e,n)}}function $t(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class jt{constructor(t,e,n,o){this.from=t,this.to=e,this.value=n,this.maxPoint=o}get length(){return this.to[this.to.length-1]}findIndex(t,e,n,o=0){let i=n?this.to:this.from;for(let r=o,s=i.length;;){if(r==s)return r;let o=r+s>>1,a=i[o]-t||(n?this.value[o].endSide:this.value[o].startSide)-e;if(o==r)return a>=0?r:s;a>=0?s=o:r=o+1}}between(t,e,n,o){for(let i=this.findIndex(e,-1e9,!0),r=this.findIndex(n,1e9,!1,i);i<r;i++)if(!1===o(this.from[i]+t,this.to[i]+t,this.value[i]))return!1}map(t,e){let n=[],o=[],i=[],r=-1,s=-1;for(let a=0;a<this.value.length;a++){let l,c,u=this.value[a],p=this.from[a]+t,h=this.to[a]+t;if(p==h){let t=e.mapPos(p,u.startSide,u.mapMode);if(null==t)continue;if(l=c=t,u.startSide!=u.endSide&&(c=e.mapPos(p,u.endSide),c<l))continue}else if(l=e.mapPos(p,u.startSide),c=e.mapPos(h,u.endSide),l>c||l==c&&u.startSide>0&&u.endSide<=0)continue;(c-l||u.endSide-u.startSide)<0||(r<0&&(r=l),u.point&&(s=Math.max(s,c-l)),n.push(u),o.push(l-r),i.push(c-r))}return{mapped:n.length?new jt(o,i,n,s):null,pos:r}}}class Rt{constructor(t,e,n,o){this.chunkPos=t,this.chunk=e,this.nextLayer=n,this.maxPoint=o}static create(t,e,n,o){return new Rt(t,e,n,o)}get length(){let t=this.chunk.length-1;return t<0?0:Math.max(this.chunkEnd(t),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let t=this.nextLayer.size;for(let e of this.chunk)t+=e.value.length;return t}chunkEnd(t){return this.chunkPos[t]+this.chunk[t].length}update(t){let{add:e=[],sort:n=!1,filterFrom:o=0,filterTo:i=this.length}=t,r=t.filter;if(0==e.length&&!r)return this;if(n&&(e=e.slice().sort($t)),this.isEmpty)return e.length?Rt.of(e):this;let s=new Zt(this,null,-1).goto(0),a=0,l=[],c=new Mt;for(;s.value||a<e.length;)if(a<e.length&&(s.from-e[a].from||s.startSide-e[a].value.startSide)>=0){let t=e[a++];c.addInner(t.from,t.to,t.value)||l.push(t)}else 1==s.rangeIndex&&s.chunkIndex<this.chunk.length&&(a==e.length||this.chunkEnd(s.chunkIndex)<e[a].from)&&(!r||o>this.chunkEnd(s.chunkIndex)||i<this.chunkPos[s.chunkIndex])&&c.addChunk(this.chunkPos[s.chunkIndex],this.chunk[s.chunkIndex])?s.nextChunk():((!r||o>s.to||i<s.from||r(s.from,s.to,s.value))&&(c.addInner(s.from,s.to,s.value)||l.push(Qt.create(s.from,s.to,s.value))),s.next());return c.finishInner(this.nextLayer.isEmpty&&!l.length?Rt.empty:this.nextLayer.update({add:l,filter:r,filterFrom:o,filterTo:i}))}map(t){if(t.empty||this.isEmpty)return this;let e=[],n=[],o=-1;for(let i=0;i<this.chunk.length;i++){let r=this.chunkPos[i],s=this.chunk[i],a=t.touchesRange(r,r+s.length);if(!1===a)o=Math.max(o,s.maxPoint),e.push(s),n.push(t.mapPos(r));else if(!0===a){let{mapped:i,pos:a}=s.map(r,t);i&&(o=Math.max(o,i.maxPoint),e.push(i),n.push(a))}}let i=this.nextLayer.map(t);return 0==e.length?i:new Rt(n,e,i||Rt.empty,o)}between(t,e,n){if(!this.isEmpty){for(let o=0;o<this.chunk.length;o++){let i=this.chunkPos[o],r=this.chunk[o];if(e>=i&&t<=i+r.length&&!1===r.between(i,t-i,e-i,n))return}this.nextLayer.between(t,e,n)}}iter(t=0){return Dt.from([this]).goto(t)}get isEmpty(){return this.nextLayer==this}static iter(t,e=0){return Dt.from(t).goto(e)}static compare(t,e,n,o,i=-1){let r=t.filter((t=>t.maxPoint>0||!t.isEmpty&&t.maxPoint>=i)),s=e.filter((t=>t.maxPoint>0||!t.isEmpty&&t.maxPoint>=i)),a=Vt(r,s,n),l=new Nt(r,a,i),c=new Nt(s,a,i);n.iterGaps(((t,e,n)=>Wt(l,t,c,e,n,o))),n.empty&&0==n.length&&Wt(l,0,c,0,0,o)}static eq(t,e,n=0,o){null==o&&(o=1e9-1);let i=t.filter((t=>!t.isEmpty&&e.indexOf(t)<0)),r=e.filter((e=>!e.isEmpty&&t.indexOf(e)<0));if(i.length!=r.length)return!1;if(!i.length)return!0;let s=Vt(i,r),a=new Nt(i,s,0).goto(n),l=new Nt(r,s,0).goto(n);for(;;){if(a.to!=l.to||!Xt(a.active,l.active)||a.point&&(!l.point||!a.point.eq(l.point)))return!1;if(a.to>o)return!0;a.next(),l.next()}}static spans(t,e,n,o,i=-1){let r=new Nt(t,null,i).goto(e),s=e,a=r.openStart;for(;;){let t=Math.min(r.to,n);if(r.point){let n=r.activeForPoint(r.to),i=r.pointFrom<e?n.length+1:r.point.startSide<0?n.length:Math.min(n.length,a);o.point(s,t,r.point,n,i,r.pointRank),a=Math.min(r.openEnd(t),n.length)}else t>s&&(o.span(s,t,r.active,a),a=r.openEnd(t));if(r.to>n)return a+(r.point&&r.to>n?1:0);s=r.to,r.next()}}static of(t,e=!1){let n=new Mt;for(let o of t instanceof Qt?[t]:e?function(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let o=t[n];if($t(e,o)>0)return t.slice().sort($t);e=o}return t}(t):t)n.add(o.from,o.to,o.value);return n.finish()}static join(t){if(!t.length)return Rt.empty;let e=t[t.length-1];for(let n=t.length-2;n>=0;n--)for(let o=t[n];o!=Rt.empty;o=o.nextLayer)e=new Rt(o.chunkPos,o.chunk,e,Math.max(o.maxPoint,e.maxPoint));return e}}Rt.empty=new Rt([],[],null,-1),Rt.empty.nextLayer=Rt.empty;class Mt{finishChunk(t){this.chunks.push(new jt(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,t&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(t,e,n){this.addInner(t,e,n)||(this.nextLayer||(this.nextLayer=new Mt)).add(t,e,n)}addInner(t,e,n){let o=t-this.lastTo||n.startSide-this.last.endSide;if(o<=0&&(t-this.lastFrom||n.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return!(o<0)&&(250==this.from.length&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=t),this.from.push(t-this.chunkStart),this.to.push(e-this.chunkStart),this.last=n,this.lastFrom=t,this.lastTo=e,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,e-t)),!0)}addChunk(t,e){if((t-this.lastTo||e.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,e.maxPoint),this.chunks.push(e),this.chunkPos.push(t);let n=e.value.length-1;return this.last=e.value[n],this.lastFrom=e.from[n]+t,this.lastTo=e.to[n]+t,!0}finish(){return this.finishInner(Rt.empty)}finishInner(t){if(this.from.length&&this.finishChunk(!1),0==this.chunks.length)return t;let e=Rt.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(t):t,this.setMaxPoint);return this.from=null,e}}function Vt(t,e,n){let o=new Map;for(let e of t)for(let t=0;t<e.chunk.length;t++)e.chunk[t].maxPoint<=0&&o.set(e.chunk[t],e.chunkPos[t]);let i=new Set;for(let t of e)for(let e=0;e<t.chunk.length;e++){let r=o.get(t.chunk[e]);null==r||(n?n.mapPos(r):r)!=t.chunkPos[e]||(null==n?void 0:n.touchesRange(r,r+t.chunk[e].length))||i.add(t.chunk[e])}return i}class Zt{constructor(t,e,n,o=0){this.layer=t,this.skip=e,this.minPoint=n,this.rank=o}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(t,e=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(t,e,!1),this}gotoInner(t,e,n){for(;this.chunkIndex<this.layer.chunk.length;){let e=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(e)||this.layer.chunkEnd(this.chunkIndex)<t||e.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}if(this.chunkIndex<this.layer.chunk.length){let o=this.layer.chunk[this.chunkIndex].findIndex(t-this.layer.chunkPos[this.chunkIndex],e,!0);(!n||this.rangeIndex<o)&&this.setRangeIndex(o)}this.next()}forward(t,e){(this.to-t||this.endSide-e)<0&&this.gotoInner(t,e,!0)}next(){for(;;){if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}{let t=this.layer.chunkPos[this.chunkIndex],e=this.layer.chunk[this.chunkIndex],n=t+e.from[this.rangeIndex];if(this.from=n,this.to=t+e.to[this.rangeIndex],this.value=e.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}}setRangeIndex(t){if(t==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=t}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(t){return this.from-t.from||this.startSide-t.startSide||this.rank-t.rank||this.to-t.to||this.endSide-t.endSide}}class Dt{constructor(t){this.heap=t}static from(t,e=null,n=-1){let o=[];for(let i=0;i<t.length;i++)for(let r=t[i];!r.isEmpty;r=r.nextLayer)r.maxPoint>=n&&o.push(new Zt(r,e,n,i));return 1==o.length?o[0]:new Dt(o)}get startSide(){return this.value?this.value.startSide:0}goto(t,e=-1e9){for(let n of this.heap)n.goto(t,e);for(let t=this.heap.length>>1;t>=0;t--)It(this.heap,t);return this.next(),this}forward(t,e){for(let n of this.heap)n.forward(t,e);for(let t=this.heap.length>>1;t>=0;t--)It(this.heap,t);(this.to-t||this.value.endSide-e)<0&&this.next()}next(){if(0==this.heap.length)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let t=this.heap[0];this.from=t.from,this.to=t.to,this.value=t.value,this.rank=t.rank,t.value&&t.next(),It(this.heap,0)}}}function It(t,e){for(let n=t[e];;){let o=(e<<1)+1;if(o>=t.length)break;let i=t[o];if(o+1<t.length&&i.compare(t[o+1])>=0&&(i=t[o+1],o++),n.compare(i)<0)break;t[o]=n,t[e]=i,e=o}}class Nt{constructor(t,e,n){this.minPoint=n,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Dt.from(t,e,n)}goto(t,e=-1e9){return this.cursor.goto(t,e),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=t,this.endSide=e,this.openStart=-1,this.next(),this}forward(t,e){for(;this.minActive>-1&&(this.activeTo[this.minActive]-t||this.active[this.minActive].endSide-e)<0;)this.removeActive(this.minActive);this.cursor.forward(t,e)}removeActive(t){Lt(this.active,t),Lt(this.activeTo,t),Lt(this.activeRank,t),this.minActive=Ut(this.active,this.activeTo)}addActive(t){let e=0,{value:n,to:o,rank:i}=this.cursor;for(;e<this.activeRank.length&&(i-this.activeRank[e]||o-this.activeTo[e])>0;)e++;zt(this.active,e,n),zt(this.activeTo,e,o),zt(this.activeRank,e,i),t&&zt(t,e,this.cursor.from),this.minActive=Ut(this.active,this.activeTo)}next(){let t=this.to,e=this.point;this.point=null;let n=this.openStart<0?[]:null;for(;;){let o=this.minActive;if(o>-1&&(this.activeTo[o]-this.cursor.from||this.active[o].endSide-this.cursor.startSide)<0){if(this.activeTo[o]>t){this.to=this.activeTo[o],this.endSide=this.active[o].endSide;break}this.removeActive(o),n&&Lt(n,o)}else{if(!this.cursor.value){this.to=this.endSide=1e9;break}if(this.cursor.from>t){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}{let t=this.cursor.value;if(t.point){if(!(e&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)){this.point=t,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=t.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}this.cursor.next()}else this.addActive(n),this.cursor.next()}}}if(n){this.openStart=0;for(let e=n.length-1;e>=0&&n[e]<t;e--)this.openStart++}}activeForPoint(t){if(!this.active.length)return this.active;let e=[];for(let n=this.active.length-1;n>=0&&!(this.activeRank[n]<this.pointRank);n--)(this.activeTo[n]>t||this.activeTo[n]==t&&this.active[n].endSide>=this.point.endSide)&&e.push(this.active[n]);return e.reverse()}openEnd(t){let e=0;for(let n=this.activeTo.length-1;n>=0&&this.activeTo[n]>t;n--)e++;return e}}function Wt(t,e,n,o,i,r){t.goto(e),n.goto(o);let s=o+i,a=o,l=o-e;for(;;){let e=t.to+l-n.to||t.endSide-n.endSide,o=e<0?t.to+l:n.to,i=Math.min(o,s);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&Xt(t.activeForPoint(t.to),n.activeForPoint(n.to))||r.comparePoint(a,i,t.point,n.point):i>a&&!Xt(t.active,n.active)&&r.compareRange(a,i,t.active,n.active),o>s)break;a=o,e<=0&&t.next(),e>=0&&n.next()}}function Xt(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function Lt(t,e){for(let n=e,o=t.length-1;n<o;n++)t[n]=t[n+1];t.pop()}function zt(t,e,n){for(let n=t.length-1;n>=e;n--)t[n+1]=t[n];t[e]=n}function Ut(t,e){let n=-1,o=1e9;for(let i=0;i<e.length;i++)(e[i]-o||t[i].endSide-t[n].endSide)<0&&(n=i,o=e[i]);return n}function qt(t,e,n=t.length){let o=0;for(let i=0;i<n;)9==t.charCodeAt(i)?(o+=e-o%e,i++):(o++,i=y(t,i));return o}function Yt(t,e,n,o){for(let o=0,i=0;;){if(i>=e)return o;if(o==t.length)break;i+=9==t.charCodeAt(o)?n-i%n:1,o=y(t,o)}return!0===o?-1:t.length}function Bt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function Ft(t){return function(t){if(Array.isArray(t))return Bt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Bt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Bt(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Gt=n(1002);function Ht(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Kt(t){var e=function(t,e){if("object"!==(0,Gt.Z)(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!==(0,Gt.Z)(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===(0,Gt.Z)(e)?e:String(e)}function Jt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,Kt(o.key),o)}}function te(t,e,n){return e&&Jt(t.prototype,e),n&&Jt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}for(var ee="ͼ",ne="undefined"==typeof Symbol?"__"+ee:Symbol.for(ee),oe="undefined"==typeof Symbol?"__styleSet"+Math.floor(1e8*Math.random()):Symbol("styleSet"),ie="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:{},re=function(){function t(e,n){Ht(this,t),this.rules=[];var o=(n||{}).finish;function i(t){return/^@/.test(t)?[t]:t.split(/,\s*/)}function r(t,e,n,s){var a=[],l=/^@(\w+)\b/.exec(t[0]),c=l&&"keyframes"==l[1];if(l&&null==e)return n.push(t[0]+";");for(var u in e){var p=e[u];if(/&/.test(u))r(u.split(/,\s*/).map((function(e){return t.map((function(t){return e.replace(/&/,t)}))})).reduce((function(t,e){return t.concat(e)})),p,n);else if(p&&"object"==(0,Gt.Z)(p)){if(!l)throw new RangeError("The value of a property ("+u+") should be a primitive value.");r(i(u),p,a,c)}else null!=p&&a.push(u.replace(/_.*/,"").replace(/[A-Z]/g,(function(t){return"-"+t.toLowerCase()}))+": "+p+";")}(a.length||c)&&n.push((!o||l||s?t:t.map(o)).join(", ")+" {"+a.join(" ")+"}")}for(var s in e)r(i(s),e[s],this.rules)}return te(t,[{key:"getRules",value:function(){return this.rules.join("\n")}}],[{key:"newName",value:function(){var t=ie[ne]||1;return ie[ne]=t+1,ee+t.toString(36)}},{key:"mount",value:function(t,e,n){var o=t[oe],i=n&&n.nonce;o?i&&o.setNonce(i):o=new ae(t,i),o.mount(Array.isArray(e)?e:[e],t)}}]),t}(),se=new Map,ae=function(){function t(e,n){Ht(this,t);var o=e.ownerDocument||e,i=o.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){var r=se.get(o);if(r)return e[oe]=r;this.sheet=new i.CSSStyleSheet,se.set(o,this)}else this.styleTag=o.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);this.modules=[],e[oe]=this}return te(t,[{key:"mount",value:function(t,e){for(var n=this.sheet,o=0,i=0,r=0;r<t.length;r++){var s=t[r],a=this.modules.indexOf(s);if(a<i&&a>-1&&(this.modules.splice(a,1),i--,a=-1),-1==a){if(this.modules.splice(i++,0,s),n)for(var l=0;l<s.rules.length;l++)n.insertRule(s.rules[l],o++)}else{for(;i<a;)o+=this.modules[i++].rules.length;o+=s.rules.length,i++}}if(n)e.adoptedStyleSheets.indexOf(this.sheet)<0&&(e.adoptedStyleSheets=[this.sheet].concat(Ft(e.adoptedStyleSheets)));else{for(var c="",u=0;u<this.modules.length;u++)c+=this.modules[u].getRules()+"\n";this.styleTag.textContent=c;var p=e.head||e;this.styleTag.parentNode!=p&&p.insertBefore(this.styleTag,p.firstChild)}}},{key:"setNonce",value:function(t){this.styleTag&&this.styleTag.getAttribute("nonce")!=t&&this.styleTag.setAttribute("nonce",t)}}]),t}(),le={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},ce={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:"\""},ue="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),pe="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),he=0;he<10;he++)le[48+he]=le[96+he]=String(he);for(he=1;he<=24;he++)le[he+111]="F"+he;for(he=65;he<=90;he++)le[he]=String.fromCharCode(he+32),ce[he]=String.fromCharCode(he);for(var de in le)ce.hasOwnProperty(de)||(ce[de]=le[de]);function fe(t){let e;return e=11==t.nodeType?t.getSelection?t:t.ownerDocument:t,e.getSelection()}function ge(t,e){return!!e&&(t==e||t.contains(1!=e.nodeType?e.parentNode:e))}function me(t,e){if(!e.anchorNode)return!1;try{return ge(t,e.anchorNode)}catch(t){return!1}}function ve(t){return 3==t.nodeType?Ae(t,0,t.nodeValue.length).getClientRects():1==t.nodeType?t.getClientRects():[]}function ye(t,e,n,o){return!!n&&(be(t,e,n,o,-1)||be(t,e,n,o,1))}function _e(t){for(var e=0;;e++)if(!(t=t.previousSibling))return e}function Oe(t){return 1==t.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function be(t,e,n,o,i){for(;;){if(t==n&&e==o)return!0;if(e==(i<0?0:we(t))){if("DIV"==t.nodeName)return!1;let n=t.parentNode;if(!n||1!=n.nodeType)return!1;e=_e(t)+(i<0?0:1),t=n}else{if(1!=t.nodeType)return!1;if(1==(t=t.childNodes[e+(i<0?-1:0)]).nodeType&&"false"==t.contentEditable)return!1;e=i<0?we(t):0}}}function we(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function xe(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function Se(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function ke(t,e){let n=e.width/t.offsetWidth,o=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(o>.995&&o<1.005||!isFinite(o)||Math.abs(e.height-t.offsetHeight)<1)&&(o=1),{scaleX:n,scaleY:o}}class Pe{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(t){return this.anchorNode==t.anchorNode&&this.anchorOffset==t.anchorOffset&&this.focusNode==t.focusNode&&this.focusOffset==t.focusOffset}setRange(t){let{anchorNode:e,focusNode:n}=t;this.set(e,Math.min(t.anchorOffset,e?we(e):0),n,Math.min(t.focusOffset,n?we(n):0))}set(t,e,n,o){this.anchorNode=t,this.anchorOffset=e,this.focusNode=n,this.focusOffset=o}}let Ce,Te=null;function Ee(t){if(t.setActive)return t.setActive();if(Te)return t.focus(Te);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(null==Te?{get preventScroll(){return Te={preventScroll:!0},!0}}:void 0),!Te){Te=!1;for(let t=0;t<e.length;){let n=e[t++],o=e[t++],i=e[t++];n.scrollTop!=o&&(n.scrollTop=o),n.scrollLeft!=i&&(n.scrollLeft=i)}}}function Ae(t,e,n=e){let o=Ce||(Ce=document.createRange());return o.setEnd(t,n),o.setStart(t,e),o}function Qe(t,e,n,o){let i={key:e,code:e,keyCode:n,which:n,cancelable:!0};o&&({altKey:i.altKey,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,metaKey:i.metaKey}=o);let r=new KeyboardEvent("keydown",i);r.synthetic=!0,t.dispatchEvent(r);let s=new KeyboardEvent("keyup",i);return s.synthetic=!0,t.dispatchEvent(s),r.defaultPrevented||s.defaultPrevented}function $e(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function je(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function Re(t,e){for(let n=t,o=e;;){if(3==n.nodeType&&o>0)return{node:n,offset:o};if(1==n.nodeType&&o>0){if("false"==n.contentEditable)return null;n=n.childNodes[o-1],o=we(n)}else{if(!n.parentNode||Oe(n))return null;o=_e(n),n=n.parentNode}}}function Me(t,e){for(let n=t,o=e;;){if(3==n.nodeType&&o<n.nodeValue.length)return{node:n,offset:o};if(1==n.nodeType&&o<n.childNodes.length){if("false"==n.contentEditable)return null;n=n.childNodes[o],o=0}else{if(!n.parentNode||Oe(n))return null;o=_e(n)+1,n=n.parentNode}}}class Ve{constructor(t,e,n=!0){this.node=t,this.offset=e,this.precise=n}static before(t,e){return new Ve(t.parentNode,_e(t),e)}static after(t,e){return new Ve(t.parentNode,_e(t)+1,e)}}const Ze=[];class De{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(t){let e=this.posAtStart;for(let n of this.children){if(n==t)return e;e+=n.length+n.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(t){return this.posBefore(t)+t.length}sync(t,e){if(2&this.flags){let n,o=this.dom,i=null;for(let r of this.children){if(7&r.flags){if(!r.dom&&(n=i?i.nextSibling:o.firstChild)){let t=De.get(n);(!t||!t.parent&&t.canReuseDOM(r))&&r.reuseDOM(n)}r.sync(t,e),r.flags&=~7}if(n=i?i.nextSibling:o.firstChild,e&&!e.written&&e.node==o&&n!=r.dom&&(e.written=!0),r.dom.parentNode==o)for(;n&&n!=r.dom;)n=Ie(n);else o.insertBefore(r.dom,n);i=r.dom}for(n=i?i.nextSibling:o.firstChild,n&&e&&e.node==o&&(e.written=!0);n;)n=Ie(n)}else if(1&this.flags)for(let n of this.children)7&n.flags&&(n.sync(t,e),n.flags&=~7)}reuseDOM(t){}localPosFromDOM(t,e){let n;if(t==this.dom)n=this.dom.childNodes[e];else{let o=0==we(t)?0:0==e?-1:1;for(;;){let e=t.parentNode;if(e==this.dom)break;0==o&&e.firstChild!=e.lastChild&&(o=t==e.firstChild?-1:1),t=e}n=o<0?t:t.nextSibling}if(n==this.dom.firstChild)return 0;for(;n&&!De.get(n);)n=n.nextSibling;if(!n)return this.length;for(let t=0,e=0;;t++){let o=this.children[t];if(o.dom==n)return e;e+=o.length+o.breakAfter}}domBoundsAround(t,e,n=0){let o=-1,i=-1,r=-1,s=-1;for(let a=0,l=n,c=n;a<this.children.length;a++){let n=this.children[a],u=l+n.length;if(l<t&&u>e)return n.domBoundsAround(t,e,l);if(u>=t&&-1==o&&(o=a,i=l),l>e&&n.dom.parentNode==this.dom){r=a,s=c;break}c=u,l=u+n.breakAfter}return{from:i,to:s<0?n+this.length:s,startDOM:(o?this.children[o-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:r<this.children.length&&r>=0?this.children[r].dom:null}}markDirty(t=!1){this.flags|=2,this.markParentsDirty(t)}markParentsDirty(t){for(let e=this.parent;e;e=e.parent){if(t&&(e.flags|=2),1&e.flags)return;e.flags|=1,t=!1}}setParent(t){this.parent!=t&&(this.parent=t,7&this.flags&&this.markParentsDirty(!0))}setDOM(t){this.dom!=t&&(this.dom&&(this.dom.cmView=null),this.dom=t,t.cmView=this)}get rootView(){for(let t=this;;){let e=t.parent;if(!e)return t;t=e}}replaceChildren(t,e,n=Ze){this.markDirty();for(let o=t;o<e;o++){let t=this.children[o];t.parent==this&&n.indexOf(t)<0&&t.destroy()}this.children.splice(t,e-t,...n);for(let t=0;t<n.length;t++)n[t].setParent(this)}ignoreMutation(t){return!1}ignoreEvent(t){return!1}childCursor(t=this.length){return new Ne(this.children,t,this.children.length)}childPos(t,e=1){return this.childCursor().findPos(t,e)}toString(){let t=this.constructor.name.replace("View","");return t+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==t?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(t){return t.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(t,e,n,o,i,r){return!1}become(t){return!1}canReuseDOM(t){return t.constructor==this.constructor&&!(8&(this.flags|t.flags))}getSide(){return 0}destroy(){for(let t of this.children)t.parent==this&&t.destroy();this.parent=null}}function Ie(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}De.prototype.breakAfter=0;class Ne{constructor(t,e,n){this.children=t,this.pos=e,this.i=n,this.off=0}findPos(t,e=1){for(;;){if(t>this.pos||t==this.pos&&(e>0||0==this.i||this.children[this.i-1].breakAfter))return this.off=t-this.pos,this;let n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}}function We(t,e,n,o,i,r,s,a,l){let{children:c}=t,u=c.length?c[e]:null,p=r.length?r[r.length-1]:null,h=p?p.breakAfter:s;if(!(e==o&&u&&!s&&!h&&r.length<2&&u.merge(n,i,r.length?p:null,0==n,a,l))){if(o<c.length){let t=c[o];t&&(i<t.length||t.breakAfter&&(null==p?void 0:p.breakAfter))?(e==o&&(t=t.split(i),i=0),!h&&p&&t.merge(0,i,p,!0,0,l)?r[r.length-1]=t:((i||t.children.length&&!t.children[0].length)&&t.merge(0,i,null,!1,0,l),r.push(t))):(null==t?void 0:t.breakAfter)&&(p?p.breakAfter=1:s=1),o++}for(u&&(u.breakAfter=s,n>0&&(!s&&r.length&&u.merge(n,u.length,r[0],!1,a,0)?u.breakAfter=r.shift().breakAfter:(n<u.length||u.children.length&&0==u.children[u.children.length-1].length)&&u.merge(n,u.length,null,!1,a,0),e++));e<o&&r.length;)if(c[o-1].become(r[r.length-1]))o--,r.pop(),l=r.length?0:a;else{if(!c[e].become(r[0]))break;e++,r.shift(),a=r.length?0:l}!r.length&&e&&o<c.length&&!c[e-1].breakAfter&&c[o].merge(0,0,c[e-1],!1,a,l)&&e--,(e<o||r.length)&&t.replaceChildren(e,o,r)}}function Xe(t,e,n,o,i,r){let s=t.childCursor(),{i:a,off:l}=s.findPos(n,1),{i:c,off:u}=s.findPos(e,-1),p=e-n;for(let t of o)p+=t.length;t.length+=p,We(t,c,u,a,l,o,0,i,r)}let Le="undefined"!=typeof navigator?navigator:{userAgent:"",vendor:"",platform:""},ze="undefined"!=typeof document?document:{documentElement:{style:{}}};const Ue=/Edge\/(\d+)/.exec(Le.userAgent),qe=/MSIE \d/.test(Le.userAgent),Ye=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Le.userAgent),Be=!!(qe||Ye||Ue),Fe=!Be&&/gecko\/(\d+)/i.test(Le.userAgent),Ge=!Be&&/Chrome\/(\d+)/.exec(Le.userAgent),He="webkitFontSmoothing"in ze.documentElement.style,Ke=!Be&&/Apple Computer/.test(Le.vendor),Je=Ke&&(/Mobile\/\w+/.test(Le.userAgent)||Le.maxTouchPoints>2);var tn={mac:Je||/Mac/.test(Le.platform),windows:/Win/.test(Le.platform),linux:/Linux|X11/.test(Le.platform),ie:Be,ie_version:qe?ze.documentMode||6:Ye?+Ye[1]:Ue?+Ue[1]:0,gecko:Fe,gecko_version:Fe?+(/Firefox\/(\d+)/.exec(Le.userAgent)||[0,0])[1]:0,chrome:!!Ge,chrome_version:Ge?+Ge[1]:0,ios:Je,android:/Android\b/.test(Le.userAgent),webkit:He,safari:Ke,webkit_version:He?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:null!=ze.documentElement.style.tabSize?"tab-size":"-moz-tab-size"};const en=256;class nn extends De{constructor(t){super(),this.text=t}get length(){return this.text.length}createDOM(t){this.setDOM(t||document.createTextNode(this.text))}sync(t,e){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text)}reuseDOM(t){3==t.nodeType&&this.createDOM(t)}merge(t,e,n){return!(8&this.flags||n&&(!(n instanceof nn)||this.length-(e-t)+n.length>en||8&n.flags))&&(this.text=this.text.slice(0,t)+(n?n.text:"")+this.text.slice(e),this.markDirty(),!0)}split(t){let e=new nn(this.text.slice(t));return this.text=this.text.slice(0,t),this.markDirty(),e.flags|=8&this.flags,e}localPosFromDOM(t,e){return t==this.dom?e:e?this.text.length:0}domAtPos(t){return new Ve(this.dom,t)}domBoundsAround(t,e,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(t,e){return function(t,e,n){let o=t.nodeValue.length;e>o&&(e=o);let i=e,r=e,s=0;0==e&&n<0||e==o&&n>=0?tn.chrome||tn.gecko||(e?(i--,s=1):r<o&&(r++,s=-1)):n<0?i--:r<o&&r++;let a=Ae(t,i,r).getClientRects();if(!a.length)return null;let l=a[(s?s<0:n>=0)?0:a.length-1];tn.safari&&!s&&0==l.width&&(l=Array.prototype.find.call(a,(t=>t.width))||l);return s?xe(l,s<0):l||null}(this.dom,t,e)}}class on extends De{constructor(t,e=[],n=0){super(),this.mark=t,this.children=e,this.length=n;for(let t of e)t.setParent(this)}setAttrs(t){if($e(t),this.mark.class&&(t.className=this.mark.class),this.mark.attrs)for(let e in this.mark.attrs)t.setAttribute(e,this.mark.attrs[e]);return t}canReuseDOM(t){return super.canReuseDOM(t)&&!(8&(this.flags|t.flags))}reuseDOM(t){t.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(t),this.flags|=4|2)}sync(t,e){this.dom?4&this.flags&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(t,e)}merge(t,e,n,o,i,r){return(!n||!(!(n instanceof on&&n.mark.eq(this.mark))||t&&i<=0||e<this.length&&r<=0))&&(Xe(this,t,e,n?n.children.slice():[],i-1,r-1),this.markDirty(),!0)}split(t){let e=[],n=0,o=-1,i=0;for(let r of this.children){let s=n+r.length;s>t&&e.push(n<t?r.split(t-n):r),o<0&&n>=t&&(o=i),n=s,i++}let r=this.length-t;return this.length=t,o>-1&&(this.children.length=o,this.markDirty()),new on(this.mark,e,r)}domAtPos(t){return an(this,t)}coordsAt(t,e){return cn(this,t,e)}}class rn extends De{static create(t,e,n){return new rn(t,e,n)}constructor(t,e,n){super(),this.widget=t,this.length=e,this.side=n,this.prevWidget=null}split(t){let e=rn.create(this.widget,this.length-t,this.side);return this.length-=t,e}sync(t){this.dom&&this.widget.updateDOM(this.dom,t)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(t)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(t,e,n,o,i,r){return!(n&&(!(n instanceof rn&&this.widget.compare(n.widget))||t>0&&i<=0||e<this.length&&r<=0))&&(this.length=t+(n?n.length:0)+(this.length-e),!0)}become(t){return t instanceof rn&&t.side==this.side&&this.widget.constructor==t.widget.constructor&&(this.widget.compare(t.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=t.widget,this.length=t.length,!0)}ignoreMutation(){return!0}ignoreEvent(t){return this.widget.ignoreEvent(t)}get overrideDOMText(){if(0==this.length)return i.empty;let t=this;for(;t.parent;)t=t.parent;let{view:e}=t,n=e&&e.state.doc,o=this.posAtStart;return n?n.slice(o,o+this.length):i.empty}domAtPos(t){return(this.length?0==t:this.side>0)?Ve.before(this.dom):Ve.after(this.dom,t==this.length)}domBoundsAround(){return null}coordsAt(t,e){let n=this.widget.coordsAt(this.dom,t,e);if(n)return n;let o=this.dom.getClientRects(),i=null;if(!o.length)return null;let r=this.side?this.side<0:t>0;for(let e=r?o.length-1:0;i=o[e],!(t>0?0==e:e==o.length-1||i.top<i.bottom);e+=r?-1:1);return xe(i,!r)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class sn extends De{constructor(t){super(),this.side=t}get length(){return 0}merge(){return!1}become(t){return t instanceof sn&&t.side==this.side}split(){return new sn(this.side)}sync(){if(!this.dom){let t=document.createElement("img");t.className="cm-widgetBuffer",t.setAttribute("aria-hidden","true"),this.setDOM(t)}}getSide(){return this.side}domAtPos(t){return this.side>0?Ve.before(this.dom):Ve.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(t){return this.dom.getBoundingClientRect()}get overrideDOMText(){return i.empty}get isHidden(){return!0}}function an(t,e){let n=t.dom,{children:o}=t,i=0;for(let t=0;i<o.length;i++){let r=o[i],s=t+r.length;if(!(s==t&&r.getSide()<=0)){if(e>t&&e<s&&r.dom.parentNode==n)return r.domAtPos(e-t);if(e<=t)break;t=s}}for(let t=i;t>0;t--){let e=o[t-1];if(e.dom.parentNode==n)return e.domAtPos(e.length)}for(let t=i;t<o.length;t++){let e=o[t];if(e.dom.parentNode==n)return e.domAtPos(0)}return new Ve(n,0)}function ln(t,e,n){let o,{children:i}=t;n>0&&e instanceof on&&i.length&&(o=i[i.length-1])instanceof on&&o.mark.eq(e.mark)?ln(o,e.children[0],n-1):(i.push(e),e.setParent(t)),t.length+=e.length}function cn(t,e,n){let o=null,i=-1,r=null,s=-1;!function t(e,a){for(let l=0,c=0;l<e.children.length&&c<=a;l++){let u=e.children[l],p=c+u.length;p>=a&&(u.children.length?t(u,a-c):(!r||r.isHidden&&n>0)&&(p>a||c==p&&u.getSide()>0)?(r=u,s=a-c):(c<a||c==p&&u.getSide()<0&&!u.isHidden)&&(o=u,i=a-c)),c=p}}(t,e);let a=(n<0?o:r)||o||r;return a?a.coordsAt(Math.max(0,a==o?i:s),n):function(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=ve(e);return n[n.length-1]||null}(t)}function un(t,e){for(let n in t)"class"==n&&e.class?e.class+=" "+t.class:"style"==n&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}nn.prototype.children=rn.prototype.children=sn.prototype.children=Ze;const pn=Object.create(null);function hn(t,e,n){if(t==e)return!0;t||(t=pn),e||(e=pn);let o=Object.keys(t),i=Object.keys(e);if(o.length-(n&&o.indexOf(n)>-1?1:0)!=i.length-(n&&i.indexOf(n)>-1?1:0))return!1;for(let r of o)if(r!=n&&(-1==i.indexOf(r)||t[r]!==e[r]))return!1;return!0}function dn(t,e,n){let o=!1;if(e)for(let i in e)n&&i in n||(o=!0,"style"==i?t.style.cssText="":t.removeAttribute(i));if(n)for(let i in n)e&&e[i]==n[i]||(o=!0,"style"==i?t.style.cssText=n[i]:t.setAttribute(i,n[i]));return o}function fn(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let o=t.attributes[n];e[o.name]=o.value}return e}class gn extends De{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(t,e,n,o,i,r){if(n){if(!(n instanceof gn))return!1;this.dom||n.transferDOM(this)}return o&&this.setDeco(n?n.attrs:null),Xe(this,t,e,n?n.children.slice():[],i,r),!0}split(t){let e=new gn;if(e.breakAfter=this.breakAfter,0==this.length)return e;let{i:n,off:o}=this.childPos(t);o&&(e.append(this.children[n].split(o),0),this.children[n].merge(o,this.children[n].length,null,!1,0,0),n++);for(let t=n;t<this.children.length;t++)e.append(this.children[t],0);for(;n>0&&0==this.children[n-1].length;)this.children[--n].destroy();return this.children.length=n,this.markDirty(),this.length=t,e}transferDOM(t){this.dom&&(this.markDirty(),t.setDOM(this.dom),t.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(t){hn(this.attrs,t)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=t)}append(t,e){ln(this,t,e)}addLineDeco(t){let e=t.spec.attributes,n=t.spec.class;e&&(this.attrs=un(e,this.attrs||{})),n&&(this.attrs=un({class:n},this.attrs||{}))}domAtPos(t){return an(this,t)}reuseDOM(t){"DIV"==t.nodeName&&(this.setDOM(t),this.flags|=4|2)}sync(t,e){var n;this.dom?4&this.flags&&($e(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),void 0!==this.prevAttrs&&(dn(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(t,e);let o=this.dom.lastChild;for(;o&&De.get(o)instanceof on;)o=o.lastChild;if(!(o&&this.length&&("BR"==o.nodeName||0!=(null===(n=De.get(o))||void 0===n?void 0:n.isEditable)||tn.ios&&this.children.some((t=>t instanceof nn))))){let t=document.createElement("BR");t.cmIgnore=!0,this.dom.appendChild(t)}}measureTextSize(){if(0==this.children.length||this.length>20)return null;let t,e=0;for(let n of this.children){if(!(n instanceof nn)||/[^ -~]/.test(n.text))return null;let o=ve(n.dom);if(1!=o.length)return null;e+=o[0].width,t=o[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(t,e){let n=cn(this,t,e);if(!this.children.length&&n&&this.parent){let{heightOracle:t}=this.parent.view.viewState,e=n.bottom-n.top;if(Math.abs(e-t.lineHeight)<2&&t.textHeight<e){let o=(e-t.textHeight)/2;return{top:n.top+o,bottom:n.bottom-o,left:n.left,right:n.left}}}return n}become(t){return!1}covers(){return!0}static find(t,e){for(let n=0,o=0;n<t.children.length;n++){let i=t.children[n],r=o+i.length;if(r>=e){if(i instanceof gn)return i;if(r>e)break}o=r+i.breakAfter}return null}}class mn extends De{constructor(t,e,n){super(),this.widget=t,this.length=e,this.deco=n,this.breakAfter=0,this.prevWidget=null}merge(t,e,n,o,i,r){return!(n&&(!(n instanceof mn&&this.widget.compare(n.widget))||t>0&&i<=0||e<this.length&&r<=0))&&(this.length=t+(n?n.length:0)+(this.length-e),!0)}domAtPos(t){return 0==t?Ve.before(this.dom):Ve.after(this.dom,t==this.length)}split(t){let e=this.length-t;this.length=t;let n=new mn(this.widget,e,this.deco);return n.breakAfter=this.breakAfter,n}get children(){return Ze}sync(t){this.dom&&this.widget.updateDOM(this.dom,t)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(t)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):i.empty}domBoundsAround(){return null}become(t){return t instanceof mn&&t.widget.constructor==this.widget.constructor&&(t.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=t.widget,this.length=t.length,this.deco=t.deco,this.breakAfter=t.breakAfter,!0)}ignoreMutation(){return!0}ignoreEvent(t){return this.widget.ignoreEvent(t)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(t,e){return this.widget.coordsAt(this.dom,t,e)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(t){let{startSide:e,endSide:n}=this.deco;return e!=n&&(t<0?e<0:n>0)}}class vn{eq(t){return!1}updateDOM(t,e){return!1}compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(t){return!0}coordsAt(t,e,n){return null}get isHidden(){return!1}get editable(){return!1}destroy(t){}}var yn=function(t){return t[t["Text"]=0]="Text",t[t["WidgetBefore"]=1]="WidgetBefore",t[t["WidgetAfter"]=2]="WidgetAfter",t[t["WidgetRange"]=3]="WidgetRange",t}(yn||(yn={}));class _n extends At{constructor(t,e,n,o){super(),this.startSide=t,this.endSide=e,this.widget=n,this.spec=o}get heightRelevant(){return!1}static mark(t){return new On(t)}static widget(t){let e=Math.max(-1e4,Math.min(1e4,t.side||0)),n=!!t.block;return e+=n&&!t.inlineOrder?e>0?3e8:-4e8:e>0?1e8:-1e8,new wn(t,e,e,n,t.widget||null,!1)}static replace(t){let e,n,o=!!t.block;if(t.isBlockGap)e=-5e8,n=4e8;else{let{start:i,end:r}=xn(t,o);e=(i?o?-3e8:-1:5e8)-1,n=(r?o?2e8:1:-6e8)+1}return new wn(t,e,n,o,t.widget||null,!0)}static line(t){return new bn(t)}static set(t,e=!1){return Rt.of(t,e)}hasHeight(){return!!this.widget&&this.widget.estimatedHeight>-1}}_n.none=Rt.empty;class On extends _n{constructor(t){let{start:e,end:n}=xn(t);super(e?-1:5e8,n?1:-6e8,null,t),this.tagName=t.tagName||"span",this.class=t.class||"",this.attrs=t.attributes||null}eq(t){var e,n;return this==t||t instanceof On&&this.tagName==t.tagName&&(this.class||(null===(e=this.attrs)||void 0===e?void 0:e.class))==(t.class||(null===(n=t.attrs)||void 0===n?void 0:n.class))&&hn(this.attrs,t.attrs,"class")}range(t,e=t){if(t>=e)throw new RangeError("Mark decorations may not be empty");return super.range(t,e)}}On.prototype.point=!1;class bn extends _n{constructor(t){super(-2e8,-2e8,null,t)}eq(t){return t instanceof bn&&this.spec.class==t.spec.class&&hn(this.spec.attributes,t.spec.attributes)}range(t,e=t){if(e!=t)throw new RangeError("Line decoration ranges must be zero-length");return super.range(t,e)}}bn.prototype.mapMode=C.TrackBefore,bn.prototype.point=!0;class wn extends _n{constructor(t,e,n,o,i,r){super(e,n,i,t),this.block=o,this.isReplace=r,this.mapMode=o?e<=0?C.TrackBefore:C.TrackAfter:C.TrackDel}get type(){return this.startSide!=this.endSide?yn.WidgetRange:this.startSide<=0?yn.WidgetBefore:yn.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(t){return t instanceof wn&&function(t,e){return t==e||!!(t&&e&&t.compare(e))}(this.widget,t.widget)&&this.block==t.block&&this.startSide==t.startSide&&this.endSide==t.endSide}range(t,e=t){if(this.isReplace&&(t>e||t==e&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&e!=t)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(t,e)}}function xn(t,e=!1){let{inclusiveStart:n,inclusiveEnd:o}=t;return null==n&&(n=t.inclusive),null==o&&(o=t.inclusive),{start:null!=n?n:e,end:null!=o?o:e}}function Sn(t,e,n,o=0){let i=n.length-1;i>=0&&n[i]+o>=t?n[i]=Math.max(n[i],e):n.push(t,e)}wn.prototype.point=!0;class kn{constructor(t,e,n,o){this.doc=t,this.pos=e,this.end=n,this.disallowBlockEffectsFor=o,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=t.iter(),this.skip=e}posCovered(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let t=this.content[this.content.length-1];return!(t.breakAfter||t instanceof mn&&t.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new gn),this.atCursorPos=!0),this.curLine}flushBuffer(t=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Pn(new sn(-1),t),t.length),this.pendingBuffer=0)}addBlockWidget(t){this.flushBuffer(),this.curLine=null,this.content.push(t)}finish(t){this.pendingBuffer&&t<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||t&&this.content.length&&this.content[this.content.length-1]instanceof mn||this.getLine()}buildText(t,e,n){for(;t>0;){if(this.textOff==this.text.length){let{value:e,lineBreak:n,done:o}=this.cursor.next(this.skip);if(this.skip=0,o)throw new Error("Ran out of text content when drawing inline views");if(n){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,t--;continue}this.text=e,this.textOff=0}let o=Math.min(this.text.length-this.textOff,t,512);this.flushBuffer(e.slice(e.length-n)),this.getLine().append(Pn(new nn(this.text.slice(this.textOff,this.textOff+o)),e),n),this.atCursorPos=!0,this.textOff+=o,t-=o,n=0}}span(t,e,n,o){this.buildText(e-t,n,o),this.pos=e,this.openStart<0&&(this.openStart=o)}point(t,e,n,o,i,r){if(this.disallowBlockEffectsFor[r]&&n instanceof wn){if(n.block)throw new RangeError("Block decorations may not be specified via plugins");if(e>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let s=e-t;if(n instanceof wn)if(n.block)n.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new mn(n.widget||Cn.block,s,n));else{let r=rn.create(n.widget||Cn.inline,s,s?0:n.startSide),a=this.atCursorPos&&!r.isEditable&&i<=o.length&&(t<e||n.startSide>0),l=!r.isEditable&&(t<e||i>o.length||n.startSide<=0),c=this.getLine();2!=this.pendingBuffer||a||r.isEditable||(this.pendingBuffer=0),this.flushBuffer(o),a&&(c.append(Pn(new sn(1),o),i),i=o.length+Math.max(0,i-o.length)),c.append(Pn(r,o),i),this.atCursorPos=l,this.pendingBuffer=l?t<e||i>o.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=o.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);s&&(this.textOff+s<=this.text.length?this.textOff+=s:(this.skip+=s-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=e),this.openStart<0&&(this.openStart=i)}static build(t,e,n,o,i){let r=new kn(t,e,n,i);return r.openEnd=Rt.spans(o,e,n,r),r.openStart<0&&(r.openStart=r.openEnd),r.finish(r.openEnd),r}}function Pn(t,e){for(let n of e)t=new on(n,[t],t.length);return t}class Cn extends vn{constructor(t){super(),this.tag=t}eq(t){return t.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(t){return t.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Cn.inline=new Cn("span"),Cn.block=new Cn("div");var Tn=function(t){return t[t["LTR"]=0]="LTR",t[t["RTL"]=1]="RTL",t}(Tn||(Tn={}));const En=Tn.LTR,An=Tn.RTL;function Qn(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const $n=Qn("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),jn=Qn("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Rn=Object.create(null),Mn=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);Rn[e]=n,Rn[n]=-e}function Vn(t){return t<=247?$n[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?jn[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const Zn=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Dn{get dir(){return this.level%2?An:En}constructor(t,e,n){this.from=t,this.to=e,this.level=n}side(t,e){return this.dir==e==t?this.to:this.from}forward(t,e){return t==(this.dir==e)}static find(t,e,n,o){let i=-1;for(let r=0;r<t.length;r++){let s=t[r];if(s.from<=e&&s.to>=e){if(s.level==n)return r;(i<0||(0!=o?o<0?s.from<e:s.to>e:t[i].level>s.level))&&(i=r)}}if(i<0)throw new RangeError("Index out of range");return i}}function In(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let o=t[n],i=e[n];if(o.from!=i.from||o.to!=i.to||o.direction!=i.direction||!In(o.inner,i.inner))return!1}return!0}const Nn=[];function Wn(t,e,n,o,i,r,s){let a=o%2?2:1;if(o%2==i%2)for(let l=e,c=0;l<n;){let e=!0,u=!1;if(c==r.length||l<r[c].from){let t=Nn[l];t!=a&&(e=!1,u=16==t)}let p=e||1!=a?null:[],h=e?o:o+1,d=l;t:for(;;)if(c<r.length&&d==r[c].from){if(u)break t;let f=r[c];if(!e)for(let t=f.to,e=c+1;;){if(t==n)break t;if(!(e<r.length&&r[e].from==t)){if(Nn[t]==a)break t;break}t=r[e++].to}if(c++,p)p.push(f);else{f.from>l&&s.push(new Dn(l,f.from,h)),Xn(t,f.direction==En!=!(h%2)?o+1:o,i,f.inner,f.from,f.to,s),l=f.to}d=f.to}else{if(d==n||(e?Nn[d]!=a:Nn[d]==a))break;d++}p?Wn(t,l,d,o+1,i,p,s):l<d&&s.push(new Dn(l,d,h)),l=d}else for(let l=n,c=r.length;l>e;){let n=!0,u=!1;if(!c||l>r[c-1].to){let t=Nn[l-1];t!=a&&(n=!1,u=16==t)}let p=n||1!=a?null:[],h=n?o:o+1,d=l;t:for(;;)if(c&&d==r[c-1].to){if(u)break t;let f=r[--c];if(!n)for(let t=f.from,n=c;;){if(t==e)break t;if(!n||r[n-1].to!=t){if(Nn[t-1]==a)break t;break}t=r[--n].from}if(p)p.push(f);else{f.to<l&&s.push(new Dn(f.to,l,h)),Xn(t,f.direction==En!=!(h%2)?o+1:o,i,f.inner,f.from,f.to,s),l=f.from}d=f.from}else{if(d==e||(n?Nn[d-1]!=a:Nn[d-1]==a))break;d--}p?Wn(t,d,l,o+1,i,p,s):d<l&&s.push(new Dn(d,l,h)),l=d}}function Xn(t,e,n,o,i,r,s){let a=e%2?2:1;!function(t,e,n,o,i){for(let r=0;r<=o.length;r++){let s=r?o[r-1].to:e,a=r<o.length?o[r].from:n,l=r?256:i;for(let e=s,n=l,o=l;e<a;e++){let i=Vn(t.charCodeAt(e));512==i?i=n:8==i&&4==o&&(i=16),Nn[e]=4==i?2:i,7&i&&(o=i),n=i}for(let t=s,e=l,o=l;t<a;t++){let i=Nn[t];if(128==i)t<a-1&&e==Nn[t+1]&&24&e?i=Nn[t]=e:Nn[t]=256;else if(64==i){let i=t+1;for(;i<a&&64==Nn[i];)i++;let r=t&&8==e||i<n&&8==Nn[i]?1==o?1:8:256;for(let e=t;e<i;e++)Nn[e]=r;t=i-1}else 8==i&&1==o&&(Nn[t]=1);e=i,7&i&&(o=i)}}}(t,i,r,o,a),function(t,e,n,o,i){let r=1==i?2:1;for(let s=0,a=0,l=0;s<=o.length;s++){let c=s?o[s-1].to:e,u=s<o.length?o[s].from:n;for(let e,n,o,s=c;s<u;s++)if(n=Rn[e=t.charCodeAt(s)])if(n<0){for(let t=a-3;t>=0;t-=3)if(Mn[t+1]==-n){let e=Mn[t+2],n=2&e?i:4&e?1&e?r:i:0;n&&(Nn[s]=Nn[Mn[t]]=n),a=t;break}}else{if(189==Mn.length)break;Mn[a++]=s,Mn[a++]=e,Mn[a++]=l}else if(2==(o=Nn[s])||1==o){let t=o==i;l=t?0:1;for(let e=a-3;e>=0;e-=3){let n=Mn[e+2];if(2&n)break;if(t)Mn[e+2]|=2;else{if(4&n)break;Mn[e+2]|=4}}}}}(t,i,r,o,a),function(t,e,n,o){for(let i=0,r=o;i<=n.length;i++){let s=i?n[i-1].to:t,a=i<n.length?n[i].from:e;for(let l=s;l<a;){let s=Nn[l];if(256==s){let s=l+1;for(;;)if(s==a){if(i==n.length)break;s=n[i++].to,a=i<n.length?n[i].from:e}else{if(256!=Nn[s])break;s++}let c=1==r,u=c==(1==(s<e?Nn[s]:o))?c?1:2:o;for(let e=s,o=i,r=o?n[o-1].to:t;e>l;)e==r&&(e=n[--o].from,r=o?n[o-1].to:t),Nn[--e]=u;l=s}else r=s,l++}}}(i,r,o,a),Wn(t,i,r,e,n,o,s)}function Ln(t,e,n){if(!t)return[new Dn(0,0,e==An?1:0)];if(e==En&&!n.length&&!Zn.test(t))return zn(t.length);if(n.length)for(;t.length>Nn.length;)Nn[Nn.length]=256;let o=[],i=e==En?0:1;return Xn(t,i,i,n,0,t.length,o),o}function zn(t){return[new Dn(0,t,0)]}let Un="";function qn(t,e,n,o,i){var r;let s=o.head-t.from,a=Dn.find(e,s,null!==(r=o.bidiLevel)&&void 0!==r?r:-1,o.assoc),l=e[a],c=l.side(i,n);if(s==c){let t=a+=i?1:-1;if(t<0||t>=e.length)return null;l=e[a=t],s=l.side(!i,n),c=l.side(i,n)}let u=y(t.text,s,l.forward(i,n));(u<l.from||u>l.to)&&(u=c),Un=t.text.slice(Math.min(s,u),Math.max(s,u));let p=a==(i?e.length-1:0)?null:e[a+(i?1:-1)];return p&&u==c&&p.level+(i?0:1)<l.level?Z.cursor(p.side(!i,n)+t.from,p.forward(i,n)?1:-1,p.level):Z.cursor(u+t.from,l.forward(i,n)?-1:1,l.level)}function Yn(t,e,n){for(let o=e;o<n;o++){let e=Vn(t.charCodeAt(o));if(1==e)return En;if(2==e||4==e)return An}return En}const Bn=N.define(),Fn=N.define(),Gn=N.define(),Hn=N.define(),Kn=N.define(),Jn=N.define(),to=N.define(),eo=N.define({combine:t=>t.some((t=>t))}),no=N.define({combine:t=>t.some((t=>t))}),oo=N.define();class io{constructor(t,e="nearest",n="nearest",o=5,i=5,r=!1){this.range=t,this.y=e,this.x=n,this.yMargin=o,this.xMargin=i,this.isSnapshot=r}map(t){return t.empty?this:new io(this.range.map(t),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(t){return this.range.to<=t.doc.length?this:new io(Z.cursor(t.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const ro=mt.define({map:(t,e)=>t.map(e)});function so(t,e,n){let o=t.facet(Hn);o.length?o[0](e):window.onerror?window.onerror(String(e),n,void 0,void 0,e):n?console.error(n+":",e):console.error(e)}const ao=N.define({combine:t=>!t.length||t[0]});let lo=0;const co=N.define();class uo{constructor(t,e,n,o,i){this.id=t,this.create=e,this.domEventHandlers=n,this.domEventObservers=o,this.extension=i(this)}static define(t,e){const{eventHandlers:n,eventObservers:o,provide:i,decorations:r}=e||{};return new uo(lo++,t,n,o,(t=>{let e=[co.of(t)];return r&&e.push(go.of((e=>{let n=e.plugin(t);return n?r(n):_n.none}))),i&&e.push(i(t)),e}))}static fromClass(t,e){return uo.define((e=>new t(e)),e)}}class po{constructor(t){this.spec=t,this.mustUpdate=null,this.value=null}update(t){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(e){if(so(t.state,e,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(t){}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(t)}catch(e){so(t.state,e,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(t){var e;if(null===(e=this.value)||void 0===e?void 0:e.destroy)try{this.value.destroy()}catch(e){so(t.state,e,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const ho=N.define(),fo=N.define(),go=N.define(),mo=N.define(),vo=N.define(),yo=N.define();function _o(t,e){let n=t.state.facet(yo);if(!n.length)return n;let o=n.map((e=>e instanceof Function?e(t):e)),i=[];return Rt.spans(o,e.from,e.to,{point(){},span(t,n,o,r){let s=t-e.from,a=n-e.from,l=i;for(let t=o.length-1;t>=0;t--,r--){let n,i=o[t].spec.bidiIsolate;if(null==i&&(i=Yn(e.text,s,a)),r>0&&l.length&&(n=l[l.length-1]).to==s&&n.direction==i)n.to=a,l=n.inner;else{let t={from:s,to:a,direction:i,inner:[]};l.push(t),l=t.inner}}}}),i}const Oo=N.define();function bo(t){let e=0,n=0,o=0,i=0;for(let r of t.state.facet(Oo)){let s=r(t);s&&(null!=s.left&&(e=Math.max(e,s.left)),null!=s.right&&(n=Math.max(n,s.right)),null!=s.top&&(o=Math.max(o,s.top)),null!=s.bottom&&(i=Math.max(i,s.bottom)))}return{left:e,right:n,top:o,bottom:i}}const wo=N.define();class xo{constructor(t,e,n,o){this.fromA=t,this.toA=e,this.fromB=n,this.toB=o}join(t){return new xo(Math.min(this.fromA,t.fromA),Math.max(this.toA,t.toA),Math.min(this.fromB,t.fromB),Math.max(this.toB,t.toB))}addToSet(t){let e=t.length,n=this;for(;e>0;e--){let o=t[e-1];if(!(o.fromA>n.toA)){if(o.toA<n.fromA)break;n=n.join(o),t.splice(e-1,1)}}return t.splice(e,0,n),t}static extendWithRanges(t,e){if(0==e.length)return t;let n=[];for(let o=0,i=0,r=0,s=0;;o++){let a=o==t.length?null:t[o],l=r-s,c=a?a.fromB:1e9;for(;i<e.length&&e[i]<c;){let t=e[i],o=e[i+1],r=Math.max(s,t),a=Math.min(c,o);if(r<=a&&new xo(r+l,a+l,r,a).addToSet(n),o>c)break;i+=2}if(!a)return n;new xo(a.fromA,a.toA,a.fromB,a.toB).addToSet(n),r=a.toA,s=a.toB}}}class So{constructor(t,e,n){this.view=t,this.state=e,this.transactions=n,this.flags=0,this.startState=t.state,this.changes=E.empty(this.startState.doc.length);for(let t of n)this.changes=this.changes.compose(t.changes);let o=[];this.changes.iterChangedRanges(((t,e,n,i)=>o.push(new xo(t,e,n,i)))),this.changedRanges=o}static create(t,e,n){return new So(t,e,n)}get viewportChanged(){return(4&this.flags)>0}get heightChanged(){return(2&this.flags)>0}get geometryChanged(){return this.docChanged||(this.flags&(8|2))>0}get focusChanged(){return(1&this.flags)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some((t=>t.selection))}get empty(){return 0==this.flags&&0==this.transactions.length}}class ko extends De{get length(){return this.view.state.doc.length}constructor(t){super(),this.view=t,this.decorations=[],this.dynamicDecorationMap=[],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(t.contentDOM),this.children=[new gn],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new xo(0,0,0,t.state.doc.length)],0,null)}update(t){var e;let n=t.changedRanges;this.minWidth>0&&n.length&&(n.every((({fromA:t,toA:e})=>e<this.minWidthFrom||t>this.minWidthTo))?(this.minWidthFrom=t.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=t.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0);let o=-1;this.view.inputState.composing>=0&&((null===(e=this.domChanged)||void 0===e?void 0:e.newSel)?o=this.domChanged.newSel.head:function(t,e){let n=!1;e&&t.iterChangedRanges(((t,o)=>{t<e.to&&o>e.from&&(n=!0)}));return n}(t.changes,this.hasComposition)||t.selectionSet||(o=t.state.selection.main.head));let i=o>-1?function(t,e,n){let o=Co(t,n);if(!o)return null;let{node:i,from:r,to:s}=o,a=i.nodeValue;if(/[\n\r]/.test(a))return null;if(t.state.doc.sliceString(o.from,o.to)!=a)return null;let l=e.invertedDesc,c=new xo(l.mapPos(r),l.mapPos(s),r,s),u=[];for(let e=i.parentNode;;e=e.parentNode){let n=De.get(e);if(n instanceof on)u.push({node:e,deco:n.mark});else{if(n instanceof gn||"DIV"==e.nodeName&&e.parentNode==t.contentDOM)return{range:c,text:i,marks:u,line:e};if(e==t.contentDOM)return null;u.push({node:e,deco:new On({inclusive:!0,attributes:fn(e),tagName:e.tagName.toLowerCase()})})}}}(this.view,t.changes,o):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:e,to:o}=this.hasComposition;n=new xo(e,o,t.changes.mapPos(e,-1),t.changes.mapPos(o,1)).addToSet(n.slice())}this.hasComposition=i?{from:i.range.fromB,to:i.range.toB}:null,(tn.ie||tn.chrome)&&!i&&t&&t.state.doc.lines!=t.startState.doc.lines&&(this.forceSelection=!0);let r=function(t,e,n){let o=new To;return Rt.compare(t,e,n,o),o.changes}(this.decorations,this.updateDeco(),t.changes);return n=xo.extendWithRanges(n,r),!!(7&this.flags||0!=n.length)&&(this.updateInner(n,t.startState.doc.length,i),t.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(t,e,n){this.view.viewState.mustMeasureContent=!0,this.updateChildren(t,e,n);let{observer:o}=this.view;o.ignore((()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let t=tn.chrome||tn.ios?{node:o.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,t),this.flags&=~7,t&&(t.written||o.selectionRange.focusNode!=t.node)&&(this.forceSelection=!0),this.dom.style.height=""})),this.markedForComposition.forEach((t=>t.flags&=~8));let i=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let t of this.children)t instanceof mn&&t.widget instanceof Po&&i.push(t.dom);o.updateGaps(i)}updateChildren(t,e,n){let o=n?n.range.addToSet(t.slice()):t,i=this.childCursor(e);for(let t=o.length-1;;t--){let e=t>=0?o[t]:null;if(!e)break;let r,s,a,l,{fromA:c,toA:u,fromB:p,toB:h}=e;if(n&&n.range.fromB<h&&n.range.toB>p){let t=kn.build(this.view.state.doc,p,n.range.fromB,this.decorations,this.dynamicDecorationMap),e=kn.build(this.view.state.doc,n.range.toB,h,this.decorations,this.dynamicDecorationMap);s=t.breakAtStart,a=t.openStart,l=e.openEnd;let o=this.compositionView(n);e.breakAtStart?o.breakAfter=1:e.content.length&&o.merge(o.length,o.length,e.content[0],!1,e.openStart,0)&&(o.breakAfter=e.content[0].breakAfter,e.content.shift()),t.content.length&&o.merge(0,0,t.content[t.content.length-1],!0,0,t.openEnd)&&t.content.pop(),r=t.content.concat(o).concat(e.content)}else({content:r,breakAtStart:s,openStart:a,openEnd:l}=kn.build(this.view.state.doc,p,h,this.decorations,this.dynamicDecorationMap));let{i:d,off:f}=i.findPos(u,1),{i:g,off:m}=i.findPos(c,-1);We(this,g,m,d,f,r,s,a,l)}n&&this.fixCompositionDOM(n)}compositionView(t){let e=new nn(t.text.nodeValue);e.flags|=8;for(let{deco:n}of t.marks)e=new on(n,[e],e.length);let n=new gn;return n.append(e,0),n}fixCompositionDOM(t){let e=(t,e)=>{e.flags|=8|(e.children.some((t=>7&t.flags))?1:0),this.markedForComposition.add(e);let n=De.get(t);n&&n!=e&&(n.dom=null),e.setDOM(t)},n=this.childPos(t.range.fromB,1),o=this.children[n.i];e(t.line,o);for(let i=t.marks.length-1;i>=-1;i--)n=o.childPos(n.off,1),o=o.children[n.i],e(i>=0?t.marks[i].node:t.text,o)}updateSelection(t=!1,e=!1){!t&&this.view.observer.selectionRange.focusNode||this.view.observer.readSelectionRange();let n=this.view.root.activeElement,o=n==this.dom,i=!o&&me(this.dom,this.view.observer.selectionRange)&&!(n&&this.dom.contains(n));if(!(o||e||i))return;let r=this.forceSelection;this.forceSelection=!1;let s=this.view.state.selection.main,a=this.moveToLine(this.domAtPos(s.anchor)),l=s.empty?a:this.moveToLine(this.domAtPos(s.head));if(tn.gecko&&s.empty&&!this.hasComposition&&(1==(c=a).node.nodeType&&c.node.firstChild&&(0==c.offset||"false"==c.node.childNodes[c.offset-1].contentEditable)&&(c.offset==c.node.childNodes.length||"false"==c.node.childNodes[c.offset].contentEditable))){let t=document.createTextNode("");this.view.observer.ignore((()=>a.node.insertBefore(t,a.node.childNodes[a.offset]||null))),a=l=new Ve(t,0),r=!0}var c;let u=this.view.observer.selectionRange;!r&&u.focusNode&&(ye(a.node,a.offset,u.anchorNode,u.anchorOffset)&&ye(l.node,l.offset,u.focusNode,u.focusOffset)||this.suppressWidgetCursorChange(u,s))||(this.view.observer.ignore((()=>{tn.android&&tn.chrome&&this.dom.contains(u.focusNode)&&function(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(1==n.nodeType&&'false'==n.contentEditable)return!0;return!1}(u.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let t=fe(this.view.root);if(t)if(s.empty){if(tn.gecko){let t=(e=a.node,o=a.offset,1!=e.nodeType?0:(o&&"false"==e.childNodes[o-1].contentEditable?1:0)|(o<e.childNodes.length&&"false"==e.childNodes[o].contentEditable?2:0));if(t&&t!=(1|2)){let e=(1==t?Re:Me)(a.node,a.offset);e&&(a=new Ve(e.node,e.offset))}}t.collapse(a.node,a.offset),null!=s.bidiLevel&&void 0!==t.caretBidiLevel&&(t.caretBidiLevel=s.bidiLevel)}else if(t.extend){t.collapse(a.node,a.offset);try{t.extend(l.node,l.offset)}catch(t){}}else{let e=document.createRange();s.anchor>s.head&&([a,l]=[l,a]),e.setEnd(l.node,l.offset),e.setStart(a.node,a.offset),t.removeAllRanges(),t.addRange(e)}else;var e,o;i&&this.view.root.activeElement==this.dom&&(this.dom.blur(),n&&n.focus())})),this.view.observer.setSelectionRange(a,l)),this.impreciseAnchor=a.precise?null:new Ve(u.anchorNode,u.anchorOffset),this.impreciseHead=l.precise?null:new Ve(u.focusNode,u.focusOffset)}suppressWidgetCursorChange(t,e){return this.hasComposition&&e.empty&&ye(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)&&this.posFromDOM(t.focusNode,t.focusOffset)==e.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:t}=this,e=t.state.selection.main,n=fe(t.root),{anchorNode:o,anchorOffset:i}=t.observer.selectionRange;if(!(n&&e.empty&&e.assoc&&n.modify))return;let r=gn.find(this,e.head);if(!r)return;let s=r.posAtStart;if(e.head==s||e.head==s+r.length)return;let a=this.coordsAt(e.head,-1),l=this.coordsAt(e.head,1);if(!a||!l||a.bottom>l.top)return;let c=this.domAtPos(e.head+e.assoc);n.collapse(c.node,c.offset),n.modify("move",e.assoc<0?"forward":"backward","lineboundary"),t.observer.readSelectionRange();let u=t.observer.selectionRange;t.docView.posFromDOM(u.anchorNode,u.anchorOffset)!=e.from&&n.collapse(o,i)}moveToLine(t){let e,n=this.dom;if(t.node!=n)return t;for(let o=t.offset;!e&&o<n.childNodes.length;o++){let t=De.get(n.childNodes[o]);t instanceof gn&&(e=t.domAtPos(0))}for(let o=t.offset-1;!e&&o>=0;o--){let t=De.get(n.childNodes[o]);t instanceof gn&&(e=t.domAtPos(t.length))}return e?new Ve(e.node,e.offset,!0):t}nearest(t){for(let e=t;e;){let t=De.get(e);if(t&&t.rootView==this)return t;e=e.parentNode}return null}posFromDOM(t,e){let n=this.nearest(t);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(t,e)+n.posAtStart}domAtPos(t){let{i:e,off:n}=this.childCursor().findPos(t,-1);for(;e<this.children.length-1;){let t=this.children[e];if(n<t.length||t instanceof gn)break;e++,n=0}return this.children[e].domAtPos(n)}coordsAt(t,e){let n=null,o=0;for(let i=this.length,r=this.children.length-1;r>=0;r--){let s=this.children[r],a=i-s.breakAfter,l=a-s.length;if(a<t)break;l<=t&&(l<t||s.covers(-1))&&(a>t||s.covers(1))&&(!n||s instanceof gn&&!(n instanceof gn&&e>=0))&&(n=s,o=l),i=l}return n?n.coordsAt(t-o,e):null}coordsForChar(t){let{i:e,off:n}=this.childPos(t,1),o=this.children[e];if(!(o instanceof gn))return null;for(;o.children.length;){let{i:t,off:e}=o.childPos(n,1);for(;;t++){if(t==o.children.length)return null;if((o=o.children[t]).length)break}n=e}if(!(o instanceof nn))return null;let i=y(o.text,n);if(i==n)return null;let r=Ae(o.dom,n,i).getClientRects();for(let t=0;t<r.length;t++){let e=r[t];if(t==r.length-1||e.top<e.bottom&&e.left<e.right)return e}return null}measureVisibleLineHeights(t){let e=[],{from:n,to:o}=t,i=this.view.contentDOM.clientWidth,r=i>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,s=-1,a=this.view.textDirection==Tn.LTR;for(let t=0,l=0;l<this.children.length;l++){let c=this.children[l],u=t+c.length;if(u>o)break;if(t>=n){let n=c.dom.getBoundingClientRect();if(e.push(n.height),r){let e=c.dom.lastChild,o=e?ve(e):[];if(o.length){let e=o[o.length-1],r=a?e.right-n.left:n.right-e.left;r>s&&(s=r,this.minWidth=i,this.minWidthFrom=t,this.minWidthTo=u)}}}t=u+c.breakAfter}return e}textDirectionAt(t){let{i:e}=this.childPos(t,1);return"rtl"==getComputedStyle(this.children[e].dom).direction?Tn.RTL:Tn.LTR}measureTextSize(){for(let t of this.children)if(t instanceof gn){let e=t.measureTextSize();if(e)return e}let t,e,n,o=document.createElement("div");return o.className="cm-line",o.style.width="99999px",o.style.position="absolute",o.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore((()=>{this.dom.appendChild(o);let i=ve(o.firstChild)[0];t=o.getBoundingClientRect().height,e=i?i.width/27:7,n=i?i.height:t,o.remove()})),{lineHeight:t,charWidth:e,textHeight:n}}childCursor(t=this.length){let e=this.children.length;return e&&(t-=this.children[--e].length),new Ne(this.children,t,e)}computeBlockGapDeco(){let t=[],e=this.view.viewState;for(let n=0,o=0;;o++){let i=o==e.viewports.length?null:e.viewports[o],r=i?i.from-1:this.length;if(r>n){let o=(e.lineBlockAt(r).bottom-e.lineBlockAt(n).top)/this.view.scaleY;t.push(_n.replace({widget:new Po(o),block:!0,inclusive:!0,isBlockGap:!0}).range(n,r))}if(!i)break;n=i.to+1}return _n.set(t)}updateDeco(){let t=0,e=this.view.state.facet(go).map((e=>(this.dynamicDecorationMap[t++]="function"==typeof e)?e(this.view):e)),n=!1,o=this.view.state.facet(mo).map(((t,e)=>{let o="function"==typeof t;return o&&(n=!0),o?t(this.view):t}));for(o.length&&(this.dynamicDecorationMap[t++]=n,e.push(Rt.join(o))),this.decorations=[...e,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];t<this.decorations.length;)this.dynamicDecorationMap[t++]=!1;return this.decorations}scrollIntoView(t){if(t.isSnapshot){let e=this.view.viewState.lineBlockAt(t.range.head);return this.view.scrollDOM.scrollTop=e.top-t.yMargin,void(this.view.scrollDOM.scrollLeft=t.xMargin)}for(let e of this.view.state.facet(oo))try{if(e(this.view,t.range,t))return!0}catch(t){so(this.view.state,t,"scroll handler")}let e,{range:n}=t,o=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1);if(!o)return;!n.empty&&(e=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(o={left:Math.min(o.left,e.left),top:Math.min(o.top,e.top),right:Math.max(o.right,e.right),bottom:Math.max(o.bottom,e.bottom)});let i=bo(this.view),r={left:o.left-i.left,top:o.top-i.top,right:o.right+i.right,bottom:o.bottom+i.bottom},{offsetWidth:s,offsetHeight:a}=this.view.scrollDOM;!function(t,e,n,o,i,r,s,a){let l=t.ownerDocument,c=l.defaultView||window;for(let u=t,p=!1;u&&!p;)if(1==u.nodeType){let t,h=u==l.body,d=1,f=1;if(h)t=Se(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(u).position)&&(p=!0),u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.assignedSlot||u.parentNode;continue}let e=u.getBoundingClientRect();({scaleX:d,scaleY:f}=ke(u,e)),t={left:e.left,right:e.left+u.clientWidth*d,top:e.top,bottom:e.top+u.clientHeight*f}}let g=0,m=0;if("nearest"==i)e.top<t.top?(m=-(t.top-e.top+s),n>0&&e.bottom>t.bottom+m&&(m=e.bottom-t.bottom+m+s)):e.bottom>t.bottom&&(m=e.bottom-t.bottom+s,n<0&&e.top-m<t.top&&(m=-(t.top+m-e.top+s)));else{let o=e.bottom-e.top,r=t.bottom-t.top;m=("center"==i&&o<=r?e.top+o/2-r/2:"start"==i||"center"==i&&n<0?e.top-s:e.bottom-r+s)-t.top}if("nearest"==o?e.left<t.left?(g=-(t.left-e.left+r),n>0&&e.right>t.right+g&&(g=e.right-t.right+g+r)):e.right>t.right&&(g=e.right-t.right+r,n<0&&e.left<t.left+g&&(g=-(t.left+g-e.left+r))):g=("center"==o?e.left+(e.right-e.left)/2-(t.right-t.left)/2:"start"==o==a?e.left-r:e.right-(t.right-t.left)+r)-t.left,g||m)if(h)c.scrollBy(g,m);else{let t=0,n=0;if(m){let t=u.scrollTop;u.scrollTop+=m/f,n=(u.scrollTop-t)*f}if(g){let e=u.scrollLeft;u.scrollLeft+=g/d,t=(u.scrollLeft-e)*d}e={left:e.left-t,top:e.top-n,right:e.right-t,bottom:e.bottom-n},t&&Math.abs(t-g)<1&&(o="nearest"),n&&Math.abs(n-m)<1&&(i="nearest")}if(h)break;u=u.assignedSlot||u.parentNode}else{if(11!=u.nodeType)break;u=u.host}}(this.view.scrollDOM,r,n.head<n.anchor?-1:1,t.x,t.y,Math.max(Math.min(t.xMargin,s),-s),Math.max(Math.min(t.yMargin,a),-a),this.view.textDirection==Tn.LTR)}}class Po extends vn{constructor(t){super(),this.height=t}toDOM(){let t=document.createElement("div");return t.className="cm-gap",this.updateDOM(t),t}eq(t){return t.height==this.height}updateDOM(t){return t.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}function Co(t,e){let n=t.observer.selectionRange;if(!n.focusNode)return null;let o=Re(n.focusNode,n.focusOffset),i=Me(n.focusNode,n.focusOffset),r=o||i;if(i&&o&&i.node!=o.node){let e=De.get(i.node);if(!e||e instanceof nn&&e.text!=i.node.nodeValue)r=i;else if(t.docView.lastCompositionAfterCursor){let t=De.get(o.node);!t||t instanceof nn&&t.text!=o.node.nodeValue||(r=i)}}if(t.docView.lastCompositionAfterCursor=r!=o,!r)return null;let s=e-r.offset;return{from:s,to:s+r.node.nodeValue.length,node:r.node}}let To=class{constructor(){this.changes=[]}compareRange(t,e){Sn(t,e,this.changes)}comparePoint(t,e){Sn(t,e,this.changes)}};function Eo(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function Ao(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function Qo(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function $o(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function jo(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function Ro(t,e,n){let o,i,r,s,a,l,c,u,p=!1;for(let h=t.firstChild;h;h=h.nextSibling){let t=ve(h);for(let d=0;d<t.length;d++){let f=t[d];i&&Qo(i,f)&&(f=$o(jo(f,i.bottom),i.top));let g=Eo(e,f),m=Ao(n,f);if(0==g&&0==m)return 3==h.nodeType?Mo(h,e,n):Ro(h,e,n);if(!o||s>m||s==m&&r>g){o=h,i=f,r=g,s=m;let a=m?n<f.top?-1:1:g?e<f.left?-1:1:0;p=!a||(a>0?d<t.length-1:d>0)}0==g?n>f.bottom&&(!c||c.bottom<f.bottom)?(a=h,c=f):n<f.top&&(!u||u.top>f.top)&&(l=h,u=f):c&&Qo(c,f)?c=jo(c,f.bottom):u&&Qo(u,f)&&(u=$o(u,f.top))}}if(c&&c.bottom>=n?(o=a,i=c):u&&u.top<=n&&(o=l,i=u),!o)return{node:t,offset:0};let h=Math.max(i.left,Math.min(i.right,e));return 3==o.nodeType?Mo(o,h,n):p&&"false"!=o.contentEditable?Ro(o,h,n):{node:t,offset:Array.prototype.indexOf.call(t.childNodes,o)+(e>=(i.left+i.right)/2?1:0)}}function Mo(t,e,n){let o=t.nodeValue.length,i=-1,r=1e9,s=0;for(let a=0;a<o;a++){let o=Ae(t,a,a+1).getClientRects();for(let l=0;l<o.length;l++){let c=o[l];if(c.top==c.bottom)continue;s||(s=e-c.left);let u=(c.top>n?c.top-n:n-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&u<r){let n=e>=(c.left+c.right)/2,o=n;if(tn.chrome||tn.gecko){Ae(t,a).getBoundingClientRect().left==c.right&&(o=!n)}if(u<=0)return{node:t,offset:a+(o?1:0)};i=a+(o?1:0),r=u}}}return{node:t,offset:i>-1?i:s>0?t.nodeValue.length:0}}function Vo(t,e,n,o=-1){var i,r;let s,a=t.contentDOM.getBoundingClientRect(),l=a.top+t.viewState.paddingTop,{docHeight:c}=t.viewState,{x:u,y:p}=e,h=p-l;if(h<0)return 0;if(h>c)return t.state.doc.length;for(let e=t.viewState.heightOracle.textHeight/2,i=!1;s=t.elementAtHeight(h),s.type!=yn.Text;)for(;h=o>0?s.bottom+e:s.top-e,!(h>=0&&h<=c);){if(i)return n?null:0;i=!0,o=-o}p=l+h;let d=s.from;if(d<t.viewport.from)return 0==t.viewport.from?0:n?null:Zo(t,a,s,u,p);if(d>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:Zo(t,a,s,u,p);let f=t.dom.ownerDocument,g=t.root.elementFromPoint?t.root:f,m=g.elementFromPoint(u,p);m&&!t.contentDOM.contains(m)&&(m=null),m||(u=Math.max(a.left+1,Math.min(a.right-1,u)),m=g.elementFromPoint(u,p),m&&!t.contentDOM.contains(m)&&(m=null));let v,y=-1;if(m&&0!=(null===(i=t.docView.nearest(m))||void 0===i?void 0:i.isEditable))if(f.caretPositionFromPoint){let t=f.caretPositionFromPoint(u,p);t&&({offsetNode:v,offset:y}=t)}else if(f.caretRangeFromPoint){let e=f.caretRangeFromPoint(u,p);e&&(({startContainer:v,startOffset:y}=e),(!t.contentDOM.contains(v)||tn.safari&&function(t,e,n){let o;if(3!=t.nodeType||e!=(o=t.nodeValue.length))return!1;for(let e=t.nextSibling;e;e=e.nextSibling)if(1!=e.nodeType||"BR"!=e.nodeName)return!1;return Ae(t,o-1,o).getBoundingClientRect().left>n}(v,y,u)||tn.chrome&&function(t,e,n){if(0!=e)return!1;for(let e=t;;){let t=e.parentNode;if(!t||1!=t.nodeType||t.firstChild!=e)return!1;if(t.classList.contains("cm-line"))break;e=t}let o=1==t.nodeType?t.getBoundingClientRect():Ae(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-o.left>5}(v,y,u))&&(v=void 0))}if(!v||!t.docView.dom.contains(v)){let e=gn.find(t.docView,d);if(!e)return h>s.top+s.height/2?s.to:s.from;({node:v,offset:y}=Ro(e.dom,u,p))}let _=t.docView.nearest(v);if(!_)return null;if(_.isWidget&&1==(null===(r=_.dom)||void 0===r?void 0:r.nodeType)){let t=_.dom.getBoundingClientRect();return e.y<t.top||e.y<=t.bottom&&e.x<=(t.left+t.right)/2?_.posAtStart:_.posAtEnd}return _.localPosFromDOM(v,y)+_.posAtStart}function Zo(t,e,n,o,i){let r=Math.round((o-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>1.5*t.defaultLineHeight){let e=t.viewState.heightOracle.textHeight;r+=Math.floor((i-n.top-.5*(t.defaultLineHeight-e))/e)*t.viewState.heightOracle.lineLength}let s=t.state.sliceDoc(n.from,n.to);return n.from+Yt(s,r,t.state.tabSize)}function Do(t,e){let n=t.lineBlockAt(e);if(Array.isArray(n.type))for(let t of n.type)if(t.to>e||t.to==e&&(t.to==n.to||t.type==yn.Text))return t;return n}function Io(t,e,n,o){let i=t.state.doc.lineAt(e.head),r=t.bidiSpans(i),s=t.textDirectionAt(i.from);for(let a=e,l=null;;){let e=qn(i,r,s,a,n),c=Un;if(!e){if(i.number==(n?t.state.doc.lines:1))return a;c="\n",i=t.state.doc.line(i.number+(n?1:-1)),r=t.bidiSpans(i),e=t.visualLineSide(i,!n)}if(l){if(!l(c))return a}else{if(!o)return e;l=o(c)}a=e}}function No(t,e,n){for(;;){let o=0;for(let i of t)i.between(e-1,e+1,((t,i,r)=>{if(e>t&&e<i){let r=o||n||(e-t<i-e?-1:1);e=r<0?t:i,o=r}}));if(!o)return e}}function Wo(t,e,n){let o=No(t.state.facet(vo).map((e=>e(t))),n.from,e.head>n.from?-1:1);return o==n.from?n:Z.cursor(o,o<n.from?1:-1)}class Xo{setSelectionOrigin(t){this.lastSelectionOrigin=t,this.lastSelectionTime=Date.now()}constructor(t){this.view=t,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=t.hasFocus,tn.safari&&t.contentDOM.addEventListener("input",(()=>null)),tn.gecko&&function(t){mi.has(t)||(mi.add(t),t.addEventListener("copy",(()=>{})),t.addEventListener("cut",(()=>{})))}(t.contentDOM.ownerDocument)}handleEvent(t){(function(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n,o=e.target;o!=t.contentDOM;o=o.parentNode)if(!o||11==o.nodeType||(n=De.get(o))&&n.ignoreEvent(e))return!1;return!0})(this.view,t)&&!this.ignoreDuringComposition(t)&&("keydown"==t.type&&this.keydown(t)||this.runHandlers(t.type,t))}runHandlers(t,e){let n=this.handlers[t];if(n){for(let t of n.observers)t(this.view,e);for(let t of n.handlers){if(e.defaultPrevented)break;if(t(this.view,e)){e.preventDefault();break}}}}ensureHandlers(t){let e=zo(t),n=this.handlers,o=this.view.contentDOM;for(let t in e)if("scroll"!=t){let i=!e[t].handlers.length,r=n[t];r&&i!=!r.handlers.length&&(o.removeEventListener(t,this.handleEvent),r=null),r||o.addEventListener(t,this.handleEvent,{passive:i})}for(let t in n)"scroll"==t||e[t]||o.removeEventListener(t,this.handleEvent);this.handlers=e}keydown(t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),9==t.keyCode&&Date.now()<this.lastEscPress+2e3)return!0;if(27!=t.keyCode&&Yo.indexOf(t.keyCode)<0&&(this.view.inputState.lastEscPress=0),tn.android&&tn.chrome&&!t.synthetic&&(13==t.keyCode||8==t.keyCode))return this.view.observer.delayAndroidKey(t.key,t.keyCode),!0;let e;return!tn.ios||t.synthetic||t.altKey||t.metaKey||!((e=Uo.find((e=>e.keyCode==t.keyCode)))&&!t.ctrlKey||qo.indexOf(t.key)>-1&&t.ctrlKey&&!t.shiftKey)?(229!=t.keyCode&&this.view.observer.forceFlush(),!1):(this.pendingIOSKey=e||t,setTimeout((()=>this.flushIOSKey()),250),!0)}flushIOSKey(t){let e=this.pendingIOSKey;return!!e&&(!("Enter"==e.key&&t&&t.from<t.to&&/^\S+$/.test(t.insert.toString()))&&(this.pendingIOSKey=void 0,Qe(this.view.contentDOM,e.key,e.keyCode,e instanceof KeyboardEvent?e:void 0)))}ignoreDuringComposition(t){return!!/^key/.test(t.type)&&(this.composing>0||!!(tn.safari&&!tn.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100)&&(this.compositionPendingKey=!1,!0))}startMouseSelection(t){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=t}update(t){this.mouseSelection&&this.mouseSelection.update(t),this.draggedContent&&t.docChanged&&(this.draggedContent=this.draggedContent.map(t.changes)),t.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function Lo(t,e){return(n,o)=>{try{return e.call(t,o,n)}catch(t){so(n.state,t)}}}function zo(t){let e=Object.create(null);function n(t){return e[t]||(e[t]={observers:[],handlers:[]})}for(let e of t){let t=e.spec;if(t&&t.domEventHandlers)for(let o in t.domEventHandlers){let i=t.domEventHandlers[o];i&&n(o).handlers.push(Lo(e.value,i))}if(t&&t.domEventObservers)for(let o in t.domEventObservers){let i=t.domEventObservers[o];i&&n(o).observers.push(Lo(e.value,i))}}for(let t in Ho)n(t).handlers.push(Ho[t]);for(let t in Ko)n(t).observers.push(Ko[t]);return e}const Uo=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],qo="dthko",Yo=[16,17,18,20,91,92,224,225],Bo=6;function Fo(t){return.7*Math.max(0,t)+8}class Go{constructor(t,e,n,o){this.view=t,this.startEvent=e,this.style=n,this.mustSelect=o,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=e,this.scrollParent=function(t){let e=t.ownerDocument;for(let n=t.parentNode;n&&n!=e.body;)if(1==n.nodeType){if(n.scrollHeight>n.clientHeight||n.scrollWidth>n.clientWidth)return n;n=n.assignedSlot||n.parentNode}else{if(11!=n.nodeType)break;n=n.host}return null}(t.contentDOM),this.atoms=t.state.facet(vo).map((e=>e(t)));let i=t.contentDOM.ownerDocument;i.addEventListener("mousemove",this.move=this.move.bind(this)),i.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=e.shiftKey,this.multiple=t.state.facet(Tt.allowMultipleSelections)&&function(t,e){let n=t.state.facet(Bn);return n.length?n[0](e):tn.mac?e.metaKey:e.ctrlKey}(t,e),this.dragging=!(!function(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let o=fe(t.root);if(!o||0==o.rangeCount)return!0;let i=o.getRangeAt(0).getClientRects();for(let t=0;t<i.length;t++){let n=i[t];if(n.left<=e.clientX&&n.right>=e.clientX&&n.top<=e.clientY&&n.bottom>=e.clientY)return!0}return!1}(t,e)||1!=ui(e))&&null}start(t){!1===this.dragging&&this.select(t)}move(t){var e;if(0==t.buttons)return this.destroy();if(this.dragging||null==this.dragging&&function(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}(this.startEvent,t)<10)return;this.select(this.lastEvent=t);let n=0,o=0,i=(null===(e=this.scrollParent)||void 0===e?void 0:e.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight},r=bo(this.view);t.clientX-r.left<=i.left+Bo?n=-Fo(i.left-t.clientX):t.clientX+r.right>=i.right-Bo&&(n=Fo(t.clientX-i.right)),t.clientY-r.top<=i.top+Bo?o=-Fo(i.top-t.clientY):t.clientY+r.bottom>=i.bottom-Bo&&(o=Fo(t.clientY-i.bottom)),this.setScrollSpeed(n,o)}up(t){null==this.dragging&&this.select(this.lastEvent),this.dragging||t.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let t=this.view.contentDOM.ownerDocument;t.removeEventListener("mousemove",this.move),t.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(t,e){this.scrollSpeed={x:t,y:e},t||e?this.scrolling<0&&(this.scrolling=setInterval((()=>this.scroll()),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),!1===this.dragging&&this.select(this.lastEvent)}skipAtoms(t){let e=null;for(let n=0;n<t.ranges.length;n++){let o=t.ranges[n],i=null;if(o.empty){let t=No(this.atoms,o.from,0);t!=o.from&&(i=Z.cursor(t,-1))}else{let t=No(this.atoms,o.from,-1),e=No(this.atoms,o.to,1);t==o.from&&e==o.to||(i=Z.range(o.from==o.anchor?t:e,o.from==o.head?t:e))}i&&(e||(e=t.ranges.slice()),e[n]=i)}return e?Z.create(e,t.mainIndex):t}select(t){let{view:e}=this,n=this.skipAtoms(this.style.get(t,this.extend,this.multiple));!this.mustSelect&&n.eq(e.state.selection,!1===this.dragging)||this.view.dispatch({selection:n,userEvent:"select.pointer"}),this.mustSelect=!1}update(t){this.style.update(t)&&setTimeout((()=>this.select(this.lastEvent)),20)}}const Ho=Object.create(null),Ko=Object.create(null),Jo=tn.ie&&tn.ie_version<15||tn.ios&&tn.webkit_version<604;function ti(t,e){let n,{state:o}=t,i=1,r=o.toText(e),s=r.lines==o.selection.ranges.length;if(null!=hi&&o.selection.ranges.every((t=>t.empty))&&hi==r.toString()){let t=-1;n=o.changeByRange((n=>{let a=o.doc.lineAt(n.from);if(a.from==t)return{range:n};t=a.from;let l=o.toText((s?r.line(i++).text:e)+o.lineBreak);return{changes:{from:a.from,insert:l},range:Z.cursor(n.from+l.length)}}))}else n=s?o.changeByRange((t=>{let e=r.line(i++);return{changes:{from:t.from,to:t.to,insert:e.text},range:Z.cursor(t.from+e.length)}})):o.replaceSelection(r);t.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}function ei(t,e,n,o){if(1==o)return Z.cursor(e,n);if(2==o)return function(t,e,n=1){let o=t.charCategorizer(e),i=t.doc.lineAt(e),r=e-i.from;if(0==i.length)return Z.cursor(e);0==r?n=1:r==i.length&&(n=-1);let s=r,a=r;n<0?s=y(i.text,r,!1):a=y(i.text,r);let l=o(i.text.slice(s,a));for(;s>0;){let t=y(i.text,s,!1);if(o(i.text.slice(t,s))!=l)break;s=t}for(;a<i.length;){let t=y(i.text,a);if(o(i.text.slice(a,t))!=l)break;a=t}return Z.range(s+i.from,a+i.from)}(t.state,e,n);{let n=gn.find(t.docView,e),o=t.state.doc.lineAt(n?n.posAtEnd:e),i=n?n.posAtStart:o.from,r=n?n.posAtEnd:o.to;return r<t.state.doc.length&&r==o.to&&r++,Z.range(i,r)}}Ko.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft},Ho.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),27==e.keyCode&&(t.inputState.lastEscPress=Date.now()),!1),Ko.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")},Ko.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")},Ho.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let o of t.state.facet(Gn))if(n=o(t,e),n)break;if(n||0!=e.button||(n=function(t,e){let n=ri(t,e),o=ui(e),i=t.state.selection;return{update(t){t.docChanged&&(n.pos=t.changes.mapPos(n.pos),i=i.map(t.changes))},get(e,r,s){let a,l=ri(t,e),c=ei(t,l.pos,l.bias,o);if(n.pos!=l.pos&&!r){let e=ei(t,n.pos,n.bias,o),i=Math.min(e.from,c.from),r=Math.max(e.to,c.to);c=i<c.from?Z.range(i,r):Z.range(r,i)}return r?i.replaceRange(i.main.extend(c.from,c.to)):s&&1==o&&i.ranges.length>1&&(a=function(t,e){for(let n=0;n<t.ranges.length;n++){let{from:o,to:i}=t.ranges[n];if(o<=e&&i>=e)return Z.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}(i,l.pos))?a:s?i.addRange(c):Z.create([c])}}}(t,e)),n){let o=!t.hasFocus;t.inputState.startMouseSelection(new Go(t,e,n,o)),o&&t.observer.ignore((()=>Ee(t.contentDOM)));let i=t.inputState.mouseSelection;if(i)return i.start(e),!1===i.dragging}return!1};let ni=(t,e)=>t>=e.top&&t<=e.bottom,oi=(t,e,n)=>ni(e,n)&&t>=n.left&&t<=n.right;function ii(t,e,n,o){let i=gn.find(t.docView,e);if(!i)return 1;let r=e-i.posAtStart;if(0==r)return 1;if(r==i.length)return-1;let s=i.coordsAt(r,-1);if(s&&oi(n,o,s))return-1;let a=i.coordsAt(r,1);return a&&oi(n,o,a)?1:s&&ni(o,s)?-1:1}function ri(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:ii(t,n,e.clientX,e.clientY)}}const si=tn.ie&&tn.ie_version<=11;let ai=null,li=0,ci=0;function ui(t){if(!si)return t.detail;let e=ai,n=ci;return ai=t,ci=Date.now(),li=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(li+1)%3:1}function pi(t,e,n,o){if(!n)return;let i=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:r}=t.inputState,s=o&&r&&function(t,e){let n=t.state.facet(Fn);return n.length?n[0](e):tn.mac?!e.altKey:!e.ctrlKey}(t,e)?{from:r.from,to:r.to}:null,a={from:i,insert:n},l=t.state.changes(s?[s,a]:a);t.focus(),t.dispatch({changes:l,selection:{anchor:l.mapPos(i,-1),head:l.mapPos(i,1)},userEvent:s?"move.drop":"input.drop"}),t.inputState.draggedContent=null}Ho.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let o=t.docView.nearest(e.target);if(o&&o.isWidget){let t=o.posAtStart,e=t+o.length;(t>=n.to||e<=n.from)&&(n=Z.range(t,e))}}let{inputState:o}=t;return o.mouseSelection&&(o.mouseSelection.dragging=!0),o.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",t.state.sliceDoc(n.from,n.to)),e.dataTransfer.effectAllowed="copyMove"),!1},Ho.dragend=t=>(t.inputState.draggedContent=null,!1),Ho.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let o=Array(n.length),i=0,r=()=>{++i==n.length&&pi(t,e,o.filter((t=>null!=t)).join(t.state.lineBreak),!1)};for(let t=0;t<n.length;t++){let e=new FileReader;e.onerror=r,e.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(e.result)||(o[t]=e.result),r()},e.readAsText(n[t])}return!0}{let n=e.dataTransfer.getData("Text");if(n)return pi(t,e,n,!0),!0}return!1},Ho.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=Jo?null:e.clipboardData;return n?(ti(t,n.getData("text/plain")||n.getData("text/uri-list")),!0):(function(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout((()=>{t.focus(),n.remove(),ti(t,n.value)}),50)}(t),!1)};let hi=null;Ho.copy=Ho.cut=(t,e)=>{let{text:n,ranges:o,linewise:i}=function(t){let e=[],n=[],o=!1;for(let o of t.selection.ranges)o.empty||(e.push(t.sliceDoc(o.from,o.to)),n.push(o));if(!e.length){let i=-1;for(let{from:o}of t.selection.ranges){let r=t.doc.lineAt(o);r.number>i&&(e.push(r.text),n.push({from:r.from,to:Math.min(t.doc.length,r.to+1)})),i=r.number}o=!0}return{text:e.join(t.lineBreak),ranges:n,linewise:o}}(t.state);if(!n&&!i)return!1;hi=i?n:null,"cut"!=e.type||t.state.readOnly||t.dispatch({changes:o,scrollIntoView:!0,userEvent:"delete.cut"});let r=Jo?null:e.clipboardData;return r?(r.clearData(),r.setData("text/plain",n),!0):(function(t,e){let n=t.dom.parentNode;if(!n)return;let o=n.appendChild(document.createElement("textarea"));o.style.cssText="position: fixed; left: -10000px; top: 10px",o.value=e,o.focus(),o.selectionEnd=e.length,o.selectionStart=0,setTimeout((()=>{o.remove(),t.focus()}),50)}(t,n),!1)};const di=dt.define();function fi(t,e){let n=[];for(let o of t.facet(to)){let i=o(t,e);i&&n.push(i)}return n?t.update({effects:n,annotations:di.of(!0)}):null}function gi(t){setTimeout((()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=fi(t.state,e);n?t.dispatch(n):t.update([])}}),10)}Ko.focus=t=>{t.inputState.lastFocusTime=Date.now(),t.scrollDOM.scrollTop||!t.inputState.lastScrollTop&&!t.inputState.lastScrollLeft||(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),gi(t)},Ko.blur=t=>{t.observer.clearSelectionRange(),gi(t)},Ko.compositionstart=Ko.compositionupdate=t=>{null==t.inputState.compositionFirstChange&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0)},Ko.compositionend=t=>{t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,tn.chrome&&tn.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then((()=>t.observer.flush())):setTimeout((()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])}),50)},Ko.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()},Ho.beforeinput=(t,e)=>{var n;let o;if(tn.chrome&&tn.android&&(o=Uo.find((t=>t.inputType==e.inputType)))&&(t.observer.delayAndroidKey(o.key,o.keyCode),"Backspace"==o.key||"Delete"==o.key)){let e=(null===(n=window.visualViewport)||void 0===n?void 0:n.height)||0;setTimeout((()=>{var n;((null===(n=window.visualViewport)||void 0===n?void 0:n.height)||0)>e+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())}),100)}return tn.ios&&"deleteContentForward"==e.inputType&&t.observer.flushSoon(),tn.safari&&"insertText"==e.inputType&&t.inputState.composing>=0&&setTimeout((()=>Ko.compositionend(t,e)),20),!1};const mi=new Set;const vi=["pre-wrap","normal","pre-line","break-spaces"];class yi{constructor(t){this.lineWrapping=t,this.doc=i.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(t,e){let n=this.doc.lineAt(e).number-this.doc.lineAt(t).number+1;return this.lineWrapping&&(n+=Math.max(0,Math.ceil((e-t-n*this.lineLength*.5)/this.lineLength))),this.lineHeight*n}heightForLine(t){if(!this.lineWrapping)return this.lineHeight;return(1+Math.max(0,Math.ceil((t-this.lineLength)/(this.lineLength-5))))*this.lineHeight}setDoc(t){return this.doc=t,this}mustRefreshForWrapping(t){return vi.indexOf(t)>-1!=this.lineWrapping}mustRefreshForHeights(t){let e=!1;for(let n=0;n<t.length;n++){let o=t[n];o<0?n++:this.heightSamples[Math.floor(10*o)]||(e=!0,this.heightSamples[Math.floor(10*o)]=!0)}return e}refresh(t,e,n,o,i,r){let s=vi.indexOf(t)>-1,a=Math.round(e)!=Math.round(this.lineHeight)||this.lineWrapping!=s;if(this.lineWrapping=s,this.lineHeight=e,this.charWidth=n,this.textHeight=o,this.lineLength=i,a){this.heightSamples={};for(let t=0;t<r.length;t++){let e=r[t];e<0?t++:this.heightSamples[Math.floor(10*e)]=!0}}return a}}class _i{constructor(t,e){this.from=t,this.heights=e,this.index=0}get more(){return this.index<this.heights.length}}class Oi{constructor(t,e,n,o,i){this.from=t,this.length=e,this.top=n,this.height=o,this._content=i}get type(){return"number"==typeof this._content?yn.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof wn?this._content.widget:null}get widgetLineBreaks(){return"number"==typeof this._content?this._content:0}join(t){let e=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(t._content)?t._content:[t]);return new Oi(this.from,this.length+t.length,this.top,this.height+t.height,e)}}var bi=function(t){return t[t["ByPos"]=0]="ByPos",t[t["ByHeight"]=1]="ByHeight",t[t["ByPosNoHeight"]=2]="ByPosNoHeight",t}(bi||(bi={}));const wi=.001;class xi{constructor(t,e,n=2){this.length=t,this.height=e,this.flags=n}get outdated(){return(2&this.flags)>0}set outdated(t){this.flags=(t?2:0)|~2&this.flags}setHeight(t,e){this.height!=e&&(Math.abs(this.height-e)>wi&&(t.heightChanged=!0),this.height=e)}replace(t,e,n){return xi.of(n)}decomposeLeft(t,e){e.push(this)}decomposeRight(t,e){e.push(this)}applyChanges(t,e,n,o){let i=this,r=n.doc;for(let s=o.length-1;s>=0;s--){let{fromA:a,toA:l,fromB:c,toB:u}=o[s],p=i.lineAt(a,bi.ByPosNoHeight,n.setDoc(e),0,0),h=p.to>=l?p:i.lineAt(l,bi.ByPosNoHeight,n,0,0);for(u+=h.to-l,l=h.to;s>0&&p.from<=o[s-1].toA;)a=o[s-1].fromA,c=o[s-1].fromB,s--,a<p.from&&(p=i.lineAt(a,bi.ByPosNoHeight,n,0,0));c+=p.from-a,a=p.from;let d=Ai.build(n.setDoc(r),t,c,u);i=i.replace(a,l,d)}return i.updateHeight(n,0)}static empty(){return new ki(0,0)}static of(t){if(1==t.length)return t[0];let e=0,n=t.length,o=0,i=0;for(;;)if(e==n)if(o>2*i){let i=t[e-1];i.break?t.splice(--e,1,i.left,null,i.right):t.splice(--e,1,i.left,i.right),n+=1+i.break,o-=i.size}else{if(!(i>2*o))break;{let e=t[n];e.break?t.splice(n,1,e.left,null,e.right):t.splice(n,1,e.left,e.right),n+=2+e.break,i-=e.size}}else if(o<i){let n=t[e++];n&&(o+=n.size)}else{let e=t[--n];e&&(i+=e.size)}let r=0;return null==t[e-1]?(r=1,e--):null==t[e]&&(r=1,n++),new Ci(xi.of(t.slice(0,e)),r,xi.of(t.slice(n)))}}xi.prototype.size=1;class Si extends xi{constructor(t,e,n){super(t,e),this.deco=n}blockAt(t,e,n,o){return new Oi(o,this.length,n,this.height,this.deco||0)}lineAt(t,e,n,o,i){return this.blockAt(0,n,o,i)}forEachLine(t,e,n,o,i,r){t<=i+this.length&&e>=i&&r(this.blockAt(0,n,o,i))}updateHeight(t,e=0,n=!1,o){return o&&o.from<=e&&o.more&&this.setHeight(t,o.heights[o.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class ki extends Si{constructor(t,e){super(t,e,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(t,e,n,o){return new Oi(o,this.length,n,this.height,this.breaks)}replace(t,e,n){let o=n[0];return 1==n.length&&(o instanceof ki||o instanceof Pi&&4&o.flags)&&Math.abs(this.length-o.length)<10?(o instanceof Pi?o=new ki(o.length,this.height):o.height=this.height,this.outdated||(o.outdated=!1),o):xi.of(n)}updateHeight(t,e=0,n=!1,o){return o&&o.from<=e&&o.more?this.setHeight(t,o.heights[o.index++]):(n||this.outdated)&&this.setHeight(t,Math.max(this.widgetHeight,t.heightForLine(this.length-this.collapsed))+this.breaks*t.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Pi extends xi{constructor(t){super(t,0)}heightMetrics(t,e){let n,o=t.doc.lineAt(e).number,i=t.doc.lineAt(e+this.length).number,r=i-o+1,s=0;if(t.lineWrapping){let e=Math.min(this.height,t.lineHeight*r);n=e/r,this.length>r+1&&(s=(this.height-e)/(this.length-r-1))}else n=this.height/r;return{firstLine:o,lastLine:i,perLine:n,perChar:s}}blockAt(t,e,n,o){let{firstLine:i,lastLine:r,perLine:s,perChar:a}=this.heightMetrics(e,o);if(e.lineWrapping){let i=o+(t<e.lineHeight?0:Math.round(Math.max(0,Math.min(1,(t-n)/this.height))*this.length)),r=e.doc.lineAt(i),l=s+r.length*a,c=Math.max(n,t-l/2);return new Oi(r.from,r.length,c,l,0)}{let o=Math.max(0,Math.min(r-i,Math.floor((t-n)/s))),{from:a,length:l}=e.doc.line(i+o);return new Oi(a,l,n+s*o,s,0)}}lineAt(t,e,n,o,i){if(e==bi.ByHeight)return this.blockAt(t,n,o,i);if(e==bi.ByPosNoHeight){let{from:e,to:o}=n.doc.lineAt(t);return new Oi(e,o-e,0,0,0)}let{firstLine:r,perLine:s,perChar:a}=this.heightMetrics(n,i),l=n.doc.lineAt(t),c=s+l.length*a,u=l.number-r,p=o+s*u+a*(l.from-i-u);return new Oi(l.from,l.length,Math.max(o,Math.min(p,o+this.height-c)),c,0)}forEachLine(t,e,n,o,i,r){t=Math.max(t,i),e=Math.min(e,i+this.length);let{firstLine:s,perLine:a,perChar:l}=this.heightMetrics(n,i);for(let c=t,u=o;c<=e;){let e=n.doc.lineAt(c);if(c==t){let n=e.number-s;u+=a*n+l*(t-i-n)}let o=a+l*e.length;r(new Oi(e.from,e.length,u,o,0)),u+=o,c=e.to+1}}replace(t,e,n){let o=this.length-e;if(o>0){let t=n[n.length-1];t instanceof Pi?n[n.length-1]=new Pi(t.length+o):n.push(null,new Pi(o-1))}if(t>0){let e=n[0];e instanceof Pi?n[0]=new Pi(t+e.length):n.unshift(new Pi(t-1),null)}return xi.of(n)}decomposeLeft(t,e){e.push(new Pi(t-1),null)}decomposeRight(t,e){e.push(null,new Pi(this.length-t-1))}updateHeight(t,e=0,n=!1,o){let i=e+this.length;if(o&&o.from<=e+this.length&&o.more){let n=[],r=Math.max(e,o.from),s=-1;for(o.from>e&&n.push(new Pi(o.from-e-1).updateHeight(t,e));r<=i&&o.more;){let e=t.doc.lineAt(r).length;n.length&&n.push(null);let i=o.heights[o.index++];-1==s?s=i:Math.abs(i-s)>=wi&&(s=-2);let a=new ki(e,i);a.outdated=!1,n.push(a),r+=e+1}r<=i&&n.push(null,new Pi(i-r).updateHeight(t,r));let a=xi.of(n);return(s<0||Math.abs(a.height-this.height)>=wi||Math.abs(s-this.heightMetrics(t,e).perLine)>=wi)&&(t.heightChanged=!0),a}return(n||this.outdated)&&(this.setHeight(t,t.heightForGap(e,e+this.length)),this.outdated=!1),this}toString(){return`gap(${this.length})`}}class Ci extends xi{constructor(t,e,n){super(t.length+e+n.length,t.height+n.height,e|(t.outdated||n.outdated?2:0)),this.left=t,this.right=n,this.size=t.size+n.size}get break(){return 1&this.flags}blockAt(t,e,n,o){let i=n+this.left.height;return t<i?this.left.blockAt(t,e,n,o):this.right.blockAt(t,e,i,o+this.left.length+this.break)}lineAt(t,e,n,o,i){let r=o+this.left.height,s=i+this.left.length+this.break,a=e==bi.ByHeight?t<r:t<s,l=a?this.left.lineAt(t,e,n,o,i):this.right.lineAt(t,e,n,r,s);if(this.break||(a?l.to<s:l.from>s))return l;let c=e==bi.ByPosNoHeight?bi.ByPosNoHeight:bi.ByPos;return a?l.join(this.right.lineAt(s,c,n,r,s)):this.left.lineAt(s,c,n,o,i).join(l)}forEachLine(t,e,n,o,i,r){let s=o+this.left.height,a=i+this.left.length+this.break;if(this.break)t<a&&this.left.forEachLine(t,e,n,o,i,r),e>=a&&this.right.forEachLine(t,e,n,s,a,r);else{let l=this.lineAt(a,bi.ByPos,n,o,i);t<l.from&&this.left.forEachLine(t,l.from-1,n,o,i,r),l.to>=t&&l.from<=e&&r(l),e>l.to&&this.right.forEachLine(l.to+1,e,n,s,a,r)}}replace(t,e,n){let o=this.left.length+this.break;if(e<o)return this.balanced(this.left.replace(t,e,n),this.right);if(t>this.left.length)return this.balanced(this.left,this.right.replace(t-o,e-o,n));let i=[];t>0&&this.decomposeLeft(t,i);let r=i.length;for(let t of n)i.push(t);if(t>0&&Ti(i,r-1),e<this.length){let t=i.length;this.decomposeRight(e,i),Ti(i,t)}return xi.of(i)}decomposeLeft(t,e){let n=this.left.length;if(t<=n)return this.left.decomposeLeft(t,e);e.push(this.left),this.break&&(n++,t>=n&&e.push(null)),t>n&&this.right.decomposeLeft(t-n,e)}decomposeRight(t,e){let n=this.left.length,o=n+this.break;if(t>=o)return this.right.decomposeRight(t-o,e);t<n&&this.left.decomposeRight(t,e),this.break&&t<o&&e.push(null),e.push(this.right)}balanced(t,e){return t.size>2*e.size||e.size>2*t.size?xi.of(this.break?[t,null,e]:[t,e]):(this.left=t,this.right=e,this.height=t.height+e.height,this.outdated=t.outdated||e.outdated,this.size=t.size+e.size,this.length=t.length+this.break+e.length,this)}updateHeight(t,e=0,n=!1,o){let{left:i,right:r}=this,s=e+i.length+this.break,a=null;return o&&o.from<=e+i.length&&o.more?a=i=i.updateHeight(t,e,n,o):i.updateHeight(t,e,n),o&&o.from<=s+r.length&&o.more?a=r=r.updateHeight(t,s,n,o):r.updateHeight(t,s,n),a?this.balanced(i,r):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Ti(t,e){let n,o;null==t[e]&&(n=t[e-1])instanceof Pi&&(o=t[e+1])instanceof Pi&&t.splice(e-1,3,new Pi(n.length+1+o.length))}const Ei=5;class Ai{constructor(t,e){this.pos=t,this.oracle=e,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=t}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(t,e){if(this.lineStart>-1){let t=Math.min(e,this.lineEnd),n=this.nodes[this.nodes.length-1];n instanceof ki?n.length+=t-this.pos:(t>this.pos||!this.isCovered)&&this.nodes.push(new ki(t-this.pos,-1)),this.writtenTo=t,e>t&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=e}point(t,e,n){if(t<e||n.heightRelevant){let o=n.widget?n.widget.estimatedHeight:0,i=n.widget?n.widget.lineBreaks:0;o<0&&(o=this.oracle.lineHeight);let r=e-t;n.block?this.addBlock(new Si(r,o,n)):(r||i||o>=Ei)&&this.addLineDeco(o,i,r)}else e>t&&this.span(t,e);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:t,to:e}=this.oracle.doc.lineAt(this.pos);this.lineStart=t,this.lineEnd=e,this.writtenTo<t&&((this.writtenTo<t-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,t-1)),this.nodes.push(null)),this.pos>t&&this.nodes.push(new ki(this.pos-t,-1)),this.writtenTo=this.pos}blankContent(t,e){let n=new Pi(e-t);return this.oracle.doc.lineAt(t).to==e&&(n.flags|=4),n}ensureLine(){this.enterLine();let t=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(t instanceof ki)return t;let e=new ki(0,-1);return this.nodes.push(e),e}addBlock(t){this.enterLine();let e=t.deco;e&&e.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(t),this.writtenTo=this.pos=this.pos+t.length,e&&e.endSide>0&&(this.covering=t)}addLineDeco(t,e,n){let o=this.ensureLine();o.length+=n,o.collapsed+=n,o.widgetHeight=Math.max(o.widgetHeight,t),o.breaks+=e,this.writtenTo=this.pos=this.pos+n}finish(t){let e=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||e instanceof ki||this.isCovered?(this.writtenTo<this.pos||null==e)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new ki(0,-1));let n=t;for(let t of this.nodes)t instanceof ki&&t.updateHeight(this.oracle,n),n+=t?t.length:1;return this.nodes}static build(t,e,n,o){let i=new Ai(n,t);return Rt.spans(e,n,o,i,0),i.finish(n)}}class Qi{constructor(){this.changes=[]}compareRange(){}comparePoint(t,e,n,o){(t<e||n&&n.heightRelevant||o&&o.heightRelevant)&&Sn(t,e,this.changes,5)}}function $i(t,e){let n=t.getBoundingClientRect(),o=t.ownerDocument,i=o.defaultView||window,r=Math.max(0,n.left),s=Math.min(i.innerWidth,n.right),a=Math.max(0,n.top),l=Math.min(i.innerHeight,n.bottom);for(let e=t.parentNode;e&&e!=o.body;)if(1==e.nodeType){let n=e,o=window.getComputedStyle(n);if((n.scrollHeight>n.clientHeight||n.scrollWidth>n.clientWidth)&&"visible"!=o.overflow){let o=n.getBoundingClientRect();r=Math.max(r,o.left),s=Math.min(s,o.right),a=Math.max(a,o.top),l=e==t.parentNode?o.bottom:Math.min(l,o.bottom)}e="absolute"==o.position||"fixed"==o.position?n.offsetParent:n.parentNode}else{if(11!=e.nodeType)break;e=e.host}return{left:r-n.left,right:Math.max(r,s)-n.left,top:a-(n.top+e),bottom:Math.max(a,l)-(n.top+e)}}function ji(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class Ri{constructor(t,e,n){this.from=t,this.to=e,this.size=n}static same(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let o=t[n],i=e[n];if(o.from!=i.from||o.to!=i.to||o.size!=i.size)return!1}return!0}draw(t,e){return _n.replace({widget:new Mi(this.size*(e?t.scaleY:t.scaleX),e)}).range(this.from,this.to)}}class Mi extends vn{constructor(t,e){super(),this.size=t,this.vertical=e}eq(t){return t.size==this.size&&t.vertical==this.vertical}toDOM(){let t=document.createElement("div");return this.vertical?t.style.height=this.size+"px":(t.style.width=this.size+"px",t.style.height="2px",t.style.display="inline-block"),t}get estimatedHeight(){return this.vertical?this.size:-1}}class Vi{constructor(t){this.state=t,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=Wi,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Tn.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let e=t.facet(fo).some((t=>"function"!=typeof t&&"cm-lineWrapping"==t.class));this.heightOracle=new yi(e),this.stateDeco=t.facet(go).filter((t=>"function"!=typeof t)),this.heightMap=xi.empty().applyChanges(this.stateDeco,i.empty,this.heightOracle.setDoc(t.doc),[new xo(0,0,0,t.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=_n.set(this.lineGaps.map((t=>t.draw(this,!1)))),this.computeVisibleRanges()}updateForViewport(){let t=[this.viewport],{main:e}=this.state.selection;for(let n=0;n<=1;n++){let o=n?e.head:e.anchor;if(!t.some((({from:t,to:e})=>o>=t&&o<=e))){let{from:e,to:n}=this.lineBlockAt(o);t.push(new Zi(e,n))}}this.viewports=t.sort(((t,e)=>t.from-e.from)),this.scaler=this.heightMap.height<=7e6?Wi:new Xi(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,(t=>{this.viewportLines.push(1==this.scaler.scale?t:Li(t,this.scaler))}))}update(t,e=null){this.state=t.state;let n=this.stateDeco;this.stateDeco=this.state.facet(go).filter((t=>"function"!=typeof t));let o=t.changedRanges,i=xo.extendWithRanges(o,function(t,e,n){let o=new Qi;return Rt.compare(t,e,n,o,0),o.changes}(n,this.stateDeco,t?t.changes:E.empty(this.state.doc.length))),r=this.heightMap.height,s=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);this.heightMap=this.heightMap.applyChanges(this.stateDeco,t.startState.doc,this.heightOracle.setDoc(this.state.doc),i),this.heightMap.height!=r&&(t.flags|=2),s?(this.scrollAnchorPos=t.changes.mapPos(s.from,-1),this.scrollAnchorHeight=s.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let a=i.length?this.mapViewport(this.viewport,t.changes):this.viewport;(e&&(e.range.head<a.from||e.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,e));let l=!t.changes.empty||2&t.flags||a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,this.updateForViewport(),l&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>2e3<<1)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,t.changes))),t.flags|=this.computeVisibleRanges(),e&&(this.scrollTarget=e),!this.mustEnforceCursorAssoc&&t.selectionSet&&t.view.lineWrapping&&t.state.selection.main.empty&&t.state.selection.main.assoc&&!t.state.facet(no)&&(this.mustEnforceCursorAssoc=!0)}measure(t){let e=t.contentDOM,n=window.getComputedStyle(e),o=this.heightOracle,r=n.whiteSpace;this.defaultTextDirection="rtl"==n.direction?Tn.RTL:Tn.LTR;let s=this.heightOracle.mustRefreshForWrapping(r),a=e.getBoundingClientRect(),l=s||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let c=0,u=0;if(a.width&&a.height){let{scaleX:t,scaleY:n}=ke(e,a);(t>.005&&Math.abs(this.scaleX-t)>.005||n>.005&&Math.abs(this.scaleY-n)>.005)&&(this.scaleX=t,this.scaleY=n,c|=8,s=l=!0)}let p=(parseInt(n.paddingTop)||0)*this.scaleY,h=(parseInt(n.paddingBottom)||0)*this.scaleY;this.paddingTop==p&&this.paddingBottom==h||(this.paddingTop=p,this.paddingBottom=h,c|=8|2),this.editorWidth!=t.scrollDOM.clientWidth&&(o.lineWrapping&&(l=!0),this.editorWidth=t.scrollDOM.clientWidth,c|=8);let d=t.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=d&&(this.scrollAnchorHeight=-1,this.scrollTop=d),this.scrolledToBottom=je(t.scrollDOM);let f=(this.printing?ji:$i)(e,this.paddingTop),g=f.top-this.pixelViewport.top,m=f.bottom-this.pixelViewport.bottom;this.pixelViewport=f;let v=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(v!=this.inView&&(this.inView=v,v&&(l=!0)),!this.inView&&!this.scrollTarget)return 0;let y=a.width;if(this.contentDOMWidth==y&&this.editorHeight==t.scrollDOM.clientHeight||(this.contentDOMWidth=a.width,this.editorHeight=t.scrollDOM.clientHeight,c|=8),l){let e=t.docView.measureVisibleLineHeights(this.viewport);if(o.mustRefreshForHeights(e)&&(s=!0),s||o.lineWrapping&&Math.abs(y-this.contentDOMWidth)>o.charWidth){let{lineHeight:n,charWidth:i,textHeight:a}=t.docView.measureTextSize();s=n>0&&o.refresh(r,n,i,a,y/i,e),s&&(t.docView.minWidth=0,c|=8)}g>0&&m>0?u=Math.max(g,m):g<0&&m<0&&(u=Math.min(g,m)),o.heightChanged=!1;for(let n of this.viewports){let r=n.from==this.viewport.from?e:t.docView.measureVisibleLineHeights(n);this.heightMap=(s?xi.empty().applyChanges(this.stateDeco,i.empty,this.heightOracle,[new xo(0,0,0,t.state.doc.length)]):this.heightMap).updateHeight(o,0,s,new _i(n.from,r))}o.heightChanged&&(c|=2)}let _=!this.viewportIsAppropriate(this.viewport,u)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return _&&(this.viewport=this.getViewport(u,this.scrollTarget)),this.updateForViewport(),(2&c||_)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>2e3<<1)&&this.updateLineGaps(this.ensureLineGaps(s?[]:this.lineGaps,t)),c|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,t.docView.enforceCursorAssoc()),c}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(t,e){let n=.5-Math.max(-.5,Math.min(.5,t/1e3/2)),o=this.heightMap,i=this.heightOracle,{visibleTop:r,visibleBottom:s}=this,a=new Zi(o.lineAt(r-1e3*n,bi.ByHeight,i,0,0).from,o.lineAt(s+1e3*(1-n),bi.ByHeight,i,0,0).to);if(e){let{head:t}=e.range;if(t<a.from||t>a.to){let n,r=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),s=o.lineAt(t,bi.ByPos,i,0,0);n="center"==e.y?(s.top+s.bottom)/2-r/2:"start"==e.y||"nearest"==e.y&&t<a.from?s.top:s.bottom-r,a=new Zi(o.lineAt(n-1e3/2,bi.ByHeight,i,0,0).from,o.lineAt(n+r+1e3/2,bi.ByHeight,i,0,0).to)}}return a}mapViewport(t,e){let n=e.mapPos(t.from,-1),o=e.mapPos(t.to,1);return new Zi(this.heightMap.lineAt(n,bi.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(o,bi.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:t,to:e},n=0){if(!this.inView)return!0;let{top:o}=this.heightMap.lineAt(t,bi.ByPos,this.heightOracle,0,0),{bottom:i}=this.heightMap.lineAt(e,bi.ByPos,this.heightOracle,0,0),{visibleTop:r,visibleBottom:s}=this;return(0==t||o<=r-Math.max(10,Math.min(-n,250)))&&(e==this.state.doc.length||i>=s+Math.max(10,Math.min(n,250)))&&o>r-2*1e3&&i<s+2*1e3}mapLineGaps(t,e){if(!t.length||e.empty)return t;let n=[];for(let o of t)e.touchesRange(o.from,o.to)||n.push(new Ri(e.mapPos(o.from),e.mapPos(o.to),o.size));return n}ensureLineGaps(t,e){let n=this.heightOracle.lineWrapping,o=n?1e4:2e3,i=o>>1,r=o<<1;if(this.defaultTextDirection!=Tn.LTR&&!n)return[];let s=[],a=(o,r,l,c)=>{if(r-o<i)return;let u=this.state.selection.main,p=[u.from];u.empty||p.push(u.to);for(let t of p)if(t>o&&t<r)return a(o,t-10,l,c),void a(t+10,r,l,c);let h=function(t,e){for(let n of t)if(e(n))return n;return}(t,(t=>t.from>=l.from&&t.to<=l.to&&Math.abs(t.from-o)<i&&Math.abs(t.to-r)<i&&!p.some((e=>t.from<e&&t.to>e))));if(!h){if(r<l.to&&e&&n&&e.visibleRanges.some((t=>t.from<=r&&t.to>=r))){let t=e.moveToLineBoundary(Z.cursor(r),!1,!0).head;t>o&&(r=t)}h=new Ri(o,r,this.gapSize(l,o,r,c))}s.push(h)};for(let t of this.viewportLines){if(t.length<r)continue;let e=Di(t.from,t.to,this.stateDeco);if(e.total<r)continue;let i,s,l=this.scrollTarget?this.scrollTarget.range.head:null;if(n){let n,r,a=o/this.heightOracle.lineLength*this.heightOracle.lineHeight;if(null!=l){let o=Ni(e,l),i=((this.visibleBottom-this.visibleTop)/2+a)/t.height;n=o-i,r=o+i}else n=(this.visibleTop-t.top-a)/t.height,r=(this.visibleBottom-t.top+a)/t.height;i=Ii(e,n),s=Ii(e,r)}else{let t,n,r=e.total*this.heightOracle.charWidth,a=o*this.heightOracle.charWidth;if(null!=l){let o=Ni(e,l),i=((this.pixelViewport.right-this.pixelViewport.left)/2+a)/r;t=o-i,n=o+i}else t=(this.pixelViewport.left-a)/r,n=(this.pixelViewport.right+a)/r;i=Ii(e,t),s=Ii(e,n)}i>t.from&&a(t.from,i,t,e),s<t.to&&a(s,t.to,t,e)}return s}gapSize(t,e,n,o){let i=Ni(o,n)-Ni(o,e);return this.heightOracle.lineWrapping?t.height*i:o.total*this.heightOracle.charWidth*i}updateLineGaps(t){Ri.same(t,this.lineGaps)||(this.lineGaps=t,this.lineGapDeco=_n.set(t.map((t=>t.draw(this,this.heightOracle.lineWrapping)))))}computeVisibleRanges(){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let e=[];Rt.spans(t,this.viewport.from,this.viewport.to,{span(t,n){e.push({from:t,to:n})},point(){}},20);let n=e.length!=this.visibleRanges.length||this.visibleRanges.some(((t,n)=>t.from!=e[n].from||t.to!=e[n].to));return this.visibleRanges=e,n?4:0}lineBlockAt(t){return t>=this.viewport.from&&t<=this.viewport.to&&this.viewportLines.find((e=>e.from<=t&&e.to>=t))||Li(this.heightMap.lineAt(t,bi.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(t){return Li(this.heightMap.lineAt(this.scaler.fromDOM(t),bi.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(t){let e=this.lineBlockAtHeight(t+8);return e.from>=this.viewport.from||this.viewportLines[0].top-t>200?e:this.viewportLines[0]}elementAtHeight(t){return Li(this.heightMap.blockAt(this.scaler.fromDOM(t),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Zi{constructor(t,e){this.from=t,this.to=e}}function Di(t,e,n){let o=[],i=t,r=0;return Rt.spans(n,t,e,{span(){},point(t,e){t>i&&(o.push({from:i,to:t}),r+=t-i),i=e}},20),i<e&&(o.push({from:i,to:e}),r+=e-i),{total:r,ranges:o}}function Ii({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let o=Math.floor(t*n);for(let t=0;;t++){let{from:n,to:i}=e[t],r=i-n;if(o<=r)return n+o;o-=r}}function Ni(t,e){let n=0;for(let{from:o,to:i}of t.ranges){if(e<=i){n+=e-o;break}n+=i-o}return n/t.total}const Wi={toDOM:t=>t,fromDOM:t=>t,scale:1};class Xi{constructor(t,e,n){let o=0,i=0,r=0;this.viewports=n.map((({from:n,to:i})=>{let r=e.lineAt(n,bi.ByPos,t,0,0).top,s=e.lineAt(i,bi.ByPos,t,0,0).bottom;return o+=s-r,{from:n,to:i,top:r,bottom:s,domTop:0,domBottom:0}})),this.scale=(7e6-o)/(e.height-o);for(let t of this.viewports)t.domTop=r+(t.top-i)*this.scale,r=t.domBottom=t.domTop+(t.bottom-t.top),i=t.bottom}toDOM(t){for(let e=0,n=0,o=0;;e++){let i=e<this.viewports.length?this.viewports[e]:null;if(!i||t<i.top)return o+(t-n)*this.scale;if(t<=i.bottom)return i.domTop+(t-i.top);n=i.bottom,o=i.domBottom}}fromDOM(t){for(let e=0,n=0,o=0;;e++){let i=e<this.viewports.length?this.viewports[e]:null;if(!i||t<i.domTop)return n+(t-o)/this.scale;if(t<=i.domBottom)return i.top+(t-i.domTop);n=i.bottom,o=i.domBottom}}}function Li(t,e){if(1==e.scale)return t;let n=e.toDOM(t.top),o=e.toDOM(t.bottom);return new Oi(t.from,t.length,n,o-n,Array.isArray(t._content)?t._content.map((t=>Li(t,e))):t._content)}const zi=N.define({combine:t=>t.join(" ")}),Ui=N.define({combine:t=>t.indexOf(!0)>-1}),qi=re.newName(),Yi=re.newName(),Bi=re.newName(),Fi={"&light":"."+Yi,"&dark":"."+Bi};function Gi(t,e,n){return new re(e,{finish:e=>/&/.test(e)?e.replace(/&\w*/,(e=>{if("&"==e)return t;if(!n||!n[e])throw new RangeError(`Unsupported selector: ${e}`);return n[e]})):t+" "+e})}const Hi=Gi("."+qi,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Fi),Ki="￿";class Ji{constructor(t,e){this.points=t,this.text="",this.lineSeparator=e.facet(Tt.lineSeparator)}append(t){this.text+=t}lineBreak(){this.text+=Ki}readRange(t,e){if(!t)return this;let n=t.parentNode;for(let o=t;;){this.findPointBefore(n,o);let t=this.text.length;this.readNode(o);let i=o.nextSibling;if(i==e)break;let r=De.get(o),s=De.get(i);(r&&s?r.breakAfter:(r?r.breakAfter:Oe(o))||Oe(i)&&("BR"!=o.nodeName||o.cmIgnore)&&this.text.length>t)&&this.lineBreak(),o=i}return this.findPointBefore(n,e),this}readTextNode(t){let e=t.nodeValue;for(let n of this.points)n.node==t&&(n.pos=this.text.length+Math.min(n.offset,e.length));for(let n=0,o=this.lineSeparator?null:/\r\n?|\n/g;;){let i,r=-1,s=1;if(this.lineSeparator?(r=e.indexOf(this.lineSeparator,n),s=this.lineSeparator.length):(i=o.exec(e))&&(r=i.index,s=i[0].length),this.append(e.slice(n,r<0?e.length:r)),r<0)break;if(this.lineBreak(),s>1)for(let e of this.points)e.node==t&&e.pos>this.text.length&&(e.pos-=s-1);n=r+s}}readNode(t){if(t.cmIgnore)return;let e=De.get(t),n=e&&e.overrideDOMText;if(null!=n){this.findPointInside(t,n.length);for(let t=n.iter();!t.next().done;)t.lineBreak?this.lineBreak():this.append(t.value)}else 3==t.nodeType?this.readTextNode(t):"BR"==t.nodeName?t.nextSibling&&this.lineBreak():1==t.nodeType&&this.readRange(t.firstChild,null)}findPointBefore(t,e){for(let n of this.points)n.node==t&&t.childNodes[n.offset]==e&&(n.pos=this.text.length)}findPointInside(t,e){for(let n of this.points)(3==t.nodeType?n.node==t:t.contains(n.node))&&(n.pos=this.text.length+(tr(t,n.node,n.offset)?e:0))}}function tr(t,e,n){for(;;){if(!e||n<we(e))return!1;if(e==t)return!0;n=_e(e)+1,e=e.parentNode}}class er{constructor(t,e){this.node=t,this.offset=e,this.pos=-1}}class nr{constructor(t,e,n,o){this.typeOver=o,this.bounds=null,this.text="";let{impreciseHead:i,impreciseAnchor:r}=t.docView;if(t.state.readOnly&&e>-1)this.newSel=null;else if(e>-1&&(this.bounds=t.docView.domBoundsAround(e,n,0))){let e=i||r?[]:function(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:o,focusNode:i,focusOffset:r}=t.observer.selectionRange;n&&(e.push(new er(n,o)),i==n&&r==o||e.push(new er(i,r)));return e}(t),n=new Ji(e,t.state);n.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=n.text,this.newSel=function(t,e){if(0==t.length)return null;let n=t[0].pos,o=2==t.length?t[1].pos:n;return n>-1&&o>-1?Z.single(n+e,o+e):null}(e,this.bounds.from)}else{let e=t.observer.selectionRange,n=i&&i.node==e.focusNode&&i.offset==e.focusOffset||!ge(t.contentDOM,e.focusNode)?t.state.selection.main.head:t.docView.posFromDOM(e.focusNode,e.focusOffset),o=r&&r.node==e.anchorNode&&r.offset==e.anchorOffset||!ge(t.contentDOM,e.anchorNode)?t.state.selection.main.anchor:t.docView.posFromDOM(e.anchorNode,e.anchorOffset),s=t.viewport;if((tn.ios||tn.chrome)&&t.state.selection.main.empty&&n!=o&&(s.from>0||s.to<t.state.doc.length)){let e=Math.min(n,o),i=Math.max(n,o),r=s.from-e,a=s.to-i;0!=r&&1!=r&&0!=e||0!=a&&-1!=a&&i!=t.state.doc.length||(n=0,o=t.state.doc.length)}this.newSel=Z.single(o,n)}}}function or(t,e){let n,{newSel:o}=e,r=t.state.selection.main,s=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:a}=e.bounds,l=r.from,c=null;(8===s||tn.android&&e.text.length<a-o)&&(l=r.to,c="end");let u=function(t,e,n,o){let i=Math.min(t.length,e.length),r=0;for(;r<i&&t.charCodeAt(r)==e.charCodeAt(r);)r++;if(r==i&&t.length==e.length)return null;let s=t.length,a=e.length;for(;s>0&&a>0&&t.charCodeAt(s-1)==e.charCodeAt(a-1);)s--,a--;if("end"==o){n-=s+Math.max(0,r-Math.min(s,a))-r}if(s<r&&t.length<e.length){r-=n<=r&&n>=s?r-n:0,a=r+(a-s),s=r}else if(a<r){r-=n<=r&&n>=a?r-n:0,s=r+(s-a),a=r}return{from:r,toA:s,toB:a}}(t.state.doc.sliceString(o,a,Ki),e.text,l-o,c);u&&(tn.chrome&&13==s&&u.toB==u.from+2&&e.text.slice(u.from,u.toB)==Ki+Ki&&u.toB--,n={from:o+u.from,to:o+u.toA,insert:i.of(e.text.slice(u.from,u.toB).split(Ki))})}else o&&(!t.hasFocus&&t.state.facet(ao)||o.main.eq(r))&&(o=null);if(!n&&!o)return!1;if(!n&&e.typeOver&&!r.empty&&o&&o.main.empty?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,r.to)}:n&&n.from>=r.from&&n.to<=r.to&&(n.from!=r.from||n.to!=r.to)&&r.to-r.from-(n.to-n.from)<=4?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,r.to))}:(tn.mac||tn.android)&&n&&n.from==n.to&&n.from==r.head-1&&/^\. ?$/.test(n.insert.toString())&&"off"==t.contentDOM.getAttribute("autocorrect")?(o&&2==n.insert.length&&(o=Z.single(o.main.anchor-1,o.main.head-1)),n={from:r.from,to:r.to,insert:i.of([" "])}):tn.chrome&&n&&n.from==n.to&&n.from==r.head&&"\n "==n.insert.toString()&&t.lineWrapping&&(o&&(o=Z.single(o.main.anchor-1,o.main.head-1)),n={from:r.from,to:r.to,insert:i.of([" "])}),n){if(tn.ios&&t.inputState.flushIOSKey(n))return!0;if(tn.android&&(n.to==r.to&&(n.from==r.from||n.from==r.from-1&&" "==t.state.sliceDoc(n.from,r.from))&&1==n.insert.length&&2==n.insert.lines&&Qe(t.contentDOM,"Enter",13)||(n.from==r.from-1&&n.to==r.to&&0==n.insert.length||8==s&&n.insert.length<n.to-n.from&&n.to>r.head)&&Qe(t.contentDOM,"Backspace",8)||n.from==r.from&&n.to==r.to+1&&0==n.insert.length&&Qe(t.contentDOM,"Delete",46)))return!0;let e,i=n.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let a=()=>e||(e=function(t,e,n){let o,i=t.state,r=i.selection.main;if(e.from>=r.from&&e.to<=r.to&&e.to-e.from>=(r.to-r.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let n=r.from<e.from?i.sliceDoc(r.from,e.from):"",s=r.to>e.to?i.sliceDoc(e.to,r.to):"";o=i.replaceSelection(t.state.toText(n+e.insert.sliceString(0,void 0,t.state.lineBreak)+s))}else{let s=i.changes(e),a=n&&n.main.to<=s.newLength?n.main:void 0;if(i.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=r.to&&e.to>=r.to-10){let l,c=t.state.sliceDoc(e.from,e.to),u=n&&Co(t,n.main.head);if(u){let t=e.insert.length-(e.to-e.from);l={from:u.from,to:u.to-t}}else l=t.state.doc.lineAt(r.head);let p=r.to-e.to,h=r.to-r.from;o=i.changeByRange((n=>{if(n.from==r.from&&n.to==r.to)return{changes:s,range:a||n.map(s)};let o=n.to-p,u=o-c.length;if(n.to-n.from!=h||t.state.sliceDoc(u,o)!=c||n.to>=l.from&&n.from<=l.to)return{range:n};let d=i.changes({from:u,to:o,insert:e.insert}),f=n.to-r.to;return{changes:d,range:a?Z.range(Math.max(0,a.anchor+f),Math.max(0,a.head+f)):n.map(d)}}))}else o={changes:s,selection:a&&i.selection.replaceRange(a)}}let s="input.type";(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,s+=".compose",t.inputState.compositionFirstChange&&(s+=".start",t.inputState.compositionFirstChange=!1));return i.update(o,{userEvent:s,scrollIntoView:!0})}(t,n,o));return t.state.facet(Jn).some((e=>e(t,n.from,n.to,i,a)))||t.dispatch(a()),!0}if(o&&!o.main.eq(r)){let e=!1,n="select";return t.inputState.lastSelectionTime>Date.now()-50&&("select"==t.inputState.lastSelectionOrigin&&(e=!0),n=t.inputState.lastSelectionOrigin),t.dispatch({selection:o,scrollIntoView:e,userEvent:n}),!0}return!1}const ir={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},rr=tn.ie&&tn.ie_version<=11;class sr{constructor(t){this.view=t,this.active=!1,this.selectionRange=new Pe,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=t.contentDOM,this.observer=new MutationObserver((e=>{for(let t of e)this.queue.push(t);(tn.ie&&tn.ie_version<=11||tn.ios&&t.composing)&&e.some((t=>"childList"==t.type&&t.removedNodes.length||"characterData"==t.type&&t.oldValue.length>t.target.nodeValue.length))?this.flushSoon():this.flush()})),rr&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),"function"==typeof ResizeObserver&&(this.resizeScroll=new ResizeObserver((()=>{var t;(null===(t=this.view.docView)||void 0===t?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()})),this.resizeScroll.observe(t.scrollDOM)),this.addWindowListeners(this.win=t.win),this.start(),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver((t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))}),{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver((t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))}),{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(t){this.view.inputState.runHandlers("scroll",t),this.intersecting&&this.view.measure()}onScroll(t){this.intersecting&&this.flush(!1),this.onScrollChanged(t)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout((()=>{this.resizeTimeout=-1,this.view.requestMeasure()}),50))}onPrint(t){("change"!=t.type||t.matches)&&(this.view.viewState.printing=!0,this.view.measure(),setTimeout((()=>{this.view.viewState.printing=!1,this.view.requestMeasure()}),500))}updateGaps(t){if(this.gapIntersection&&(t.length!=this.gaps.length||this.gaps.some(((e,n)=>e!=t[n])))){this.gapIntersection.disconnect();for(let e of t)this.gapIntersection.observe(e);this.gaps=t}}onSelectionChange(t){let e=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:n}=this,o=this.selectionRange;if(n.state.facet(ao)?n.root.activeElement!=this.dom:!me(n.dom,o))return;let i=o.anchorNode&&n.docView.nearest(o.anchorNode);i&&i.ignoreEvent(t)?e||(this.selectionChanged=!1):(tn.ie&&tn.ie_version<=11||tn.android&&tn.chrome)&&!n.state.selection.main.empty&&o.focusNode&&ye(o.focusNode,o.focusOffset,o.anchorNode,o.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:t}=this,e=fe(t.root);if(!e)return!1;let n=tn.safari&&11==t.root.nodeType&&function(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}(this.dom.ownerDocument)==this.dom&&function(t,e){if(e.getComposedRanges){let n=e.getComposedRanges(t.root)[0];if(n)return lr(t,n)}let n=null;function o(t){t.preventDefault(),t.stopImmediatePropagation(),n=t.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",o,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",o,!0),n?lr(t,n):null}(this.view,e)||e;if(!n||this.selectionRange.eq(n))return!1;let o=me(this.dom,n);return o&&!this.selectionChanged&&t.inputState.lastFocusTime>Date.now()-200&&t.inputState.lastTouchTime<Date.now()-300&&function(t,e){let n=e.focusNode,o=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=o)return!1;for(o=Math.min(o,we(n));;)if(o){if(1!=n.nodeType)return!1;let t=n.childNodes[o-1];"false"==t.contentEditable?o--:(n=t,o=we(n))}else{if(n==t)return!0;o=_e(n),n=n.parentNode}}(this.dom,n)?(this.view.inputState.lastFocusTime=0,t.docView.updateSelection(),!1):(this.selectionRange.setRange(n),o&&(this.selectionChanged=!0),!0)}setSelectionRange(t,e){this.selectionRange.set(t.node,t.offset,e.node,e.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let t=0,e=null;for(let n=this.dom;n;)if(1==n.nodeType)!e&&t<this.scrollTargets.length&&this.scrollTargets[t]==n?t++:e||(e=this.scrollTargets.slice(0,t)),e&&e.push(n),n=n.assignedSlot||n.parentNode;else{if(11!=n.nodeType)break;n=n.host}if(t<this.scrollTargets.length&&!e&&(e=this.scrollTargets.slice(0,t)),e){for(let t of this.scrollTargets)t.removeEventListener("scroll",this.onScroll);for(let t of this.scrollTargets=e)t.addEventListener("scroll",this.onScroll)}}ignore(t){if(!this.active)return t();try{return this.stop(),t()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,ir),rr&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),rr&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(t,e){var n;if(!this.delayedAndroidKey){let t=()=>{let t=this.delayedAndroidKey;if(t){this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=t.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&t.force&&Qe(this.dom,t.key,t.keyCode)}};this.flushingAndroidKey=this.view.win.requestAnimationFrame(t)}this.delayedAndroidKey&&"Enter"!=t||(this.delayedAndroidKey={key:t,keyCode:e,force:this.lastChange<Date.now()-50||!!(null===(n=this.delayedAndroidKey)||void 0===n?void 0:n.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame((()=>{this.delayedFlush=-1,this.flush()})))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}processRecords(){let t=this.pendingRecords();t.length&&(this.queue=[]);let e=-1,n=-1,o=!1;for(let i of t){let t=this.readMutation(i);t&&(t.typeOver&&(o=!0),-1==e?({from:e,to:n}=t):(e=Math.min(t.from,e),n=Math.max(t.to,n)))}return{from:e,to:n,typeOver:o}}readChange(){let{from:t,to:e,typeOver:n}=this.processRecords(),o=this.selectionChanged&&me(this.dom,this.selectionRange);if(t<0&&!o)return null;t>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let i=new nr(this.view,t,e,n);return this.view.docView.domChanged={newSel:i.newSel?i.newSel.main:null},i}flush(t=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;t&&this.readSelectionRange();let e=this.readChange();if(!e)return this.view.requestMeasure(),!1;let n=this.view.state,o=or(this.view,e);return this.view.state==n&&this.view.update([]),o}readMutation(t){let e=this.view.docView.nearest(t.target);if(!e||e.ignoreMutation(t))return null;if(e.markDirty("attributes"==t.type),"attributes"==t.type&&(e.flags|=4),"childList"==t.type){let n=ar(e,t.previousSibling||t.target.previousSibling,-1),o=ar(e,t.nextSibling||t.target.nextSibling,1);return{from:n?e.posAfter(n):e.posAtStart,to:o?e.posBefore(o):e.posAtEnd,typeOver:!1}}return"characterData"==t.type?{from:e.posAtStart,to:e.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}:null}setWindow(t){t!=this.win&&(this.removeWindowListeners(this.win),this.win=t,this.addWindowListeners(this.win))}addWindowListeners(t){t.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener("change",this.onPrint):t.addEventListener("beforeprint",this.onPrint),t.addEventListener("scroll",this.onScroll),t.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(t){t.removeEventListener("scroll",this.onScroll),t.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener("change",this.onPrint):t.removeEventListener("beforeprint",this.onPrint),t.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var t,e,n;this.stop(),null===(t=this.intersection)||void 0===t||t.disconnect(),null===(e=this.gapIntersection)||void 0===e||e.disconnect(),null===(n=this.resizeScroll)||void 0===n||n.disconnect();for(let t of this.scrollTargets)t.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function ar(t,e,n){for(;e;){let o=De.get(e);if(o&&o.parent==t)return o;let i=e.parentNode;e=i!=t.dom?i:n>0?e.nextSibling:e.previousSibling}return null}function lr(t,e){let n=e.startContainer,o=e.startOffset,i=e.endContainer,r=e.endOffset,s=t.docView.domAtPos(t.state.selection.main.anchor);return ye(s.node,s.offset,i,r)&&([n,o,i,r]=[i,r,n,o]),{anchorNode:n,anchorOffset:o,focusNode:i,focusOffset:r}}class cr{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(t={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),t.parent&&t.parent.appendChild(this.dom);let{dispatch:e}=t;this.dispatchTransactions=t.dispatchTransactions||e&&(t=>t.forEach((t=>e(t,this))))||(t=>this.update(t)),this.dispatch=this.dispatch.bind(this),this._root=t.root||function(t){for(;t;){if(t&&(9==t.nodeType||11==t.nodeType&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}(t.parent)||document,this.viewState=new Vi(t.state||Tt.create(t)),t.scrollTo&&t.scrollTo.is(ro)&&(this.viewState.scrollTarget=t.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(co).map((t=>new po(t)));for(let t of this.plugins)t.update(this);this.observer=new sr(this),this.inputState=new Xo(this),this.inputState.ensureHandlers(this.plugins),this.docView=new ko(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure()}dispatch(...t){let e=1==t.length&&t[0]instanceof vt?t:1==t.length&&Array.isArray(t[0])?t[0]:[this.state.update(...t)];this.dispatchTransactions(e,this)}update(t){if(0!=this.updateState)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let e,n=!1,o=!1,i=this.state;for(let e of t){if(e.startState!=i)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");i=e.state}if(this.destroyed)return void(this.viewState.state=i);let r=this.hasFocus,s=0,a=null;t.some((t=>t.annotation(di)))?(this.inputState.notifiedFocused=r,s=1):r!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=r,a=fi(i,r),a||(s=1));let l=this.observer.delayedAndroidKey,c=null;if(l?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(i.doc)||!this.state.selection.eq(i.selection))&&(c=null)):this.observer.clear(),i.facet(Tt.phrases)!=this.state.facet(Tt.phrases))return this.setState(i);e=So.create(this,i,t),e.flags|=s;let u=this.viewState.scrollTarget;try{this.updateState=2;for(let e of t){if(u&&(u=u.map(e.changes)),e.scrollIntoView){let{main:t}=e.state.selection;u=new io(t.empty?t:Z.cursor(t.head,t.head>t.anchor?-1:1))}for(let t of e.effects)t.is(ro)&&(u=t.value.clip(this.state))}this.viewState.update(e,u),this.bidiCache=hr.update(this.bidiCache,e.changes),e.empty||(this.updatePlugins(e),this.inputState.update(e)),n=this.docView.update(e),this.state.facet(wo)!=this.styleModules&&this.mountStyles(),o=this.updateAttrs(),this.showAnnouncements(t),this.docView.updateSelection(n,t.some((t=>t.isUserEvent("select.pointer"))))}finally{this.updateState=0}if(e.startState.facet(zi)!=e.state.facet(zi)&&(this.viewState.mustMeasureContent=!0),(n||o||u||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!e.empty)for(let t of this.state.facet(Kn))try{t(e)}catch(t){so(this.state,t,"update listener")}(a||c)&&Promise.resolve().then((()=>{a&&this.state==a.startState&&this.dispatch(a),c&&!or(this,c)&&l.force&&Qe(this.contentDOM,l.key,l.keyCode)}))}setState(t){if(0!=this.updateState)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed)return void(this.viewState.state=t);this.updateState=2;let e=this.hasFocus;try{for(let t of this.plugins)t.destroy(this);this.viewState=new Vi(t),this.plugins=t.facet(co).map((t=>new po(t))),this.pluginMap.clear();for(let t of this.plugins)t.update(this);this.docView.destroy(),this.docView=new ko(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}e&&this.focus(),this.requestMeasure()}updatePlugins(t){let e=t.startState.facet(co),n=t.state.facet(co);if(e!=n){let o=[];for(let i of n){let n=e.indexOf(i);if(n<0)o.push(new po(i));else{let e=this.plugins[n];e.mustUpdate=t,o.push(e)}}for(let e of this.plugins)e.mustUpdate!=t&&e.destroy(this);this.plugins=o,this.pluginMap.clear()}else for(let e of this.plugins)e.mustUpdate=t;for(let t=0;t<this.plugins.length;t++)this.plugins[t].update(this);e!=n&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let t of this.plugins){let e=t.value;if(e&&e.docViewUpdate)try{e.docViewUpdate(this)}catch(t){so(this.state,t,"doc view update listener")}}}measure(t=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey)return this.measureScheduled=-1,void this.requestMeasure();this.measureScheduled=0,t&&this.observer.forceFlush();let e=null,n=this.scrollDOM,o=n.scrollTop*this.scaleY,{scrollAnchorPos:i,scrollAnchorHeight:r}=this.viewState;Math.abs(o-this.viewState.scrollTop)>1&&(r=-1),this.viewState.scrollAnchorHeight=-1;try{for(let t=0;;t++){if(r<0)if(je(n))i=-1,r=this.viewState.heightMap.height;else{let t=this.viewState.scrollAnchorAt(o);i=t.from,r=t.top}this.updateState=1;let s=this.viewState.measure(this);if(!s&&!this.measureRequests.length&&null==this.viewState.scrollTarget)break;if(t>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let a=[];4&s||([this.measureRequests,a]=[a,this.measureRequests]);let l=a.map((t=>{try{return t.read(this)}catch(t){return so(this.state,t),pr}})),c=So.create(this,this.state,[]),u=!1;c.flags|=s,e?e.flags|=s:e=c,this.updateState=2,c.empty||(this.updatePlugins(c),this.inputState.update(c),this.updateAttrs(),u=this.docView.update(c),u&&this.docViewUpdate());for(let t=0;t<a.length;t++)if(l[t]!=pr)try{let e=a[t];e.write&&e.write(l[t],this)}catch(t){so(this.state,t)}if(u&&this.docView.updateSelection(!0),!c.viewportChanged&&0==this.measureRequests.length){if(this.viewState.editorHeight){if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,r=-1;continue}{let t=(i<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(i).top)-r;if(t>1||t<-1){o+=t,n.scrollTop=o/this.scaleY,r=-1;continue}}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(e&&!e.empty)for(let t of this.state.facet(Kn))t(e)}get themeClasses(){return qi+" "+(this.state.facet(Ui)?Bi:Yi)+" "+this.state.facet(zi)}updateAttrs(){let t=dr(this,ho,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),e={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(ao)?"true":"false",class:"cm-content",style:`${tn.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(e["aria-readonly"]="true"),dr(this,fo,e);let n=this.observer.ignore((()=>{let n=dn(this.contentDOM,this.contentAttrs,e),o=dn(this.dom,this.editorAttrs,t);return n||o}));return this.editorAttrs=t,this.contentAttrs=e,n}showAnnouncements(t){let e=!0;for(let n of t)for(let t of n.effects)if(t.is(cr.announce)){e&&(this.announceDOM.textContent=""),e=!1,this.announceDOM.appendChild(document.createElement("div")).textContent=t.value}}mountStyles(){this.styleModules=this.state.facet(wo);let t=this.state.facet(cr.cspNonce);re.mount(this.root,this.styleModules.concat(Hi).reverse(),t?{nonce:t}:void 0)}readMeasured(){if(2==this.updateState)throw new Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(t){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame((()=>this.measure()))),t){if(this.measureRequests.indexOf(t)>-1)return;if(null!=t.key)for(let e=0;e<this.measureRequests.length;e++)if(this.measureRequests[e].key===t.key)return void(this.measureRequests[e]=t);this.measureRequests.push(t)}}plugin(t){let e=this.pluginMap.get(t);return(void 0===e||e&&e.spec!=t)&&this.pluginMap.set(t,e=this.plugins.find((e=>e.spec==t))||null),e&&e.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(t){return this.readMeasured(),this.viewState.elementAtHeight(t)}lineBlockAtHeight(t){return this.readMeasured(),this.viewState.lineBlockAtHeight(t)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(t){return this.viewState.lineBlockAt(t)}get contentHeight(){return this.viewState.contentHeight}moveByChar(t,e,n){return Wo(this,t,Io(this,t,e,n))}moveByGroup(t,e){return Wo(this,t,Io(this,t,e,(e=>function(t,e,n){let o=t.state.charCategorizer(e),i=o(n);return t=>{let e=o(t);return i==St.Space&&(i=e),i==e}}(this,t.head,e))))}visualLineSide(t,e){let n=this.bidiSpans(t),o=this.textDirectionAt(t.from),i=n[e?n.length-1:0];return Z.cursor(i.side(e,o)+t.from,i.forward(!e,o)?1:-1)}moveToLineBoundary(t,e,n=!0){return function(t,e,n,o){let i=Do(t,e.head),r=o&&i.type==yn.Text&&(t.lineWrapping||i.widgetLineBreaks)?t.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head):null;if(r){let e=t.dom.getBoundingClientRect(),o=t.textDirectionAt(i.from),s=t.posAtCoords({x:n==(o==Tn.LTR)?e.right-1:e.left+1,y:(r.top+r.bottom)/2});if(null!=s)return Z.cursor(s,n?-1:1)}return Z.cursor(n?i.to:i.from,n?-1:1)}(this,t,e,n)}moveVertically(t,e,n){return Wo(this,t,function(t,e,n,o){let i=e.head,r=n?1:-1;if(i==(n?t.state.doc.length:0))return Z.cursor(i,e.assoc);let s,a=e.goalColumn,l=t.contentDOM.getBoundingClientRect(),c=t.coordsAtPos(i,e.assoc||-1),u=t.documentTop;if(c)null==a&&(a=c.left-l.left),s=r<0?c.top:c.bottom;else{let e=t.viewState.lineBlockAt(i);null==a&&(a=Math.min(l.right-l.left,t.defaultCharacterWidth*(i-e.from))),s=(r<0?e.top:e.bottom)+u}let p=l.left+a,h=null!=o?o:t.viewState.heightOracle.textHeight>>1;for(let e=0;;e+=10){let n=s+(h+e)*r,o=Vo(t,{x:p,y:n},!1,r);if(n<l.top||n>l.bottom||(r<0?o<i:o>i)){let e=t.docView.coordsForChar(o),i=!e||n<e.top?-1:1;return Z.cursor(o,i,void 0,a)}}}(this,t,e,n))}domAtPos(t){return this.docView.domAtPos(t)}posAtDOM(t,e=0){return this.docView.posFromDOM(t,e)}posAtCoords(t,e=!0){return this.readMeasured(),Vo(this,t,e)}coordsAtPos(t,e=1){this.readMeasured();let n=this.docView.coordsAt(t,e);if(!n||n.left==n.right)return n;let o=this.state.doc.lineAt(t),i=this.bidiSpans(o);return xe(n,i[Dn.find(i,t-o.from,-1,e)].dir==Tn.LTR==e>0)}coordsForChar(t){return this.readMeasured(),this.docView.coordsForChar(t)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(t){return!this.state.facet(eo)||t<this.viewport.from||t>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(t))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(t){if(t.length>ur)return zn(t.length);let e,n=this.textDirectionAt(t.from);for(let o of this.bidiCache)if(o.from==t.from&&o.dir==n&&(o.fresh||In(o.isolates,e=_o(this,t))))return o.order;e||(e=_o(this,t));let o=Ln(t.text,n,e);return this.bidiCache.push(new hr(t.from,t.to,n,e,!0,o)),o}get hasFocus(){var t;return(this.dom.ownerDocument.hasFocus()||tn.safari&&(null===(t=this.inputState)||void 0===t?void 0:t.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore((()=>{Ee(this.contentDOM),this.docView.updateSelection()}))}setRoot(t){this._root!=t&&(this._root=t,this.observer.setWindow((9==t.nodeType?t:t.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let t of this.plugins)t.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(t,e={}){return ro.of(new io("number"==typeof t?Z.cursor(t):t,e.y,e.x,e.yMargin,e.xMargin))}scrollSnapshot(){let{scrollTop:t,scrollLeft:e}=this.scrollDOM,n=this.viewState.scrollAnchorAt(t);return ro.of(new io(Z.cursor(n.from),"start","start",n.top-t,e,!0))}static domEventHandlers(t){return uo.define((()=>({})),{eventHandlers:t})}static domEventObservers(t){return uo.define((()=>({})),{eventObservers:t})}static theme(t,e){let n=re.newName(),o=[zi.of(n),wo.of(Gi(`.${n}`,t))];return e&&e.dark&&o.push(Ui.of(!0)),o}static baseTheme(t){return J.lowest(wo.of(Gi("."+qi,t,Fi)))}static findFromDOM(t){var e;let n=t.querySelector(".cm-content"),o=n&&De.get(n)||De.get(t);return(null===(e=null==o?void 0:o.rootView)||void 0===e?void 0:e.view)||null}}cr.styleModule=wo,cr.inputHandler=Jn,cr.scrollHandler=oo,cr.focusChangeEffect=to,cr.perLineTextDirection=eo,cr.exceptionSink=Hn,cr.updateListener=Kn,cr.editable=ao,cr.mouseSelectionStyle=Gn,cr.dragMovesSelection=Fn,cr.clickAddsSelectionRange=Bn,cr.decorations=go,cr.outerDecorations=mo,cr.atomicRanges=vo,cr.bidiIsolatedRanges=yo,cr.scrollMargins=Oo,cr.darkTheme=Ui,cr.cspNonce=N.define({combine:t=>t.length?t[0]:""}),cr.contentAttributes=fo,cr.editorAttributes=ho,cr.lineWrapping=cr.contentAttributes.of({class:"cm-lineWrapping"}),cr.announce=mt.define();const ur=4096,pr={};class hr{constructor(t,e,n,o,i,r){this.from=t,this.to=e,this.dir=n,this.isolates=o,this.fresh=i,this.order=r}static update(t,e){if(e.empty&&!t.some((t=>t.fresh)))return t;let n=[],o=t.length?t[t.length-1].dir:Tn.LTR;for(let i=Math.max(0,t.length-10);i<t.length;i++){let r=t[i];r.dir!=o||e.touchesRange(r.from,r.to)||n.push(new hr(e.mapPos(r.from,1),e.mapPos(r.to,-1),r.dir,r.isolates,!1,r.order))}return n}}function dr(t,e,n){for(let o=t.state.facet(e),i=o.length-1;i>=0;i--){let e=o[i],r="function"==typeof e?e(t):e;r&&un(r,n)}return n}const fr=tn.mac?"mac":tn.windows?"win":tn.linux?"linux":"key";function gr(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),!1!==n&&e.shiftKey&&(t="Shift-"+t),t}const mr=J.default(cr.domEventHandlers({keydown:(t,e)=>wr(_r(e.state),t,e,"editor")})),vr=N.define({enables:mr}),yr=new WeakMap;function _r(t){let e=t.facet(vr),n=yr.get(e);return n||yr.set(e,n=function(t,e=fr){let n=Object.create(null),o=Object.create(null),i=(t,e)=>{let n=o[t];if(null==n)o[t]=e;else if(n!=e)throw new Error("Key binding "+t+" is used both as a regular binding and as a multi-stroke prefix")},r=(t,o,r,s,a)=>{var l,c;let u=n[t]||(n[t]=Object.create(null)),p=o.split(/ (?!$)/).map((t=>function(t,e){const n=t.split(/-(?!$)/);let o,i,r,s,a=n[n.length-1];"Space"==a&&(a=" ");for(let t=0;t<n.length-1;++t){const a=n[t];if(/^(cmd|meta|m)$/i.test(a))s=!0;else if(/^a(lt)?$/i.test(a))o=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))r=!0;else{if(!/^mod$/i.test(a))throw new Error("Unrecognized modifier name: "+a);"mac"==e?s=!0:i=!0}}return o&&(a="Alt-"+a),i&&(a="Ctrl-"+a),s&&(a="Meta-"+a),r&&(a="Shift-"+a),a}(t,e)));for(let e=1;e<p.length;e++){let n=p.slice(0,e).join(" ");i(n,!0),u[n]||(u[n]={preventDefault:!0,stopPropagation:!1,run:[e=>{let o=Or={view:e,prefix:n,scope:t};return setTimeout((()=>{Or==o&&(Or=null)}),br),!0}]})}let h=p.join(" ");i(h,!1);let d=u[h]||(u[h]={preventDefault:!1,stopPropagation:!1,run:(null===(c=null===(l=u._any)||void 0===l?void 0:l.run)||void 0===c?void 0:c.slice())||[]});r&&d.run.push(r),s&&(d.preventDefault=!0),a&&(d.stopPropagation=!0)};for(let o of t){let t=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let e of t){let t=n[e]||(n[e]=Object.create(null));t._any||(t._any={preventDefault:!1,stopPropagation:!1,run:[]});for(let e in t)t[e].run.push(o.any)}let i=o[e]||o.key;if(i)for(let e of t)r(e,i,o.run,o.preventDefault,o.stopPropagation),o.shift&&r(e,"Shift-"+i,o.shift,o.preventDefault,o.stopPropagation)}return n}(e.reduce(((t,e)=>t.concat(e)),[]))),n}let Or=null;const br=4e3;function wr(t,e,n,o){let i=function(t){var e=!(ue&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||pe&&t.shiftKey&&t.key&&1==t.key.length||"Unidentified"==t.key)&&t.key||(t.shiftKey?ce:le)[t.keyCode]||t.key||"Unidentified";return"Esc"==e&&(e="Escape"),"Del"==e&&(e="Delete"),"Left"==e&&(e="ArrowLeft"),"Up"==e&&(e="ArrowUp"),"Right"==e&&(e="ArrowRight"),"Down"==e&&(e="ArrowDown"),e}(e),r=k(x(i,0))==i.length&&" "!=i,s="",a=!1,l=!1,c=!1;Or&&Or.view==n&&Or.scope==o&&(s=Or.prefix+" ",Yo.indexOf(e.keyCode)<0&&(l=!0,Or=null));let u,p,h=new Set,d=t=>{if(t){for(let o of t.run)if(!h.has(o)&&(h.add(o),o(n,e)))return t.stopPropagation&&(c=!0),!0;t.preventDefault&&(t.stopPropagation&&(c=!0),l=!0)}return!1},f=t[o];return f&&(d(f[s+gr(i,e,!r)])?a=!0:r&&(e.altKey||e.metaKey||e.ctrlKey)&&!(tn.windows&&e.ctrlKey&&e.altKey)&&(u=le[e.keyCode])&&u!=i?(d(f[s+gr(u,e,!0)])||e.shiftKey&&(p=ce[e.keyCode])!=i&&p!=u&&d(f[s+gr(p,e,!1)]))&&(a=!0):r&&e.shiftKey&&d(f[s+gr(i,e,!0)])&&(a=!0),!a&&d(f._any)&&(a=!0)),l&&(a=!0),a&&c&&e.stopPropagation(),a}class xr{constructor(t,e,n,o,i){this.className=t,this.left=e,this.top=n,this.width=o,this.height=i}draw(){let t=document.createElement("div");return t.className=this.className,this.adjust(t),t}update(t,e){return e.className==this.className&&(this.adjust(t),!0)}adjust(t){t.style.left=this.left+"px",t.style.top=this.top+"px",null!=this.width&&(t.style.width=this.width+"px"),t.style.height=this.height+"px"}eq(t){return this.left==t.left&&this.top==t.top&&this.width==t.width&&this.height==t.height&&this.className==t.className}static forRange(t,e,n){if(n.empty){let o=t.coordsAtPos(n.head,n.assoc||1);if(!o)return[];let i=Sr(t);return[new xr(e,o.left-i.left,o.top-i.top,null,o.bottom-o.top)]}return function(t,e,n){if(n.to<=t.viewport.from||n.from>=t.viewport.to)return[];let o=Math.max(n.from,t.viewport.from),i=Math.min(n.to,t.viewport.to),r=t.textDirection==Tn.LTR,s=t.contentDOM,a=s.getBoundingClientRect(),l=Sr(t),c=s.querySelector(".cm-line"),u=c&&window.getComputedStyle(c),p=a.left+(u?parseInt(u.paddingLeft)+Math.min(0,parseInt(u.textIndent)):0),h=a.right-(u?parseInt(u.paddingRight):0),d=Do(t,o),f=Do(t,i),g=d.type==yn.Text?d:null,m=f.type==yn.Text?f:null;g&&(t.lineWrapping||d.widgetLineBreaks)&&(g=kr(t,o,g));m&&(t.lineWrapping||f.widgetLineBreaks)&&(m=kr(t,i,m));if(g&&m&&g.from==m.from)return y(_(n.from,n.to,g));{let e=g?_(n.from,null,g):O(d,!1),o=m?_(null,n.to,m):O(f,!0),i=[];return(g||d).to<(m||f).from-(g&&m?1:0)||d.widgetLineBreaks>1&&e.bottom+t.defaultLineHeight/2<o.top?i.push(v(p,e.bottom,h,o.top)):e.bottom<o.top&&t.elementAtHeight((e.bottom+o.top)/2).type==yn.Text&&(e.bottom=o.top=(e.bottom+o.top)/2),y(e).concat(i).concat(y(o))}function v(t,n,o,i){return new xr(e,t-l.left,n-l.top-.01,o-t,i-n+.01)}function y({top:t,bottom:e,horizontal:n}){let o=[];for(let i=0;i<n.length;i+=2)o.push(v(n[i],t,n[i+1],e));return o}function _(e,n,o){let i=1e9,s=-1e9,a=[];function l(e,n,l,c,u){let d=t.coordsAtPos(e,e==o.to?-2:2),f=t.coordsAtPos(l,l==o.from?2:-2);d&&f&&(i=Math.min(d.top,f.top,i),s=Math.max(d.bottom,f.bottom,s),u==Tn.LTR?a.push(r&&n?p:d.left,r&&c?h:f.right):a.push(!r&&c?p:f.left,!r&&n?h:d.right))}let c=null!=e?e:o.from,u=null!=n?n:o.to;for(let o of t.visibleRanges)if(o.to>c&&o.from<u)for(let i=Math.max(o.from,c),r=Math.min(o.to,u);;){let o=t.state.doc.lineAt(i);for(let s of t.bidiSpans(o)){let t=s.from+o.from,a=s.to+o.from;if(t>=r)break;a>i&&l(Math.max(t,i),null==e&&t<=c,Math.min(a,r),null==n&&a>=u,s.dir)}if(i=o.to+1,i>=r)break}return 0==a.length&&l(c,null==e,u,null==n,t.textDirection),{top:i,bottom:s,horizontal:a}}function O(t,e){let n=a.top+(e?t.top:t.bottom);return{top:n,bottom:n,horizontal:[]}}}(t,e,n)}}function Sr(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==Tn.LTR?e.left:e.right-t.scrollDOM.clientWidth*t.scaleX)-t.scrollDOM.scrollLeft*t.scaleX,top:e.top-t.scrollDOM.scrollTop*t.scaleY}}function kr(t,e,n){let o=Z.cursor(e);return{from:Math.max(n.from,t.moveToLineBoundary(o,!1,!0).from),to:Math.min(n.to,t.moveToLineBoundary(o,!0,!0).from),type:yn.Text}}class Pr{constructor(t,e){this.view=t,this.layer=e,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=t.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),e.above&&this.dom.classList.add("cm-layer-above"),e.class&&this.dom.classList.add(e.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(t.state),t.requestMeasure(this.measureReq),e.mount&&e.mount(this.dom,t)}update(t){t.startState.facet(Cr)!=t.state.facet(Cr)&&this.setOrder(t.state),(this.layer.update(t,this.dom)||t.geometryChanged)&&(this.scale(),t.view.requestMeasure(this.measureReq))}docViewUpdate(t){!1!==this.layer.updateOnDocViewUpdate&&t.requestMeasure(this.measureReq)}setOrder(t){let e=0,n=t.facet(Cr);for(;e<n.length&&n[e]!=this.layer;)e++;this.dom.style.zIndex=String((this.layer.above?150:-1)-e)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:t,scaleY:e}=this.view;t==this.scaleX&&e==this.scaleY||(this.scaleX=t,this.scaleY=e,this.dom.style.transform=`scale(${1/t}, ${1/e})`)}draw(t){if(t.length!=this.drawn.length||t.some(((t,e)=>!function(t,e){return t.constructor==e.constructor&&t.eq(e)}(t,this.drawn[e])))){let e=this.dom.firstChild,n=0;for(let o of t)o.update&&e&&o.constructor&&this.drawn[n].constructor&&o.update(e,this.drawn[n])?(e=e.nextSibling,n++):this.dom.insertBefore(o.draw(),e);for(;e;){let t=e.nextSibling;e.remove(),e=t}this.drawn=t}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const Cr=N.define();function Tr(t){return[uo.define((e=>new Pr(e,t))),Cr.of(t)]}const Er=!tn.ios,Ar=N.define({combine:t=>Et(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(t,e)=>Math.min(t,e),drawRangeCursor:(t,e)=>t||e})});function Qr(t={}){return[Ar.of(t),jr,Mr,Zr,no.of(!0)]}function $r(t){return t.startState.facet(Ar)!=t.state.facet(Ar)}const jr=Tr({above:!0,markers(t){let{state:e}=t,n=e.facet(Ar),o=[];for(let i of e.selection.ranges){let r=i==e.selection.main;if(i.empty?!r||Er:n.drawRangeCursor){let e=r?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",n=i.empty?i:Z.cursor(i.head,i.head>i.anchor?-1:1);for(let i of xr.forRange(t,e,n))o.push(i)}}return o},update(t,e){t.transactions.some((t=>t.selection))&&(e.style.animationName="cm-blink"==e.style.animationName?"cm-blink2":"cm-blink");let n=$r(t);return n&&Rr(t.state,e),t.docChanged||t.selectionSet||n},mount(t,e){Rr(e.state,t)},class:"cm-cursorLayer"});function Rr(t,e){e.style.animationDuration=t.facet(Ar).cursorBlinkRate+"ms"}const Mr=Tr({above:!1,markers:t=>t.state.selection.ranges.map((e=>e.empty?[]:xr.forRange(t,"cm-selectionBackground",e))).reduce(((t,e)=>t.concat(e))),update:(t,e)=>t.docChanged||t.selectionSet||t.viewportChanged||$r(t),class:"cm-selectionLayer"}),Vr={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};Er&&(Vr[".cm-line"].caretColor="transparent !important",Vr[".cm-content"]={caretColor:"transparent !important"});const Zr=J.highest(cr.theme(Vr)),Dr=mt.define({map:(t,e)=>null==t?null:e.mapPos(t)}),Ir=Y.define({create:()=>null,update:(t,e)=>(null!=t&&(t=e.changes.mapPos(t)),e.effects.reduce(((t,e)=>e.is(Dr)?e.value:t),t))}),Nr=uo.fromClass(class{constructor(t){this.view=t,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(t){var e;let n=t.state.field(Ir);null==n?null!=this.cursor&&(null===(e=this.cursor)||void 0===e||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(t.startState.field(Ir)!=n||t.docChanged||t.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:t}=this,e=t.state.field(Ir),n=null!=e&&t.coordsAtPos(e);if(!n)return null;let o=t.scrollDOM.getBoundingClientRect();return{left:n.left-o.left+t.scrollDOM.scrollLeft*t.scaleX,top:n.top-o.top+t.scrollDOM.scrollTop*t.scaleY,height:n.bottom-n.top}}drawCursor(t){if(this.cursor){let{scaleX:e,scaleY:n}=this.view;t?(this.cursor.style.left=t.left/e+"px",this.cursor.style.top=t.top/n+"px",this.cursor.style.height=t.height/n+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(t){this.view.state.field(Ir)!=t&&this.view.dispatch({effects:Dr.of(t)})}},{eventObservers:{dragover(t){this.setDropPos(this.view.posAtCoords({x:t.clientX,y:t.clientY}))},dragleave(t){t.target!=this.view.contentDOM&&this.view.contentDOM.contains(t.relatedTarget)||this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function Wr(t,e,n,o,i){e.lastIndex=0;for(let r,s=t.iterRange(n,o),a=n;!s.next().done;a+=s.value.length)if(!s.lineBreak)for(;r=e.exec(s.value);)i(a+r.index,r)}class Xr{constructor(t){const{regexp:e,decoration:n,decorate:o,boundary:i,maxLength:r=1e3}=t;if(!e.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=e,o)this.addMatch=(t,e,n,i)=>o(i,n,n+t[0].length,t,e);else if("function"==typeof n)this.addMatch=(t,e,o,i)=>{let r=n(t,e,o);r&&i(o,o+t[0].length,r)};else{if(!n)throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.addMatch=(t,e,o,i)=>i(o,o+t[0].length,n)}this.boundary=i,this.maxLength=r}createDeco(t){let e=new Mt,n=e.add.bind(e);for(let{from:e,to:o}of function(t,e){let n=t.visibleRanges;if(1==n.length&&n[0].from==t.viewport.from&&n[0].to==t.viewport.to)return n;let o=[];for(let{from:i,to:r}of n)i=Math.max(t.state.doc.lineAt(i).from,i-e),r=Math.min(t.state.doc.lineAt(r).to,r+e),o.length&&o[o.length-1].to>=i?o[o.length-1].to=r:o.push({from:i,to:r});return o}(t,this.maxLength))Wr(t.state.doc,this.regexp,e,o,((e,o)=>this.addMatch(o,t,e,n)));return e.finish()}updateDeco(t,e){let n=1e9,o=-1;return t.docChanged&&t.changes.iterChanges(((e,i,r,s)=>{s>t.view.viewport.from&&r<t.view.viewport.to&&(n=Math.min(r,n),o=Math.max(s,o))})),t.viewportChanged||o-n>1e3?this.createDeco(t.view):o>-1?this.updateRange(t.view,e.map(t.changes),n,o):e}updateRange(t,e,n,o){for(let i of t.visibleRanges){let r=Math.max(i.from,n),s=Math.min(i.to,o);if(s>r){let n=t.state.doc.lineAt(r),o=n.to<s?t.state.doc.lineAt(s):n,a=Math.max(i.from,n.from),l=Math.min(i.to,o.to);if(this.boundary){for(;r>n.from;r--)if(this.boundary.test(n.text[r-1-n.from])){a=r;break}for(;s<o.to;s++)if(this.boundary.test(o.text[s-o.from])){l=s;break}}let c,u=[],p=(t,e,n)=>u.push(n.range(t,e));if(n==o)for(this.regexp.lastIndex=a-n.from;(c=this.regexp.exec(n.text))&&c.index<l-n.from;)this.addMatch(c,t,c.index+n.from,p);else Wr(t.state.doc,this.regexp,a,l,((e,n)=>this.addMatch(n,t,e,p)));e=e.update({filterFrom:a,filterTo:l,filter:(t,e)=>t<a||e>l,add:u})}}return e}}const Lr=null!=/x/.unicode?"gu":"g",zr=new RegExp("[\0-\b\n--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\ufeff￹-￼]",Lr),Ur={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let qr=null;const Yr=N.define({combine(t){let e=Et(t,{render:null,specialChars:zr,addSpecialChars:null});return(e.replaceTabs=!function(){var t;if(null==qr&&"undefined"!=typeof document&&document.body){let e=document.body.style;qr=null!=(null!==(t=e.tabSize)&&void 0!==t?t:e.MozTabSize)}return qr||!1}())&&(e.specialChars=new RegExp("\t|"+e.specialChars.source,Lr)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,Lr)),e}});function Br(t={}){return[Yr.of(t),Fr||(Fr=uo.fromClass(class{constructor(t){this.view=t,this.decorations=_n.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(Yr)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new Xr({regexp:t.specialChars,decoration:(e,n,o)=>{let{doc:i}=n.state,r=x(e[0],0);if(9==r){let t=i.lineAt(o),e=n.state.tabSize,r=qt(t.text,e,o-t.from);return _n.replace({widget:new Kr((e-r%e)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[r]||(this.decorationCache[r]=_n.replace({widget:new Hr(t,r)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(Yr);t.startState.facet(Yr)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))]}let Fr=null;const Gr="•";class Hr extends vn{constructor(t,e){super(),this.options=t,this.code=e}eq(t){return t.code==this.code}toDOM(t){let e=function(t){return t>=32?Gr:10==t?"␤":String.fromCharCode(9216+t)}(this.code),n=t.state.phrase("Control character")+" "+(Ur[this.code]||"0x"+this.code.toString(16)),o=this.options.render&&this.options.render(this.code,n,e);if(o)return o;let i=document.createElement("span");return i.textContent=e,i.title=n,i.setAttribute("aria-label",n),i.className="cm-specialChar",i}ignoreEvent(){return!1}}class Kr extends vn{constructor(t){super(),this.width=t}eq(t){return t.width==this.width}toDOM(){let t=document.createElement("span");return t.textContent="\t",t.className="cm-tab",t.style.width=this.width+"px",t}ignoreEvent(){return!1}}null&&uo.fromClass(class{constructor(){this.height=1e3,this.attrs={style:"padding-bottom: 1000px"}}update(t){let{view:e}=t,n=e.viewState.editorHeight-e.defaultLineHeight-e.documentPadding.top-.5;n>=0&&n!=this.height&&(this.height=n,this.attrs={style:`padding-bottom: ${n}px`})}});const Jr=_n.line({class:"cm-activeLine"}),ts=uo.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let o of t.state.selection.ranges){let i=t.lineBlockAt(o.head);i.from>e&&(n.push(Jr.range(i.from)),e=i.from)}return _n.set(n)}},{decorations:t=>t.decorations});const es=2e3;function ns(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1),o=t.state.doc.lineAt(n),i=n-o.from,r=i>es?-1:i==o.length?function(t,e){let n=t.coordsAtPos(t.viewport.from);return n?Math.round(Math.abs((n.left-e)/t.defaultCharacterWidth)):-1}(t,e.clientX):qt(o.text,t.state.tabSize,n-o.from);return{line:o.number,col:r,off:i}}function os(t,e){let n=ns(t,e),o=t.state.selection;return n?{update(t){if(t.docChanged){let e=t.changes.mapPos(t.startState.doc.line(n.line).from),i=t.state.doc.lineAt(e);n={line:i.number,col:n.col,off:Math.min(n.off,i.length)},o=o.map(t.changes)}},get(e,i,r){let s=ns(t,e);if(!s)return o;let a=function(t,e,n){let o=Math.min(e.line,n.line),i=Math.max(e.line,n.line),r=[];if(e.off>es||n.off>es||e.col<0||n.col<0){let s=Math.min(e.off,n.off),a=Math.max(e.off,n.off);for(let e=o;e<=i;e++){let n=t.doc.line(e);n.length<=a&&r.push(Z.range(n.from+s,n.to+a))}}else{let s=Math.min(e.col,n.col),a=Math.max(e.col,n.col);for(let e=o;e<=i;e++){let n=t.doc.line(e),o=Yt(n.text,s,t.tabSize,!0);if(o<0)r.push(Z.cursor(n.to));else{let e=Yt(n.text,a,t.tabSize);r.push(Z.range(n.from+o,n.from+e))}}}return r}(t.state,n,s);return a.length?r?Z.create(a.concat(o.ranges)):Z.create(a):o}}:null}function is(t){let e=(null==t?void 0:t.eventFilter)||(t=>t.altKey&&0==t.button);return cr.mouseSelectionStyle.of(((t,n)=>e(n)?os(t,n):null))}const rs={Alt:[18,t=>!!t.altKey],Control:[17,t=>!!t.ctrlKey],Shift:[16,t=>!!t.shiftKey],Meta:[91,t=>!!t.metaKey]},ss={style:"cursor: crosshair"};function as(t={}){let[e,n]=rs[t.key||"Alt"],o=uo.fromClass(class{constructor(t){this.view=t,this.isDown=!1}set(t){this.isDown!=t&&(this.isDown=t,this.view.update([]))}},{eventObservers:{keydown(t){this.set(t.keyCode==e||n(t))},keyup(t){t.keyCode!=e&&n(t)||this.set(!1)},mousemove(t){this.set(n(t))}}});return[o,cr.contentAttributes.of((t=>{var e;return(null===(e=t.plugin(o))||void 0===e?void 0:e.isDown)?ss:null}))]}const ls="-10000px";class cs{constructor(t,e,n,o){this.facet=e,this.createTooltipView=n,this.removeTooltipView=o,this.input=t.state.facet(e),this.tooltips=this.input.filter((t=>t));let i=null;this.tooltipViews=this.tooltips.map((t=>i=n(t,i)))}update(t,e){var n;let o=t.state.facet(this.facet),i=o.filter((t=>t));if(o===this.input){for(let e of this.tooltipViews)e.update&&e.update(t);return!1}let r=[],s=e?[]:null;for(let n=0;n<i.length;n++){let o=i[n],a=-1;if(o){for(let t=0;t<this.tooltips.length;t++){let e=this.tooltips[t];e&&e.create==o.create&&(a=t)}if(a<0)r[n]=this.createTooltipView(o,n?r[n-1]:null),s&&(s[n]=!!o.above);else{let o=r[n]=this.tooltipViews[a];s&&(s[n]=e[a]),o.update&&o.update(t)}}}for(let t of this.tooltipViews)r.indexOf(t)<0&&(this.removeTooltipView(t),null===(n=t.destroy)||void 0===n||n.call(t));return e&&(s.forEach(((t,n)=>e[n]=t)),e.length=s.length),this.input=o,this.tooltips=i,this.tooltipViews=r,!0}}function us(t){let{win:e}=t;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const ps=N.define({combine:t=>{var e,n,o;return{position:tn.ios?"absolute":(null===(e=t.find((t=>t.position)))||void 0===e?void 0:e.position)||"fixed",parent:(null===(n=t.find((t=>t.parent)))||void 0===n?void 0:n.parent)||null,tooltipSpace:(null===(o=t.find((t=>t.tooltipSpace)))||void 0===o?void 0:o.tooltipSpace)||us}}}),hs=new WeakMap,ds=uo.fromClass(class{constructor(t){this.view=t,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(ps);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver="function"==typeof ResizeObserver?new ResizeObserver((()=>this.measureSoon())):null,this.manager=new cs(t,ms,((t,e)=>this.createTooltip(t,e)),(t=>{this.resizeObserver&&this.resizeObserver.unobserve(t.dom),t.dom.remove()})),this.above=this.manager.tooltips.map((t=>!!t.above)),this.intersectionObserver="function"==typeof IntersectionObserver?new IntersectionObserver((t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()}),{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout((()=>{this.measureTimeout=-1,this.maybeMeasure()}),50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t,this.above);e&&this.observeIntersection();let n=e||t.geometryChanged,o=t.state.facet(ps);if(o.position!=this.position&&!this.madeAbsolute){this.position=o.position;for(let t of this.manager.tooltipViews)t.dom.style.position=this.position;n=!0}if(o.parent!=this.parent){this.parent&&this.container.remove(),this.parent=o.parent,this.createContainer();for(let t of this.manager.tooltipViews)this.container.appendChild(t.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t,e){let n=t.create(this.view),o=e?e.dom:null;if(n.dom.classList.add("cm-tooltip"),t.arrow&&!n.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let t=document.createElement("div");t.className="cm-tooltip-arrow",n.dom.appendChild(t)}return n.dom.style.position=this.position,n.dom.style.top=ls,n.dom.style.left="0px",this.container.insertBefore(n.dom,o),n.mount&&n.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(n.dom),n}destroy(){var t,e,n;this.view.win.removeEventListener("resize",this.measureSoon);for(let e of this.manager.tooltipViews)e.dom.remove(),null===(t=e.destroy)||void 0===t||t.call(e);this.parent&&this.container.remove(),null===(e=this.resizeObserver)||void 0===e||e.disconnect(),null===(n=this.intersectionObserver)||void 0===n||n.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=this.view.dom.getBoundingClientRect(),e=1,n=1,o=!1;if("fixed"==this.position&&this.manager.tooltipViews.length){let{dom:t}=this.manager.tooltipViews[0];if(tn.gecko)o=t.offsetParent!=this.container.ownerDocument.body;else if(t.style.top==ls&&"0px"==t.style.left){let e=t.getBoundingClientRect();o=Math.abs(e.top+1e4)>1||Math.abs(e.left)>1}}if(o||"absolute"==this.position)if(this.parent){let t=this.parent.getBoundingClientRect();t.width&&t.height&&(e=t.width/this.parent.offsetWidth,n=t.height/this.parent.offsetHeight)}else({scaleX:e,scaleY:n}=this.view.viewState);return{editor:t,parent:this.parent?this.container.getBoundingClientRect():t,pos:this.manager.tooltips.map(((t,e)=>{let n=this.manager.tooltipViews[e];return n.getCoords?n.getCoords(t.pos):this.view.coordsAtPos(t.pos)})),size:this.manager.tooltipViews.map((({dom:t})=>t.getBoundingClientRect())),space:this.view.state.facet(ps).tooltipSpace(this.view),scaleX:e,scaleY:n,makeAbsolute:o}}writeMeasure(t){var e;if(t.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let t of this.manager.tooltipViews)t.dom.style.position="absolute"}let{editor:n,space:o,scaleX:i,scaleY:r}=t,s=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],c=this.manager.tooltipViews[a],{dom:u}=c,p=t.pos[a],h=t.size[a];if(!p||p.bottom<=Math.max(n.top,o.top)||p.top>=Math.min(n.bottom,o.bottom)||p.right<Math.max(n.left,o.left)-.1||p.left>Math.min(n.right,o.right)+.1){u.style.top=ls;continue}let d=l.arrow?c.dom.querySelector(".cm-tooltip-arrow"):null,f=d?7:0,g=h.right-h.left,m=null!==(e=hs.get(c))&&void 0!==e?e:h.bottom-h.top,v=c.offset||gs,y=this.view.textDirection==Tn.LTR,_=h.width>o.right-o.left?y?o.left:o.right-h.width:y?Math.min(p.left-(d?14:0)+v.x,o.right-g):Math.max(o.left,p.left-g+(d?14:0)-v.x),O=this.above[a];!l.strictSide&&(O?p.top-(h.bottom-h.top)-v.y<o.top:p.bottom+(h.bottom-h.top)+v.y>o.bottom)&&O==o.bottom-p.bottom>p.top-o.top&&(O=this.above[a]=!O);let b=(O?p.top-o.top:o.bottom-p.bottom)-f;if(b<m&&!1!==c.resize){if(b<this.view.defaultLineHeight){u.style.top=ls;continue}hs.set(c,m),u.style.height=(m=b)/r+"px"}else u.style.height&&(u.style.height="");let w=O?p.top-m-f-v.y:p.bottom+f+v.y,x=_+g;if(!0!==c.overlap)for(let t of s)t.left<x&&t.right>_&&t.top<w+m&&t.bottom>w&&(w=O?t.top-m-2-f:t.bottom+f+2);if("absolute"==this.position?(u.style.top=(w-t.parent.top)/r+"px",u.style.left=(_-t.parent.left)/i+"px"):(u.style.top=w/r+"px",u.style.left=_/i+"px"),d){let t=p.left+(y?v.x:-v.x)-(_+14-7);d.style.left=t/i+"px"}!0!==c.overlap&&s.push({left:_,top:w,right:x,bottom:w+m}),u.classList.toggle("cm-tooltip-above",O),u.classList.toggle("cm-tooltip-below",!O),c.positioned&&c.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=ls}},{eventObservers:{scroll(){this.maybeMeasure()}}}),fs=cr.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:`${7}px`,width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:`${7}px solid transparent`,borderRight:`${7}px solid transparent`},".cm-tooltip-above &":{bottom:`-${7}px`,"&:before":{borderTop:`${7}px solid #bbb`},"&:after":{borderTop:`${7}px solid #f5f5f5`,bottom:"1px"}},".cm-tooltip-below &":{top:`-${7}px`,"&:before":{borderBottom:`${7}px solid #bbb`},"&:after":{borderBottom:`${7}px solid #f5f5f5`,top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),gs={x:0,y:0},ms=N.define({enables:[ds,fs]}),vs=N.define({combine:t=>t.reduce(((t,e)=>t.concat(e)),[])});class ys{static create(t){return new ys(t)}constructor(t){this.view=t,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new cs(t,vs,((t,e)=>this.createHostedView(t,e)),(t=>t.dom.remove()))}createHostedView(t,e){let n=t.create(this.view);return n.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(n.dom,e?e.dom.nextSibling:this.dom.firstChild),this.mounted&&n.mount&&n.mount(this.view),n}mount(t){for(let e of this.manager.tooltipViews)e.mount&&e.mount(t);this.mounted=!0}positioned(t){for(let e of this.manager.tooltipViews)e.positioned&&e.positioned(t)}update(t){this.manager.update(t)}destroy(){var t;for(let e of this.manager.tooltipViews)null===(t=e.destroy)||void 0===t||t.call(e)}passProp(t){let e;for(let n of this.manager.tooltipViews){let o=n[t];if(void 0!==o)if(void 0===e)e=o;else if(e!==o)return}return e}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const _s=ms.compute([vs],(t=>{let e=t.facet(vs);return 0===e.length?null:{pos:Math.min(...e.map((t=>t.pos))),end:Math.max(...e.map((t=>{var e;return null!==(e=t.end)&&void 0!==e?e:t.pos}))),create:ys.create,above:e[0].above,arrow:e.some((t=>t.arrow))}}));class Os{constructor(t,e,n,o,i){this.view=t,this.source=e,this.field=n,this.setHover=o,this.hoverTime=i,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:t.dom,time:0},this.checkHover=this.checkHover.bind(this),t.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),t.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout((()=>this.startHover()),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let t=Date.now()-this.lastMove.time;t<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-t):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:t,lastMove:e}=this,n=t.docView.nearest(e.target);if(!n)return;let o,i=1;if(n instanceof rn)o=n.posAtStart;else{if(o=t.posAtCoords(e),null==o)return;let n=t.coordsAtPos(o);if(!n||e.y<n.top||e.y>n.bottom||e.x<n.left-t.defaultCharacterWidth||e.x>n.right+t.defaultCharacterWidth)return;let r=t.bidiSpans(t.state.doc.lineAt(o)).find((t=>t.from<=o&&t.to>=o)),s=r&&r.dir==Tn.RTL?-1:1;i=e.x<n.left?-s:s}let r=this.source(t,o,i);if(null==r?void 0:r.then){let e=this.pending={pos:o};r.then((n=>{this.pending==e&&(this.pending=null,!n||Array.isArray(n)&&!n.length||t.dispatch({effects:this.setHover.of(Array.isArray(n)?n:[n])}))}),(e=>so(t.state,e,"hover tooltip")))}else!r||Array.isArray(r)&&!r.length||t.dispatch({effects:this.setHover.of(Array.isArray(r)?r:[r])})}get tooltip(){let t=this.view.plugin(ds),e=t?t.manager.tooltips.findIndex((t=>t.create==ys.create)):-1;return e>-1?t.manager.tooltipViews[e]:null}mousemove(t){var e,n;this.lastMove={x:t.clientX,y:t.clientY,target:t.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:o,tooltip:i}=this;if(o.length&&i&&!function(t,e){let n=t.getBoundingClientRect();return e.clientX>=n.left-bs&&e.clientX<=n.right+bs&&e.clientY>=n.top-bs&&e.clientY<=n.bottom+bs}(i.dom,t)||this.pending){let{pos:i}=o[0]||this.pending,r=null!==(n=null===(e=o[0])||void 0===e?void 0:e.end)&&void 0!==n?n:i;(i==r?this.view.posAtCoords(this.lastMove)==i:function(t,e,n,o,i,r){let s=t.scrollDOM.getBoundingClientRect(),a=t.documentTop+t.documentPadding.top+t.contentHeight;if(s.left>o||s.right<o||s.top>i||Math.min(s.bottom,a)<i)return!1;let l=t.posAtCoords({x:o,y:i},!1);return l>=e&&l<=n}(this.view,i,r,t.clientX,t.clientY))||(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(t){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:e}=this;if(e.length){let{tooltip:e}=this;e&&e.dom.contains(t.relatedTarget)?this.watchTooltipLeave(e.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(t){let e=n=>{t.removeEventListener("mouseleave",e),this.active.length&&!this.view.dom.contains(n.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};t.addEventListener("mouseleave",e)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const bs=4;function ws(t,e={}){let n=mt.define(),o=Y.define({create:()=>[],update(t,o){if(t.length&&(e.hideOnChange&&(o.docChanged||o.selection)?t=[]:e.hideOn&&(t=t.filter((t=>!e.hideOn(o,t)))),o.docChanged)){let e=[];for(let n of t){let t=o.changes.mapPos(n.pos,-1,C.TrackDel);if(null!=t){let i=Object.assign(Object.create(null),n);i.pos=t,null!=i.end&&(i.end=o.changes.mapPos(i.end)),e.push(i)}}t=e}for(let e of o.effects)e.is(n)&&(t=e.value),e.is(Ss)&&(t=[]);return t},provide:t=>vs.from(t)});return[o,uo.define((i=>new Os(i,t,o,n,e.hoverTime||300))),_s]}function xs(t,e){let n=t.plugin(ds);if(!n)return null;let o=n.manager.tooltips.indexOf(e);return o<0?null:n.manager.tooltipViews[o]}const Ss=mt.define();null&&Ss.of(null);const ks=N.define({combine(t){let e,n;for(let o of t)e=e||o.topContainer,n=n||o.bottomContainer;return{topContainer:e,bottomContainer:n}}});function Ps(t,e){let n=t.plugin(Cs),o=n?n.specs.indexOf(e):-1;return o>-1?n.panels[o]:null}const Cs=uo.fromClass(class{constructor(t){this.input=t.state.facet(As),this.specs=this.input.filter((t=>t)),this.panels=this.specs.map((e=>e(t)));let e=t.state.facet(ks);this.top=new Ts(t,!0,e.topContainer),this.bottom=new Ts(t,!1,e.bottomContainer),this.top.sync(this.panels.filter((t=>t.top))),this.bottom.sync(this.panels.filter((t=>!t.top)));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(t){let e=t.state.facet(ks);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Ts(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Ts(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(As);if(n!=this.input){let e=n.filter((t=>t)),o=[],i=[],r=[],s=[];for(let n of e){let e,a=this.specs.indexOf(n);a<0?(e=n(t.view),s.push(e)):(e=this.panels[a],e.update&&e.update(t)),o.push(e),(e.top?i:r).push(e)}this.specs=e,this.panels=o,this.top.sync(i),this.bottom.sync(r);for(let t of s)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}else for(let e of this.panels)e.update&&e.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>cr.scrollMargins.of((e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}}))});class Ts{constructor(t,e,n){this.view=t,this.top=e,this.container=n,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(t){for(let e of this.panels)e.destroy&&t.indexOf(e)<0&&e.destroy();this.panels=t,this.syncDOM()}syncDOM(){if(0==this.panels.length)return void(this.dom&&(this.dom.remove(),this.dom=void 0));if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let t=this.dom.firstChild;for(let e of this.panels)if(e.dom.parentNode==this.dom){for(;t!=e.dom;)t=Es(t);t=t.nextSibling}else this.dom.insertBefore(e.dom,t);for(;t;)t=Es(t)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(this.container&&this.classes!=this.view.themeClasses){for(let t of this.classes.split(" "))t&&this.container.classList.remove(t);for(let t of(this.classes=this.view.themeClasses).split(" "))t&&this.container.classList.add(t)}}}function Es(t){let e=t.nextSibling;return t.remove(),e}const As=N.define({enables:Cs});class Qs extends At{compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}eq(t){return!1}destroy(t){}}Qs.prototype.elementClass="",Qs.prototype.toDOM=void 0,Qs.prototype.mapMode=C.TrackBefore,Qs.prototype.startSide=Qs.prototype.endSide=-1,Qs.prototype.point=!0;const $s=N.define(),js={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Rt.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},Rs=N.define();function Ms(t){return[Zs(),Rs.of(Object.assign(Object.assign({},js),t))]}const Vs=N.define({combine:t=>t.some((t=>t))});function Zs(t){let e=[Ds];return t&&!1===t.fixed&&e.push(Vs.of(!0)),e}const Ds=uo.fromClass(class{constructor(t){this.view=t,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(Rs).map((e=>new Xs(t,e)));for(let t of this.gutters)this.dom.appendChild(t.dom);this.fixed=!t.state.facet(Vs),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,o=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(o<.8*(n.to-n.from))}t.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(Vs)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&this.dom.remove();let n=Rt.iter(this.view.state.facet($s),this.view.viewport.from),o=[],i=this.gutters.map((t=>new Ws(t,this.view.viewport,-this.view.documentPadding.top)));for(let t of this.view.viewportLineBlocks)if(o.length&&(o=[]),Array.isArray(t.type)){let e=!0;for(let r of t.type)if(r.type==yn.Text&&e){Ns(n,o,r.from);for(let t of i)t.line(this.view,r,o);e=!1}else if(r.widget)for(let t of i)t.widget(this.view,r)}else if(t.type==yn.Text){Ns(n,o,t.from);for(let e of i)e.line(this.view,t,o)}else if(t.widget)for(let e of i)e.widget(this.view,t);for(let t of i)t.finish();t&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(t){let e=t.startState.facet(Rs),n=t.state.facet(Rs),o=t.docChanged||t.heightChanged||t.viewportChanged||!Rt.eq(t.startState.facet($s),t.state.facet($s),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let e of this.gutters)e.update(t)&&(o=!0);else{o=!0;let i=[];for(let o of n){let n=e.indexOf(o);n<0?i.push(new Xs(this.view,o)):(this.gutters[n].update(t),i.push(this.gutters[n]))}for(let t of this.gutters)t.dom.remove(),i.indexOf(t)<0&&t.destroy();for(let t of i)this.dom.appendChild(t.dom);this.gutters=i}return o}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove()}},{provide:t=>cr.scrollMargins.of((e=>{let n=e.plugin(t);return n&&0!=n.gutters.length&&n.fixed?e.textDirection==Tn.LTR?{left:n.dom.offsetWidth*e.scaleX}:{right:n.dom.offsetWidth*e.scaleX}:null}))});function Is(t){return Array.isArray(t)?t:[t]}function Ns(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class Ws{constructor(t,e,n){this.gutter=t,this.height=n,this.i=0,this.cursor=Rt.iter(t.markers,e.from)}addElement(t,e,n){let{gutter:o}=this,i=(e.top-this.height)/t.scaleY,r=e.height/t.scaleY;if(this.i==o.elements.length){let e=new Ls(t,r,i,n);o.elements.push(e),o.dom.appendChild(e.dom)}else o.elements[this.i].update(t,r,i,n);this.height=e.bottom,this.i++}line(t,e,n){let o=[];Ns(this.cursor,o,e.from),n.length&&(o=o.concat(n));let i=this.gutter.config.lineMarker(t,e,o);i&&o.unshift(i);let r=this.gutter;(0!=o.length||r.config.renderEmptyElements)&&this.addElement(t,e,o)}widget(t,e){let n=this.gutter.config.widgetMarker(t,e.widget,e);n&&this.addElement(t,e,[n])}finish(){let t=this.gutter;for(;t.elements.length>this.i;){let e=t.elements.pop();t.dom.removeChild(e.dom),e.destroy()}}}class Xs{constructor(t,e){this.view=t,this.config=e,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let n in e.domEventHandlers)this.dom.addEventListener(n,(o=>{let i,r=o.target;if(r!=this.dom&&this.dom.contains(r)){for(;r.parentNode!=this.dom;)r=r.parentNode;let t=r.getBoundingClientRect();i=(t.top+t.bottom)/2}else i=o.clientY;let s=t.lineBlockAtHeight(i-t.documentTop);e.domEventHandlers[n](t,s,o)&&o.preventDefault()}));this.markers=Is(e.markers(t)),e.initialSpacer&&(this.spacer=new Ls(t,0,0,[e.initialSpacer(t)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(t){let e=this.markers;if(this.markers=Is(this.config.markers(t.view)),this.spacer&&this.config.updateSpacer){let e=this.config.updateSpacer(this.spacer.markers[0],t);e!=this.spacer.markers[0]&&this.spacer.update(t.view,0,0,[e])}let n=t.view.viewport;return!Rt.eq(this.markers,e,n.from,n.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(t)}destroy(){for(let t of this.elements)t.destroy()}}class Ls{constructor(t,e,n,o){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(t,e,n,o)}update(t,e,n,o){this.height!=e&&(this.height=e,this.dom.style.height=e+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),function(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}(this.markers,o)||this.setMarkers(t,o)}setMarkers(t,e){let n="cm-gutterElement",o=this.dom.firstChild;for(let i=0,r=0;;){let s=r,a=i<e.length?e[i++]:null,l=!1;if(a){let t=a.elementClass;t&&(n+=" "+t);for(let t=r;t<this.markers.length;t++)if(this.markers[t].compare(a)){s=t,l=!0;break}}else s=this.markers.length;for(;r<s;){let t=this.markers[r++];if(t.toDOM){t.destroy(o);let e=o.nextSibling;o.remove(),o=e}}if(!a)break;a.toDOM&&(l?o=o.nextSibling:this.dom.insertBefore(a.toDOM(t),o)),l&&r++}this.dom.className=n,this.markers=e}destroy(){this.setMarkers(null,[])}}const zs=N.define(),Us=N.define({combine:t=>Et(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(t,e){let n=Object.assign({},t);for(let t in e){let o=n[t],i=e[t];n[t]=o?(t,e,n)=>o(t,e,n)||i(t,e,n):i}return n}})});class qs extends Qs{constructor(t){super(),this.number=t}eq(t){return this.number==t.number}toDOM(){return document.createTextNode(this.number)}}function Ys(t,e){return t.state.facet(Us).formatNumber(e,t.state)}const Bs=Rs.compute([Us],(t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers:t=>t.state.facet(zs),lineMarker:(t,e,n)=>n.some((t=>t.toDOM))?null:new qs(Ys(t,t.state.doc.lineAt(e.from).number)),widgetMarker:()=>null,lineMarkerChange:t=>t.startState.facet(Us)!=t.state.facet(Us),initialSpacer:t=>new qs(Ys(t,Gs(t.state.doc.lines))),updateSpacer(t,e){let n=Ys(e.view,Gs(e.view.state.doc.lines));return n==t.number?t:new qs(n)},domEventHandlers:t.facet(Us).domEventHandlers})));function Fs(t={}){return[Us.of(t),Zs(),Bs]}function Gs(t){let e=9;for(;e<t;)e=10*e+9;return e}const Hs=new class extends Qs{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},Ks=$s.compute(["selection"],(t=>{let e=[],n=-1;for(let o of t.selection.ranges){let i=t.doc.lineAt(o.head).from;i>n&&(n=i,e.push(Hs.range(i)))}return Rt.of(e)}));var Js=function(){return Js=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Js.apply(this,arguments)};function ta(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))}var ea=function(t){return/^-?\d+$/.test(t)},na=function(t,e,n){void 0===n&&(n={from:void 0,to:void 0});var o=t.map((function(t){if(t.from=ea(t.from)?t.from:void 0,t.to=ea(t.to)?t.to:void 0,ea(t.from)&&ea(t.to)){var e=Js({},t);t.from=Math.min(e.from,e.to),t.to=Math.max(e.from,e.to)}return t})),i={from:ea(null==e?void 0:e.from)?null==e?void 0:e.from:void 0,to:ea(null==e?void 0:e.to)?null==e?void 0:e.to:void 0};if(ea(i.from)&&ea(i.to)){var r=Js({},i);i.from=Math.min(r.from,r.to),i.to=Math.max(r.from,r.to)}var s={from:ea(null==n?void 0:n.from)?null==n?void 0:n.from:void 0,to:ea(null==n?void 0:n.to)?null==n?void 0:n.to:void 0};if(ea(s.from)&&ea(s.to)){var a=Js({},s);s.from=Math.min(a.from,a.to),s.to=Math.max(a.from,a.to)}var l=ta(ta([],o.map((function(t){return t.from})),!0),[null==i?void 0:i.from,null==s?void 0:s.from],!1).filter((function(t){return void 0!==t})),c=ta(ta([],o.map((function(t){return t.to})),!0),[null==i?void 0:i.to,null==s?void 0:s.to],!1).filter((function(t){return void 0!==t})),u=ta(ta([],l,!0),c,!0),p=0,h=0;u.length>0&&(p=Math.max.apply(Math,u),h=Math.min.apply(Math,u));var d=Math.abs(p),f=Math.abs(h),g=Math.max(d,f)+1,m=-g;return o=o.map((function(t){return t.from=ea(t.from)?t.from:m,t.to=ea(t.to)?t.to:g,t})),i={from:ea(i.from)?i.from:m,to:ea(i.to)?i.to:g},s={from:ea(s.from)?s.from:m,to:ea(s.to)?s.to:g},o=o.slice().sort((function(t,e){var n=t.to-t.from,o=e.to-e.from;if(t.from>e.from)return 1;if(t.from===e.from){if(t.from+n>e.from+o)return-1;if(t.from+n===e.from+o)return 0;if(t.from+n<e.from+o)return 1}return-1})),oa(o,i,[],s).map((function(t){return{from:t.from===m?void 0:t.from,to:t.to===g?void 0:t.to}}))},oa=function(t,e,n,o){var i=n;if(null===e||0===t.length)return null===e||n.some((function(t){return t.from===(null==e?void 0:e.from)&&t.to===(null==e?void 0:e.to)}))||i.push(e),(i=i.filter((function(t){return t.from<=o.to&&t.to>=o.from}))).map((function(t){return function(t,e){return{from:t.from<e.from?e.from:t.from,to:t.to>e.to?e.to:t.to}}(t,o)}));var r=e.to-e.from;if(e.from>=t[0].from&&e.from<=t[0].to)e.from+r<=t[0].to?e=null:e.from=t[0].to+1;else if(e.from<t[0].from&&e.from+r>=t[0].from){var s=e.to,a={from:e.from,to:t[0].from-1};n.push(a),s>t[0].to?e.from=t[0].to+1:e=null}return t.shift(),oa(t,e,n,o)},ia=function(t){return cr.domEventHandlers({paste:function(e,n){var o=(e.clipboardData||window.clipboardData).getData("Text"),i=n.state.selection.ranges.map((function(t){return{from:t.from,to:t.to}}));if(i.length>0){var r=t(n.state),s=na(r,i[0],{from:0,to:n.state.doc.line(n.state.doc.lines).to});s.length>0&&n.dispatch({changes:{from:s[0].from,to:s[0].to,insert:o},annotations:vt.userEvent.of("input.paste.smart")})}return!0}})};const ra=1024;let sa=0;class aa{constructor(t,e){this.from=t,this.to=e}}class la{constructor(t={}){this.id=sa++,this.perNode=!!t.perNode,this.deserialize=t.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(t){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return"function"!=typeof t&&(t=pa.match(t)),e=>{let n=t(e);return void 0===n?null:[this,n]}}}la.closedBy=new la({deserialize:t=>t.split(" ")}),la.openedBy=new la({deserialize:t=>t.split(" ")}),la.group=new la({deserialize:t=>t.split(" ")}),la.isolate=new la({deserialize:t=>{if(t&&"rtl"!=t&&"ltr"!=t&&"auto"!=t)throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}}),la.contextHash=new la({perNode:!0}),la.lookAhead=new la({perNode:!0}),la.mounted=new la({perNode:!0});class ca{constructor(t,e,n){this.tree=t,this.overlay=e,this.parser=n}static get(t){return t&&t.props&&t.props[la.mounted.id]}}const ua=Object.create(null);class pa{constructor(t,e,n,o=0){this.name=t,this.props=e,this.id=n,this.flags=o}static define(t){let e=t.props&&t.props.length?Object.create(null):ua,n=(t.top?1:0)|(t.skipped?2:0)|(t.error?4:0)|(null==t.name?8:0),o=new pa(t.name||"",e,t.id,n);if(t.props)for(let n of t.props)if(Array.isArray(n)||(n=n(o)),n){if(n[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");e[n[0].id]=n[1]}return o}prop(t){return this.props[t.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(t){if('string'==typeof t){if(this.name==t)return!0;let e=this.prop(la.group);return!!e&&e.indexOf(t)>-1}return this.id==t}static match(t){let e=Object.create(null);for(let n in t)for(let o of n.split(" "))e[o]=t[n];return t=>{for(let n=t.prop(la.group),o=-1;o<(n?n.length:0);o++){let i=e[o<0?t.name:n[o]];if(i)return i}}}}pa.none=new pa("",Object.create(null),0,8);class ha{constructor(t){this.types=t;for(let e=0;e<t.length;e++)if(t[e].id!=e)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...t){let e=[];for(let n of this.types){let o=null;for(let e of t){let t=e(n);t&&(o||(o=Object.assign({},n.props)),o[t[0].id]=t[1])}e.push(o?new pa(n.name,o,n.id,n.flags):n)}return new ha(e)}}const da=new WeakMap,fa=new WeakMap;var ga;!function(t){t[t["ExcludeBuffers"]=1]="ExcludeBuffers",t[t["IncludeAnonymous"]=2]="IncludeAnonymous",t[t["IgnoreMounts"]=4]="IgnoreMounts",t[t["IgnoreOverlays"]=8]="IgnoreOverlays"}(ga||(ga={}));class ma{constructor(t,e,n,o,i){if(this.type=t,this.children=e,this.positions=n,this.length=o,this.props=null,i&&i.length){this.props=Object.create(null);for(let[t,e]of i)this.props["number"==typeof t?t:t.id]=e}}toString(){let t=ca.get(this);if(t&&!t.overlay)return t.tree.toString();let e="";for(let t of this.children){let n=t.toString();n&&(e&&(e+=","),e+=n)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(e.length?"("+e+")":""):e}cursor(t=0){return new Ea(this.topNode,t)}cursorAt(t,e=0,n=0){let o=da.get(this)||this.topNode,i=new Ea(o);return i.moveTo(t,e),da.set(this,i._tree),i}get topNode(){return new wa(this,0,0,null)}resolve(t,e=0){let n=Oa(da.get(this)||this.topNode,t,e,!1);return da.set(this,n),n}resolveInner(t,e=0){let n=Oa(fa.get(this)||this.topNode,t,e,!0);return fa.set(this,n),n}resolveStack(t,e=0){return function(t,e,n){let o=t.resolveInner(e,n),i=null;for(let t=o instanceof wa?o:o.context.parent;t;t=t.parent)if(t.index<0){let r=t.parent;(i||(i=[o])).push(r.resolve(e,n)),t=r}else{let r=ca.get(t.tree);if(r&&r.overlay&&r.overlay[0].from<=e&&r.overlay[r.overlay.length-1].to>=e){let s=new wa(r.tree,r.overlay[0].from+t.from,-1,t);(i||(i=[o])).push(Oa(s,e,n,!1))}}return i?Ca(i):o}(this,t,e)}iterate(t){let{enter:e,leave:n,from:o=0,to:i=this.length}=t,r=t.mode||0,s=(r&ga.IncludeAnonymous)>0;for(let t=this.cursor(r|ga.IncludeAnonymous);;){let r=!1;if(t.from<=i&&t.to>=o&&(!s&&t.type.isAnonymous||!1!==e(t))){if(t.firstChild())continue;r=!0}for(;r&&n&&(s||!t.type.isAnonymous)&&n(t),!t.nextSibling();){if(!t.parent())return;r=!0}}}prop(t){return t.perNode?this.props?this.props[t.id]:void 0:this.type.prop(t)}get propValues(){let t=[];if(this.props)for(let e in this.props)t.push([+e,this.props[e]]);return t}balance(t={}){return this.children.length<=8?this:ja(pa.none,this.children,this.positions,0,this.children.length,0,this.length,((t,e,n)=>new ma(this.type,t,e,n,this.propValues)),t.makeTree||((t,e,n)=>new ma(pa.none,t,e,n)))}static build(t){return function(t){var e;let{buffer:n,nodeSet:o,maxBufferLength:i=ra,reused:r=[],minRepeatType:s=o.types.length}=t,a=Array.isArray(n)?new va(n,n.length):n,l=o.types,c=0,u=0;function p(t,e,n,y,_,O){let{id:b,start:w,end:x,size:S}=a,k=u;for(;S<0;){if(a.next(),-1==S){let e=r[b];return n.push(e),void y.push(w-t)}if(-3==S)return void(c=b);if(-4==S)return void(u=b);throw new RangeError(`Unrecognized record size: ${S}`)}let P,C,T=l[b],E=w-t;if(x-w<=i&&(C=m(a.pos-e,_))){let e=new Uint16Array(C.size-C.skip),n=a.pos-C.size,i=e.length;for(;a.pos>n;)i=v(C.start,e,i);P=new ya(e,x-C.start,o),E=C.start-t}else{let t=a.pos-S;a.next();let e=[],n=[],o=b>=s?b:-1,r=0,l=x;for(;a.pos>t;)o>=0&&a.id==o&&a.size>=0?(a.end<=l-i&&(f(e,n,w,r,a.end,l,o,k),r=e.length,l=a.end),a.next()):O>2500?h(w,t,e,n):p(w,t,e,n,o,O+1);if(o>=0&&r>0&&r<e.length&&f(e,n,w,r,w,l,o,k),e.reverse(),n.reverse(),o>-1&&r>0){let t=d(T);P=ja(T,e,n,0,e.length,0,x-w,t,t)}else P=g(T,e,n,x-w,k-x)}n.push(P),y.push(E)}function h(t,e,n,r){let s=[],l=0,c=-1;for(;a.pos>e;){let{id:t,start:e,end:n,size:o}=a;if(o>4)a.next();else{if(c>-1&&e<c)break;c<0&&(c=n-i),s.push(t,e,n),l++,a.next()}}if(l){let e=new Uint16Array(4*l),i=s[s.length-2];for(let t=s.length-3,n=0;t>=0;t-=3)e[n++]=s[t],e[n++]=s[t+1]-i,e[n++]=s[t+2]-i,e[n++]=n;n.push(new ya(e,s[2]-i,o)),r.push(i-t)}}function d(t){return(e,n,o)=>{let i,r,s=0,a=e.length-1;if(a>=0&&(i=e[a])instanceof ma){if(!a&&i.type==t&&i.length==o)return i;(r=i.prop(la.lookAhead))&&(s=n[a]+i.length+r)}return g(t,e,n,o,s)}}function f(t,e,n,i,r,s,a,l){let c=[],u=[];for(;t.length>i;)c.push(t.pop()),u.push(e.pop()+n-r);t.push(g(o.types[a],c,u,s-r,l-s)),e.push(r-n)}function g(t,e,n,o,i=0,r){if(c){let t=[la.contextHash,c];r=r?[t].concat(r):[t]}if(i>25){let t=[la.lookAhead,i];r=r?[t].concat(r):[t]}return new ma(t,e,n,o,r)}function m(t,e){let n=a.fork(),o=0,r=0,l=0,c=n.end-i,u={size:0,start:0,skip:0};t:for(let i=n.pos-t;n.pos>i;){let t=n.size;if(n.id==e&&t>=0){u.size=o,u.start=r,u.skip=l,l+=4,o+=4,n.next();continue}let a=n.pos-t;if(t<0||a<i||n.start<c)break;let p=n.id>=s?4:0,h=n.start;for(n.next();n.pos>a;){if(n.size<0){if(-3!=n.size)break t;p+=4}else n.id>=s&&(p+=4);n.next()}r=h,o+=t,l+=p}return(e<0||o==t)&&(u.size=o,u.start=r,u.skip=l),u.size>4?u:void 0}function v(t,e,n){let{id:o,start:i,end:r,size:l}=a;if(a.next(),l>=0&&o<s){let s=n;if(l>4){let o=a.pos-(l-4);for(;a.pos>o;)n=v(t,e,n)}e[--n]=s,e[--n]=r-t,e[--n]=i-t,e[--n]=o}else-3==l?c=o:-4==l&&(u=o);return n}let y=[],_=[];for(;a.pos>0;)p(t.start||0,t.bufferStart||0,y,_,-1,0);let O=null!==(e=t.length)&&void 0!==e?e:y.length?_[0]+y[0].length:0;return new ma(l[t.topID],y.reverse(),_.reverse(),O)}(t)}}ma.empty=new ma(pa.none,[],[],0);class va{constructor(t,e){this.buffer=t,this.index=e}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new va(this.buffer,this.index)}}class ya{constructor(t,e,n){this.buffer=t,this.length=e,this.set=n}get type(){return pa.none}toString(){let t=[];for(let e=0;e<this.buffer.length;)t.push(this.childString(e)),e=this.buffer[e+3];return t.join(",")}childString(t){let e=this.buffer[t],n=this.buffer[t+3],o=this.set.types[e],i=o.name;if(/\W/.test(i)&&!o.isError&&(i=JSON.stringify(i)),n==(t+=4))return i;let r=[];for(;t<n;)r.push(this.childString(t)),t=this.buffer[t+3];return i+"("+r.join(",")+")"}findChild(t,e,n,o,i){let{buffer:r}=this,s=-1;for(let a=t;a!=e&&!(_a(i,o,r[a+1],r[a+2])&&(s=a,n>0));a=r[a+3]);return s}slice(t,e,n){let o=this.buffer,i=new Uint16Array(e-t),r=0;for(let s=t,a=0;s<e;){i[a++]=o[s++],i[a++]=o[s++]-n;let e=i[a++]=o[s++]-n;i[a++]=o[s++]-t,r=Math.max(r,e)}return new ya(i,r,this.set)}}function _a(t,e,n,o){switch(t){case-2:return n<e;case-1:return o>=e&&n<e;case 0:return n<e&&o>e;case 1:return n<=e&&o>e;case 2:return o>e;case 4:return!0}}function Oa(t,e,n,o){for(var i;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let e=!o&&t instanceof wa&&t.index<0?null:t.parent;if(!e)return t;t=e}let r=o?0:ga.IgnoreOverlays;if(o)for(let o=t,s=o.parent;s;o=s,s=o.parent)o instanceof wa&&o.index<0&&(null===(i=s.enter(e,n,r))||void 0===i?void 0:i.from)!=o.from&&(t=s);for(;;){let o=t.enter(e,n,r);if(!o)return t;t=o}}class ba{cursor(t=0){return new Ea(this,t)}getChild(t,e=null,n=null){let o=xa(this,t,e,n);return o.length?o[0]:null}getChildren(t,e=null,n=null){return xa(this,t,e,n)}resolve(t,e=0){return Oa(this,t,e,!1)}resolveInner(t,e=0){return Oa(this,t,e,!0)}matchContext(t){return Sa(this,t)}enterUnfinishedNodesBefore(t){let e=this.childBefore(t),n=this;for(;e;){let t=e.lastChild;if(!t||t.to!=e.to)break;t.type.isError&&t.from==t.to?(n=e,e=t.prevSibling):e=t}return n}get node(){return this}get next(){return this.parent}}class wa extends ba{constructor(t,e,n,o){super(),this._tree=t,this.from=e,this.index=n,this._parent=o}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(t,e,n,o,i=0){for(let r=this;;){for(let{children:s,positions:a}=r._tree,l=e>0?s.length:-1;t!=l;t+=e){let l=s[t],c=a[t]+r.from;if(_a(o,n,c,c+l.length))if(l instanceof ya){if(i&ga.ExcludeBuffers)continue;let s=l.findChild(0,l.buffer.length,e,n-c,o);if(s>-1)return new Pa(new ka(r,l,t,c),null,s)}else if(i&ga.IncludeAnonymous||!l.type.isAnonymous||Aa(l)){let s;if(!(i&ga.IgnoreMounts)&&(s=ca.get(l))&&!s.overlay)return new wa(s.tree,c,t,r);let a=new wa(l,c,t,r);return i&ga.IncludeAnonymous||!a.type.isAnonymous?a:a.nextChild(e<0?l.children.length-1:0,e,n,o)}}if(i&ga.IncludeAnonymous||!r.type.isAnonymous)return null;if(t=r.index>=0?r.index+e:e<0?-1:r._parent._tree.children.length,r=r._parent,!r)return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(t){return this.nextChild(0,1,t,2)}childBefore(t){return this.nextChild(this._tree.children.length-1,-1,t,-2)}enter(t,e,n=0){let o;if(!(n&ga.IgnoreOverlays)&&(o=ca.get(this._tree))&&o.overlay){let n=t-this.from;for(let{from:t,to:i}of o.overlay)if((e>0?t<=n:t<n)&&(e<0?i>=n:i>n))return new wa(o.tree,o.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,t,e,n)}nextSignificantParent(){let t=this;for(;t.type.isAnonymous&&t._parent;)t=t._parent;return t}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function xa(t,e,n,o){let i=t.cursor(),r=[];if(!i.firstChild())return r;if(null!=n)for(let t=!1;!t;)if(t=i.type.is(n),!i.nextSibling())return r;for(;;){if(null!=o&&i.type.is(o))return r;if(i.type.is(e)&&r.push(i.node),!i.nextSibling())return null==o?r:[]}}function Sa(t,e,n=e.length-1){for(let o=t.parent;n>=0;o=o.parent){if(!o)return!1;if(!o.type.isAnonymous){if(e[n]&&e[n]!=o.name)return!1;n--}}return!0}class ka{constructor(t,e,n,o){this.parent=t,this.buffer=e,this.index=n,this.start=o}}class Pa extends ba{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(t,e,n){super(),this.context=t,this._parent=e,this.index=n,this.type=t.buffer.set.types[t.buffer.buffer[n]]}child(t,e,n){let{buffer:o}=this.context,i=o.findChild(this.index+4,o.buffer[this.index+3],t,e-this.context.start,n);return i<0?null:new Pa(this.context,this,i)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(t){return this.child(1,t,2)}childBefore(t){return this.child(-1,t,-2)}enter(t,e,n=0){if(n&ga.ExcludeBuffers)return null;let{buffer:o}=this.context,i=o.findChild(this.index+4,o.buffer[this.index+3],e>0?1:-1,t-this.context.start,e);return i<0?null:new Pa(this.context,this,i)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(t){return this._parent?null:this.context.parent.nextChild(this.context.index+t,t,0,4)}get nextSibling(){let{buffer:t}=this.context,e=t.buffer[this.index+3];return e<(this._parent?t.buffer[this._parent.index+3]:t.buffer.length)?new Pa(this.context,this._parent,e):this.externalSibling(1)}get prevSibling(){let{buffer:t}=this.context,e=this._parent?this._parent.index+4:0;return this.index==e?this.externalSibling(-1):new Pa(this.context,this._parent,t.findChild(e,this.index,-1,0,4))}get tree(){return null}toTree(){let t=[],e=[],{buffer:n}=this.context,o=this.index+4,i=n.buffer[this.index+3];if(i>o){let r=n.buffer[this.index+1];t.push(n.slice(o,i,r)),e.push(0)}return new ma(this.type,t,e,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function Ca(t){if(!t.length)return null;let e=0,n=t[0];for(let o=1;o<t.length;o++){let i=t[o];(i.from>n.from||i.to<n.to)&&(n=i,e=o)}let o=n instanceof wa&&n.index<0?null:n.parent,i=t.slice();return o?i[e]=o:i.splice(e,1),new Ta(i,n)}class Ta{constructor(t,e){this.heads=t,this.node=e}get next(){return Ca(this.heads)}}class Ea{get name(){return this.type.name}constructor(t,e=0){if(this.mode=e,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,t instanceof wa)this.yieldNode(t);else{this._tree=t.context.parent,this.buffer=t.context;for(let e=t._parent;e;e=e._parent)this.stack.unshift(e.index);this.bufferNode=t,this.yieldBuf(t.index)}}yieldNode(t){return!!t&&(this._tree=t,this.type=t.type,this.from=t.from,this.to=t.to,!0)}yieldBuf(t,e){this.index=t;let{start:n,buffer:o}=this.buffer;return this.type=e||o.set.types[o.buffer[t]],this.from=n+o.buffer[t+1],this.to=n+o.buffer[t+2],!0}yield(t){return!!t&&(t instanceof wa?(this.buffer=null,this.yieldNode(t)):(this.buffer=t.context,this.yieldBuf(t.index,t.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(t,e,n){if(!this.buffer)return this.yield(this._tree.nextChild(t<0?this._tree._tree.children.length-1:0,t,e,n,this.mode));let{buffer:o}=this.buffer,i=o.findChild(this.index+4,o.buffer[this.index+3],t,e-this.buffer.start,n);return!(i<0)&&(this.stack.push(this.index),this.yieldBuf(i))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(t){return this.enterChild(1,t,2)}childBefore(t){return this.enterChild(-1,t,-2)}enter(t,e,n=this.mode){return this.buffer?!(n&ga.ExcludeBuffers)&&this.enterChild(1,t,e):this.yield(this._tree.enter(t,e,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&ga.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let t=this.mode&ga.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(t)}sibling(t){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+t,t,0,4,this.mode));let{buffer:e}=this.buffer,n=this.stack.length-1;if(t<0){let t=n<0?0:this.stack[n]+4;if(this.index!=t)return this.yieldBuf(e.findChild(t,this.index,-1,0,4))}else{let t=e.buffer[this.index+3];if(t<(n<0?e.buffer.length:e.buffer[this.stack[n]+3]))return this.yieldBuf(t)}return n<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+t,t,0,4,this.mode))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(t){let e,n,{buffer:o}=this;if(o){if(t>0){if(this.index<o.buffer.buffer.length)return!1}else for(let t=0;t<this.index;t++)if(o.buffer.buffer[t+3]<this.index)return!1;({index:e,parent:n}=o)}else({index:e,_parent:n}=this._tree);for(;n;({index:e,_parent:n}=n))if(e>-1)for(let o=e+t,i=t<0?-1:n._tree.children.length;o!=i;o+=t){let t=n._tree.children[o];if(this.mode&ga.IncludeAnonymous||t instanceof ya||!t.type.isAnonymous||Aa(t))return!1}return!0}move(t,e){if(e&&this.enterChild(t,0,4))return!0;for(;;){if(this.sibling(t))return!0;if(this.atLastNode(t)||!this.parent())return!1}}next(t=!0){return this.move(1,t)}prev(t=!0){return this.move(-1,t)}moveTo(t,e=0){for(;(this.from==this.to||(e<1?this.from>=t:this.from>t)||(e>-1?this.to<=t:this.to<t))&&this.parent(););for(;this.enterChild(1,t,e););return this}get node(){if(!this.buffer)return this._tree;let t=this.bufferNode,e=null,n=0;if(t&&t.context==this.buffer)t:for(let o=this.index,i=this.stack.length;i>=0;){for(let r=t;r;r=r._parent)if(r.index==o){if(o==this.index)return r;e=r,n=i+1;break t}o=this.stack[--i]}for(let t=n;t<this.stack.length;t++)e=new Pa(this.buffer,e,this.stack[t]);return this.bufferNode=new Pa(this.buffer,e,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(t,e){for(let n=0;;){let o=!1;if(this.type.isAnonymous||!1!==t(this)){if(this.firstChild()){n++;continue}this.type.isAnonymous||(o=!0)}for(;o&&e&&e(this),o=this.type.isAnonymous,!this.nextSibling();){if(!n)return;this.parent(),n--,o=!0}}}matchContext(t){if(!this.buffer)return Sa(this.node,t);let{buffer:e}=this.buffer,{types:n}=e.set;for(let o=t.length-1,i=this.stack.length-1;o>=0;i--){if(i<0)return Sa(this.node,t,o);let r=n[e.buffer[this.stack[i]]];if(!r.isAnonymous){if(t[o]&&t[o]!=r.name)return!1;o--}}return!0}}function Aa(t){return t.children.some((t=>t instanceof ya||!t.type.isAnonymous||Aa(t)))}const Qa=new WeakMap;function $a(t,e){if(!t.isAnonymous||e instanceof ya||e.type!=t)return 1;let n=Qa.get(e);if(null==n){n=1;for(let o of e.children){if(o.type!=t||!(o instanceof ma)){n=1;break}n+=$a(t,o)}Qa.set(e,n)}return n}function ja(t,e,n,o,i,r,s,a,l){let c=0;for(let n=o;n<i;n++)c+=$a(t,e[n]);let u=Math.ceil(1.5*c/8),p=[],h=[];return function e(n,o,i,s,a){for(let c=i;c<s;){let i=c,d=o[c],f=$a(t,n[c]);for(c++;c<s;c++){let e=$a(t,n[c]);if(f+e>=u)break;f+=e}if(c==i+1){if(f>u){let t=n[i];e(t.children,t.positions,0,t.children.length,o[i]+a);continue}p.push(n[i])}else{let e=o[c-1]+n[c-1].length-d;p.push(ja(t,n,o,i,c,d,e,null,l))}h.push(d+a-r)}}(e,n,o,i,0),(a||l)(p,h,s)}class Ra{constructor(){this.map=new WeakMap}setBuffer(t,e,n){let o=this.map.get(t);o||this.map.set(t,o=new Map),o.set(e,n)}getBuffer(t,e){let n=this.map.get(t);return n&&n.get(e)}set(t,e){t instanceof Pa?this.setBuffer(t.context.buffer,t.index,e):t instanceof wa&&this.map.set(t.tree,e)}get(t){return t instanceof Pa?this.getBuffer(t.context.buffer,t.index):t instanceof wa?this.map.get(t.tree):void 0}cursorSet(t,e){t.buffer?this.setBuffer(t.buffer.buffer,t.index,e):this.map.set(t.tree,e)}cursorGet(t){return t.buffer?this.getBuffer(t.buffer.buffer,t.index):this.map.get(t.tree)}}class Ma{constructor(t,e,n,o,i=!1,r=!1){this.from=t,this.to=e,this.tree=n,this.offset=o,this.open=(i?1:0)|(r?2:0)}get openStart(){return(1&this.open)>0}get openEnd(){return(2&this.open)>0}static addTree(t,e=[],n=!1){let o=[new Ma(0,t.length,t,0,!1,n)];for(let n of e)n.to>t.length&&o.push(n);return o}static applyChanges(t,e,n=128){if(!e.length)return t;let o=[],i=1,r=t.length?t[0]:null;for(let s=0,a=0,l=0;;s++){let c=s<e.length?e[s]:null,u=c?c.fromA:1e9;if(u-a>=n)for(;r&&r.from<u;){let e=r;if(a>=e.from||u<=e.to||l){let t=Math.max(e.from,a)-l,n=Math.min(e.to,u)-l;e=t>=n?null:new Ma(t,n,e.tree,e.offset+l,s>0,!!c)}if(e&&o.push(e),r.to>u)break;r=i<t.length?t[i++]:null}if(!c)break;a=c.toA,l=c.toA-c.toB}return o}}class Va{startParse(t,e,n){return"string"==typeof t&&(t=new Za(t)),n=n?n.length?n.map((t=>new aa(t.from,t.to))):[new aa(0,0)]:[new aa(0,t.length)],this.createParse(t,e||[],n)}parse(t,e,n){let o=this.startParse(t,e,n);for(;;){let t=o.advance();if(t)return t}}}class Za{constructor(t){this.string=t}get length(){return this.string.length}chunk(t){return this.string.slice(t)}get lineChunks(){return!1}read(t,e){return this.string.slice(t,e)}}class Da{constructor(t,e,n,o,i){this.parser=t,this.parse=e,this.overlay=n,this.target=o,this.from=i}}function Ia(t){if(!t.length||t.some((t=>t.from>=t.to)))throw new RangeError("Invalid inner parse ranges given: "+JSON.stringify(t))}class Na{constructor(t,e,n,o,i,r,s){this.parser=t,this.predicate=e,this.mounts=n,this.index=o,this.start=i,this.target=r,this.prev=s,this.depth=0,this.ranges=[]}}const Wa=new la({perNode:!0});class Xa{constructor(t,e,n,o,i){this.nest=e,this.input=n,this.fragments=o,this.ranges=i,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=t}advance(){if(this.baseParse){let t=this.baseParse.advance();if(!t)return null;if(this.baseParse=null,this.baseTree=t,this.startInner(),null!=this.stoppedAt)for(let t of this.inner)t.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let t=this.baseTree;return null!=this.stoppedAt&&(t=new ma(t.type,t.children,t.positions,t.length,t.propValues.concat([[Wa,this.stoppedAt]]))),t}let t=this.inner[this.innerDone],e=t.parse.advance();if(e){this.innerDone++;let n=Object.assign(Object.create(null),t.target.props);n[la.mounted.id]=new ca(e,t.overlay,t.parser),t.target.props=n}return null}get parsedPos(){if(this.baseParse)return 0;let t=this.input.length;for(let e=this.innerDone;e<this.inner.length;e++)this.inner[e].from<t&&(t=Math.min(t,this.inner[e].parse.parsedPos));return t}stopAt(t){if(this.stoppedAt=t,this.baseParse)this.baseParse.stopAt(t);else for(let e=this.innerDone;e<this.inner.length;e++)this.inner[e].parse.stopAt(t)}startInner(){let t=new Ya(this.fragments),e=null,n=null,o=new Ea(new wa(this.baseTree,this.ranges[0].from,0,null),ga.IncludeAnonymous|ga.IgnoreMounts);t:for(let i,r;;){let s,a=!0;if(null!=this.stoppedAt&&o.from>=this.stoppedAt)a=!1;else if(t.hasNode(o)){if(e){let t=e.mounts.find((t=>t.frag.from<=o.from&&t.frag.to>=o.to&&t.mount.overlay));if(t)for(let n of t.mount.overlay){let i=n.from+t.pos,r=n.to+t.pos;i>=o.from&&r<=o.to&&!e.ranges.some((t=>t.from<r&&t.to>i))&&e.ranges.push({from:i,to:r})}}a=!1}else if(n&&(r=La(n.ranges,o.from,o.to)))a=2!=r;else if(!o.type.isAnonymous&&(i=this.nest(o,this.input))&&(o.from<o.to||!i.overlay)){o.tree||Ua(o);let r=t.findMounts(o.from,i.parser);if("function"==typeof i.overlay)e=new Na(i.parser,i.overlay,r,this.inner.length,o.from,o.tree,e);else{let t=Ba(this.ranges,i.overlay||(o.from<o.to?[new aa(o.from,o.to)]:[]));t.length&&Ia(t),!t.length&&i.overlay||this.inner.push(new Da(i.parser,t.length?i.parser.startParse(this.input,Ga(r,t),t):i.parser.startParse(""),i.overlay?i.overlay.map((t=>new aa(t.from-o.from,t.to-o.from))):null,o.tree,t.length?t[0].from:o.from)),i.overlay?t.length&&(n={ranges:t,depth:0,prev:n}):a=!1}}else e&&(s=e.predicate(o))&&(!0===s&&(s=new aa(o.from,o.to)),s.from<s.to&&e.ranges.push(s));if(a&&o.firstChild())e&&e.depth++,n&&n.depth++;else for(;!o.nextSibling();){if(!o.parent())break t;if(e&&! --e.depth){let t=Ba(this.ranges,e.ranges);t.length&&(Ia(t),this.inner.splice(e.index,0,new Da(e.parser,e.parser.startParse(this.input,Ga(e.mounts,t),t),e.ranges.map((t=>new aa(t.from-e.start,t.to-e.start))),e.target,t[0].from))),e=e.prev}n&&! --n.depth&&(n=n.prev)}}}}function La(t,e,n){for(let o of t){if(o.from>=n)break;if(o.to>e)return o.from<=e&&o.to>=n?2:1}return 0}function za(t,e,n,o,i,r){if(e<n){let s=t.buffer[e+1];o.push(t.slice(e,n,s)),i.push(s-r)}}function Ua(t){let{node:e}=t,n=[],o=e.context.buffer;do{n.push(t.index),t.parent()}while(!t.tree);let i=t.tree,r=i.children.indexOf(o),s=i.children[r],a=s.buffer,l=[r];i.children[r]=function t(o,i,r,c,u,p){let h=n[p],d=[],f=[];za(s,o,h,d,f,c);let g=a[h+1],m=a[h+2];l.push(d.length);let v=p?t(h+4,a[h+3],s.set.types[a[h]],g,m-g,p-1):e.toTree();return d.push(v),f.push(g-c),za(s,a[h+3],i,d,f,c),new ma(r,d,f,u)}(0,a.length,pa.none,0,s.length,n.length-1);for(let e of l){let n=t.tree.children[e],o=t.tree.positions[e];t.yield(new wa(n,o+t.from,e,t._tree))}}class qa{constructor(t,e){this.offset=e,this.done=!1,this.cursor=t.cursor(ga.IncludeAnonymous|ga.IgnoreMounts)}moveTo(t){let{cursor:e}=this,n=t-this.offset;for(;!this.done&&e.from<n;)e.to>=t&&e.enter(n,1,ga.IgnoreOverlays|ga.ExcludeBuffers)||e.next(!1)||(this.done=!0)}hasNode(t){if(this.moveTo(t.from),!this.done&&this.cursor.from+this.offset==t.from&&this.cursor.tree)for(let e=this.cursor.tree;;){if(e==t.tree)return!0;if(!(e.children.length&&0==e.positions[0]&&e.children[0]instanceof ma))break;e=e.children[0]}return!1}}class Ya{constructor(t){var e;if(this.fragments=t,this.curTo=0,this.fragI=0,t.length){let n=this.curFrag=t[0];this.curTo=null!==(e=n.tree.prop(Wa))&&void 0!==e?e:n.to,this.inner=new qa(n.tree,-n.offset)}else this.curFrag=this.inner=null}hasNode(t){for(;this.curFrag&&t.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=t.from&&this.curTo>=t.to&&this.inner.hasNode(t)}nextFrag(){var t;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let e=this.curFrag=this.fragments[this.fragI];this.curTo=null!==(t=e.tree.prop(Wa))&&void 0!==t?t:e.to,this.inner=new qa(e.tree,-e.offset)}}findMounts(t,e){var n;let o=[];if(this.inner){this.inner.cursor.moveTo(t,1);for(let t=this.inner.cursor.node;t;t=t.parent){let i=null===(n=t.tree)||void 0===n?void 0:n.prop(la.mounted);if(i&&i.parser==e)for(let e=this.fragI;e<this.fragments.length;e++){let n=this.fragments[e];if(n.from>=t.to)break;n.tree==this.curFrag.tree&&o.push({frag:n,pos:t.from-n.offset,mount:i})}}}return o}}function Ba(t,e){let n=null,o=e;for(let i=1,r=0;i<t.length;i++){let s=t[i-1].to,a=t[i].from;for(;r<o.length;r++){let t=o[r];if(t.from>=a)break;t.to<=s||(n||(o=n=e.slice()),t.from<s?(n[r]=new aa(t.from,s),t.to>a&&n.splice(r+1,0,new aa(a,t.to))):t.to>a?n[r--]=new aa(a,t.to):n.splice(r--,1))}}return o}function Fa(t,e,n,o){let i=0,r=0,s=!1,a=!1,l=-1e9,c=[];for(;;){let u=i==t.length?1e9:s?t[i].to:t[i].from,p=r==e.length?1e9:a?e[r].to:e[r].from;if(s!=a){let t=Math.max(l,n),e=Math.min(u,p,o);t<e&&c.push(new aa(t,e))}if(l=Math.min(u,p),1e9==l)break;u==l&&(s?(s=!1,i++):s=!0),p==l&&(a?(a=!1,r++):a=!0)}return c}function Ga(t,e){let n=[];for(let{pos:o,mount:i,frag:r}of t){let t=o+(i.overlay?i.overlay[0].from:0),s=t+i.tree.length,a=Math.max(r.from,t),l=Math.min(r.to,s);if(i.overlay){let s=Fa(e,i.overlay.map((t=>new aa(t.from+o,t.to+o))),a,l);for(let e=0,o=a;;e++){let a=e==s.length,c=a?l:s[e].from;if(c>o&&n.push(new Ma(o,c,i.tree,-t,r.from>=o||r.openStart,r.to<=c||r.openEnd)),a)break;o=s[e].to}}else n.push(new Ma(a,l,i.tree,-t,r.from>=t||r.openStart,r.to<=s||r.openEnd))}return n}let Ha=0;class Ka{constructor(t,e,n){this.set=t,this.base=e,this.modified=n,this.id=Ha++}static define(t){if(null==t?void 0:t.base)throw new Error("Can not derive from a modified tag");let e=new Ka([],null,[]);if(e.set.push(e),t)for(let n of t.set)e.set.push(n);return e}static defineModifier(){let t=new tl;return e=>e.modified.indexOf(t)>-1?e:tl.get(e.base||e,e.modified.concat(t).sort(((t,e)=>t.id-e.id)))}}let Ja=0;class tl{constructor(){this.instances=[],this.id=Ja++}static get(t,e){if(!e.length)return t;let n=e[0].instances.find((n=>n.base==t&&function(t,e){return t.length==e.length&&t.every(((t,n)=>t==e[n]))}(e,n.modified)));if(n)return n;let o=[],i=new Ka(o,t,e);for(let t of e)t.instances.push(i);let r=function(t){let e=[[]];for(let n=0;n<t.length;n++)for(let o=0,i=e.length;o<i;o++)e.push(e[o].concat(t[n]));return e.sort(((t,e)=>e.length-t.length))}(e);for(let e of t.set)if(!e.modified.length)for(let t of r)o.push(tl.get(e,t));return i}}function el(t){let e=Object.create(null);for(let n in t){let o=t[n];Array.isArray(o)||(o=[o]);for(let t of n.split(" "))if(t){let n=[],i=2,r=t;for(let e=0;;){if("..."==r&&e>0&&e+3==t.length){i=1;break}let o=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(r);if(!o)throw new RangeError("Invalid path: "+t);if(n.push("*"==o[0]?"":'"'==o[0][0]?JSON.parse(o[0]):o[0]),e+=o[0].length,e==t.length)break;let s=t[e++];if(e==t.length&&"!"==s){i=0;break}if("/"!=s)throw new RangeError("Invalid path: "+t);r=t.slice(e)}let s=n.length-1,a=n[s];if(!a)throw new RangeError("Invalid path: "+t);let l=new ol(o,i,s>0?n.slice(0,s):null);e[a]=l.sort(e[a])}}return nl.add(e)}const nl=new la;class ol{constructor(t,e,n,o){this.tags=t,this.mode=e,this.context=n,this.next=o}get opaque(){return 0==this.mode}get inherit(){return 1==this.mode}sort(t){return!t||t.depth<this.depth?(this.next=t,this):(t.next=this.sort(t.next),t)}get depth(){return this.context?this.context.length:0}}function il(t,e){let n=Object.create(null);for(let e of t)if(Array.isArray(e.tag))for(let t of e.tag)n[t.id]=e.class;else n[e.tag.id]=e.class;let{scope:o,all:i=null}=e||{};return{style:t=>{let e=i;for(let o of t)for(let t of o.set){let o=n[t.id];if(o){e=e?e+" "+o:o;break}}return e},scope:o}}function rl(t,e,n,o=0,i=t.length){let r=new sl(o,Array.isArray(e)?e:[e],n);r.highlightRange(t.cursor(),o,i,"",r.highlighters),r.flush(i)}ol.empty=new ol([],2,null);class sl{constructor(t,e,n){this.at=t,this.highlighters=e,this.span=n,this.class=""}startSpan(t,e){e!=this.class&&(this.flush(t),t>this.at&&(this.at=t),this.class=e)}flush(t){t>this.at&&this.class&&this.span(this.at,t,this.class)}highlightRange(t,e,n,o,i){let{type:r,from:s,to:a}=t;if(s>=n||a<=e)return;r.isTop&&(i=this.highlighters.filter((t=>!t.scope||t.scope(r))));let l=o,c=function(t){let e=t.type.prop(nl);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}(t)||ol.empty,u=function(t,e){let n=null;for(let o of t){let t=o.style(e);t&&(n=n?n+" "+t:t)}return n}(i,c.tags);if(u&&(l&&(l+=" "),l+=u,1==c.mode&&(o+=(o?" ":"")+u)),this.startSpan(Math.max(e,s),l),c.opaque)return;let p=t.tree&&t.tree.prop(la.mounted);if(p&&p.overlay){let r=t.node.enter(p.overlay[0].from+s,1),c=this.highlighters.filter((t=>!t.scope||t.scope(p.tree.type))),u=t.firstChild();for(let h=0,d=s;;h++){let f=h<p.overlay.length?p.overlay[h]:null,g=f?f.from+s:a,m=Math.max(e,d),v=Math.min(n,g);if(m<v&&u)for(;t.from<v&&(this.highlightRange(t,m,v,o,i),this.startSpan(Math.min(v,t.to),l),!(t.to>=g)&&t.nextSibling()););if(!f||g>n)break;d=f.to+s,d>e&&(this.highlightRange(r.cursor(),Math.max(e,f.from+s),Math.min(n,d),"",c),this.startSpan(Math.min(n,d),l))}u&&t.parent()}else if(t.firstChild()){p&&(o="");do{if(!(t.to<=e)){if(t.from>=n)break;this.highlightRange(t,e,n,o,i),this.startSpan(Math.min(n,t.to),l)}}while(t.nextSibling());t.parent()}}}const al=Ka.define,ll=al(),cl=al(),ul=al(cl),pl=al(cl),hl=al(),dl=al(hl),fl=al(hl),gl=al(),ml=al(gl),vl=al(),yl=al(),_l=al(),Ol=al(_l),bl=al(),wl={comment:ll,lineComment:al(ll),blockComment:al(ll),docComment:al(ll),name:cl,variableName:al(cl),typeName:ul,tagName:al(ul),propertyName:pl,attributeName:al(pl),className:al(cl),labelName:al(cl),namespace:al(cl),macroName:al(cl),literal:hl,string:dl,docString:al(dl),character:al(dl),attributeValue:al(dl),number:fl,integer:al(fl),float:al(fl),bool:al(hl),regexp:al(hl),escape:al(hl),color:al(hl),url:al(hl),keyword:vl,self:al(vl),null:al(vl),atom:al(vl),unit:al(vl),modifier:al(vl),operatorKeyword:al(vl),controlKeyword:al(vl),definitionKeyword:al(vl),moduleKeyword:al(vl),operator:yl,derefOperator:al(yl),arithmeticOperator:al(yl),logicOperator:al(yl),bitwiseOperator:al(yl),compareOperator:al(yl),updateOperator:al(yl),definitionOperator:al(yl),typeOperator:al(yl),controlOperator:al(yl),punctuation:_l,separator:al(_l),bracket:Ol,angleBracket:al(Ol),squareBracket:al(Ol),paren:al(Ol),brace:al(Ol),content:gl,heading:ml,heading1:al(ml),heading2:al(ml),heading3:al(ml),heading4:al(ml),heading5:al(ml),heading6:al(ml),contentSeparator:al(gl),list:al(gl),quote:al(gl),emphasis:al(gl),strong:al(gl),link:al(gl),monospace:al(gl),strikethrough:al(gl),inserted:al(),deleted:al(),changed:al(),invalid:al(),meta:bl,documentMeta:al(bl),annotation:al(bl),processingInstruction:al(bl),definition:Ka.defineModifier(),constant:Ka.defineModifier(),function:Ka.defineModifier(),standard:Ka.defineModifier(),local:Ka.defineModifier(),special:Ka.defineModifier()};il([{tag:wl.link,class:"tok-link"},{tag:wl.heading,class:"tok-heading"},{tag:wl.emphasis,class:"tok-emphasis"},{tag:wl.strong,class:"tok-strong"},{tag:wl.keyword,class:"tok-keyword"},{tag:wl.atom,class:"tok-atom"},{tag:wl.bool,class:"tok-bool"},{tag:wl.url,class:"tok-url"},{tag:wl.labelName,class:"tok-labelName"},{tag:wl.inserted,class:"tok-inserted"},{tag:wl.deleted,class:"tok-deleted"},{tag:wl.literal,class:"tok-literal"},{tag:wl.string,class:"tok-string"},{tag:wl.number,class:"tok-number"},{tag:[wl.regexp,wl.escape,wl.special(wl.string)],class:"tok-string2"},{tag:wl.variableName,class:"tok-variableName"},{tag:wl.local(wl.variableName),class:"tok-variableName tok-local"},{tag:wl.definition(wl.variableName),class:"tok-variableName tok-definition"},{tag:wl.special(wl.variableName),class:"tok-variableName2"},{tag:wl.definition(wl.propertyName),class:"tok-propertyName tok-definition"},{tag:wl.typeName,class:"tok-typeName"},{tag:wl.namespace,class:"tok-namespace"},{tag:wl.className,class:"tok-className"},{tag:wl.macroName,class:"tok-macroName"},{tag:wl.propertyName,class:"tok-propertyName"},{tag:wl.operator,class:"tok-operator"},{tag:wl.comment,class:"tok-comment"},{tag:wl.meta,class:"tok-meta"},{tag:wl.invalid,class:"tok-invalid"},{tag:wl.punctuation,class:"tok-punctuation"}]);var xl;const Sl=new la;function kl(t){return N.define({combine:t?e=>e.concat(t):void 0})}const Pl=new la;class Cl{constructor(t,e,n=[],o=""){this.data=t,this.name=o,Tt.prototype.hasOwnProperty("tree")||Object.defineProperty(Tt.prototype,"tree",{get(){return Al(this)}}),this.parser=e,this.extension=[Il.of(this),Tt.languageData.of(((t,e,n)=>{let o=Tl(t,e,n),i=o.type.prop(Sl);if(!i)return[];let r=t.facet(i),s=o.type.prop(Pl);if(s){let i=o.resolve(e-o.from,n);for(let e of s)if(e.test(i,t)){let n=t.facet(e.facet);return"replace"==e.type?n:n.concat(r)}}return r}))].concat(n)}isActiveAt(t,e,n=-1){return Tl(t,e,n).type.prop(Sl)==this.data}findRegions(t){let e=t.facet(Il);if((null==e?void 0:e.data)==this.data)return[{from:0,to:t.doc.length}];if(!e||!e.allowsNesting)return[];let n=[],o=(t,e)=>{if(t.prop(Sl)==this.data)return void n.push({from:e,to:e+t.length});let i=t.prop(la.mounted);if(i){if(i.tree.prop(Sl)==this.data){if(i.overlay)for(let t of i.overlay)n.push({from:t.from+e,to:t.to+e});else n.push({from:e,to:e+t.length});return}if(i.overlay){let t=n.length;if(o(i.tree,i.overlay[0].from+e),n.length>t)return}}for(let n=0;n<t.children.length;n++){let i=t.children[n];i instanceof ma&&o(i,t.positions[n]+e)}};return o(Al(t),0),n}get allowsNesting(){return!0}}function Tl(t,e,n){let o=t.facet(Il),i=Al(t).topNode;if(!o||o.allowsNesting)for(let t=i;t;t=t.enter(e,n,ga.ExcludeBuffers))t.type.isTop&&(i=t);return i}Cl.setState=mt.define();class El extends Cl{constructor(t,e,n){super(t,e,[],n),this.parser=e}static define(t){let e=kl(t.languageData);return new El(e,t.parser.configure({props:[Sl.add((t=>t.isTop?e:void 0))]}),t.name)}configure(t,e){return new El(this.data,this.parser.configure(t),e||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function Al(t){let e=t.field(Cl.state,!1);return e?e.tree:ma.empty}class Ql{constructor(t){this.doc=t,this.cursorPos=0,this.string="",this.cursor=t.iter()}get length(){return this.doc.length}syncTo(t){return this.string=this.cursor.next(t-this.cursorPos).value,this.cursorPos=t+this.string.length,this.cursorPos-this.string.length}chunk(t){return this.syncTo(t),this.string}get lineChunks(){return!0}read(t,e){let n=this.cursorPos-this.string.length;return t<n||e>=this.cursorPos?this.doc.sliceString(t,e):this.string.slice(t-n,e-n)}}let $l=null;class jl{constructor(t,e,n=[],o,i,r,s,a){this.parser=t,this.state=e,this.fragments=n,this.tree=o,this.treeLen=i,this.viewport=r,this.skipped=s,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(t,e,n){return new jl(t,e,[],ma.empty,0,n,[],null)}startParse(){return this.parser.startParse(new Ql(this.state.doc),this.fragments)}work(t,e){return null!=e&&e>=this.state.doc.length&&(e=void 0),this.tree!=ma.empty&&this.isDone(null!=e?e:this.state.doc.length)?(this.takeTree(),!0):this.withContext((()=>{var n;if("number"==typeof t){let e=Date.now()+t;t=()=>Date.now()>e}for(this.parse||(this.parse=this.startParse()),null!=e&&(null==this.parse.stoppedAt||this.parse.stoppedAt>e)&&e<this.state.doc.length&&this.parse.stopAt(e);;){let o=this.parse.advance();if(o){if(this.fragments=this.withoutTempSkipped(Ma.addTree(o,this.fragments,null!=this.parse.stoppedAt)),this.treeLen=null!==(n=this.parse.stoppedAt)&&void 0!==n?n:this.state.doc.length,this.tree=o,this.parse=null,!(this.treeLen<(null!=e?e:this.state.doc.length)))return!0;this.parse=this.startParse()}if(t())return!1}}))}takeTree(){let t,e;this.parse&&(t=this.parse.parsedPos)>=this.treeLen&&((null==this.parse.stoppedAt||this.parse.stoppedAt>t)&&this.parse.stopAt(t),this.withContext((()=>{for(;!(e=this.parse.advance()););})),this.treeLen=t,this.tree=e,this.fragments=this.withoutTempSkipped(Ma.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(t){let e=$l;$l=this;try{return t()}finally{$l=e}}withoutTempSkipped(t){for(let e;e=this.tempSkipped.pop();)t=Rl(t,e.from,e.to);return t}changes(t,e){let{fragments:n,tree:o,treeLen:i,viewport:r,skipped:s}=this;if(this.takeTree(),!t.empty){let e=[];if(t.iterChangedRanges(((t,n,o,i)=>e.push({fromA:t,toA:n,fromB:o,toB:i}))),n=Ma.applyChanges(n,e),o=ma.empty,i=0,r={from:t.mapPos(r.from,-1),to:t.mapPos(r.to,1)},this.skipped.length){s=[];for(let e of this.skipped){let n=t.mapPos(e.from,1),o=t.mapPos(e.to,-1);n<o&&s.push({from:n,to:o})}}}return new jl(this.parser,e,n,o,i,r,s,this.scheduleOn)}updateViewport(t){if(this.viewport.from==t.from&&this.viewport.to==t.to)return!1;this.viewport=t;let e=this.skipped.length;for(let e=0;e<this.skipped.length;e++){let{from:n,to:o}=this.skipped[e];n<t.to&&o>t.from&&(this.fragments=Rl(this.fragments,n,o),this.skipped.splice(e--,1))}return!(this.skipped.length>=e)&&(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(t,e){this.skipped.push({from:t,to:e})}static getSkippingParser(t){return new class extends Va{createParse(e,n,o){let i=o[0].from,r=o[o.length-1].to;return{parsedPos:i,advance(){let e=$l;if(e){for(let t of o)e.tempSkipped.push(t);t&&(e.scheduleOn=e.scheduleOn?Promise.all([e.scheduleOn,t]):t)}return this.parsedPos=r,new ma(pa.none,[],[],r-i)},stoppedAt:null,stopAt(){}}}}}isDone(t){t=Math.min(t,this.state.doc.length);let e=this.fragments;return this.treeLen>=t&&e.length&&0==e[0].from&&e[0].to>=t}static get(){return $l}}function Rl(t,e,n){return Ma.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class Ml{constructor(t){this.context=t,this.tree=t.tree}apply(t){if(!t.docChanged&&this.tree==this.context.tree)return this;let e=this.context.changes(t.changes,t.state),n=this.context.treeLen==t.startState.doc.length?void 0:Math.max(t.changes.mapPos(this.context.treeLen),e.viewport.to);return e.work(20,n)||e.takeTree(),new Ml(e)}static init(t){let e=Math.min(3e3,t.doc.length),n=jl.create(t.facet(Il).parser,t,{from:0,to:e});return n.work(20,e)||n.takeTree(),new Ml(n)}}Cl.state=Y.define({create:Ml.init,update(t,e){for(let t of e.effects)if(t.is(Cl.setState))return t.value;return e.startState.facet(Il)!=e.state.facet(Il)?Ml.init(e.state):t.apply(e)}});let Vl=t=>{let e=setTimeout((()=>t()),500);return()=>clearTimeout(e)};"undefined"!=typeof requestIdleCallback&&(Vl=t=>{let e=-1,n=setTimeout((()=>{e=requestIdleCallback(t,{timeout:500-100})}),100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const Zl="undefined"!=typeof navigator&&(null===(xl=navigator.scheduling)||void 0===xl?void 0:xl.isInputPending)?()=>navigator.scheduling.isInputPending():null,Dl=uo.fromClass(class{constructor(t){this.view=t,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(t){let e=this.view.state.field(Cl.state).context;(e.updateViewport(t.view.viewport)||this.view.viewport.to>e.treeLen)&&this.scheduleWork(),(t.docChanged||t.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(e)}scheduleWork(){if(this.working)return;let{state:t}=this.view,e=t.field(Cl.state);e.tree==e.context.tree&&e.context.isDone(t.doc.length)||(this.working=Vl(this.work))}work(t){this.working=null;let e=Date.now();if(this.chunkEnd<e&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=e+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:o}}=this.view,i=n.field(Cl.state);if(i.tree==i.context.tree&&i.context.isDone(o+1e5))return;let r=Date.now()+Math.min(this.chunkBudget,100,t&&!Zl?Math.max(25,t.timeRemaining()-5):1e9),s=i.context.treeLen<o&&n.doc.length>o+1e3,a=i.context.work((()=>Zl&&Zl()||Date.now()>r),o+(s?0:1e5));this.chunkBudget-=Date.now()-e,(a||this.chunkBudget<=0)&&(i.context.takeTree(),this.view.dispatch({effects:Cl.setState.of(new Ml(i.context))})),this.chunkBudget>0&&(!a||s)&&this.scheduleWork(),this.checkAsyncSchedule(i.context)}checkAsyncSchedule(t){t.scheduleOn&&(this.workScheduled++,t.scheduleOn.then((()=>this.scheduleWork())).catch((t=>so(this.view.state,t))).then((()=>this.workScheduled--)),t.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Il=N.define({combine:t=>t.length?t[0]:null,enables:t=>[Cl.state,Dl,cr.contentAttributes.compute([t],(e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}}))]});class Nl{constructor(t,e=[]){this.language=t,this.support=e,this.extension=[t,e]}}const Wl=N.define(),Xl=N.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some((t=>t!=e[0])))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function Ll(t){let e=t.facet(Xl);return 9==e.charCodeAt(0)?t.tabSize*e.length:e.length}function zl(t,e){let n="",o=t.tabSize,i=t.facet(Xl)[0];if("\t"==i){for(;e>=o;)n+="\t",e-=o;i=" "}for(let t=0;t<e;t++)n+=i;return n}function Ul(t,e){t instanceof Tt&&(t=new ql(t));for(let n of t.state.facet(Wl)){let o=n(t,e);if(void 0!==o)return o}let n=Al(t.state);return n.length>=e?function(t,e,n){let o=e.resolveStack(n),i=o.node.enterUnfinishedNodesBefore(n);if(i!=o.node){let t=[];for(let e=i;e!=o.node;e=e.parent)t.push(e);for(let e=t.length-1;e>=0;e--)o={node:t[e],next:o}}return Bl(o,t,n)}(t,n,e):null}class ql{constructor(t,e={}){this.state=t,this.options=e,this.unit=Ll(t)}lineAt(t,e=1){let n=this.state.doc.lineAt(t),{simulateBreak:o,simulateDoubleBreak:i}=this.options;return null!=o&&o>=n.from&&o<=n.to?i&&o==t?{text:"",from:t}:(e<0?o<t:o<=t)?{text:n.text.slice(o-n.from),from:o}:{text:n.text.slice(0,o-n.from),from:n.from}:n}textAfterPos(t,e=1){if(this.options.simulateDoubleBreak&&t==this.options.simulateBreak)return"";let{text:n,from:o}=this.lineAt(t,e);return n.slice(t-o,Math.min(n.length,t+100-o))}column(t,e=1){let{text:n,from:o}=this.lineAt(t,e),i=this.countColumn(n,t-o),r=this.options.overrideIndentation?this.options.overrideIndentation(o):-1;return r>-1&&(i+=r-this.countColumn(n,n.search(/\S|$/))),i}countColumn(t,e=t.length){return qt(t,this.state.tabSize,e)}lineIndent(t,e=1){let{text:n,from:o}=this.lineAt(t,e),i=this.options.overrideIndentation;if(i){let t=i(o);if(t>-1)return t}return this.countColumn(n,n.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const Yl=new la;function Bl(t,e,n){for(let o=t;o;o=o.next){let t=Fl(o.node);if(t)return t(Hl.create(e,n,o))}return 0}function Fl(t){let e=t.type.prop(Yl);if(e)return e;let n,o=t.firstChild;if(o&&(n=o.type.prop(la.closedBy))){let e=t.lastChild,o=e&&n.indexOf(e.name)>-1;return t=>tc(t,!0,1,void 0,o&&!function(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}(t)?e.from:void 0)}return null==t.parent?Gl:null}function Gl(){return 0}class Hl extends ql{constructor(t,e,n){super(t.state,t.options),this.base=t,this.pos=e,this.context=n}get node(){return this.context.node}static create(t,e,n){return new Hl(t,e,n)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(t){let e=this.state.doc.lineAt(t.from);for(;;){let n=t.resolve(e.from);for(;n.parent&&n.parent.from==n.from;)n=n.parent;if(Kl(n,t))break;e=this.state.doc.lineAt(n.from)}return this.lineIndent(e.from)}continue(){return Bl(this.context.next,this.base,this.pos)}}function Kl(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function Jl({closing:t,align:e=!0,units:n=1}){return o=>tc(o,e,n,t)}function tc(t,e,n,o,i){let r=t.textAfter,s=r.match(/^\s*/)[0].length,a=o&&r.slice(s,s+o.length)==o||i==t.pos+s,l=e?function(t){let e=t.node,n=e.childAfter(e.from),o=e.lastChild;if(!n)return null;let i=t.options.simulateBreak,r=t.state.doc.lineAt(n.from),s=null==i||i<=r.from?r.to:Math.min(r.to,i);for(let t=n.to;;){let i=e.childAfter(t);if(!i||i==o)return null;if(!i.type.isSkipped)return i.from<s?n:null;t=i.to}}(t):null;return l?a?t.column(l.from):t.column(l.to):t.baseIndent+(a?0:t.unit*n)}function ec({except:t,units:e=1}={}){return n=>{let o=t&&t.test(n.textAfter);return n.baseIndent+(o?0:e*n.unit)}}const nc=200;const oc=N.define(),ic=new la;function rc(t){let e=t.firstChild,n=t.lastChild;return e&&e.to<n.from?{from:e.to,to:n.type.isError?t.to:n.from}:null}function sc(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function ac(t,e,n){for(let o of t.facet(oc)){let i=o(t,e,n);if(i)return i}return function(t,e,n){let o=Al(t);if(o.length<n)return null;let i=null;for(let r=o.resolveStack(n,1);r;r=r.next){let s=r.node;if(s.to<=n||s.from>n)continue;if(i&&s.from<e)break;let a=s.type.prop(ic);if(a&&(s.to<o.length-50||o.length==t.doc.length||!sc(s))){let o=a(s,t);o&&o.from<=n&&o.from>=e&&o.to>n&&(i=o)}}return i}(t,e,n)}function lc(t,e){let n=e.mapPos(t.from,1),o=e.mapPos(t.to,-1);return n>=o?void 0:{from:n,to:o}}const cc=mt.define({map:lc}),uc=mt.define({map:lc});function pc(t){let e=[];for(let{head:n}of t.state.selection.ranges)e.some((t=>t.from<=n&&t.to>=n))||e.push(t.lineBlockAt(n));return e}const hc=Y.define({create:()=>_n.none,update(t,e){t=t.map(e.changes);for(let n of e.effects)if(n.is(cc)&&!fc(t,n.value.from,n.value.to)){let{preparePlaceholder:o}=e.state.facet(_c),i=o?_n.replace({widget:new xc(o(e.state,n.value))}):wc;t=t.update({add:[i.range(n.value.from,n.value.to)]})}else n.is(uc)&&(t=t.update({filter:(t,e)=>n.value.from!=t||n.value.to!=e,filterFrom:n.value.from,filterTo:n.value.to}));if(e.selection){let n=!1,{head:o}=e.selection.main;t.between(o,o,((t,e)=>{t<o&&e>o&&(n=!0)})),n&&(t=t.update({filterFrom:o,filterTo:o,filter:(t,e)=>e<=o||t>=o}))}return t},provide:t=>cr.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,((t,e)=>{n.push(t,e)})),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let o=t[n++],i=t[n++];if("number"!=typeof o||"number"!=typeof i)throw new RangeError("Invalid JSON for fold state");e.push(wc.range(o,i))}return _n.set(e,!0)}});function dc(t,e,n){var o;let i=null;return null===(o=t.field(hc,!1))||void 0===o||o.between(e,n,((t,e)=>{(!i||i.from>t)&&(i={from:t,to:e})})),i}function fc(t,e,n){let o=!1;return t.between(e,e,((t,i)=>{t==e&&i==n&&(o=!0)})),o}function gc(t,e){return t.field(hc,!1)?e:e.concat(mt.appendConfig.of(Oc()))}function mc(t,e,n=!0){let o=t.state.doc.lineAt(e.from).number,i=t.state.doc.lineAt(e.to).number;return cr.announce.of(`${t.state.phrase(n?"Folded lines":"Unfolded lines")} ${o} ${t.state.phrase("to")} ${i}.`)}const vc=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:t=>{for(let e of pc(t)){let n=ac(t.state,e.from,e.to);if(n)return t.dispatch({effects:gc(t.state,[cc.of(n),mc(t,n)])}),!0}return!1}},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:t=>{if(!t.state.field(hc,!1))return!1;let e=[];for(let n of pc(t)){let o=dc(t.state,n.from,n.to);o&&e.push(uc.of(o),mc(t,o,!1))}return e.length&&t.dispatch({effects:e}),e.length>0}},{key:"Ctrl-Alt-[",run:t=>{let{state:e}=t,n=[];for(let o=0;o<e.doc.length;){let i=t.lineBlockAt(o),r=ac(e,i.from,i.to);r&&n.push(cc.of(r)),o=(r?t.lineBlockAt(r.to):i).to+1}return n.length&&t.dispatch({effects:gc(t.state,n)}),!!n.length}},{key:"Ctrl-Alt-]",run:t=>{let e=t.state.field(hc,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,t.state.doc.length,((t,e)=>{n.push(uc.of({from:t,to:e}))})),t.dispatch({effects:n}),!0}}],yc={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},_c=N.define({combine:t=>Et(t,yc)});function Oc(t){let e=[hc,Cc];return t&&e.push(_c.of(t)),e}function bc(t,e){let{state:n}=t,o=n.facet(_c),i=e=>{let n=t.lineBlockAt(t.posAtDOM(e.target)),o=dc(t.state,n.from,n.to);o&&t.dispatch({effects:uc.of(o)}),e.preventDefault()};if(o.placeholderDOM)return o.placeholderDOM(t,i,e);let r=document.createElement("span");return r.textContent=o.placeholderText,r.setAttribute("aria-label",n.phrase("folded code")),r.title=n.phrase("unfold"),r.className="cm-foldPlaceholder",r.onclick=i,r}const wc=_n.replace({widget:new class extends vn{toDOM(t){return bc(t,null)}}});class xc extends vn{constructor(t){super(),this.value=t}eq(t){return this.value==t.value}toDOM(t){return bc(t,this.value)}}const Sc={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class kc extends Qs{constructor(t,e){super(),this.config=t,this.open=e}eq(t){return this.config==t.config&&this.open==t.open}toDOM(t){if(this.config.markerDOM)return this.config.markerDOM(this.open);let e=document.createElement("span");return e.textContent=this.open?this.config.openText:this.config.closedText,e.title=t.state.phrase(this.open?"Fold line":"Unfold line"),e}}function Pc(t={}){let e=Object.assign(Object.assign({},Sc),t),n=new kc(e,!0),o=new kc(e,!1),i=uo.fromClass(class{constructor(t){this.from=t.viewport.from,this.markers=this.buildMarkers(t)}update(t){(t.docChanged||t.viewportChanged||t.startState.facet(Il)!=t.state.facet(Il)||t.startState.field(hc,!1)!=t.state.field(hc,!1)||Al(t.startState)!=Al(t.state)||e.foldingChanged(t))&&(this.markers=this.buildMarkers(t.view))}buildMarkers(t){let e=new Mt;for(let i of t.viewportLineBlocks){let r=dc(t.state,i.from,i.to)?o:ac(t.state,i.from,i.to)?n:null;r&&e.add(i.from,i.from,r)}return e.finish()}}),{domEventHandlers:r}=e;return[i,Ms({class:"cm-foldGutter",markers(t){var e;return(null===(e=t.plugin(i))||void 0===e?void 0:e.markers)||Rt.empty},initialSpacer:()=>new kc(e,!1),domEventHandlers:Object.assign(Object.assign({},r),{click:(t,e,n)=>{if(r.click&&r.click(t,e,n))return!0;let o=dc(t.state,e.from,e.to);if(o)return t.dispatch({effects:uc.of(o)}),!0;let i=ac(t.state,e.from,e.to);return!!i&&(t.dispatch({effects:cc.of(i)}),!0)}})}),Oc()]}const Cc=cr.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Tc{constructor(t,e){let n;function o(t){let e=re.newName();return(n||(n=Object.create(null)))["."+e]=t,e}this.specs=t;const i="string"==typeof e.all?e.all:e.all?o(e.all):void 0,r=e.scope;this.scope=r instanceof Cl?t=>t.prop(Sl)==r.data:r?t=>t==r:void 0,this.style=il(t.map((t=>({tag:t.tag,class:t.class||o(Object.assign({},t,{tag:null}))}))),{all:i}).style,this.module=n?new re(n):null,this.themeType=e.themeType}static define(t,e){return new Tc(t,e||{})}}const Ec=N.define(),Ac=N.define({combine:t=>t.length?[t[0]]:null});function Qc(t){let e=t.facet(Ec);return e.length?e:t.facet(Ac)}function $c(t,e){let n,o=[Rc];return t instanceof Tc&&(t.module&&o.push(cr.styleModule.of(t.module)),n=t.themeType),(null==e?void 0:e.fallback)?o.push(Ac.of(t)):n?o.push(Ec.computeN([cr.darkTheme],(e=>e.facet(cr.darkTheme)==("dark"==n)?[t]:[]))):o.push(Ec.of(t)),o}class jc{constructor(t){this.markCache=Object.create(null),this.tree=Al(t.state),this.decorations=this.buildDeco(t,Qc(t.state)),this.decoratedTo=t.viewport.to}update(t){let e=Al(t.state),n=Qc(t.state),o=n!=Qc(t.startState),{viewport:i}=t.view,r=t.changes.mapPos(this.decoratedTo,1);e.length<i.to&&!o&&e.type==this.tree.type&&r>=i.to?(this.decorations=this.decorations.map(t.changes),this.decoratedTo=r):(e!=this.tree||t.viewportChanged||o)&&(this.tree=e,this.decorations=this.buildDeco(t.view,n),this.decoratedTo=i.to)}buildDeco(t,e){if(!e||!this.tree.length)return _n.none;let n=new Mt;for(let{from:o,to:i}of t.visibleRanges)rl(this.tree,e,((t,e,o)=>{n.add(t,e,this.markCache[o]||(this.markCache[o]=_n.mark({class:o})))}),o,i);return n.finish()}}const Rc=J.high(uo.fromClass(jc,{decorations:t=>t.decorations})),Mc=Tc.define([{tag:wl.meta,color:"#404740"},{tag:wl.link,textDecoration:"underline"},{tag:wl.heading,textDecoration:"underline",fontWeight:"bold"},{tag:wl.emphasis,fontStyle:"italic"},{tag:wl.strong,fontWeight:"bold"},{tag:wl.strikethrough,textDecoration:"line-through"},{tag:wl.keyword,color:"#708"},{tag:[wl.atom,wl.bool,wl.url,wl.contentSeparator,wl.labelName],color:"#219"},{tag:[wl.literal,wl.inserted],color:"#164"},{tag:[wl.string,wl.deleted],color:"#a11"},{tag:[wl.regexp,wl.escape,wl.special(wl.string)],color:"#e40"},{tag:wl.definition(wl.variableName),color:"#00f"},{tag:wl.local(wl.variableName),color:"#30a"},{tag:[wl.typeName,wl.namespace],color:"#085"},{tag:wl.className,color:"#167"},{tag:[wl.special(wl.variableName),wl.macroName],color:"#256"},{tag:wl.definition(wl.propertyName),color:"#00c"},{tag:wl.comment,color:"#940"},{tag:wl.invalid,color:"#f00"}]),Vc=cr.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),Zc=1e4,Dc="()[]{}",Ic=N.define({combine:t=>Et(t,{afterCursor:!0,brackets:Dc,maxScanDistance:Zc,renderMatch:Xc})}),Nc=_n.mark({class:"cm-matchingBracket"}),Wc=_n.mark({class:"cm-nonmatchingBracket"});function Xc(t){let e=[],n=t.matched?Nc:Wc;return e.push(n.range(t.start.from,t.start.to)),t.end&&e.push(n.range(t.end.from,t.end.to)),e}const Lc=Y.define({create:()=>_n.none,update(t,e){if(!e.docChanged&&!e.selection)return t;let n=[],o=e.state.facet(Ic);for(let t of e.state.selection.ranges){if(!t.empty)continue;let i=Fc(e.state,t.head,-1,o)||t.head>0&&Fc(e.state,t.head-1,1,o)||o.afterCursor&&(Fc(e.state,t.head,1,o)||t.head<e.state.doc.length&&Fc(e.state,t.head+1,-1,o));i&&(n=n.concat(o.renderMatch(i,e.state)))}return _n.set(n,!0)},provide:t=>cr.decorations.from(t)}),zc=[Lc,Vc];function Uc(t={}){return[Ic.of(t),zc]}const qc=new la;function Yc(t,e,n){let o=t.prop(e<0?la.openedBy:la.closedBy);if(o)return o;if(1==t.name.length){let o=n.indexOf(t.name);if(o>-1&&o%2==(e<0?1:0))return[n[o+e]]}return null}function Bc(t){let e=t.type.prop(qc);return e?e(t.node):t}function Fc(t,e,n,o={}){let i=o.maxScanDistance||Zc,r=o.brackets||Dc,s=Al(t),a=s.resolveInner(e,n);for(let o=a;o;o=o.parent){let i=Yc(o.type,n,r);if(i&&o.from<o.to){let s=Bc(o);if(s&&(n>0?e>=s.from&&e<s.to:e>s.from&&e<=s.to))return Gc(t,e,n,o,s,i,r)}}return function(t,e,n,o,i,r,s){let a=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),l=s.indexOf(a);if(l<0||l%2==0!=n>0)return null;let c={from:n<0?e-1:e,to:n>0?e+1:e},u=t.doc.iterRange(e,n>0?t.doc.length:0),p=0;for(let t=0;!u.next().done&&t<=r;){let r=u.value;n<0&&(t+=r.length);let a=e+t*n;for(let t=n>0?0:r.length-1,e=n>0?r.length:-1;t!=e;t+=n){let e=s.indexOf(r[t]);if(!(e<0||o.resolveInner(a+t,1).type!=i))if(e%2==0==n>0)p++;else{if(1==p)return{start:c,end:{from:a+t,to:a+t+1},matched:e>>1==l>>1};p--}}n>0&&(t+=r.length)}return u.done?{start:c,matched:!1}:null}(t,e,n,s,a.type,i,r)}function Gc(t,e,n,o,i,r,s){let a=o.parent,l={from:i.from,to:i.to},c=0,u=null==a?void 0:a.cursor();if(u&&(n<0?u.childBefore(o.from):u.childAfter(o.to)))do{if(n<0?u.to<=o.from:u.from>=o.to){if(0==c&&r.indexOf(u.type.name)>-1&&u.from<u.to){let t=Bc(u);return{start:l,end:t?{from:t.from,to:t.to}:void 0,matched:!0}}if(Yc(u.type,n,s))c++;else if(Yc(u.type,-n,s)){if(0==c){let t=Bc(u);return{start:l,end:t&&t.from<t.to?{from:t.from,to:t.to}:void 0,matched:!1}}c--}}}while(n<0?u.prevSibling():u.nextSibling());return{start:l,matched:!1}}const Hc=Object.create(null),Kc=[pa.none],Jc=[],tu=Object.create(null),eu=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])eu[t]=ou(Hc,e);function nu(t,e){Jc.indexOf(t)>-1||(Jc.push(t),console.warn(e))}function ou(t,e){let n=[];for(let o of e.split(" ")){let e=[];for(let n of o.split(".")){let o=t[n]||wl[n];o?"function"==typeof o?e.length?e=e.map(o):nu(n,`Modifier ${n} used at start of tag`):e.length?nu(n,`Tag ${n} used as modifier`):e=Array.isArray(o)?o:[o]:nu(n,`Unknown highlighting tag ${n}`)}for(let t of e)n.push(t)}if(!n.length)return 0;let o=e.replace(/ /g,"_"),i=o+" "+n.map((t=>t.id)),r=tu[i];if(r)return r.id;let s=tu[i]=pa.define({id:Kc.length,name:o,props:[el({[o]:n})]});return Kc.push(s),s.id}Tn.RTL,Tn.LTR;function iu(t,e){return({state:n,dispatch:o})=>{if(n.readOnly)return!1;let i=t(e,n);return!!i&&(o(n.update(i)),!0)}}const ru=iu(pu,0),su=(null&&iu(pu,1),null&&iu(pu,2),iu(uu,0)),au=(null&&iu(uu,1),null&&iu(uu,2),iu(((t,e)=>uu(t,e,function(t){let e=[];for(let n of t.selection.ranges){let o=t.doc.lineAt(n.from),i=n.to<=o.to?o:t.doc.lineAt(n.to),r=e.length-1;r>=0&&e[r].to>o.from?e[r].to=i.to:e.push({from:o.from+/^\s*/.exec(o.text)[0].length,to:i.to})}return e}(e))),0));function lu(t,e){let n=t.languageDataAt("commentTokens",e);return n.length?n[0]:{}}const cu=50;function uu(t,e,n=e.selection.ranges){let o=n.map((t=>lu(e,t.from).block));if(!o.every((t=>t)))return null;let i=n.map(((t,n)=>function(t,{open:e,close:n},o,i){let r,s,a=t.sliceDoc(o-cu,o),l=t.sliceDoc(i,i+cu),c=/\s*$/.exec(a)[0].length,u=/^\s*/.exec(l)[0].length,p=a.length-c;if(a.slice(p-e.length,p)==e&&l.slice(u,u+n.length)==n)return{open:{pos:o-c,margin:c&&1},close:{pos:i+u,margin:u&&1}};i-o<=2*cu?r=s=t.sliceDoc(o,i):(r=t.sliceDoc(o,o+cu),s=t.sliceDoc(i-cu,i));let h=/^\s*/.exec(r)[0].length,d=/\s*$/.exec(s)[0].length,f=s.length-d-n.length;return r.slice(h,h+e.length)==e&&s.slice(f,f+n.length)==n?{open:{pos:o+h+e.length,margin:/\s/.test(r.charAt(h+e.length))?1:0},close:{pos:i-d-n.length,margin:/\s/.test(s.charAt(f-1))?1:0}}:null}(e,o[n],t.from,t.to)));if(2!=t&&!i.every((t=>t)))return{changes:e.changes(n.map(((t,e)=>i[e]?[]:[{from:t.from,insert:o[e].open+" "},{from:t.to,insert:" "+o[e].close}])))};if(1!=t&&i.some((t=>t))){let t=[];for(let e,n=0;n<i.length;n++)if(e=i[n]){let i=o[n],{open:r,close:s}=e;t.push({from:r.pos-i.open.length,to:r.pos+r.margin},{from:s.pos-s.margin,to:s.pos+i.close.length})}return{changes:t}}return null}function pu(t,e,n=e.selection.ranges){let o=[],i=-1;for(let{from:t,to:r}of n){let n=o.length,s=1e9,a=lu(e,t).line;if(a){for(let n=t;n<=r;){let l=e.doc.lineAt(n);if(l.from>i&&(t==r||r>l.from)){i=l.from;let t=/^\s*/.exec(l.text)[0].length,e=t==l.length,n=l.text.slice(t,t+a.length)==a?t:-1;t<l.text.length&&t<s&&(s=t),o.push({line:l,comment:n,token:a,indent:t,empty:e,single:!1})}n=l.to+1}if(s<1e9)for(let t=n;t<o.length;t++)o[t].indent<o[t].line.text.length&&(o[t].indent=s);o.length==n+1&&(o[n].single=!0)}}if(2!=t&&o.some((t=>t.comment<0&&(!t.empty||t.single)))){let t=[];for(let{line:e,token:n,indent:i,empty:r,single:s}of o)!s&&r||t.push({from:e.from+i,insert:n+" "});let n=e.changes(t);return{changes:n,selection:e.selection.map(n,1)}}if(1!=t&&o.some((t=>t.comment>=0))){let t=[];for(let{line:e,comment:n,token:i}of o)if(n>=0){let o=e.from+n,r=o+i.length;" "==e.text[r-e.from]&&r++,t.push({from:o,to:r})}return{changes:t}}return null}const hu=dt.define(),du=dt.define(),fu=N.define(),gu=N.define({combine:t=>Et(t,{minDepth:100,newGroupDelay:500,joinToEvent:(t,e)=>e},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(t,e)=>(n,o)=>t(n,o)||e(n,o)})}),mu=Y.define({create:()=>Ru.empty,update(t,e){let n=e.state.facet(gu),o=e.annotation(hu);if(o){let i=Su.fromTransaction(e,o.selection),r=o.side,s=0==r?t.undone:t.done;return s=i?ku(s,s.length,n.minDepth,i):Eu(s,e.startState.selection),new Ru(0==r?o.rest:s,0==r?s:o.rest)}let i=e.annotation(du);if("full"!=i&&"before"!=i||(t=t.isolate()),!1===e.annotation(vt.addToHistory))return e.changes.empty?t:t.addMapping(e.changes.desc);let r=Su.fromTransaction(e),s=e.annotation(vt.time),a=e.annotation(vt.userEvent);return r?t=t.addChanges(r,s,a,n,e):e.selection&&(t=t.addSelection(e.startState.selection,s,a,n.newGroupDelay)),"full"!=i&&"after"!=i||(t=t.isolate()),t},toJSON:t=>({done:t.done.map((t=>t.toJSON())),undone:t.undone.map((t=>t.toJSON()))}),fromJSON:t=>new Ru(t.done.map(Su.fromJSON),t.undone.map(Su.fromJSON))});function vu(t={}){return[mu,gu.of(t),cr.domEventHandlers({beforeinput(t,e){let n="historyUndo"==t.inputType?_u:"historyRedo"==t.inputType?Ou:null;return!!n&&(t.preventDefault(),n(e))}})]}function yu(t,e){return function({state:n,dispatch:o}){if(!e&&n.readOnly)return!1;let i=n.field(mu,!1);if(!i)return!1;let r=i.pop(t,n,e);return!!r&&(o(r),!0)}}const _u=yu(0,!1),Ou=yu(1,!1),bu=yu(0,!0),wu=yu(1,!0);function xu(t){return function(e){let n=e.field(mu,!1);if(!n)return 0;let o=0==t?n.done:n.undone;return o.length-(o.length&&!o[0].changes?1:0)}}null&&xu(0),null&&xu(1);class Su{constructor(t,e,n,o,i){this.changes=t,this.effects=e,this.mapped=n,this.startSelection=o,this.selectionsAfter=i}setSelAfter(t){return new Su(this.changes,this.effects,this.mapped,this.startSelection,t)}toJSON(){var t,e,n;return{changes:null===(t=this.changes)||void 0===t?void 0:t.toJSON(),mapped:null===(e=this.mapped)||void 0===e?void 0:e.toJSON(),startSelection:null===(n=this.startSelection)||void 0===n?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map((t=>t.toJSON()))}}static fromJSON(t){return new Su(t.changes&&E.fromJSON(t.changes),[],t.mapped&&T.fromJSON(t.mapped),t.startSelection&&Z.fromJSON(t.startSelection),t.selectionsAfter.map(Z.fromJSON))}static fromTransaction(t,e){let n=Cu;for(let e of t.startState.facet(fu)){let o=e(t);o.length&&(n=n.concat(o))}return!n.length&&t.changes.empty?null:new Su(t.changes.invert(t.startState.doc),n,void 0,e||t.startState.selection,Cu)}static selection(t){return new Su(void 0,Cu,void 0,void 0,t)}}function ku(t,e,n,o){let i=e+1>n+20?e-n-1:0,r=t.slice(i,e);return r.push(o),r}function Pu(t,e){return t.length?e.length?t.concat(e):t:e}const Cu=[],Tu=200;function Eu(t,e){if(t.length){let n=t[t.length-1],o=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-Tu));return o.length&&o[o.length-1].eq(e)?t:(o.push(e),ku(t,t.length-1,1e9,n.setSelAfter(o)))}return[Su.selection([e])]}function Au(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function Qu(t,e){if(!t.length)return t;let n=t.length,o=Cu;for(;n;){let i=$u(t[n-1],e,o);if(i.changes&&!i.changes.empty||i.effects.length){let e=t.slice(0,n);return e[n-1]=i,e}e=i.mapped,n--,o=i.selectionsAfter}return o.length?[Su.selection(o)]:Cu}function $u(t,e,n){let o=Pu(t.selectionsAfter.length?t.selectionsAfter.map((t=>t.map(e))):Cu,n);if(!t.changes)return Su.selection(o);let i=t.changes.map(e),r=e.mapDesc(t.changes,!0),s=t.mapped?t.mapped.composeDesc(r):r;return new Su(i,mt.mapEffects(t.effects,e),s,t.startSelection.map(r),o)}const ju=/^(input\.type|delete)($|\.)/;class Ru{constructor(t,e,n=0,o=void 0){this.done=t,this.undone=e,this.prevTime=n,this.prevUserEvent=o}isolate(){return this.prevTime?new Ru(this.done,this.undone):this}addChanges(t,e,n,o,i){let r=this.done,s=r[r.length-1];return r=s&&s.changes&&!s.changes.empty&&t.changes&&(!n||ju.test(n))&&(!s.selectionsAfter.length&&e-this.prevTime<o.newGroupDelay&&o.joinToEvent(i,function(t,e){let n=[],o=!1;return t.iterChangedRanges(((t,e)=>n.push(t,e))),e.iterChangedRanges(((t,e,i,r)=>{for(let t=0;t<n.length;){let e=n[t++],s=n[t++];r>=e&&i<=s&&(o=!0)}})),o}(s.changes,t.changes))||"input.type.compose"==n)?ku(r,r.length-1,o.minDepth,new Su(t.changes.compose(s.changes),Pu(t.effects,s.effects),s.mapped,s.startSelection,Cu)):ku(r,r.length,o.minDepth,t),new Ru(r,Cu,e,n)}addSelection(t,e,n,o){let i=this.done.length?this.done[this.done.length-1].selectionsAfter:Cu;return i.length>0&&e-this.prevTime<o&&n==this.prevUserEvent&&n&&/^select($|\.)/.test(n)&&function(t,e){return t.ranges.length==e.ranges.length&&0===t.ranges.filter(((t,n)=>t.empty!=e.ranges[n].empty)).length}(i[i.length-1],t)?this:new Ru(Eu(this.done,t),this.undone,e,n)}addMapping(t){return new Ru(Qu(this.done,t),Qu(this.undone,t),this.prevTime,this.prevUserEvent)}pop(t,e,n){let o=0==t?this.done:this.undone;if(0==o.length)return null;let i=o[o.length-1],r=i.selectionsAfter[0]||e.selection;if(n&&i.selectionsAfter.length)return e.update({selection:i.selectionsAfter[i.selectionsAfter.length-1],annotations:hu.of({side:t,rest:Au(o),selection:r}),userEvent:0==t?"select.undo":"select.redo",scrollIntoView:!0});if(i.changes){let n=1==o.length?Cu:o.slice(0,o.length-1);return i.mapped&&(n=Qu(n,i.mapped)),e.update({changes:i.changes,selection:i.startSelection,effects:i.effects,annotations:hu.of({side:t,rest:n,selection:r}),filter:!1,userEvent:0==t?"undo":"redo",scrollIntoView:!0})}return null}}Ru.empty=new Ru(Cu,Cu);const Mu=[{key:"Mod-z",run:_u,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:Ou,preventDefault:!0},{linux:"Ctrl-Shift-z",run:Ou,preventDefault:!0},{key:"Mod-u",run:bu,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:wu,preventDefault:!0}];function Vu(t,e){return Z.create(t.ranges.map(e),t.mainIndex)}function Zu(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Du({state:t,dispatch:e},n){let o=Vu(t.selection,n);return!o.eq(t.selection,!0)&&(e(Zu(t,o)),!0)}function Iu(t,e){return Z.cursor(e?t.to:t.from)}function Nu(t,e){return Du(t,(n=>n.empty?t.moveByChar(n,e):Iu(n,e)))}function Wu(t){return t.textDirectionAt(t.state.selection.main.head)==Tn.LTR}const Xu=t=>Nu(t,!Wu(t)),Lu=t=>Nu(t,Wu(t));function zu(t,e){return Du(t,(n=>n.empty?t.moveByGroup(n,e):Iu(n,e)))}"undefined"!=typeof Intl&&Intl.Segmenter;function Uu(t,e,n){if(e.type.prop(n))return!0;let o=e.to-e.from;return o&&(o>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function qu(t,e,n){let o,i,r=Al(t).resolveInner(e.head),s=n?la.closedBy:la.openedBy;for(let o=e.head;;){let e=n?r.childAfter(o):r.childBefore(o);if(!e)break;Uu(t,e,s)?r=e:o=n?e.to:e.from}return i=r.type.prop(s)&&(o=n?Fc(t,r.from,1):Fc(t,r.to,-1))&&o.matched?n?o.end.to:o.end.from:n?r.to:r.from,Z.cursor(i,n?-1:1)}function Yu(t,e){return Du(t,(n=>{if(!n.empty)return Iu(n,e);let o=t.moveVertically(n,e);return o.head!=n.head?o:t.moveToLineBoundary(n,e)}))}const Bu=t=>Yu(t,!1),Fu=t=>Yu(t,!0);function Gu(t){let e,n=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,o=0,i=0;if(n){for(let e of t.state.facet(cr.scrollMargins)){let n=e(t);(null==n?void 0:n.top)&&(o=Math.max(null==n?void 0:n.top,o)),(null==n?void 0:n.bottom)&&(i=Math.max(null==n?void 0:n.bottom,i))}e=t.scrollDOM.clientHeight-o-i}else e=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:o,marginBottom:i,selfScroll:n,height:Math.max(t.defaultLineHeight,e-5)}}function Hu(t,e){let n,o=Gu(t),{state:i}=t,r=Vu(i.selection,(n=>n.empty?t.moveVertically(n,e,o.height):Iu(n,e)));if(r.eq(i.selection))return!1;if(o.selfScroll){let e=t.coordsAtPos(i.selection.main.head),s=t.scrollDOM.getBoundingClientRect(),a=s.top+o.marginTop,l=s.bottom-o.marginBottom;e&&e.top>a&&e.bottom<l&&(n=cr.scrollIntoView(r.main.head,{y:"start",yMargin:e.top-a}))}return t.dispatch(Zu(i,r),{effects:n}),!0}const Ku=t=>Hu(t,!1),Ju=t=>Hu(t,!0);function tp(t,e,n){let o=t.lineBlockAt(e.head),i=t.moveToLineBoundary(e,n);if(i.head==e.head&&i.head!=(n?o.to:o.from)&&(i=t.moveToLineBoundary(e,n,!1)),!n&&i.head==o.from&&o.length){let n=/^\s*/.exec(t.state.sliceDoc(o.from,Math.min(o.from+100,o.to)))[0].length;n&&e.head!=o.from+n&&(i=Z.cursor(o.from+n))}return i}function ep(t,e,n){let o=!1,i=Vu(t.selection,(e=>{let i=Fc(t,e.head,-1)||Fc(t,e.head,1)||e.head>0&&Fc(t,e.head-1,1)||e.head<t.doc.length&&Fc(t,e.head+1,-1);if(!i||!i.end)return e;o=!0;let r=i.start.from==e.head?i.end.to:i.end.from;return n?Z.range(e.anchor,r):Z.cursor(r)}));return!!o&&(e(Zu(t,i)),!0)}function np(t,e){let n=Vu(t.state.selection,(t=>{let n=e(t);return Z.range(t.anchor,n.head,n.goalColumn,n.bidiLevel||void 0)}));return!n.eq(t.state.selection)&&(t.dispatch(Zu(t.state,n)),!0)}function op(t,e){return np(t,(n=>t.moveByChar(n,e)))}const ip=t=>op(t,!Wu(t)),rp=t=>op(t,Wu(t));function sp(t,e){return np(t,(n=>t.moveByGroup(n,e)))}function ap(t,e){return np(t,(n=>t.moveVertically(n,e)))}const lp=t=>ap(t,!1),cp=t=>ap(t,!0);function up(t,e){return np(t,(n=>t.moveVertically(n,e,Gu(t).height)))}const pp=t=>up(t,!1),hp=t=>up(t,!0),dp=({state:t,dispatch:e})=>(e(Zu(t,{anchor:0})),!0),fp=({state:t,dispatch:e})=>(e(Zu(t,{anchor:t.doc.length})),!0),gp=({state:t,dispatch:e})=>(e(Zu(t,{anchor:t.selection.main.anchor,head:0})),!0),mp=({state:t,dispatch:e})=>(e(Zu(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0);function vp(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:o}=t,i=o.changeByRange((o=>{let{from:i,to:r}=o;if(i==r){let s=e(o);s<i?(n="delete.backward",s=yp(t,s,!1)):s>i&&(n="delete.forward",s=yp(t,s,!0)),i=Math.min(i,s),r=Math.max(r,s)}else i=yp(t,i,!1),r=yp(t,r,!0);return i==r?{range:o}:{changes:{from:i,to:r},range:Z.cursor(i,i<o.head?-1:1)}}));return!i.changes.empty&&(t.dispatch(o.update(i,{scrollIntoView:!0,userEvent:n,effects:"delete.selection"==n?cr.announce.of(o.phrase("Selection deleted")):void 0})),!0)}function yp(t,e,n){if(t instanceof cr)for(let o of t.state.facet(cr.atomicRanges).map((e=>e(t))))o.between(e,e,((t,o)=>{t<e&&o>e&&(e=n?o:t)}));return e}const _p=(t,e,n)=>vp(t,(o=>{let i,r,s=o.from,{state:a}=t,l=a.doc.lineAt(s);if(n&&!e&&s>l.from&&s<l.from+200&&!/[^ \t]/.test(i=l.text.slice(0,s-l.from))){if("\t"==i[i.length-1])return s-1;let t=qt(i,a.tabSize)%Ll(a)||Ll(a);for(let e=0;e<t&&" "==i[i.length-1-e];e++)s--;r=s}else r=y(l.text,s-l.from,e,e)+l.from,r==s&&l.number!=(e?a.doc.lines:1)?r+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(l.text.slice(r-l.from,s-l.from))&&(r=y(l.text,r-l.from,!1,!1)+l.from);return r})),Op=t=>_p(t,!1,!0),bp=t=>_p(t,!0,!1),wp=(t,e)=>vp(t,(n=>{let o=n.head,{state:i}=t,r=i.doc.lineAt(o),s=i.charCategorizer(o);for(let t=null;;){if(o==(e?r.to:r.from)){o==n.head&&r.number!=(e?i.doc.lines:1)&&(o+=e?1:-1);break}let a=y(r.text,o-r.from,e)+r.from,l=r.text.slice(Math.min(o,a)-r.from,Math.max(o,a)-r.from),c=s(l);if(null!=t&&c!=t)break;" "==l&&o==n.head||(t=c),o=a}return o})),xp=t=>wp(t,!1);function Sp(t){let e=[],n=-1;for(let o of t.selection.ranges){let i=t.doc.lineAt(o.from),r=t.doc.lineAt(o.to);if(o.empty||o.to!=r.from||(r=t.doc.lineAt(o.to-1)),n>=i.number){let t=e[e.length-1];t.to=r.to,t.ranges.push(o)}else e.push({from:i.from,to:r.to,ranges:[o]});n=r.number+1}return e}function kp(t,e,n){if(t.readOnly)return!1;let o=[],i=[];for(let e of Sp(t)){if(n?e.to==t.doc.length:0==e.from)continue;let r=t.doc.lineAt(n?e.to+1:e.from-1),s=r.length+1;if(n){o.push({from:e.to,to:r.to},{from:e.from,insert:r.text+t.lineBreak});for(let n of e.ranges)i.push(Z.range(Math.min(t.doc.length,n.anchor+s),Math.min(t.doc.length,n.head+s)))}else{o.push({from:r.from,to:e.from},{from:e.to,insert:t.lineBreak+r.text});for(let t of e.ranges)i.push(Z.range(t.anchor-s,t.head-s))}}return!!o.length&&(e(t.update({changes:o,scrollIntoView:!0,selection:Z.create(i,t.selection.mainIndex),userEvent:"move.line"})),!0)}function Pp(t,e,n){if(t.readOnly)return!1;let o=[];for(let e of Sp(t))n?o.push({from:e.from,insert:t.doc.slice(e.from,e.to)+t.lineBreak}):o.push({from:e.to,insert:t.lineBreak+t.doc.slice(e.from,e.to)});return e(t.update({changes:o,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const Cp=Tp(!1);function Tp(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let o=e.changeByRange((n=>{let{from:o,to:r}=n,s=e.doc.lineAt(o),a=!t&&o==r&&function(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n,o=Al(t).resolveInner(e),i=o.childBefore(e),r=o.childAfter(e);return i&&r&&i.to<=e&&r.from>=e&&(n=i.type.prop(la.closedBy))&&n.indexOf(r.name)>-1&&t.doc.lineAt(i.to).from==t.doc.lineAt(r.from).from&&!/\S/.test(t.sliceDoc(i.to,r.from))?{from:i.to,to:r.from}:null}(e,o);t&&(o=r=(r<=s.to?s:e.doc.lineAt(r)).to);let l=new ql(e,{simulateBreak:o,simulateDoubleBreak:!!a}),c=Ul(l,o);for(null==c&&(c=qt(/^\s*/.exec(e.doc.lineAt(o).text)[0],e.tabSize));r<s.to&&/\s/.test(s.text[r-s.from]);)r++;a?({from:o,to:r}=a):o>s.from&&o<s.from+100&&!/\S/.test(s.text.slice(0,o))&&(o=s.from);let u=["",zl(e,c)];return a&&u.push(zl(e,l.lineIndent(s.from,-1))),{changes:{from:o,to:r,insert:i.of(u)},range:Z.cursor(o+1+u[1].length)}}));return n(e.update(o,{scrollIntoView:!0,userEvent:"input"})),!0}}function Ep(t,e){let n=-1;return t.changeByRange((o=>{let i=[];for(let r=o.from;r<=o.to;){let s=t.doc.lineAt(r);s.number>n&&(o.empty||o.to>s.from)&&(e(s,i,o),n=s.number),r=s.to+1}let r=t.changes(i);return{changes:i,range:Z.range(r.mapPos(o.anchor,1),r.mapPos(o.head,1))}}))}const Ap=({state:t,dispatch:e})=>!t.readOnly&&(e(t.update(Ep(t,((e,n)=>{n.push({from:e.from,insert:t.facet(Xl)})})),{userEvent:"input.indent"})),!0),Qp=({state:t,dispatch:e})=>!t.readOnly&&(e(t.update(Ep(t,((e,n)=>{let o=/^\s*/.exec(e.text)[0];if(!o)return;let i=qt(o,t.tabSize),r=0,s=zl(t,Math.max(0,i-Ll(t)));for(;r<o.length&&r<s.length&&o.charCodeAt(r)==s.charCodeAt(r);)r++;n.push({from:e.from+r,to:e.from+o.length,insert:s.slice(r)})})),{userEvent:"delete.dedent"})),!0),$p=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:t=>Du(t,(e=>qu(t.state,e,!Wu(t)))),shift:t=>np(t,(e=>qu(t.state,e,!Wu(t))))},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:t=>Du(t,(e=>qu(t.state,e,Wu(t)))),shift:t=>np(t,(e=>qu(t.state,e,Wu(t))))},{key:"Alt-ArrowUp",run:({state:t,dispatch:e})=>kp(t,e,!1)},{key:"Shift-Alt-ArrowUp",run:({state:t,dispatch:e})=>Pp(t,e,!1)},{key:"Alt-ArrowDown",run:({state:t,dispatch:e})=>kp(t,e,!0)},{key:"Shift-Alt-ArrowDown",run:({state:t,dispatch:e})=>Pp(t,e,!0)},{key:"Escape",run:({state:t,dispatch:e})=>{let n=t.selection,o=null;return n.ranges.length>1?o=Z.create([n.main]):n.main.empty||(o=Z.create([Z.cursor(n.main.head)])),!!o&&(e(Zu(t,o)),!0)}},{key:"Mod-Enter",run:Tp(!0)},{key:"Alt-l",mac:"Ctrl-l",run:({state:t,dispatch:e})=>{let n=Sp(t).map((({from:e,to:n})=>Z.range(e,Math.min(n+1,t.doc.length))));return e(t.update({selection:Z.create(n),userEvent:"select"})),!0}},{key:"Mod-i",run:({state:t,dispatch:e})=>{let n=Vu(t.selection,(e=>{var n;for(let o=Al(t).resolveStack(e.from,1);o;o=o.next){let{node:t}=o;if((t.from<e.from&&t.to>=e.to||t.to>e.to&&t.from<=e.from)&&(null===(n=t.parent)||void 0===n?void 0:n.parent))return Z.range(t.to,t.from)}return e}));return e(Zu(t,n)),!0},preventDefault:!0},{key:"Mod-[",run:Qp},{key:"Mod-]",run:Ap},{key:"Mod-Alt-\\",run:({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=Object.create(null),o=new ql(t,{overrideIndentation:t=>{let e=n[t];return null==e?-1:e}}),i=Ep(t,((e,i,r)=>{let s=Ul(o,e.from);if(null==s)return;/\S/.test(e.text)||(s=0);let a=/^\s*/.exec(e.text)[0],l=zl(t,s);(a!=l||r.from<e.from+a.length)&&(n[e.from]=s,i.push({from:e.from,to:e.from+a.length,insert:l}))}));return i.changes.empty||e(t.update(i,{userEvent:"indent"})),!0}},{key:"Shift-Mod-k",run:t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(Sp(e).map((({from:t,to:n})=>(t>0?t--:n<e.doc.length&&n++,{from:t,to:n})))),o=Vu(e.selection,(e=>{let n;if(t.lineWrapping){let o=t.lineBlockAt(e.head),i=t.coordsAtPos(e.head,e.assoc||1);i&&(n=o.bottom+t.documentTop-i.bottom+t.defaultLineHeight/2)}return t.moveVertically(e,!0,n)})).map(n);return t.dispatch({changes:n,selection:o,scrollIntoView:!0,userEvent:"delete.line"}),!0}},{key:"Shift-Mod-\\",run:({state:t,dispatch:e})=>ep(t,e,!1)},{key:"Mod-/",run:t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),o=lu(t.state,n.from);return o.line?ru(t):!!o.block&&au(t)}},{key:"Alt-A",run:su}].concat([{key:"ArrowLeft",run:Xu,shift:ip,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:t=>zu(t,!Wu(t)),shift:t=>sp(t,!Wu(t)),preventDefault:!0},{mac:"Cmd-ArrowLeft",run:t=>Du(t,(e=>tp(t,e,!Wu(t)))),shift:t=>np(t,(e=>tp(t,e,!Wu(t)))),preventDefault:!0},{key:"ArrowRight",run:Lu,shift:rp,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:t=>zu(t,Wu(t)),shift:t=>sp(t,Wu(t)),preventDefault:!0},{mac:"Cmd-ArrowRight",run:t=>Du(t,(e=>tp(t,e,Wu(t)))),shift:t=>np(t,(e=>tp(t,e,Wu(t)))),preventDefault:!0},{key:"ArrowUp",run:Bu,shift:lp,preventDefault:!0},{mac:"Cmd-ArrowUp",run:dp,shift:gp},{mac:"Ctrl-ArrowUp",run:Ku,shift:pp},{key:"ArrowDown",run:Fu,shift:cp,preventDefault:!0},{mac:"Cmd-ArrowDown",run:fp,shift:mp},{mac:"Ctrl-ArrowDown",run:Ju,shift:hp},{key:"PageUp",run:Ku,shift:pp},{key:"PageDown",run:Ju,shift:hp},{key:"Home",run:t=>Du(t,(e=>tp(t,e,!1))),shift:t=>np(t,(e=>tp(t,e,!1))),preventDefault:!0},{key:"Mod-Home",run:dp,shift:gp},{key:"End",run:t=>Du(t,(e=>tp(t,e,!0))),shift:t=>np(t,(e=>tp(t,e,!0))),preventDefault:!0},{key:"Mod-End",run:fp,shift:mp},{key:"Enter",run:Cp},{key:"Mod-a",run:({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0)},{key:"Backspace",run:Op,shift:Op},{key:"Delete",run:bp},{key:"Mod-Backspace",mac:"Alt-Backspace",run:xp},{key:"Mod-Delete",mac:"Alt-Delete",run:t=>wp(t,!0)},{mac:"Mod-Backspace",run:t=>vp(t,(e=>{let n=t.moveToLineBoundary(e,!1).head;return e.head>n?n:Math.max(0,e.head-1)}))},{mac:"Mod-Delete",run:t=>vp(t,(e=>{let n=t.moveToLineBoundary(e,!0).head;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}))}].concat([{key:"Ctrl-b",run:Xu,shift:ip,preventDefault:!0},{key:"Ctrl-f",run:Lu,shift:rp},{key:"Ctrl-p",run:Bu,shift:lp},{key:"Ctrl-n",run:Fu,shift:cp},{key:"Ctrl-a",run:t=>Du(t,(e=>Z.cursor(t.lineBlockAt(e.head).from,1))),shift:t=>np(t,(e=>Z.cursor(t.lineBlockAt(e.head).from)))},{key:"Ctrl-e",run:t=>Du(t,(e=>Z.cursor(t.lineBlockAt(e.head).to,-1))),shift:t=>np(t,(e=>Z.cursor(t.lineBlockAt(e.head).to)))},{key:"Ctrl-d",run:bp},{key:"Ctrl-h",run:Op},{key:"Ctrl-k",run:t=>vp(t,(e=>{let n=t.lineBlockAt(e.head).to;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}))},{key:"Ctrl-Alt-h",run:xp},{key:"Ctrl-o",run:({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange((t=>({changes:{from:t.from,to:t.to,insert:i.of(["",""])},range:Z.cursor(t.from)})));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0}},{key:"Ctrl-t",run:({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange((e=>{if(!e.empty||0==e.from||e.from==t.doc.length)return{range:e};let n=e.from,o=t.doc.lineAt(n),i=n==o.from?n-1:y(o.text,n-o.from,!1)+o.from,r=n==o.to?n+1:y(o.text,n-o.from,!0)+o.from;return{changes:{from:i,to:r,insert:t.doc.slice(n,r).append(t.doc.slice(i,n))},range:Z.cursor(r)}}));return!n.changes.empty&&(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)}},{key:"Ctrl-v",run:Ju}].map((t=>({mac:t.key,run:t.run,shift:t.shift})))));function jp(){var t=arguments[0];"string"==typeof t&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&"object"==typeof n&&null==n.nodeType&&!Array.isArray(n)){for(var o in n)if(Object.prototype.hasOwnProperty.call(n,o)){var i=n[o];"string"==typeof i?t.setAttribute(o,i):null!=i&&(t[o]=i)}e++}for(;e<arguments.length;e++)Rp(t,arguments[e]);return t}function Rp(t,e){if("string"==typeof e)t.appendChild(document.createTextNode(e));else if(null==e);else if(null!=e.nodeType)t.appendChild(e);else{if(!Array.isArray(e))throw new RangeError("Unsupported child node: "+e);for(var n=0;n<e.length;n++)Rp(t,e[n])}}const Mp="function"==typeof String.prototype.normalize?t=>t.normalize("NFKD"):t=>t;class Vp{constructor(t,e,n=0,o=t.length,i,r){this.test=r,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=t.iterRange(n,o),this.bufferStart=n,this.normalize=i?t=>i(Mp(t)):Mp,this.query=this.normalize(e)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return x(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let t=this.peek();if(t<0)return this.done=!0,this;let e=S(t),n=this.bufferStart+this.bufferPos;this.bufferPos+=k(t);let o=this.normalize(e);for(let t=0,i=n;;t++){let r=o.charCodeAt(t),s=this.match(r,i,this.bufferPos+this.bufferStart);if(t==o.length-1){if(s)return this.value=s,this;break}i==n&&t<e.length&&e.charCodeAt(t)==r&&i++}}}match(t,e,n){let o=null;for(let e=0;e<this.matches.length;e+=2){let i=this.matches[e],r=!1;this.query.charCodeAt(i)==t&&(i==this.query.length-1?o={from:this.matches[e+1],to:n}:(this.matches[e]++,r=!0)),r||(this.matches.splice(e,2),e-=2)}return this.query.charCodeAt(0)==t&&(1==this.query.length?o={from:e,to:n}:this.matches.push(1,e)),o&&this.test&&!this.test(o.from,o.to,this.buffer,this.bufferStart)&&(o=null),o}}"undefined"!=typeof Symbol&&(Vp.prototype[Symbol.iterator]=function(){return this});const Zp={from:-1,to:-1,match:/.*/.exec("")},Dp="gm"+(null==/x/.unicode?"":"u");class Ip{constructor(t,e,n,o=0,i=t.length){if(this.text=t,this.to=i,this.curLine="",this.done=!1,this.value=Zp,/\\[sWDnr]|\n|\r|\[\^/.test(e))return new Xp(t,e,n,o,i);this.re=new RegExp(e,Dp+((null==n?void 0:n.ignoreCase)?"i":"")),this.test=null==n?void 0:n.test,this.iter=t.iter();let r=t.lineAt(o);this.curLineStart=r.from,this.matchPos=Lp(t,o),this.getLine(this.curLineStart)}getLine(t){this.iter.next(t),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let t=this.matchPos-this.curLineStart;;){this.re.lastIndex=t;let e=this.matchPos<=this.to&&this.re.exec(this.curLine);if(e){let n=this.curLineStart+e.index,o=n+e[0].length;if(this.matchPos=Lp(this.text,o+(n==o?1:0)),n==this.curLineStart+this.curLine.length&&this.nextLine(),(n<o||n>this.value.to)&&(!this.test||this.test(n,o,e)))return this.value={from:n,to:o,match:e},this;t=this.matchPos-this.curLineStart}else{if(!(this.curLineStart+this.curLine.length<this.to))return this.done=!0,this;this.nextLine(),t=0}}}}const Np=new WeakMap;class Wp{constructor(t,e){this.from=t,this.text=e}get to(){return this.from+this.text.length}static get(t,e,n){let o=Np.get(t);if(!o||o.from>=n||o.to<=e){let o=new Wp(e,t.sliceString(e,n));return Np.set(t,o),o}if(o.from==e&&o.to==n)return o;let{text:i,from:r}=o;return r>e&&(i=t.sliceString(e,r)+i,r=e),o.to<n&&(i+=t.sliceString(o.to,n)),Np.set(t,new Wp(r,i)),new Wp(e,i.slice(e-r,n-r))}}class Xp{constructor(t,e,n,o,i){this.text=t,this.to=i,this.done=!1,this.value=Zp,this.matchPos=Lp(t,o),this.re=new RegExp(e,Dp+((null==n?void 0:n.ignoreCase)?"i":"")),this.test=null==n?void 0:n.test,this.flat=Wp.get(t,o,this.chunkEnd(o+5e3))}chunkEnd(t){return t>=this.to?this.to:this.text.lineAt(t).to}next(){for(;;){let t=this.re.lastIndex=this.matchPos-this.flat.from,e=this.re.exec(this.flat.text);if(e&&!e[0]&&e.index==t&&(this.re.lastIndex=t+1,e=this.re.exec(this.flat.text)),e){let t=this.flat.from+e.index,n=t+e[0].length;if((this.flat.to>=this.to||e.index+e[0].length<=this.flat.text.length-10)&&(!this.test||this.test(t,n,e)))return this.value={from:t,to:n,match:e},this.matchPos=Lp(this.text,n+(t==n?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Wp.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+2*this.flat.text.length))}}}function Lp(t,e){if(e>=t.length)return e;let n,o=t.lineAt(e);for(;e<o.to&&(n=o.text.charCodeAt(e-o.from))>=56320&&n<57344;)e++;return e}function zp(t){let e=jp("input",{class:"cm-textfield",name:"line",value:String(t.state.doc.lineAt(t.state.selection.main.head).number)});function n(){let n=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(e.value);if(!n)return;let{state:o}=t,i=o.doc.lineAt(o.selection.main.head),[,r,s,a,l]=n,c=a?+a.slice(1):0,u=s?+s:i.number;if(s&&l){let t=u/100;r&&(t=t*("-"==r?-1:1)+i.number/o.doc.lines),u=Math.round(o.doc.lines*t)}else s&&r&&(u=u*("-"==r?-1:1)+i.number);let p=o.doc.line(Math.max(1,Math.min(o.doc.lines,u))),h=Z.cursor(p.from+Math.max(0,Math.min(c,p.length)));t.dispatch({effects:[Up.of(!1),cr.scrollIntoView(h.from,{y:'center'})],selection:h}),t.focus()}return{dom:jp("form",{class:"cm-gotoLine",onkeydown:e=>{27==e.keyCode?(e.preventDefault(),t.dispatch({effects:Up.of(!1)}),t.focus()):13==e.keyCode&&(e.preventDefault(),n())},onsubmit:t=>{t.preventDefault(),n()}},jp("label",t.state.phrase("Go to line"),": ",e)," ",jp("button",{class:"cm-button",type:"submit"},t.state.phrase("go")))}}"undefined"!=typeof Symbol&&(Ip.prototype[Symbol.iterator]=Xp.prototype[Symbol.iterator]=function(){return this});const Up=mt.define(),qp=Y.define({create:()=>!0,update(t,e){for(let n of e.effects)n.is(Up)&&(t=n.value);return t},provide:t=>As.from(t,(t=>t?zp:null))}),Yp=cr.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),Bp={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},Fp=N.define({combine:t=>Et(t,Bp,{highlightWordAroundCursor:(t,e)=>t||e,minSelectionLength:Math.min,maxMatches:Math.min})});function Gp(t){let e=[eh,th];return t&&e.push(Fp.of(t)),e}const Hp=_n.mark({class:"cm-selectionMatch"}),Kp=_n.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function Jp(t,e,n,o){return!(0!=n&&t(e.sliceDoc(n-1,n))==St.Word||o!=e.doc.length&&t(e.sliceDoc(o,o+1))==St.Word)}const th=uo.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.selectionSet||t.docChanged||t.viewportChanged)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=t.state.facet(Fp),{state:n}=t,o=n.selection;if(o.ranges.length>1)return _n.none;let i,r=o.main,s=null;if(r.empty){if(!e.highlightWordAroundCursor)return _n.none;let t=n.wordAt(r.head);if(!t)return _n.none;s=n.charCategorizer(r.head),i=n.sliceDoc(t.from,t.to)}else{let t=r.to-r.from;if(t<e.minSelectionLength||t>200)return _n.none;if(e.wholeWords){if(i=n.sliceDoc(r.from,r.to),s=n.charCategorizer(r.head),!Jp(s,n,r.from,r.to)||!function(t,e,n,o){return t(e.sliceDoc(n,n+1))==St.Word&&t(e.sliceDoc(o-1,o))==St.Word}(s,n,r.from,r.to))return _n.none}else if(i=n.sliceDoc(r.from,r.to),!i)return _n.none}let a=[];for(let o of t.visibleRanges){let t=new Vp(n.doc,i,o.from,o.to);for(;!t.next().done;){let{from:o,to:i}=t.value;if((!s||Jp(s,n,o,i))&&(r.empty&&o<=r.from&&i>=r.to?a.push(Kp.range(o,i)):(o>=r.to||i<=r.from)&&a.push(Hp.range(o,i)),a.length>e.maxMatches))return _n.none}}return _n.set(a)}},{decorations:t=>t.decorations}),eh=cr.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}});const nh=N.define({combine:t=>Et(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:t=>new Qh(t),scrollToMatch:t=>cr.scrollIntoView(t)})});class oh{constructor(t){this.search=t.search,this.caseSensitive=!!t.caseSensitive,this.literal=!!t.literal,this.regexp=!!t.regexp,this.replace=t.replace||"",this.valid=!!this.search&&(!this.regexp||function(t){try{return new RegExp(t,Dp),!0}catch(t){return!1}}(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!t.wholeWord}unquote(t){return this.literal?t:t.replace(/\\([nrt\\])/g,((t,e)=>"n"==e?"\n":"r"==e?"\r":"t"==e?"\t":"\\"))}eq(t){return this.search==t.search&&this.replace==t.replace&&this.caseSensitive==t.caseSensitive&&this.regexp==t.regexp&&this.wholeWord==t.wholeWord}create(){return this.regexp?new uh(this):new sh(this)}getCursor(t,e=0,n){let o=t.doc?t:Tt.create({doc:t});return null==n&&(n=o.doc.length),this.regexp?ah(this,o,e,n):rh(this,o,e,n)}}class ih{constructor(t){this.spec=t}}function rh(t,e,n,o){return new Vp(e.doc,t.unquoted,n,o,t.caseSensitive?void 0:t=>t.toLowerCase(),t.wholeWord?function(t,e){return(n,o,i,r)=>((r>n||r+i.length<o)&&(r=Math.max(0,n-2),i=t.sliceString(r,Math.min(t.length,o+2))),!(e(lh(i,n-r))==St.Word&&e(ch(i,n-r))==St.Word||e(ch(i,o-r))==St.Word&&e(lh(i,o-r))==St.Word))}(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}class sh extends ih{constructor(t){super(t)}nextMatch(t,e,n){let o=rh(this.spec,t,n,t.doc.length).nextOverlapping();return o.done&&(o=rh(this.spec,t,0,e).nextOverlapping()),o.done?null:o.value}prevMatchInRange(t,e,n){for(let o=n;;){let n=Math.max(e,o-1e4-this.spec.unquoted.length),i=rh(this.spec,t,n,o),r=null;for(;!i.nextOverlapping().done;)r=i.value;if(r)return r;if(n==e)return null;o-=1e4}}prevMatch(t,e,n){return this.prevMatchInRange(t,0,e)||this.prevMatchInRange(t,n,t.doc.length)}getReplacement(t){return this.spec.unquote(this.spec.replace)}matchAll(t,e){let n=rh(this.spec,t,0,t.doc.length),o=[];for(;!n.next().done;){if(o.length>=e)return null;o.push(n.value)}return o}highlight(t,e,n,o){let i=rh(this.spec,t,Math.max(0,e-this.spec.unquoted.length),Math.min(n+this.spec.unquoted.length,t.doc.length));for(;!i.next().done;)o(i.value.from,i.value.to)}}function ah(t,e,n,o){return new Ip(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?(i=e.charCategorizer(e.selection.main.head),(t,e,n)=>!n[0].length||(i(lh(n.input,n.index))!=St.Word||i(ch(n.input,n.index))!=St.Word)&&(i(ch(n.input,n.index+n[0].length))!=St.Word||i(lh(n.input,n.index+n[0].length))!=St.Word)):void 0},n,o);var i}function lh(t,e){return t.slice(y(t,e,!1),e)}function ch(t,e){return t.slice(e,y(t,e))}class uh extends ih{nextMatch(t,e,n){let o=ah(this.spec,t,n,t.doc.length).next();return o.done&&(o=ah(this.spec,t,0,e).next()),o.done?null:o.value}prevMatchInRange(t,e,n){for(let o=1;;o++){let i=Math.max(e,n-1e4*o),r=ah(this.spec,t,i,n),s=null;for(;!r.next().done;)s=r.value;if(s&&(i==e||s.from>i+10))return s;if(i==e)return null}}prevMatch(t,e,n){return this.prevMatchInRange(t,0,e)||this.prevMatchInRange(t,n,t.doc.length)}getReplacement(t){return this.spec.unquote(this.spec.replace).replace(/\$([$&\d+])/g,((e,n)=>"$"==n?"$":"&"==n?t.match[0]:"0"!=n&&+n<t.match.length?t.match[n]:e))}matchAll(t,e){let n=ah(this.spec,t,0,t.doc.length),o=[];for(;!n.next().done;){if(o.length>=e)return null;o.push(n.value)}return o}highlight(t,e,n,o){let i=ah(this.spec,t,Math.max(0,e-250),Math.min(n+250,t.doc.length));for(;!i.next().done;)o(i.value.from,i.value.to)}}const ph=mt.define(),hh=mt.define(),dh=Y.define({create:t=>new fh(kh(t).create(),null),update(t,e){for(let n of e.effects)n.is(ph)?t=new fh(n.value.create(),t.panel):n.is(hh)&&(t=new fh(t.query,n.value?Sh:null));return t},provide:t=>As.from(t,(t=>t.panel))});class fh{constructor(t,e){this.query=t,this.panel=e}}const gh=_n.mark({class:"cm-searchMatch"}),mh=_n.mark({class:"cm-searchMatch cm-searchMatch-selected"}),vh=uo.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(dh))}update(t){let e=t.state.field(dh);(e!=t.startState.field(dh)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return _n.none;let{view:n}=this,o=new Mt;for(let e=0,i=n.visibleRanges,r=i.length;e<r;e++){let{from:s,to:a}=i[e];for(;e<r-1&&a>i[e+1].from-2*250;)a=i[++e].to;t.highlight(n.state,s,a,((t,e)=>{let i=n.state.selection.ranges.some((n=>n.from==t&&n.to==e));o.add(t,e,i?mh:gh)}))}return o.finish()}},{decorations:t=>t.decorations});function yh(t){return e=>{let n=e.state.field(dh,!1);return n&&n.query.spec.valid?t(e,n):Th(e)}}const _h=yh(((t,{query:e})=>{let{to:n}=t.state.selection.main,o=e.nextMatch(t.state,n,n);if(!o)return!1;let i=Z.single(o.from,o.to),r=t.state.facet(nh);return t.dispatch({selection:i,effects:[Mh(t,o),r.scrollToMatch(i.main,t)],userEvent:"select.search"}),Ch(t),!0})),Oh=yh(((t,{query:e})=>{let{state:n}=t,{from:o}=n.selection.main,i=e.prevMatch(n,o,o);if(!i)return!1;let r=Z.single(i.from,i.to),s=t.state.facet(nh);return t.dispatch({selection:r,effects:[Mh(t,i),s.scrollToMatch(r.main,t)],userEvent:"select.search"}),Ch(t),!0})),bh=yh(((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!(!n||!n.length)&&(t.dispatch({selection:Z.create(n.map((t=>Z.range(t.from,t.to)))),userEvent:"select.search.matches"}),!0)})),wh=yh(((t,{query:e})=>{let{state:n}=t,{from:o,to:i}=n.selection.main;if(n.readOnly)return!1;let r=e.nextMatch(n,o,o);if(!r)return!1;let s,a,l=[],c=[];if(r.from==o&&r.to==i&&(a=n.toText(e.getReplacement(r)),l.push({from:r.from,to:r.to,insert:a}),r=e.nextMatch(n,r.from,r.to),c.push(cr.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(o).number)+"."))),r){let e=0==l.length||l[0].from>=r.to?0:r.to-r.from-a.length;s=Z.single(r.from-e,r.to-e),c.push(Mh(t,r)),c.push(n.facet(nh).scrollToMatch(s.main,t))}return t.dispatch({changes:l,selection:s,effects:c,userEvent:"input.replace"}),!0})),xh=yh(((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map((t=>{let{from:n,to:o}=t;return{from:n,to:o,insert:e.getReplacement(t)}}));if(!n.length)return!1;let o=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:cr.announce.of(o),userEvent:"input.replace.all"}),!0}));function Sh(t){return t.state.facet(nh).createPanel(t)}function kh(t,e){var n,o,i,r,s;let a=t.selection.main,l=a.empty||a.to>a.from+100?"":t.sliceDoc(a.from,a.to);if(e&&!l)return e;let c=t.facet(nh);return new oh({search:(null!==(n=null==e?void 0:e.literal)&&void 0!==n?n:c.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:null!==(o=null==e?void 0:e.caseSensitive)&&void 0!==o?o:c.caseSensitive,literal:null!==(i=null==e?void 0:e.literal)&&void 0!==i?i:c.literal,regexp:null!==(r=null==e?void 0:e.regexp)&&void 0!==r?r:c.regexp,wholeWord:null!==(s=null==e?void 0:e.wholeWord)&&void 0!==s?s:c.wholeWord})}function Ph(t){let e=Ps(t,Sh);return e&&e.dom.querySelector("[main-field]")}function Ch(t){let e=Ph(t);e&&e==t.root.activeElement&&e.select()}const Th=t=>{let e=t.state.field(dh,!1);if(e&&e.panel){let n=Ph(t);if(n&&n!=t.root.activeElement){let o=kh(t.state,e.query.spec);o.valid&&t.dispatch({effects:ph.of(o)}),n.focus(),n.select()}}else t.dispatch({effects:[hh.of(!0),e?ph.of(kh(t.state,e.query.spec)):mt.appendConfig.of(Zh)]});return!0},Eh=t=>{let e=t.state.field(dh,!1);if(!e||!e.panel)return!1;let n=Ps(t,Sh);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:hh.of(!1)}),!0},Ah=[{key:"Mod-f",run:Th,scope:"editor search-panel"},{key:"F3",run:_h,shift:Oh,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:_h,shift:Oh,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:Eh,scope:"editor search-panel"},{key:"Mod-Shift-l",run:({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:o,to:i}=n.main,r=[],s=0;for(let e=new Vp(t.doc,t.sliceDoc(o,i));!e.next().done;){if(r.length>1e3)return!1;e.value.from==o&&(s=r.length),r.push(Z.range(e.value.from,e.value.to))}return e(t.update({selection:Z.create(r,s),userEvent:"select.search.matches"})),!0}},{key:"Mod-Alt-g",run:t=>{let e=Ps(t,zp);if(!e){let n=[Up.of(!0)];null==t.state.field(qp,!1)&&n.push(mt.appendConfig.of([qp,Yp])),t.dispatch({effects:n}),e=Ps(t,zp)}return e&&e.dom.querySelector("input").select(),!0}},{key:"Mod-d",run:({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some((t=>t.from===t.to)))return(({state:t,dispatch:e})=>{let{selection:n}=t,o=Z.create(n.ranges.map((e=>t.wordAt(e.head)||Z.cursor(e.head))),n.mainIndex);return!o.eq(n)&&(e(t.update({selection:o})),!0)})({state:t,dispatch:e});let o=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some((e=>t.sliceDoc(e.from,e.to)!=o)))return!1;let i=function(t,e){let{main:n,ranges:o}=t.selection,i=t.wordAt(n.head),r=i&&i.from==n.from&&i.to==n.to;for(let n=!1,i=new Vp(t.doc,e,o[o.length-1].to);;){if(i.next(),!i.done){if(n&&o.some((t=>t.from==i.value.from)))continue;if(r){let e=t.wordAt(i.value.from);if(!e||e.from!=i.value.from||e.to!=i.value.to)continue}return i.value}if(n)return null;i=new Vp(t.doc,e,0,Math.max(0,o[o.length-1].from-1)),n=!0}}(t,o);return!!i&&(e(t.update({selection:t.selection.addRange(Z.range(i.from,i.to),!1),effects:cr.scrollIntoView(i.to)})),!0)},preventDefault:!0}];class Qh{constructor(t){this.view=t;let e=this.query=t.state.field(dh).query.spec;function n(t,e,n){return jp("button",{class:"cm-button",name:t,onclick:e,type:"button"},n)}this.commit=this.commit.bind(this),this.searchField=jp("input",{value:e.search,placeholder:$h(t,"Find"),"aria-label":$h(t,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=jp("input",{value:e.replace,placeholder:$h(t,"Replace"),"aria-label":$h(t,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=jp("input",{type:"checkbox",name:"case",form:"",checked:e.caseSensitive,onchange:this.commit}),this.reField=jp("input",{type:"checkbox",name:"re",form:"",checked:e.regexp,onchange:this.commit}),this.wordField=jp("input",{type:"checkbox",name:"word",form:"",checked:e.wholeWord,onchange:this.commit}),this.dom=jp("div",{onkeydown:t=>this.keydown(t),class:"cm-search"},[this.searchField,n("next",(()=>_h(t)),[$h(t,"next")]),n("prev",(()=>Oh(t)),[$h(t,"previous")]),n("select",(()=>bh(t)),[$h(t,"all")]),jp("label",null,[this.caseField,$h(t,"match case")]),jp("label",null,[this.reField,$h(t,"regexp")]),jp("label",null,[this.wordField,$h(t,"by word")]),...t.state.readOnly?[]:[jp("br"),this.replaceField,n("replace",(()=>wh(t)),[$h(t,"replace")]),n("replaceAll",(()=>xh(t)),[$h(t,"replace all")])],jp("button",{name:"close",onclick:()=>Eh(t),"aria-label":$h(t,"close"),type:"button"},["×"])])}commit(){let t=new oh({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});t.eq(this.query)||(this.query=t,this.view.dispatch({effects:ph.of(t)}))}keydown(t){var e,n,o;e=this.view,n=t,o="search-panel",wr(_r(e.state),n,e,o)?t.preventDefault():13==t.keyCode&&t.target==this.searchField?(t.preventDefault(),(t.shiftKey?Oh:_h)(this.view)):13==t.keyCode&&t.target==this.replaceField&&(t.preventDefault(),wh(this.view))}update(t){for(let e of t.transactions)for(let t of e.effects)t.is(ph)&&!t.value.eq(this.query)&&this.setQuery(t.value)}setQuery(t){this.query=t,this.searchField.value=t.search,this.replaceField.value=t.replace,this.caseField.checked=t.caseSensitive,this.reField.checked=t.regexp,this.wordField.checked=t.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(nh).top}}function $h(t,e){return t.state.phrase(e)}const jh=30,Rh=/[\s\.,:;?!]/;function Mh(t,{from:e,to:n}){let o=t.state.doc.lineAt(e),i=t.state.doc.lineAt(n).to,r=Math.max(o.from,e-jh),s=Math.min(i,n+jh),a=t.state.sliceDoc(r,s);if(r!=o.from)for(let t=0;t<jh;t++)if(!Rh.test(a[t+1])&&Rh.test(a[t])){a=a.slice(t);break}if(s!=i)for(let t=a.length-1;t>a.length-jh;t--)if(!Rh.test(a[t-1])&&Rh.test(a[t])){a=a.slice(0,t);break}return cr.announce.of(`${t.state.phrase("current match")}. ${a} ${t.state.phrase("on line")} ${o.number}.`)}const Vh=cr.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),Zh=[dh,J.low(vh),Vh];class Dh{constructor(t,e,n){this.state=t,this.pos=e,this.explicit=n,this.abortListeners=[]}tokenBefore(t){let e=Al(this.state).resolveInner(this.pos,-1);for(;e&&t.indexOf(e.name)<0;)e=e.parent;return e?{from:e.from,to:this.pos,text:this.state.sliceDoc(e.from,this.pos),type:e.type}:null}matchBefore(t){let e=this.state.doc.lineAt(this.pos),n=Math.max(e.from,this.pos-250),o=e.text.slice(n-e.from,this.pos-e.from),i=o.search(Lh(t,!1));return i<0?null:{from:n+i,to:this.pos,text:o.slice(i)}}get aborted(){return null==this.abortListeners}addEventListener(t,e){"abort"==t&&this.abortListeners&&this.abortListeners.push(e)}}function Ih(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function Nh(t){let e=t.map((t=>"string"==typeof t?{label:t}:t)),[n,o]=e.every((t=>/^\w+$/.test(t.label)))?[/\w*$/,/\w+$/]:function(t){let e=Object.create(null),n=Object.create(null);for(let{label:o}of t){e[o[0]]=!0;for(let t=1;t<o.length;t++)n[o[t]]=!0}let o=Ih(e)+Ih(n)+"*$";return[new RegExp("^"+o),new RegExp(o)]}(e);return t=>{let i=t.matchBefore(o);return i||t.explicit?{from:i?i.from:t.pos,options:e,validFor:n}:null}}class Wh{constructor(t,e,n,o){this.completion=t,this.source=e,this.match=n,this.score=o}}function Xh(t){return t.selection.main.from}function Lh(t,e){var n;let{source:o}=t,i=e&&"^"!=o[0],r="$"!=o[o.length-1];return i||r?new RegExp(`${i?"^":""}(?:${o})${r?"$":""}`,null!==(n=t.flags)&&void 0!==n?n:t.ignoreCase?"i":""):t}const zh=dt.define();const Uh=new WeakMap;function qh(t){if(!Array.isArray(t))return t;let e=Uh.get(t);return e||Uh.set(t,e=Nh(t)),e}const Yh=mt.define(),Bh=mt.define();class Fh{constructor(t){this.pattern=t,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let e=0;e<t.length;){let n=x(t,e),o=k(n);this.chars.push(n);let i=t.slice(e,e+o),r=i.toUpperCase();this.folded.push(x(r==i?i.toLowerCase():r,0)),e+=o}this.astral=t.length!=this.chars.length}ret(t,e){return this.score=t,this.matched=e,this}match(t){if(0==this.pattern.length)return this.ret(-100,[]);if(t.length<this.pattern.length)return null;let{chars:e,folded:n,any:o,precise:i,byWord:r}=this;if(1==e.length){let o=x(t,0),i=k(o),r=i==t.length?0:-100;if(o==e[0]);else{if(o!=n[0])return null;r+=-200}return this.ret(r,[0,i])}let s=t.indexOf(this.pattern);if(0==s)return this.ret(t.length==this.pattern.length?0:-100,[0,this.pattern.length]);let a=e.length,l=0;if(s<0){for(let i=0,r=Math.min(t.length,200);i<r&&l<a;){let r=x(t,i);r!=e[l]&&r!=n[l]||(o[l++]=i),i+=k(r)}if(l<a)return null}let c=0,u=0,p=!1,h=0,d=-1,f=-1,g=/[a-z]/.test(t),m=!0;for(let o=0,l=Math.min(t.length,200),v=0;o<l&&u<a;){let l=x(t,o);s<0&&(c<a&&l==e[c]&&(i[c++]=o),h<a&&(l==e[h]||l==n[h]?(0==h&&(d=o),f=o+1,h++):h=0));let y,_=l<255?l>=48&&l<=57||l>=97&&l<=122?2:l>=65&&l<=90?1:0:(y=S(l))!=y.toLowerCase()?1:y!=y.toUpperCase()?2:0;(!o||1==_&&g||0==v&&0!=_)&&(e[u]==l||n[u]==l&&(p=!0)?r[u++]=o:r.length&&(m=!1)),v=_,o+=k(l)}return u==a&&0==r[0]&&m?this.result(-100+(p?-200:0),r,t):h==a&&0==d?this.ret(-200-t.length+(f==t.length?0:-100),[0,f]):s>-1?this.ret(-700-t.length,[s,s+this.pattern.length]):h==a?this.ret(-200+-700-t.length,[d,f]):u==a?this.result(-100+(p?-200:0)+-700+(m?0:-1100),r,t):2==e.length?null:this.result((o[0]?-700:0)+-200+-1100,o,t)}result(t,e,n){let o=[],i=0;for(let t of e){let e=t+(this.astral?k(x(n,t)):1);i&&o[i-1]==t?o[i-1]=e:(o[i++]=t,o[i++]=e)}return this.ret(t-n.length,o)}}class Gh{constructor(t){this.pattern=t,this.matched=[],this.score=0,this.folded=t.toLowerCase()}match(t){if(t.length<this.pattern.length)return null;let e=t.slice(0,this.pattern.length),n=e==this.pattern?0:e.toLowerCase()==this.folded?-200:null;return null==n?null:(this.matched=[0,e.length],this.score=n+(t.length==this.pattern.length?0:-100),this)}}const Hh=N.define({combine:t=>Et(t,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:Jh,filterStrict:!1,compareCompletions:(t,e)=>t.label.localeCompare(e.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(t,e)=>t&&e,closeOnBlur:(t,e)=>t&&e,icons:(t,e)=>t&&e,tooltipClass:(t,e)=>n=>Kh(t(n),e(n)),optionClass:(t,e)=>n=>Kh(t(n),e(n)),addToOptions:(t,e)=>t.concat(e),filterStrict:(t,e)=>t||e})});function Kh(t,e){return t?e?t+" "+e:t:e}function Jh(t,e,n,o,i,r){let s,a,l=t.textDirection==Tn.RTL,c=l,u=!1,p="top",h=e.left-i.left,d=i.right-e.right,f=o.right-o.left,g=o.bottom-o.top;if(c&&h<Math.min(f,d)?c=!1:!c&&d<Math.min(f,h)&&(c=!0),f<=(c?h:d))s=Math.max(i.top,Math.min(n.top,i.bottom-g))-e.top,a=Math.min(400,c?h:d);else{u=!0,a=Math.min(400,(l?e.right:i.right-e.left)-30);let t=i.bottom-e.bottom;t>=g||t>e.top?s=n.bottom-e.top:(p="bottom",s=e.bottom-n.top)}return{style:`${p}: ${s/((e.bottom-e.top)/r.offsetHeight)}px; max-width: ${a/((e.right-e.left)/r.offsetWidth)}px`,class:"cm-completionInfo-"+(u?l?"left-narrow":"right-narrow":c?"left":"right")}}function td(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let t=Math.floor(e/n);return{from:t*n,to:(t+1)*n}}let o=Math.floor((t-e)/n);return{from:t-(o+1)*n,to:t-o*n}}class ed{constructor(t,e,n){this.view=t,this.stateField=e,this.applyCompletion=n,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:t=>this.placeInfo(t),key:this},this.space=null,this.currentClass="";let o=t.state.field(e),{options:i,selected:r}=o.open,s=t.state.facet(Hh);this.optionContent=function(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(t){let e=document.createElement("div");return e.classList.add("cm-completionIcon"),t.type&&e.classList.add(...t.type.split(/\s+/g).map((t=>"cm-completionIcon-"+t))),e.setAttribute("aria-hidden","true"),e},position:20}),e.push({render(t,e,n,o){let i=document.createElement("span");i.className="cm-completionLabel";let r=t.displayLabel||t.label,s=0;for(let t=0;t<o.length;){let e=o[t++],n=o[t++];e>s&&i.appendChild(document.createTextNode(r.slice(s,e)));let a=i.appendChild(document.createElement("span"));a.appendChild(document.createTextNode(r.slice(e,n))),a.className="cm-completionMatchedText",s=n}return s<r.length&&i.appendChild(document.createTextNode(r.slice(s))),i},position:50},{render(t){if(!t.detail)return null;let e=document.createElement("span");return e.className="cm-completionDetail",e.textContent=t.detail,e},position:80}),e.sort(((t,e)=>t.position-e.position)).map((t=>t.render))}(s),this.optionClass=s.optionClass,this.tooltipClass=s.tooltipClass,this.range=td(i.length,r,s.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(t.state),this.dom.addEventListener("mousedown",(n=>{let{options:o}=t.state.field(e).open;for(let e,i=n.target;i&&i!=this.dom;i=i.parentNode)if("LI"==i.nodeName&&(e=/-(\d+)$/.exec(i.id))&&+e[1]<o.length)return this.applyCompletion(t,o[+e[1]]),void n.preventDefault()})),this.dom.addEventListener("focusout",(e=>{let n=t.state.field(this.stateField,!1);n&&n.tooltip&&t.state.facet(Hh).closeOnBlur&&e.relatedTarget!=t.contentDOM&&t.dispatch({effects:Bh.of(null)})})),this.showOptions(i,o.id)}mount(){this.updateSel()}showOptions(t,e){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(t,e,this.range)),this.list.addEventListener("scroll",(()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)}))}update(t){var e;let n=t.state.field(this.stateField),o=t.startState.field(this.stateField);if(this.updateTooltipClass(t.state),n!=o){let{options:i,selected:r,disabled:s}=n.open;o.open&&o.open.options==i||(this.range=td(i.length,r,t.state.facet(Hh).maxRenderedOptions),this.showOptions(i,n.id)),this.updateSel(),s!=(null===(e=o.open)||void 0===e?void 0:e.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!s)}}updateTooltipClass(t){let e=this.tooltipClass(t);if(e!=this.currentClass){for(let t of this.currentClass.split(" "))t&&this.dom.classList.remove(t);for(let t of e.split(" "))t&&this.dom.classList.add(t);this.currentClass=e}}positioned(t){this.space=t,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let t=this.view.state.field(this.stateField),e=t.open;if((e.selected>-1&&e.selected<this.range.from||e.selected>=this.range.to)&&(this.range=td(e.options.length,e.selected,this.view.state.facet(Hh).maxRenderedOptions),this.showOptions(e.options,t.id)),this.updateSelectedOption(e.selected)){this.destroyInfo();let{completion:n}=e.options[e.selected],{info:o}=n;if(!o)return;let i="string"==typeof o?document.createTextNode(o):o(n);if(!i)return;"then"in i?i.then((e=>{e&&this.view.state.field(this.stateField,!1)==t&&this.addInfoPane(e,n)})).catch((t=>so(this.view.state,t,"completion info"))):this.addInfoPane(i,n)}}addInfoPane(t,e){this.destroyInfo();let n=this.info=document.createElement("div");if(n.className="cm-tooltip cm-completionInfo",null!=t.nodeType)n.appendChild(t),this.infoDestroy=null;else{let{dom:e,destroy:o}=t;n.appendChild(e),this.infoDestroy=o||null}this.dom.appendChild(n),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(t){let e=null;for(let n=this.list.firstChild,o=this.range.from;n;n=n.nextSibling,o++)"LI"==n.nodeName&&n.id?o==t?n.hasAttribute("aria-selected")||(n.setAttribute("aria-selected","true"),e=n):n.hasAttribute("aria-selected")&&n.removeAttribute("aria-selected"):o--;return e&&function(t,e){let n=t.getBoundingClientRect(),o=e.getBoundingClientRect(),i=n.height/t.offsetHeight;o.top<n.top?t.scrollTop-=(n.top-o.top)/i:o.bottom>n.bottom&&(t.scrollTop+=(o.bottom-n.bottom)/i)}(this.list,e),e}measureInfo(){let t=this.dom.querySelector("[aria-selected]");if(!t||!this.info)return null;let e=this.dom.getBoundingClientRect(),n=this.info.getBoundingClientRect(),o=t.getBoundingClientRect(),i=this.space;if(!i){let t=this.dom.ownerDocument.defaultView||window;i={left:0,top:0,right:t.innerWidth,bottom:t.innerHeight}}return o.top>Math.min(i.bottom,e.bottom)-10||o.bottom<Math.max(i.top,e.top)+10?null:this.view.state.facet(Hh).positionInfo(this.view,e,o,n,i,this.dom)}placeInfo(t){this.info&&(t?(t.style&&(this.info.style.cssText=t.style),this.info.className="cm-tooltip cm-completionInfo "+(t.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(t,e,n){const o=document.createElement("ul");o.id=e,o.setAttribute("role","listbox"),o.setAttribute("aria-expanded","true"),o.setAttribute("aria-label",this.view.state.phrase("Completions"));let i=null;for(let r=n.from;r<n.to;r++){let{completion:s,match:a}=t[r],{section:l}=s;if(l){let t="string"==typeof l?l:l.name;if(t!=i&&(r>n.from||0==n.from))if(i=t,"string"!=typeof l&&l.header)o.appendChild(l.header(l));else{o.appendChild(document.createElement("completion-section")).textContent=t}}const c=o.appendChild(document.createElement("li"));c.id=e+"-"+r,c.setAttribute("role","option");let u=this.optionClass(s);u&&(c.className=u);for(let t of this.optionContent){let e=t(s,this.view.state,this.view,a);e&&c.appendChild(e)}}return n.from&&o.classList.add("cm-completionListIncompleteTop"),n.to<t.length&&o.classList.add("cm-completionListIncompleteBottom"),o}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function nd(t,e){return n=>new ed(n,t,e)}function od(t){return 100*(t.boost||0)+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}class id{constructor(t,e,n,o,i,r){this.options=t,this.attrs=e,this.tooltip=n,this.timestamp=o,this.selected=i,this.disabled=r}setSelected(t,e){return t==this.selected||t>=this.options.length?this:new id(this.options,ad(e,t),this.tooltip,this.timestamp,t,this.disabled)}static build(t,e,n,o,i){let r=function(t,e){let n=[],o=null,i=t=>{n.push(t);let{section:e}=t.completion;if(e){o||(o=[]);let t="string"==typeof e?e:e.name;o.some((e=>e.name==t))||o.push("string"==typeof e?{name:t}:e)}},r=e.facet(Hh);for(let o of t)if(o.hasResult()){let t=o.result.getMatch;if(!1===o.result.filter)for(let e of o.result.options)i(new Wh(e,o.source,t?t(e):[],1e9-n.length));else{let n,s=e.sliceDoc(o.from,o.to),a=r.filterStrict?new Gh(s):new Fh(s);for(let e of o.result.options)if(n=a.match(e.label)){let r=e.displayLabel?t?t(e,n.matched):[]:n.matched;i(new Wh(e,o.source,r,n.score+(e.boost||0)))}}}if(o){let t=Object.create(null),e=0,i=(t,e)=>{var n,o;return(null!==(n=t.rank)&&void 0!==n?n:1e9)-(null!==(o=e.rank)&&void 0!==o?o:1e9)||(t.name<e.name?-1:1)};for(let n of o.sort(i))e-=1e5,t[n.name]=e;for(let e of n){let{section:n}=e.completion;n&&(e.score+=t["string"==typeof n?n:n.name])}}let s=[],a=null,l=r.compareCompletions;for(let t of n.sort(((t,e)=>e.score-t.score||l(t.completion,e.completion)))){let e=t.completion;!a||a.label!=e.label||a.detail!=e.detail||null!=a.type&&null!=e.type&&a.type!=e.type||a.apply!=e.apply||a.boost!=e.boost?s.push(t):od(t.completion)>od(a)&&(s[s.length-1]=t),a=t.completion}return s}(t,e);if(!r.length)return o&&t.some((t=>1==t.state))?new id(o.options,o.attrs,o.tooltip,o.timestamp,o.selected,!0):null;let s=e.facet(Hh).selectOnOpen?0:-1;if(o&&o.selected!=s&&-1!=o.selected){let t=o.options[o.selected].completion;for(let e=0;e<r.length;e++)if(r[e].completion==t){s=e;break}}return new id(r,ad(n,s),{pos:t.reduce(((t,e)=>e.hasResult()?Math.min(t,e.from):t),1e8),create:md,above:i.aboveCursor},o?o.timestamp:Date.now(),s,!1)}map(t){return new id(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:t.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class rd{constructor(t,e,n){this.active=t,this.id=e,this.open=n}static start(){return new rd(ld,"cm-ac-"+Math.floor(2e6*Math.random()).toString(36),null)}update(t){let{state:e}=t,n=e.facet(Hh),o=(n.override||e.languageDataAt("autocomplete",Xh(e)).map(qh)).map((e=>{let o=this.active.find((t=>t.source==e))||new ud(e,this.active.some((t=>0!=t.state))?1:0);return o.update(t,n)}));o.length==this.active.length&&o.every(((t,e)=>t==this.active[e]))&&(o=this.active);let i=this.open;i&&t.docChanged&&(i=i.map(t.changes)),t.selection||o.some((e=>e.hasResult()&&t.changes.touchesRange(e.from,e.to)))||!function(t,e){if(t==e)return!0;for(let n=0,o=0;;){for(;n<t.length&&!t[n].hasResult;)n++;for(;o<e.length&&!e[o].hasResult;)o++;let i=n==t.length,r=o==e.length;if(i||r)return i==r;if(t[n++].result!=e[o++].result)return!1}}(o,this.active)?i=id.build(o,e,this.id,i,n):i&&i.disabled&&!o.some((t=>1==t.state))&&(i=null),!i&&o.every((t=>1!=t.state))&&o.some((t=>t.hasResult()))&&(o=o.map((t=>t.hasResult()?new ud(t.source,0):t)));for(let e of t.effects)e.is(dd)&&(i=i&&i.setSelected(e.value,this.id));return o==this.active&&i==this.open?this:new rd(o,this.id,i)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:sd}}const sd={"aria-autocomplete":"list"};function ad(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}const ld=[];function cd(t,e){if(t.isUserEvent("input.complete")){let n=t.annotation(zh);if(n&&e.activateOnCompletion(n))return"input"}return t.isUserEvent("input.type")?"input":t.isUserEvent("delete.backward")?"delete":null}class ud{constructor(t,e,n=-1){this.source=t,this.state=e,this.explicitPos=n}hasResult(){return!1}update(t,e){let n=cd(t,e),o=this;n?o=o.handleUserEvent(t,n,e):t.docChanged?o=o.handleChange(t):t.selection&&0!=o.state&&(o=new ud(o.source,0));for(let e of t.effects)if(e.is(Yh))o=new ud(o.source,1,e.value?Xh(t.state):-1);else if(e.is(Bh))o=new ud(o.source,0);else if(e.is(hd))for(let t of e.value)t.source==o.source&&(o=t);return o}handleUserEvent(t,e,n){return"delete"!=e&&n.activateOnTyping?new ud(this.source,1):this.map(t.changes)}handleChange(t){return t.changes.touchesRange(Xh(t.startState))?new ud(this.source,0):this.map(t.changes)}map(t){return t.empty||this.explicitPos<0?this:new ud(this.source,this.state,t.mapPos(this.explicitPos))}}class pd extends ud{constructor(t,e,n,o,i){super(t,2,e),this.result=n,this.from=o,this.to=i}hasResult(){return!0}handleUserEvent(t,e,n){var o;let i=this.result;i.map&&!t.changes.empty&&(i=i.map(i,t.changes));let r=t.changes.mapPos(this.from),s=t.changes.mapPos(this.to,1),a=Xh(t.state);if((this.explicitPos<0?a<=r:a<this.from)||a>s||!i||"delete"==e&&Xh(t.startState)==this.from)return new ud(this.source,"input"==e&&n.activateOnTyping?1:0);let l=this.explicitPos<0?-1:t.changes.mapPos(this.explicitPos);return function(t,e,n,o){if(!t)return!1;let i=e.sliceDoc(n,o);return"function"==typeof t?t(i,n,o,e):Lh(t,!0).test(i)}(i.validFor,t.state,r,s)?new pd(this.source,l,i,r,s):i.update&&(i=i.update(i,r,s,new Dh(t.state,a,l>=0)))?new pd(this.source,l,i,i.from,null!==(o=i.to)&&void 0!==o?o:Xh(t.state)):new ud(this.source,1,l)}handleChange(t){return t.changes.touchesRange(this.from,this.to)?new ud(this.source,0):this.map(t.changes)}map(t){if(t.empty)return this;return(this.result.map?this.result.map(this.result,t):this.result)?new pd(this.source,this.explicitPos<0?-1:t.mapPos(this.explicitPos),this.result,t.mapPos(this.from),t.mapPos(this.to,1)):new ud(this.source,0)}}const hd=mt.define({map:(t,e)=>t.map((t=>t.map(e)))}),dd=mt.define(),fd=Y.define({create:()=>rd.start(),update:(t,e)=>t.update(e),provide:t=>[ms.from(t,(t=>t.tooltip)),cr.contentAttributes.from(t,(t=>t.attrs))]});function gd(t,e){const n=e.completion.apply||e.completion.label;let o=t.state.field(fd).active.find((t=>t.source==e.source));return o instanceof pd&&("string"==typeof n?t.dispatch(Object.assign(Object.assign({},function(t,e,n,o){let{main:i}=t.selection,r=n-i.from,s=o-i.from;return Object.assign(Object.assign({},t.changeByRange((a=>a!=i&&n!=o&&t.sliceDoc(a.from+r,a.from+s)!=t.sliceDoc(n,o)?{range:a}:{changes:{from:a.from+r,to:o==i.from?a.to:a.from+s,insert:e},range:Z.cursor(a.from+r+e.length)}))),{scrollIntoView:!0,userEvent:"input.complete"})}(t.state,n,o.from,o.to)),{annotations:zh.of(e.completion)})):n(t,e.completion,o.from,o.to),!0)}const md=nd(fd,gd);function vd(t,e="option"){return n=>{let o=n.state.field(fd,!1);if(!o||!o.open||o.open.disabled||Date.now()-o.open.timestamp<n.state.facet(Hh).interactionDelay)return!1;let i,r=1;"page"==e&&(i=xs(n,o.open.tooltip))&&(r=Math.max(2,Math.floor(i.dom.offsetHeight/i.dom.querySelector("li").offsetHeight)-1));let{length:s}=o.open.options,a=o.open.selected>-1?o.open.selected+r*(t?1:-1):t?0:s-1;return a<0?a="page"==e?0:s-1:a>=s&&(a="page"==e?s-1:0),n.dispatch({effects:dd.of(a)}),!0}}class yd{constructor(t,e){this.active=t,this.context=e,this.time=Date.now(),this.updates=[],this.done=void 0}}const _d=50,Od=1e3,bd=uo.fromClass(class{constructor(t){this.view=t,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of t.state.field(fd).active)1==e.state&&this.startQuery(e)}update(t){let e=t.state.field(fd),n=t.state.facet(Hh);if(!t.selectionSet&&!t.docChanged&&t.startState.field(fd)==e)return;let o=t.transactions.some((t=>(t.selection||t.docChanged)&&!cd(t,n)));for(let e=0;e<this.running.length;e++){let n=this.running[e];if(o||n.updates.length+t.transactions.length>_d&&Date.now()-n.time>Od){for(let t of n.context.abortListeners)try{t()}catch(t){so(this.view.state,t)}n.context.abortListeners=null,this.running.splice(e--,1)}else n.updates.push(...t.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),t.transactions.some((t=>t.effects.some((t=>t.is(Yh)))))&&(this.pendingStart=!0);let i=this.pendingStart?50:n.activateOnTypingDelay;if(this.debounceUpdate=e.active.some((t=>1==t.state&&!this.running.some((e=>e.active.source==t.source))))?setTimeout((()=>this.startUpdate()),i):-1,0!=this.composing)for(let e of t.transactions)"input"==cd(e,n)?this.composing=2:2==this.composing&&e.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:t}=this.view,e=t.field(fd);for(let t of e.active)1!=t.state||this.running.some((e=>e.active.source==t.source))||this.startQuery(t)}startQuery(t){let{state:e}=this.view,n=Xh(e),o=new Dh(e,n,t.explicitPos==n),i=new yd(t,o);this.running.push(i),Promise.resolve(t.source(o)).then((t=>{i.context.aborted||(i.done=t||null,this.scheduleAccept())}),(t=>{this.view.dispatch({effects:Bh.of(null)}),so(this.view.state,t)}))}scheduleAccept(){this.running.every((t=>void 0!==t.done))?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout((()=>this.accept()),this.view.state.facet(Hh).updateSyncTime))}accept(){var t;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],n=this.view.state.facet(Hh);for(let o=0;o<this.running.length;o++){let i=this.running[o];if(void 0===i.done)continue;if(this.running.splice(o--,1),i.done){let o=new pd(i.active.source,i.active.explicitPos,i.done,i.done.from,null!==(t=i.done.to)&&void 0!==t?t:Xh(i.updates.length?i.updates[0].startState:this.view.state));for(let t of i.updates)o=o.update(t,n);if(o.hasResult()){e.push(o);continue}}let r=this.view.state.field(fd).active.find((t=>t.source==i.active.source));if(r&&1==r.state)if(null==i.done){let t=new ud(i.active.source,0);for(let e of i.updates)t=t.update(e,n);1!=t.state&&e.push(t)}else this.startQuery(r)}e.length&&this.view.dispatch({effects:hd.of(e)})}},{eventHandlers:{blur(t){let e=this.view.state.field(fd,!1);if(e&&e.tooltip&&this.view.state.facet(Hh).closeOnBlur){let n=e.open&&xs(this.view,e.open.tooltip);n&&n.dom.contains(t.relatedTarget)||setTimeout((()=>this.view.dispatch({effects:Bh.of(null)})),10)}},compositionstart(){this.composing=1},compositionend(){3==this.composing&&setTimeout((()=>this.view.dispatch({effects:Yh.of(!1)})),20),this.composing=0}}}),wd="object"==typeof navigator&&/Win/.test(navigator.platform),xd=J.highest(cr.domEventHandlers({keydown(t,e){let n=e.state.field(fd,!1);if(!n||!n.open||n.open.disabled||n.open.selected<0||t.key.length>1||t.ctrlKey&&(!wd||!t.altKey)||t.metaKey)return!1;let o=n.open.options[n.open.selected],i=n.active.find((t=>t.source==o.source)),r=o.completion.commitCharacters||i.result.commitCharacters;return r&&r.indexOf(t.key)>-1&&gd(e,o),!1}})),Sd=cr.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:`${400}px`,boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:`${30}px`},".cm-completionInfo.cm-completionInfo-right-narrow":{left:`${30}px`},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class kd{constructor(t,e,n,o){this.field=t,this.line=e,this.from=n,this.to=o}}class Pd{constructor(t,e,n){this.field=t,this.from=e,this.to=n}map(t){let e=t.mapPos(this.from,-1,C.TrackDel),n=t.mapPos(this.to,1,C.TrackDel);return null==e||null==n?null:new Pd(this.field,e,n)}}class Cd{constructor(t,e){this.lines=t,this.fieldPositions=e}instantiate(t,e){let n=[],o=[e],i=t.doc.lineAt(e),r=/^\s*/.exec(i.text)[0];for(let i of this.lines){if(n.length){let n=r,s=/^\t*/.exec(i)[0].length;for(let e=0;e<s;e++)n+=t.facet(Xl);o.push(e+n.length-s),i=n+i.slice(s)}n.push(i),e+=i.length+1}let s=this.fieldPositions.map((t=>new Pd(t.field,o[t.line]+t.from,o[t.line]+t.to)));return{text:n,ranges:s}}static parse(t){let e,n=[],o=[],i=[];for(let r of t.split(/\r\n?|\n/)){for(;e=/[#$]\{(?:(\d+)(?::([^}]*))?|([^}]*))\}/.exec(r);){let t=e[1]?+e[1]:null,s=e[2]||e[3]||"",a=-1;for(let e=0;e<n.length;e++)(null!=t?n[e].seq==t:s&&n[e].name==s)&&(a=e);if(a<0){let e=0;for(;e<n.length&&(null==t||null!=n[e].seq&&n[e].seq<t);)e++;n.splice(e,0,{seq:t,name:s}),a=e;for(let t of i)t.field>=a&&t.field++}i.push(new kd(a,o.length,e.index,e.index+s.length)),r=r.slice(0,e.index)+s+r.slice(e.index+e[0].length)}for(let t;t=/\\([{}])/.exec(r);){r=r.slice(0,t.index)+t[1]+r.slice(t.index+t[0].length);for(let e of i)e.line==o.length&&e.from>t.index&&(e.from--,e.to--)}o.push(r)}return new Cd(o,i)}}let Td=_n.widget({widget:new class extends vn{toDOM(){let t=document.createElement("span");return t.className="cm-snippetFieldPosition",t}ignoreEvent(){return!1}}}),Ed=_n.mark({class:"cm-snippetField"});class Ad{constructor(t,e){this.ranges=t,this.active=e,this.deco=_n.set(t.map((t=>(t.from==t.to?Td:Ed).range(t.from,t.to))))}map(t){let e=[];for(let n of this.ranges){let o=n.map(t);if(!o)return null;e.push(o)}return new Ad(e,this.active)}selectionInsideField(t){return t.ranges.every((t=>this.ranges.some((e=>e.field==this.active&&e.from<=t.from&&e.to>=t.to))))}}const Qd=mt.define({map:(t,e)=>t&&t.map(e)}),$d=mt.define(),jd=Y.define({create:()=>null,update(t,e){for(let n of e.effects){if(n.is(Qd))return n.value;if(n.is($d)&&t)return new Ad(t.ranges,n.value)}return t&&e.docChanged&&(t=t.map(e.changes)),t&&e.selection&&!t.selectionInsideField(e.selection)&&(t=null),t},provide:t=>cr.decorations.from(t,(t=>t?t.deco:_n.none))});function Rd(t,e){return Z.create(t.filter((t=>t.field==e)).map((t=>Z.range(t.from,t.to))))}function Md(t){let e=Cd.parse(t);return(t,n,o,r)=>{let{text:s,ranges:a}=e.instantiate(t.state,o),l={changes:{from:o,to:r,insert:i.of(s)},scrollIntoView:!0,annotations:n?[zh.of(n),vt.userEvent.of("input.complete")]:void 0};if(a.length&&(l.selection=Rd(a,0)),a.some((t=>t.field>0))){let e=new Ad(a,0),n=l.effects=[Qd.of(e)];void 0===t.state.field(jd,!1)&&n.push(mt.appendConfig.of([jd,Id,Wd,Sd]))}t.dispatch(t.state.update(l))}}function Vd(t){return({state:e,dispatch:n})=>{let o=e.field(jd,!1);if(!o||t<0&&0==o.active)return!1;let i=o.active+t,r=t>0&&!o.ranges.some((e=>e.field==i+t));return n(e.update({selection:Rd(o.ranges,i),effects:Qd.of(r?null:new Ad(o.ranges,i)),scrollIntoView:!0})),!0}}const Zd=[{key:"Tab",run:Vd(1),shift:Vd(-1)},{key:"Escape",run:({state:t,dispatch:e})=>!!t.field(jd,!1)&&(e(t.update({effects:Qd.of(null)})),!0)}],Dd=N.define({combine:t=>t.length?t[0]:Zd}),Id=J.highest(vr.compute([Dd],(t=>t.facet(Dd))));function Nd(t,e){return Object.assign(Object.assign({},e),{apply:Md(t)})}const Wd=cr.domEventHandlers({mousedown(t,e){let n,o=e.state.field(jd,!1);if(!o||null==(n=e.posAtCoords({x:t.clientX,y:t.clientY})))return!1;let i=o.ranges.find((t=>t.from<=n&&t.to>=n));return!(!i||i.field==o.active)&&(e.dispatch({selection:Rd(o.ranges,i.field),effects:Qd.of(o.ranges.some((t=>t.field>i.field))?new Ad(o.ranges,i.field):null),scrollIntoView:!0}),!0)}});null&&Object.create(null);const Xd={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Ld=mt.define({map(t,e){let n=e.mapPos(t,-1,C.TrackAfter);return null==n?void 0:n}}),zd=new class extends At{};zd.startSide=1,zd.endSide=-1;const Ud=Y.define({create:()=>Rt.empty,update(t,e){if(t=t.map(e.changes),e.selection){let n=e.state.doc.lineAt(e.selection.main.head);t=t.update({filter:t=>t>=n.from&&t<=n.to})}for(let n of e.effects)n.is(Ld)&&(t=t.update({add:[zd.range(n.value,n.value+1)]}));return t}});const qd="()[]{}<>";function Yd(t){for(let e=0;e<qd.length;e+=2)if(qd.charCodeAt(e)==t)return qd.charAt(e+1);return S(t<128?t:t+1)}function Bd(t,e){return t.languageDataAt("closeBrackets",e)[0]||Xd}const Fd="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),Gd=cr.inputHandler.of(((t,e,n,o)=>{if((Fd?t.composing:t.compositionStarted)||t.state.readOnly)return!1;let i=t.state.selection.main;if(o.length>2||2==o.length&&1==k(x(o,0))||e!=i.from||n!=i.to)return!1;let r=function(t,e){let n=Bd(t,t.selection.main.head),o=n.brackets||Xd.brackets;for(let i of o){let r=Yd(x(i,0));if(e==i)return r==i?nf(t,i,o.indexOf(i+i+i)>-1,n):tf(t,i,r,n.before||Xd.before);if(e==r&&Kd(t,t.selection.main.from))return ef(t,i,r)}return null}(t.state,o);return!!r&&(t.dispatch(r),!0)})),Hd=[{key:"Backspace",run:({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=Bd(t,t.selection.main.head).brackets||Xd.brackets,o=null,i=t.changeByRange((e=>{if(e.empty){let o=function(t,e){let n=t.sliceString(e-2,e);return k(x(n,0))==n.length?n:n.slice(1)}(t.doc,e.head);for(let i of n)if(i==o&&Jd(t.doc,e.head)==Yd(x(i,0)))return{changes:{from:e.head-i.length,to:e.head+i.length},range:Z.cursor(e.head-i.length)}}return{range:o=e}}));return o||e(t.update(i,{scrollIntoView:!0,userEvent:"delete.backward"})),!o}}];function Kd(t,e){let n=!1;return t.field(Ud).between(0,t.doc.length,(t=>{t==e&&(n=!0)})),n}function Jd(t,e){let n=t.sliceString(e,e+2);return n.slice(0,k(x(n,0)))}function tf(t,e,n,o){let i=null,r=t.changeByRange((r=>{if(!r.empty)return{changes:[{insert:e,from:r.from},{insert:n,from:r.to}],effects:Ld.of(r.to+e.length),range:Z.range(r.anchor+e.length,r.head+e.length)};let s=Jd(t.doc,r.head);return!s||/\s/.test(s)||o.indexOf(s)>-1?{changes:{insert:e+n,from:r.head},effects:Ld.of(r.head+e.length),range:Z.cursor(r.head+e.length)}:{range:i=r}}));return i?null:t.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function ef(t,e,n){let o=null,i=t.changeByRange((e=>e.empty&&Jd(t.doc,e.head)==n?{changes:{from:e.head,to:e.head+n.length,insert:n},range:Z.cursor(e.head+n.length)}:o={range:e}));return o?null:t.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function nf(t,e,n,o){let i=o.stringPrefixes||Xd.stringPrefixes,r=null,s=t.changeByRange((o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:e,from:o.to}],effects:Ld.of(o.to+e.length),range:Z.range(o.anchor+e.length,o.head+e.length)};let s,a=o.head,l=Jd(t.doc,a);if(l==e){if(of(t,a))return{changes:{insert:e+e,from:a},effects:Ld.of(a+e.length),range:Z.cursor(a+e.length)};if(Kd(t,a)){let o=n&&t.sliceDoc(a,a+3*e.length)==e+e+e?e+e+e:e;return{changes:{from:a,to:a+o.length,insert:o},range:Z.cursor(a+o.length)}}}else{if(n&&t.sliceDoc(a-2*e.length,a)==e+e&&(s=rf(t,a-2*e.length,i))>-1&&of(t,s))return{changes:{insert:e+e+e+e,from:a},effects:Ld.of(a+e.length),range:Z.cursor(a+e.length)};if(t.charCategorizer(a)(l)!=St.Word&&rf(t,a,i)>-1&&!function(t,e,n,o){let i=Al(t).resolveInner(e,-1),r=o.reduce(((t,e)=>Math.max(t,e.length)),0);for(let s=0;s<5;s++){let s=t.sliceDoc(i.from,Math.min(i.to,i.from+n.length+r)),a=s.indexOf(n);if(!a||a>-1&&o.indexOf(s.slice(0,a))>-1){let e=i.firstChild;for(;e&&e.from==i.from&&e.to-e.from>n.length+a;){if(t.sliceDoc(e.to-n.length,e.to)==n)return!1;e=e.firstChild}return!0}let l=i.to==e&&i.parent;if(!l)break;i=l}return!1}(t,a,e,i))return{changes:{insert:e+e,from:a},effects:Ld.of(a+e.length),range:Z.cursor(a+e.length)}}return{range:r=o}}));return r?null:t.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function of(t,e){let n=Al(t).resolveInner(e+1);return n.parent&&n.from==e}function rf(t,e,n){let o=t.charCategorizer(e);if(o(t.sliceDoc(e-1,e))!=St.Word)return e;for(let i of n){let n=e-i.length;if(t.sliceDoc(n,e)==i&&o(t.sliceDoc(n-1,n))!=St.Word)return n}return-1}function sf(t={}){return[xd,fd,Hh.of(t),bd,lf,Sd]}const af=[{key:"Ctrl-Space",run:t=>!!t.state.field(fd,!1)&&(t.dispatch({effects:Yh.of(!0)}),!0)},{key:"Escape",run:t=>{let e=t.state.field(fd,!1);return!(!e||!e.active.some((t=>0!=t.state)))&&(t.dispatch({effects:Bh.of(null)}),!0)}},{key:"ArrowDown",run:vd(!0)},{key:"ArrowUp",run:vd(!1)},{key:"PageDown",run:vd(!0,"page")},{key:"PageUp",run:vd(!1,"page")},{key:"Enter",run:t=>{let e=t.state.field(fd,!1);return!(t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(Hh).interactionDelay)&&gd(t,e.open.options[e.open.selected])}}],lf=J.highest(vr.computeN([Hh],(t=>t.facet(Hh).defaultKeymap?[af]:[])));class cf{constructor(t,e,n){this.from=t,this.to=e,this.diagnostic=n}}class uf{constructor(t,e,n){this.diagnostics=t,this.panel=e,this.selected=n}static init(t,e,n){let o=t,i=n.facet(xf).markerFilter;i&&(o=i(o,n));let r=_n.set(o.map((t=>t.from==t.to||t.from==t.to-1&&n.doc.lineAt(t.from).to==t.from?_n.widget({widget:new Pf(t),diagnostic:t}).range(t.from):_n.mark({attributes:{class:"cm-lintRange cm-lintRange-"+t.severity+(t.markClass?" "+t.markClass:"")},diagnostic:t,inclusive:!0}).range(t.from,t.to))),!0);return new uf(r,e,pf(r))}}function pf(t,e=null,n=0){let o=null;return t.between(n,1e9,((t,n,{spec:i})=>{if(!e||i.diagnostic==e)return o=new cf(t,n,i.diagnostic),!1})),o}function hf(t,e){let n=e.pos,o=e.end||n,i=t.state.facet(xf).hideOn(t,n,o);if(null!=i)return i;let r=t.startState.doc.lineAt(e.pos);return!(!t.effects.some((t=>t.is(ff)))&&!t.changes.touchesRange(r.from,Math.max(r.to,o)))}function df(t,e){return t.field(vf,!1)?e:e.concat(mt.appendConfig.of($f))}const ff=mt.define(),gf=mt.define(),mf=mt.define(),vf=Y.define({create:()=>new uf(_n.none,null,null),update(t,e){if(e.docChanged&&t.diagnostics.size){let n=t.diagnostics.map(e.changes),o=null,i=t.panel;if(t.selected){let i=e.changes.mapPos(t.selected.from,1);o=pf(n,t.selected.diagnostic,i)||pf(n,null,i)}!n.size&&i&&e.state.facet(xf).autoPanel&&(i=null),t=new uf(n,i,o)}for(let n of e.effects)if(n.is(ff)){let o=e.state.facet(xf).autoPanel?n.value.length?Tf.open:null:t.panel;t=uf.init(n.value,o,e.state)}else n.is(gf)?t=new uf(t.diagnostics,n.value?Tf.open:null,t.selected):n.is(mf)&&(t=new uf(t.diagnostics,t.panel,n.value));return t},provide:t=>[As.from(t,(t=>t.panel)),cr.decorations.from(t,(t=>t.diagnostics))]});const yf=_n.mark({class:"cm-lintRange cm-lintRange-active",inclusive:!0});function _f(t,e,n){let{diagnostics:o}=t.state.field(vf),i=[],r=2e8,s=0;o.between(e-(n<0?1:0),e+(n>0?1:0),((t,o,{spec:a})=>{e>=t&&e<=o&&(t==o||(e>t||n>0)&&(e<o||n<0))&&(i.push(a.diagnostic),r=Math.min(t,r),s=Math.max(o,s))}));let a=t.state.facet(xf).tooltipFilter;return a&&(i=a(i,t.state)),i.length?{pos:r,end:s,above:t.state.doc.lineAt(r).to<s,create:()=>({dom:Of(t,i)})}:null}function Of(t,e){return jp("ul",{class:"cm-tooltip-lint"},e.map((e=>kf(t,e,!1))))}const bf=t=>{let e=t.state.field(vf,!1);return!(!e||!e.panel)&&(t.dispatch({effects:gf.of(!1)}),!0)},wf=[{key:"Mod-Shift-m",run:t=>{let e=t.state.field(vf,!1);e&&e.panel||t.dispatch({effects:df(t.state,[gf.of(!0)])});let n=Ps(t,Tf.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},preventDefault:!0},{key:"F8",run:t=>{let e=t.state.field(vf,!1);if(!e)return!1;let n=t.state.selection.main,o=e.diagnostics.iter(n.to+1);return!(!o.value&&(o=e.diagnostics.iter(0),!o.value||o.from==n.from&&o.to==n.to))&&(t.dispatch({selection:{anchor:o.from,head:o.to},scrollIntoView:!0}),!0)}}],xf=(null&&ViewPlugin.fromClass(class{constructor(t){this.view=t,this.timeout=-1,this.set=!0;let{delay:e}=t.state.facet(xf);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){clearTimeout(this.timeout);let t=Date.now();if(t<this.lintTime-10)this.timeout=setTimeout(this.run,this.lintTime-t);else{this.set=!1;let{state:t}=this.view,{sources:e}=t.facet(xf);e.length&&Promise.all(e.map((t=>Promise.resolve(t(this.view))))).then((e=>{let n=e.reduce(((t,e)=>t.concat(e)));this.view.state.doc==t.doc&&this.view.dispatch(function(t,e){return{effects:df(t,[ff.of(e)])}}(this.view.state,n))}),(t=>{logException(this.view.state,t)}))}}update(t){let e=t.state.facet(xf);(t.docChanged||e!=t.startState.facet(xf)||e.needsRefresh&&e.needsRefresh(t))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),N.define({combine:t=>Object.assign({sources:t.map((t=>t.source)).filter((t=>null!=t))},Et(t.map((t=>t.config)),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(t,e)=>t?e?n=>t(n)||e(n):t:e}))}));function Sf(t){let e=[];if(t)t:for(let{name:n}of t){for(let t=0;t<n.length;t++){let o=n[t];if(/[a-zA-Z]/.test(o)&&!e.some((t=>t.toLowerCase()==o.toLowerCase()))){e.push(o);continue t}}e.push("")}return e}function kf(t,e,n){var o;let i=n?Sf(e.actions):[];return jp("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},jp("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(t):e.message),null===(o=e.actions)||void 0===o?void 0:o.map(((n,o)=>{let r=!1,s=o=>{if(o.preventDefault(),r)return;r=!0;let i=pf(t.state.field(vf).diagnostics,e);i&&n.apply(t,i.from,i.to)},{name:a}=n,l=i[o]?a.indexOf(i[o]):-1,c=l<0?a:[a.slice(0,l),jp("u",a.slice(l,l+1)),a.slice(l+1)];return jp("button",{type:"button",class:"cm-diagnosticAction",onclick:s,onmousedown:s,"aria-label":` Action: ${a}${l<0?"":` (access key "${i[o]})"`}.`},c)})),e.source&&jp("div",{class:"cm-diagnosticSource"},e.source))}class Pf extends vn{constructor(t){super(),this.diagnostic=t}eq(t){return t.diagnostic==this.diagnostic}toDOM(){return jp("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class Cf{constructor(t,e){this.diagnostic=e,this.id="item_"+Math.floor(4294967295*Math.random()).toString(16),this.dom=kf(t,e,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Tf{constructor(t){this.view=t,this.items=[];this.list=jp("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:e=>{if(27==e.keyCode)bf(this.view),this.view.focus();else if(38==e.keyCode||33==e.keyCode)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(40==e.keyCode||34==e.keyCode)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(36==e.keyCode)this.moveSelection(0);else if(35==e.keyCode)this.moveSelection(this.items.length-1);else if(13==e.keyCode)this.view.focus();else{if(!(e.keyCode>=65&&e.keyCode<=90&&this.selectedIndex>=0))return;{let{diagnostic:n}=this.items[this.selectedIndex],o=Sf(n.actions);for(let i=0;i<o.length;i++)if(o[i].toUpperCase().charCodeAt(0)==e.keyCode){let e=pf(this.view.state.field(vf).diagnostics,n);e&&n.actions[i].apply(t,e.from,e.to)}}}e.preventDefault()},onclick:t=>{for(let e=0;e<this.items.length;e++)this.items[e].dom.contains(t.target)&&this.moveSelection(e)}}),this.dom=jp("div",{class:"cm-panel-lint"},this.list,jp("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>bf(this.view)},"×")),this.update()}get selectedIndex(){let t=this.view.state.field(vf).selected;if(!t)return-1;for(let e=0;e<this.items.length;e++)if(this.items[e].diagnostic==t.diagnostic)return e;return-1}update(){let{diagnostics:t,selected:e}=this.view.state.field(vf),n=0,o=!1,i=null;for(t.between(0,this.view.state.doc.length,((t,r,{spec:s})=>{let a,l=-1;for(let t=n;t<this.items.length;t++)if(this.items[t].diagnostic==s.diagnostic){l=t;break}l<0?(a=new Cf(this.view,s.diagnostic),this.items.splice(n,0,a),o=!0):(a=this.items[l],l>n&&(this.items.splice(n,l-n),o=!0)),e&&a.diagnostic==e.diagnostic?a.dom.hasAttribute("aria-selected")||(a.dom.setAttribute("aria-selected","true"),i=a):a.dom.hasAttribute("aria-selected")&&a.dom.removeAttribute("aria-selected"),n++}));n<this.items.length&&!(1==this.items.length&&this.items[0].diagnostic.from<0);)o=!0,this.items.pop();0==this.items.length&&(this.items.push(new Cf(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),o=!0),i?(this.list.setAttribute("aria-activedescendant",i.id),this.view.requestMeasure({key:this,read:()=>({sel:i.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:t,panel:e})=>{let n=e.height/this.list.offsetHeight;t.top<e.top?this.list.scrollTop-=(e.top-t.top)/n:t.bottom>e.bottom&&(this.list.scrollTop+=(t.bottom-e.bottom)/n)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),o&&this.sync()}sync(){let t=this.list.firstChild;function e(){let e=t;t=e.nextSibling,e.remove()}for(let n of this.items)if(n.dom.parentNode==this.list){for(;t!=n.dom;)e();t=n.dom.nextSibling}else this.list.insertBefore(n.dom,t);for(;t;)e()}moveSelection(t){if(this.selectedIndex<0)return;let e=pf(this.view.state.field(vf).diagnostics,this.items[t].diagnostic);e&&this.view.dispatch({selection:{anchor:e.from,head:e.to},scrollIntoView:!0,effects:mf.of(e)})}static open(t){return new Tf(t)}}function Ef(t,e=`viewBox="0 0 40 40"`){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function Af(t){return Ef(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,`width="6" height="3"`)}const Qf=cr.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Af("#d11")},".cm-lintRange-warning":{backgroundImage:Af("orange")},".cm-lintRange-info":{backgroundImage:Af("#999")},".cm-lintRange-hint":{backgroundImage:Af("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});const $f=[vf,cr.decorations.compute([vf],(t=>{let{selected:e,panel:n}=t.field(vf);return e&&n&&e.from!=e.to?_n.set([yf.range(e.from,e.to)]):_n.none})),ws(_f,{hideOn:hf}),Qf];const jf=(()=>[Fs(),Ks,Br(),vu(),Pc(),Qr(),[Ir,Nr],Tt.allowMultipleSelections.of(!0),Tt.transactionFilter.of((t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let n=t.newDoc,{head:o}=t.newSelection.main,i=n.lineAt(o);if(o>i.from+nc)return t;let r=n.sliceString(i.from,o);if(!e.some((t=>t.test(r))))return t;let{state:s}=t,a=-1,l=[];for(let{head:t}of s.selection.ranges){let e=s.doc.lineAt(t);if(e.from==a)continue;a=e.from;let n=Ul(s,e.from);if(null==n)continue;let o=/^\s*/.exec(e.text)[0],i=zl(s,n);o!=i&&l.push({from:e.from,to:e.from+o.length,insert:i})}return l.length?[t,{changes:l,sequential:!0}]:t})),$c(Mc,{fallback:!0}),Uc(),[Gd,Ud],sf(),is(),as(),ts,Gp(),vr.of([...Hd,...$p,...Ah,...Mu,...vc,...af,...wf])])(),Rf=(null&&(highlightSpecialChars(),history(),drawSelection(),syntaxHighlighting(defaultHighlightStyle,{fallback:!0}),keymap.of([...defaultKeymap,...historyKeymap])),"#e5c07b"),Mf="#e06c75",Vf="#56b6c2",Zf="#ffffff",Df="#abb2bf",If="#7d8799",Nf="#61afef",Wf="#98c379",Xf="#d19a66",Lf="#c678dd",zf="#21252b",Uf="#2c313a",qf="#282c34",Yf="#353a42",Bf="#3E4451",Ff="#528bff",Gf=cr.theme({"&":{color:Df,backgroundColor:qf},".cm-content":{caretColor:Ff},".cm-cursor, .cm-dropCursor":{borderLeftColor:Ff},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:Bf},".cm-panels":{backgroundColor:zf,color:Df},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:qf,color:If,border:"none"},".cm-activeLineGutter":{backgroundColor:Uf},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:Yf},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:Yf,borderBottomColor:Yf},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:Uf,color:Df}}},{dark:!0}),Hf=Tc.define([{tag:wl.keyword,color:Lf},{tag:[wl.name,wl.deleted,wl.character,wl.propertyName,wl.macroName],color:Mf},{tag:[wl.function(wl.variableName),wl.labelName],color:Nf},{tag:[wl.color,wl.constant(wl.name),wl.standard(wl.name)],color:Xf},{tag:[wl.definition(wl.name),wl.separator],color:Df},{tag:[wl.typeName,wl.className,wl.number,wl.changed,wl.annotation,wl.modifier,wl.self,wl.namespace],color:Rf},{tag:[wl.operator,wl.operatorKeyword,wl.url,wl.escape,wl.regexp,wl.link,wl.special(wl.string)],color:Vf},{tag:[wl.meta,wl.comment],color:If},{tag:wl.strong,fontWeight:"bold"},{tag:wl.emphasis,fontStyle:"italic"},{tag:wl.strikethrough,textDecoration:"line-through"},{tag:wl.link,color:If,textDecoration:"underline"},{tag:wl.heading,fontWeight:"bold",color:Mf},{tag:[wl.atom,wl.bool,wl.special(wl.variableName)],color:Xf},{tag:[wl.processingInstruction,wl.string,wl.inserted],color:Wf},{tag:wl.invalid,color:Zf}]);class Kf{constructor(t,e,n,o,i,r,s,a,l,c=0,u){this.p=t,this.stack=e,this.state=n,this.reducePos=o,this.pos=i,this.score=r,this.buffer=s,this.bufferBase=a,this.curContext=l,this.lookAhead=c,this.parent=u}toString(){return`[${this.stack.filter(((t,e)=>e%3==0)).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(t,e,n=0){let o=t.parser.context;return new Kf(t,[],e,n,n,0,[],0,o?new Jf(o,o.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(t,e){this.stack.push(this.state,e,this.bufferBase+this.buffer.length),this.state=t}reduce(t){var e;let n=t>>19,o=65535&t,{parser:i}=this.p,r=i.dynamicPrecedence(o);if(r&&(this.score+=r),0==n)return this.pushState(i.getGoto(this.state,o,!0),this.reducePos),o<i.minRepeatTerm&&this.storeNode(o,this.reducePos,this.reducePos,4,!0),void this.reduceContext(o,this.reducePos);let s=this.stack.length-3*(n-1)-(262144&t?6:0),a=s?this.stack[s-2]:this.p.ranges[0].from,l=this.reducePos-a;l>=2e3&&!(null===(e=this.p.parser.nodeSet.types[o])||void 0===e?void 0:e.isAnonymous)&&(a==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=l):this.p.lastBigReductionSize<l&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=a,this.p.lastBigReductionSize=l));let c=s?this.stack[s-1]:0,u=this.bufferBase+this.buffer.length-c;if(o<i.minRepeatTerm||131072&t){let t=i.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(o,a,t,u+4,!0)}if(262144&t)this.state=this.stack[s];else{let t=this.stack[s-3];this.state=i.getGoto(t,o,!0)}for(;this.stack.length>s;)this.stack.pop();this.reduceContext(o,a)}storeNode(t,e,n,o=4,i=!1){if(0==t&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let t=this,o=this.buffer.length;if(0==o&&t.parent&&(o=t.bufferBase-t.parent.bufferBase,t=t.parent),o>0&&0==t.buffer[o-4]&&t.buffer[o-1]>-1){if(e==n)return;if(t.buffer[o-2]>=e)return void(t.buffer[o-2]=n)}}if(i&&this.pos!=n){let i=this.buffer.length;if(i>0&&0!=this.buffer[i-4])for(;i>0&&this.buffer[i-2]>n;)this.buffer[i]=this.buffer[i-4],this.buffer[i+1]=this.buffer[i-3],this.buffer[i+2]=this.buffer[i-2],this.buffer[i+3]=this.buffer[i-1],i-=4,o>4&&(o-=4);this.buffer[i]=t,this.buffer[i+1]=e,this.buffer[i+2]=n,this.buffer[i+3]=o}else this.buffer.push(t,e,n,o)}shift(t,e,n,o){if(131072&t)this.pushState(65535&t,this.pos);else if(0==(262144&t)){let i=t,{parser:r}=this.p;(o>this.pos||e<=r.maxNode)&&(this.pos=o,r.stateFlag(i,1)||(this.reducePos=o)),this.pushState(i,n),this.shiftContext(e,n),e<=r.maxNode&&this.buffer.push(e,n,o,4)}else this.pos=o,this.shiftContext(e,n),e<=this.p.parser.maxNode&&this.buffer.push(e,n,o,4)}apply(t,e,n,o){65536&t?this.reduce(t):this.shift(t,e,n,o)}useNode(t,e){let n=this.p.reused.length-1;(n<0||this.p.reused[n]!=t)&&(this.p.reused.push(t),n++);let o=this.pos;this.reducePos=this.pos=o+t.length,this.pushState(e,o),this.buffer.push(n,o,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,t,this,this.p.stream.reset(this.pos-t.length)))}split(){let t=this,e=t.buffer.length;for(;e>0&&t.buffer[e-2]>t.reducePos;)e-=4;let n=t.buffer.slice(e),o=t.bufferBase+e;for(;t&&o==t.bufferBase;)t=t.parent;return new Kf(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,n,o,this.curContext,this.lookAhead,t)}recoverByDelete(t,e){let n=t<=this.p.parser.maxNode;n&&this.storeNode(t,this.pos,e,4),this.storeNode(0,this.pos,e,n?8:4),this.pos=this.reducePos=e,this.score-=190}canShift(t){for(let e=new tg(this);;){let n=this.p.parser.stateSlot(e.state,4)||this.p.parser.hasAction(e.state,t);if(0==n)return!1;if(0==(65536&n))return!0;e.reduce(n)}}recoverByInsert(t){if(this.stack.length>=300)return[];let e=this.p.parser.nextStates(this.state);if(e.length>4<<1||this.stack.length>=120){let n=[];for(let o,i=0;i<e.length;i+=2)(o=e[i+1])!=this.state&&this.p.parser.hasAction(o,t)&&n.push(e[i],o);if(this.stack.length<120)for(let t=0;n.length<4<<1&&t<e.length;t+=2){let o=e[t+1];n.some(((t,e)=>1&e&&t==o))||n.push(e[t],o)}e=n}let n=[];for(let t=0;t<e.length&&n.length<4;t+=2){let o=e[t+1];if(o==this.state)continue;let i=this.split();i.pushState(o,this.pos),i.storeNode(0,i.pos,i.pos,4,!0),i.shiftContext(e[t],this.pos),i.reducePos=this.pos,i.score-=200,n.push(i)}return n}forceReduce(){let{parser:t}=this.p,e=t.stateSlot(this.state,5);if(0==(65536&e))return!1;if(!t.validAction(this.state,e)){let n=e>>19,o=65535&e,i=this.stack.length-3*n;if(i<0||t.getGoto(this.stack[i],o,!1)<0){let t=this.findForcedReduction();if(null==t)return!1;e=t}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(e),!0}findForcedReduction(){let{parser:t}=this.p,e=[],n=(o,i)=>{if(!e.includes(o))return e.push(o),t.allActions(o,(e=>{if(e&(262144|131072));else if(65536&e){let n=(e>>19)-i;if(n>1){let o=65535&e,i=this.stack.length-3*n;if(i>=0&&t.getGoto(this.stack[i],o,!1)>=0)return n<<19|65536|o}}else{let t=n(e,i+1);if(null!=t)return t}}))};return n(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(3!=this.stack.length)return!1;let{parser:t}=this.p;return 65535==t.data[t.stateSlot(this.state,1)]&&!t.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(t){if(this.state!=t.state||this.stack.length!=t.stack.length)return!1;for(let e=0;e<this.stack.length;e+=3)if(this.stack[e]!=t.stack[e])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(t){return this.p.parser.dialect.flags[t]}shiftContext(t,e){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,t,this,this.p.stream.reset(e)))}reduceContext(t,e){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,t,this,this.p.stream.reset(e)))}emitContext(){let t=this.buffer.length-1;(t<0||-3!=this.buffer[t])&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let t=this.buffer.length-1;(t<0||-4!=this.buffer[t])&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(t){if(t!=this.curContext.context){let e=new Jf(this.curContext.tracker,t);e.hash!=this.curContext.hash&&this.emitContext(),this.curContext=e}}setLookAhead(t){t>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=t)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class Jf{constructor(t,e){this.tracker=t,this.context=e,this.hash=t.strict?t.hash(e):0}}class tg{constructor(t){this.start=t,this.state=t.state,this.stack=t.stack,this.base=this.stack.length}reduce(t){let e=65535&t,n=t>>19;0==n?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=3*(n-1);let o=this.start.p.parser.getGoto(this.stack[this.base-3],e,!0);this.state=o}}class eg{constructor(t,e,n){this.stack=t,this.pos=e,this.index=n,this.buffer=t.buffer,0==this.index&&this.maybeNext()}static create(t,e=t.bufferBase+t.buffer.length){return new eg(t,e,e-t.bufferBase)}maybeNext(){let t=this.stack.parent;null!=t&&(this.index=this.stack.bufferBase-t.bufferBase,this.stack=t,this.buffer=t.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,0==this.index&&this.maybeNext()}fork(){return new eg(this.stack,this.pos,this.index)}}function ng(t,e=Uint16Array){if("string"!=typeof t)return t;let n=null;for(let o=0,i=0;o<t.length;){let r=0;for(;;){let e=t.charCodeAt(o++),n=!1;if(126==e){r=65535;break}e>=92&&e--,e>=34&&e--;let i=e-32;if(i>=46&&(i-=46,n=!0),r+=i,n)break;r*=46}n?n[i++]=r:n=new e(r)}return n}class og{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const ig=new og;class rg{constructor(t,e){this.input=t,this.ranges=e,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=ig,this.rangeIndex=0,this.pos=this.chunkPos=e[0].from,this.range=e[0],this.end=e[e.length-1].to,this.readNext()}resolveOffset(t,e){let n=this.range,o=this.rangeIndex,i=this.pos+t;for(;i<n.from;){if(!o)return null;let t=this.ranges[--o];i-=n.from-t.to,n=t}for(;e<0?i>n.to:i>=n.to;){if(o==this.ranges.length-1)return null;let t=this.ranges[++o];i+=t.from-n.to,n=t}return i}clipPos(t){if(t>=this.range.from&&t<this.range.to)return t;for(let e of this.ranges)if(e.to>t)return Math.max(t,e.from);return this.end}peek(t){let e,n,o=this.chunkOff+t;if(o>=0&&o<this.chunk.length)e=this.pos+t,n=this.chunk.charCodeAt(o);else{let o=this.resolveOffset(t,1);if(null==o)return-1;if(e=o,e>=this.chunk2Pos&&e<this.chunk2Pos+this.chunk2.length)n=this.chunk2.charCodeAt(e-this.chunk2Pos);else{let t=this.rangeIndex,o=this.range;for(;o.to<=e;)o=this.ranges[++t];this.chunk2=this.input.chunk(this.chunk2Pos=e),e+this.chunk2.length>o.to&&(this.chunk2=this.chunk2.slice(0,o.to-e)),n=this.chunk2.charCodeAt(0)}}return e>=this.token.lookAhead&&(this.token.lookAhead=e+1),n}acceptToken(t,e=0){let n=e?this.resolveOffset(e,-1):this.pos;if(null==n||n<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=t,this.token.end=n}acceptTokenTo(t,e){this.token.value=t,this.token.end=e}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:t,chunkPos:e}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=t,this.chunk2Pos=e,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let t=this.input.chunk(this.pos),e=this.pos+t.length;this.chunk=e>this.range.to?t.slice(0,this.range.to-this.pos):t,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(t=1){for(this.chunkOff+=t;this.pos+t>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();t-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=t,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(t,e){if(e?(this.token=e,e.start=t,e.lookAhead=t+1,e.value=e.extended=-1):this.token=ig,this.pos!=t){if(this.pos=t,t==this.end)return this.setDone(),this;for(;t<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;t>=this.range.to;)this.range=this.ranges[++this.rangeIndex];t>=this.chunkPos&&t<this.chunkPos+this.chunk.length?this.chunkOff=t-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(t,e){if(t>=this.chunkPos&&e<=this.chunkPos+this.chunk.length)return this.chunk.slice(t-this.chunkPos,e-this.chunkPos);if(t>=this.chunk2Pos&&e<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(t-this.chunk2Pos,e-this.chunk2Pos);if(t>=this.range.from&&e<=this.range.to)return this.input.read(t,e);let n="";for(let o of this.ranges){if(o.from>=e)break;o.to>t&&(n+=this.input.read(Math.max(o.from,t),Math.min(o.to,e)))}return n}}class sg{constructor(t,e){this.data=t,this.id=e}token(t,e){let{parser:n}=e.p;cg(this.data,t,e,this.id,n.data,n.tokenPrecTable)}}sg.prototype.contextual=sg.prototype.fallback=sg.prototype.extend=!1;class ag{constructor(t,e,n){this.precTable=e,this.elseToken=n,this.data="string"==typeof t?ng(t):t}token(t,e){let n=t.pos,o=0;for(;;){let n=t.next<0,i=t.resolveOffset(1,1);if(cg(this.data,t,e,0,this.data,this.precTable),t.token.value>-1)break;if(null==this.elseToken)return;if(n||o++,null==i)break;t.reset(i,t.token)}o&&(t.reset(n,t.token),t.acceptToken(this.elseToken,o))}}ag.prototype.contextual=sg.prototype.fallback=sg.prototype.extend=!1;class lg{constructor(t,e={}){this.token=t,this.contextual=!!e.contextual,this.fallback=!!e.fallback,this.extend=!!e.extend}}function cg(t,e,n,o,i,r){let s=0,a=1<<o,{dialect:l}=n.p.parser;t:for(;0!=(a&t[s]);){let n=t[s+1];for(let o=s+3;o<n;o+=2)if((t[o+1]&a)>0){let n=t[o];if(l.allows(n)&&(-1==e.token.value||e.token.value==n||pg(n,e.token.value,i,r))){e.acceptToken(n);break}}let o=e.next,c=0,u=t[s+2];if(!(e.next<0&&u>c&&65535==t[n+3*u-3])){for(;c<u;){let i=c+u>>1,r=n+i+(i<<1),a=t[r],l=t[r+1]||65536;if(o<a)u=i;else{if(!(o>=l)){s=t[r+2],e.advance();continue t}c=i+1}}break}s=t[n+3*u-1]}}function ug(t,e,n){for(let o,i=e;65535!=(o=t[i]);i++)if(o==n)return i-e;return-1}function pg(t,e,n,o){let i=ug(n,o,e);return i<0||ug(n,o,t)<i}const hg="undefined"!=typeof process&&process.env&&/\bparse\b/.test(process.env.LOG);let dg=null;function fg(t,e,n){let o=t.cursor(ga.IncludeAnonymous);for(o.moveTo(e);;)if(!(n<0?o.childBefore(e):o.childAfter(e)))for(;;){if((n<0?o.to<e:o.from>e)&&!o.type.isError)return n<0?Math.max(0,Math.min(o.to-1,e-25)):Math.min(t.length,Math.max(o.from+1,e+25));if(n<0?o.prevSibling():o.nextSibling())break;if(!o.parent())return n<0?0:t.length}}class gg{constructor(t,e){this.fragments=t,this.nodeSet=e,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let t=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(t){for(this.safeFrom=t.openStart?fg(t.tree,t.from+t.offset,1)-t.offset:t.from,this.safeTo=t.openEnd?fg(t.tree,t.to+t.offset,-1)-t.offset:t.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(t.tree),this.start.push(-t.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(t){if(t<this.nextStart)return null;for(;this.fragment&&this.safeTo<=t;)this.nextFragment();if(!this.fragment)return null;for(;;){let e=this.trees.length-1;if(e<0)return this.nextFragment(),null;let n=this.trees[e],o=this.index[e];if(o==n.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let i=n.children[o],r=this.start[e]+n.positions[o];if(r>t)return this.nextStart=r,null;if(i instanceof ma){if(r==t){if(r<this.safeFrom)return null;let t=r+i.length;if(t<=this.safeTo){let e=i.prop(la.lookAhead);if(!e||t+e<this.fragment.to)return i}}this.index[e]++,r+i.length>=Math.max(this.safeFrom,t)&&(this.trees.push(i),this.start.push(r),this.index.push(0))}else this.index[e]++,this.nextStart=r+i.length}}}class mg{constructor(t,e){this.stream=e,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=t.tokenizers.map((t=>new og))}getActions(t){let e=0,n=null,{parser:o}=t.p,{tokenizers:i}=o,r=o.stateSlot(t.state,3),s=t.curContext?t.curContext.hash:0,a=0;for(let o=0;o<i.length;o++){if(0==(1<<o&r))continue;let l=i[o],c=this.tokens[o];if((!n||l.fallback)&&((l.contextual||c.start!=t.pos||c.mask!=r||c.context!=s)&&(this.updateCachedToken(c,l,t),c.mask=r,c.context=s),c.lookAhead>c.end+25&&(a=Math.max(c.lookAhead,a)),0!=c.value)){let o=e;if(c.extended>-1&&(e=this.addActions(t,c.extended,c.end,e)),e=this.addActions(t,c.value,c.end,e),!l.extend&&(n=c,e>o))break}}for(;this.actions.length>e;)this.actions.pop();return a&&t.setLookAhead(a),n||t.pos!=this.stream.end||(n=new og,n.value=t.p.parser.eofTerm,n.start=n.end=t.pos,e=this.addActions(t,n.value,n.end,e)),this.mainToken=n,this.actions}getMainToken(t){if(this.mainToken)return this.mainToken;let e=new og,{pos:n,p:o}=t;return e.start=n,e.end=Math.min(n+1,o.stream.end),e.value=n==o.stream.end?o.parser.eofTerm:0,e}updateCachedToken(t,e,n){let o=this.stream.clipPos(n.pos);if(e.token(this.stream.reset(o,t),n),t.value>-1){let{parser:e}=n.p;for(let o=0;o<e.specialized.length;o++)if(e.specialized[o]==t.value){let i=e.specializers[o](this.stream.read(t.start,t.end),n);if(i>=0&&n.p.parser.dialect.allows(i>>1)){0==(1&i)?t.value=i>>1:t.extended=i>>1;break}}}else t.value=0,t.end=this.stream.clipPos(o+1)}putAction(t,e,n,o){for(let e=0;e<o;e+=3)if(this.actions[e]==t)return o;return this.actions[o++]=t,this.actions[o++]=e,this.actions[o++]=n,o}addActions(t,e,n,o){let{state:i}=t,{parser:r}=t.p,{data:s}=r;for(let t=0;t<2;t++)for(let a=r.stateSlot(i,t?2:1);;a+=3){if(65535==s[a]){if(1!=s[a+1]){0==o&&2==s[a+1]&&(o=this.putAction(xg(s,a+2),e,n,o));break}a=xg(s,a+2)}s[a]==e&&(o=this.putAction(xg(s,a+1),e,n,o))}return o}}class vg{constructor(t,e,n,o){this.parser=t,this.input=e,this.ranges=o,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new rg(e,o),this.tokens=new mg(t,this.stream),this.topTerm=t.top[1];let{from:i}=o[0];this.stacks=[Kf.start(this,t.top[0],i)],this.fragments=n.length&&this.stream.end-i>4*t.bufferLength?new gg(n,t.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let t,e,n=this.stacks,o=this.minStackPos,i=this.stacks=[];if(this.bigReductionCount>300&&1==n.length){let[t]=n;for(;t.forceReduce()&&t.stack.length&&t.stack[t.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let r=0;r<n.length;r++){let s=n[r];for(;;){if(this.tokens.mainToken=null,s.pos>o)i.push(s);else{if(this.advanceStack(s,i,n))continue;{t||(t=[],e=[]),t.push(s);let n=this.tokens.getMainToken(s);e.push(n.value,n.end)}}break}}if(!i.length){let e=t&&function(t){let e=null;for(let n of t){let t=n.p.stoppedAt;(n.pos==n.p.stream.end||null!=t&&n.pos>t)&&n.p.parser.stateFlag(n.state,2)&&(!e||e.score<n.score)&&(e=n)}return e}(t);if(e)return hg&&console.log("Finish with "+this.stackID(e)),this.stackToTree(e);if(this.parser.strict)throw hg&&t&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+o);this.recovering||(this.recovering=5)}if(this.recovering&&t){let n=null!=this.stoppedAt&&t[0].pos>this.stoppedAt?t[0]:this.runRecovery(t,e,i);if(n)return hg&&console.log("Force-finish "+this.stackID(n)),this.stackToTree(n.forceAll())}if(this.recovering){let t=1==this.recovering?1:3*this.recovering;if(i.length>t)for(i.sort(((t,e)=>e.score-t.score));i.length>t;)i.pop();i.some((t=>t.reducePos>o))&&this.recovering--}else if(i.length>1){t:for(let t=0;t<i.length-1;t++){let e=i[t];for(let n=t+1;n<i.length;n++){let o=i[n];if(e.sameState(o)||e.buffer.length>500&&o.buffer.length>500){if(!((e.score-o.score||e.buffer.length-o.buffer.length)>0)){i.splice(t--,1);continue t}i.splice(n--,1)}}}i.length>12&&i.splice(12,i.length-12)}this.minStackPos=i[0].pos;for(let t=1;t<i.length;t++)i[t].pos<this.minStackPos&&(this.minStackPos=i[t].pos);return null}stopAt(t){if(null!=this.stoppedAt&&this.stoppedAt<t)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=t}advanceStack(t,e,n){let o=t.pos,{parser:i}=this,r=hg?this.stackID(t)+" -> ":"";if(null!=this.stoppedAt&&o>this.stoppedAt)return t.forceReduce()?t:null;if(this.fragments){let e=t.curContext&&t.curContext.tracker.strict,n=e?t.curContext.hash:0;for(let s=this.fragments.nodeAt(o);s;){let o=this.parser.nodeSet.types[s.type.id]==s.type?i.getGoto(t.state,s.type.id):-1;if(o>-1&&s.length&&(!e||(s.prop(la.contextHash)||0)==n))return t.useNode(s,o),hg&&console.log(r+this.stackID(t)+` (via reuse of ${i.getName(s.type.id)})`),!0;if(!(s instanceof ma)||0==s.children.length||s.positions[0]>0)break;let a=s.children[0];if(!(a instanceof ma&&0==s.positions[0]))break;s=a}}let s=i.stateSlot(t.state,4);if(s>0)return t.reduce(s),hg&&console.log(r+this.stackID(t)+` (via always-reduce ${i.getName(65535&s)})`),!0;if(t.stack.length>=8400)for(;t.stack.length>6e3&&t.forceReduce(););let a=this.tokens.getActions(t);for(let s=0;s<a.length;){let l=a[s++],c=a[s++],u=a[s++],p=s==a.length||!n,h=p?t:t.split(),d=this.tokens.mainToken;if(h.apply(l,c,d?d.start:h.pos,u),hg&&console.log(r+this.stackID(h)+` (via ${0==(65536&l)?"shift":`reduce of ${i.getName(65535&l)}`} for ${i.getName(c)} @ ${o}${h==t?"":", split"})`),p)return!0;h.pos>o?e.push(h):n.push(h)}return!1}advanceFully(t,e){let n=t.pos;for(;;){if(!this.advanceStack(t,null,null))return!1;if(t.pos>n)return yg(t,e),!0}}runRecovery(t,e,n){let o=null,i=!1;for(let r=0;r<t.length;r++){let s=t[r],a=e[r<<1],l=e[(r<<1)+1],c=hg?this.stackID(s)+" -> ":"";if(s.deadEnd){if(i)continue;if(i=!0,s.restart(),hg&&console.log(c+this.stackID(s)+" (restarted)"),this.advanceFully(s,n))continue}let u=s.split(),p=c;for(let t=0;u.forceReduce()&&t<10;t++){if(hg&&console.log(p+this.stackID(u)+" (via force-reduce)"),this.advanceFully(u,n))break;hg&&(p=this.stackID(u)+" -> ")}for(let t of s.recoverByInsert(a))hg&&console.log(c+this.stackID(t)+" (via recover-insert)"),this.advanceFully(t,n);this.stream.end>s.pos?(l==s.pos&&(l++,a=0),s.recoverByDelete(a,l),hg&&console.log(c+this.stackID(s)+` (via recover-delete ${this.parser.getName(a)})`),yg(s,n)):(!o||o.score<s.score)&&(o=s)}return o}stackToTree(t){return t.close(),ma.build({buffer:eg.create(t),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:t.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(t){let e=(dg||(dg=new WeakMap)).get(t);return e||dg.set(t,e=String.fromCodePoint(this.nextStackID++)),e+t}}function yg(t,e){for(let n=0;n<e.length;n++){let o=e[n];if(o.pos==t.pos&&o.sameState(t))return void(e[n].score<t.score&&(e[n]=t))}e.push(t)}class _g{constructor(t,e,n){this.source=t,this.flags=e,this.disabled=n}allows(t){return!this.disabled||0==this.disabled[t]}}const Og=t=>t;class bg{constructor(t){this.start=t.start,this.shift=t.shift||Og,this.reduce=t.reduce||Og,this.reuse=t.reuse||Og,this.hash=t.hash||(()=>0),this.strict=!1!==t.strict}}class wg extends Va{constructor(t){if(super(),this.wrappers=[],14!=t.version)throw new RangeError(`Parser version (${t.version}) doesn't match runtime version (${14})`);let e=t.nodeNames.split(" ");this.minRepeatTerm=e.length;for(let n=0;n<t.repeatNodeCount;n++)e.push("");let n=Object.keys(t.topRules).map((e=>t.topRules[e][1])),o=[];for(let t=0;t<e.length;t++)o.push([]);function i(t,e,n){o[t].push([e,e.deserialize(String(n))])}if(t.nodeProps)for(let e of t.nodeProps){let t=e[0];"string"==typeof t&&(t=la[t]);for(let n=1;n<e.length;){let o=e[n++];if(o>=0)i(o,t,e[n++]);else{let r=e[n+-o];for(let s=-o;s>0;s--)i(e[n++],t,r);n++}}}this.nodeSet=new ha(e.map(((e,i)=>pa.define({name:i>=this.minRepeatTerm?void 0:e,id:i,props:o[i],top:n.indexOf(i)>-1,error:0==i,skipped:t.skippedNodes&&t.skippedNodes.indexOf(i)>-1})))),t.propSources&&(this.nodeSet=this.nodeSet.extend(...t.propSources)),this.strict=!1,this.bufferLength=ra;let r=ng(t.tokenData);this.context=t.context,this.specializerSpecs=t.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let t=0;t<this.specializerSpecs.length;t++)this.specialized[t]=this.specializerSpecs[t].term;this.specializers=this.specializerSpecs.map(Sg),this.states=ng(t.states,Uint32Array),this.data=ng(t.stateData),this.goto=ng(t.goto),this.maxTerm=t.maxTerm,this.tokenizers=t.tokenizers.map((t=>"number"==typeof t?new sg(r,t):t)),this.topRules=t.topRules,this.dialects=t.dialects||{},this.dynamicPrecedences=t.dynamicPrecedences||null,this.tokenPrecTable=t.tokenPrec,this.termNames=t.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(t,e,n){let o=new vg(this,t,e,n);for(let i of this.wrappers)o=i(o,t,e,n);return o}getGoto(t,e,n=!1){let o=this.goto;if(e>=o[0])return-1;for(let i=o[e+1];;){let e=o[i++],r=1&e,s=o[i++];if(r&&n)return s;for(let n=i+(e>>1);i<n;i++)if(o[i]==t)return s;if(r)return-1}}hasAction(t,e){let n=this.data;for(let o=0;o<2;o++)for(let i,r=this.stateSlot(t,o?2:1);;r+=3){if(65535==(i=n[r])){if(1!=n[r+1]){if(2==n[r+1])return xg(n,r+2);break}i=n[r=xg(n,r+2)]}if(i==e||0==i)return xg(n,r+1)}return 0}stateSlot(t,e){return this.states[6*t+e]}stateFlag(t,e){return(this.stateSlot(t,0)&e)>0}validAction(t,e){return!!this.allActions(t,(t=>t==e||null))}allActions(t,e){let n=this.stateSlot(t,4),o=n?e(n):void 0;for(let n=this.stateSlot(t,1);null==o;n+=3){if(65535==this.data[n]){if(1!=this.data[n+1])break;n=xg(this.data,n+2)}o=e(xg(this.data,n+1))}return o}nextStates(t){let e=[];for(let n=this.stateSlot(t,1);;n+=3){if(65535==this.data[n]){if(1!=this.data[n+1])break;n=xg(this.data,n+2)}if(0==(this.data[n+2]&65536>>16)){let t=this.data[n+1];e.some(((e,n)=>1&n&&e==t))||e.push(this.data[n],t)}}return e}configure(t){let e=Object.assign(Object.create(wg.prototype),this);if(t.props&&(e.nodeSet=this.nodeSet.extend(...t.props)),t.top){let n=this.topRules[t.top];if(!n)throw new RangeError(`Invalid top rule name ${t.top}`);e.top=n}return t.tokenizers&&(e.tokenizers=this.tokenizers.map((e=>{let n=t.tokenizers.find((t=>t.from==e));return n?n.to:e}))),t.specializers&&(e.specializers=this.specializers.slice(),e.specializerSpecs=this.specializerSpecs.map(((n,o)=>{let i=t.specializers.find((t=>t.from==n.external));if(!i)return n;let r=Object.assign(Object.assign({},n),{external:i.to});return e.specializers[o]=Sg(r),r}))),t.contextTracker&&(e.context=t.contextTracker),t.dialect&&(e.dialect=this.parseDialect(t.dialect)),null!=t.strict&&(e.strict=t.strict),t.wrap&&(e.wrappers=e.wrappers.concat(t.wrap)),null!=t.bufferLength&&(e.bufferLength=t.bufferLength),e}hasWrappers(){return this.wrappers.length>0}getName(t){return this.termNames?this.termNames[t]:String(t<=this.maxNode&&this.nodeSet.types[t].name||t)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(t){let e=this.dynamicPrecedences;return null==e?0:e[t]||0}parseDialect(t){let e=Object.keys(this.dialects),n=e.map((()=>!1));if(t)for(let o of t.split(" ")){let t=e.indexOf(o);t>=0&&(n[t]=!0)}let o=null;for(let t=0;t<e.length;t++)if(!n[t])for(let n,i=this.dialects[e[t]];65535!=(n=this.data[i++]);)(o||(o=new Uint8Array(this.maxTerm+1)))[n]=1;return new _g(t,n,o)}static deserialize(t){return new wg(t)}}function xg(t,e){return t[e]|t[e+1]<<16}function Sg(t){if(t.external){let e=t.extend?1:0;return(n,o)=>t.external(n,o)<<1|e}return t.get}const kg=99,Pg=1,Cg=100,Tg=101,Eg=2,Ag=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],Qg=58,$g=40,jg=95,Rg=91,Mg=45,Vg=46,Zg=35,Dg=37,Ig=38,Ng=92,Wg=10;function Xg(t){return t>=65&&t<=90||t>=97&&t<=122||t>=161}function Lg(t){return t>=48&&t<=57}const zg=new lg(((t,e)=>{for(let n=!1,o=0,i=0;;i++){let{next:r}=t;if(Xg(r)||r==Mg||r==jg||n&&Lg(r))!n&&(r!=Mg||i>0)&&(n=!0),o===i&&r==Mg&&o++,t.advance();else{if(r!=Ng||t.peek(1)==Wg){n&&t.acceptToken(r==$g?Cg:2==o&&e.canShift(Eg)?Eg:Tg);break}t.advance(),t.next>-1&&t.advance(),n=!0}}})),Ug=new lg((t=>{if(Ag.includes(t.peek(-1))){let{next:e}=t;(Xg(e)||e==jg||e==Zg||e==Vg||e==Rg||e==Qg&&Xg(t.peek(1))||e==Mg||e==Ig)&&t.acceptToken(kg)}})),qg=new lg((t=>{if(!Ag.includes(t.peek(-1))){let{next:e}=t;if(e==Dg&&(t.advance(),t.acceptToken(Pg)),Xg(e)){do{t.advance()}while(Xg(t.next)||Lg(t.next));t.acceptToken(Pg)}}})),Yg=el({"AtKeyword import charset namespace keyframes media supports":wl.definitionKeyword,"from to selector":wl.keyword,NamespaceName:wl.namespace,KeyframeName:wl.labelName,KeyframeRangeName:wl.operatorKeyword,TagName:wl.tagName,ClassName:wl.className,PseudoClassName:wl.constant(wl.className),IdName:wl.labelName,"FeatureName PropertyName":wl.propertyName,AttributeName:wl.attributeName,NumberLiteral:wl.number,KeywordQuery:wl.keyword,UnaryQueryOp:wl.operatorKeyword,"CallTag ValueName":wl.atom,VariableName:wl.variableName,Callee:wl.operatorKeyword,Unit:wl.unit,"UniversalSelector NestingSelector":wl.definitionOperator,MatchOp:wl.compareOperator,"ChildOp SiblingOp, LogicOp":wl.logicOperator,BinOp:wl.arithmeticOperator,Important:wl.modifier,Comment:wl.blockComment,ColorLiteral:wl.color,"ParenthesizedContent StringLiteral":wl.string,":":wl.punctuation,"PseudoOp #":wl.derefOperator,"; ,":wl.separator,"( )":wl.paren,"[ ]":wl.squareBracket,"{ }":wl.brace}),Bg={__proto__:null,lang:32,"nth-child":32,"nth-last-child":32,"nth-of-type":32,"nth-last-of-type":32,dir:32,"host-context":32,url:60,"url-prefix":60,domain:60,regexp:60,selector:138},Fg={__proto__:null,"@import":118,"@media":142,"@charset":146,"@namespace":150,"@keyframes":156,"@supports":168},Gg={__proto__:null,not:132,only:132},Hg=wg.deserialize({version:14,states:":^QYQ[OOO#_Q[OOP#fOWOOOOQP'#Cd'#CdOOQP'#Cc'#CcO#kQ[O'#CfO$_QXO'#CaO$fQ[O'#ChO$qQ[O'#DTO$vQ[O'#DWOOQP'#Em'#EmO${QdO'#DgO%jQ[O'#DtO${QdO'#DvO%{Q[O'#DxO&WQ[O'#D{O&`Q[O'#ERO&nQ[O'#ETOOQS'#El'#ElOOQS'#EW'#EWQYQ[OOO&uQXO'#CdO'jQWO'#DcO'oQWO'#EsO'zQ[O'#EsQOQWOOP(UO#tO'#C_POOO)C@[)C@[OOQP'#Cg'#CgOOQP,59Q,59QO#kQ[O,59QO(aQ[O'#E[O({QWO,58{O)TQ[O,59SO$qQ[O,59oO$vQ[O,59rO(aQ[O,59uO(aQ[O,59wO(aQ[O,59xO)`Q[O'#DbOOQS,58{,58{OOQP'#Ck'#CkOOQO'#DR'#DROOQP,59S,59SO)gQWO,59SO)lQWO,59SOOQP'#DV'#DVOOQP,59o,59oOOQO'#DX'#DXO)qQ`O,59rOOQS'#Cp'#CpO${QdO'#CqO)yQvO'#CsO+ZQtO,5:ROOQO'#Cx'#CxO)lQWO'#CwO+oQWO'#CyO+tQ[O'#DOOOQS'#Ep'#EpOOQO'#Dj'#DjO+|Q[O'#DqO,[QWO'#EtO&`Q[O'#DoO,jQWO'#DrOOQO'#Eu'#EuO)OQWO,5:`O,oQpO,5:bOOQS'#Dz'#DzO,wQWO,5:dO,|Q[O,5:dOOQO'#D}'#D}O-UQWO,5:gO-ZQWO,5:mO-cQWO,5:oOOQS-E8U-E8UO${QdO,59}O-kQ[O'#E^O-xQWO,5;_O-xQWO,5;_POOO'#EV'#EVP.TO#tO,58yPOOO,58y,58yOOQP1G.l1G.lO.zQXO,5:vOOQO-E8Y-E8YOOQS1G.g1G.gOOQP1G.n1G.nO)gQWO1G.nO)lQWO1G.nOOQP1G/Z1G/ZO/XQ`O1G/^O/rQXO1G/aO0YQXO1G/cO0pQXO1G/dO1WQWO,59|O1]Q[O'#DSO1dQdO'#CoOOQP1G/^1G/^O${QdO1G/^O1kQpO,59]OOQS,59_,59_O${QdO,59aO1sQWO1G/mOOQS,59c,59cO1xQ!bO,59eOOQS'#DP'#DPOOQS'#EY'#EYO2QQ[O,59jOOQS,59j,59jO2YQWO'#DjO2eQWO,5:VO2jQWO,5:]O&`Q[O,5:XO&`Q[O'#E_O2rQWO,5;`O2}QWO,5:ZO(aQ[O,5:^OOQS1G/z1G/zOOQS1G/|1G/|OOQS1G0O1G0OO3`QWO1G0OO3eQdO'#EOOOQS1G0R1G0ROOQS1G0X1G0XOOQS1G0Z1G0ZO3pQtO1G/iOOQO,5:x,5:xO4WQ[O,5:xOOQO-E8[-E8[O4eQWO1G0yPOOO-E8T-E8TPOOO1G.e1G.eOOQP7+$Y7+$YOOQP7+$x7+$xO${QdO7+$xOOQS1G/h1G/hO4pQXO'#ErO4wQWO,59nO4|QtO'#EXO5tQdO'#EoO6OQWO,59ZO6TQpO7+$xOOQS1G.w1G.wOOQS1G.{1G.{OOQS7+%X7+%XO6]QWO1G/POOQS-E8W-E8WOOQS1G/U1G/UO${QdO1G/qOOQO1G/w1G/wOOQO1G/s1G/sO6bQWO,5:yOOQO-E8]-E8]O6pQXO1G/xOOQS7+%j7+%jO6wQYO'#CsOOQO'#EQ'#EQO7SQ`O'#EPOOQO'#EP'#EPO7_QWO'#E`O7gQdO,5:jOOQS,5:j,5:jO7rQtO'#E]O${QdO'#E]O8sQdO7+%TOOQO7+%T7+%TOOQO1G0d1G0dO9WQpO<<HdO9`QWO,5;^OOQP1G/Y1G/YOOQS-E8V-E8VO${QdO'#EZO9hQWO,5;ZOOQT1G.u1G.uOOQP<<Hd<<HdOOQS7+$k7+$kO9pQdO7+%]OOQO7+%d7+%dOOQO,5:k,5:kO3hQdO'#EaO7_QWO,5:zOOQS,5:z,5:zOOQS-E8^-E8^OOQS1G0U1G0UO9wQtO,5:wOOQS-E8Z-E8ZOOQO<<Ho<<HoOOQPAN>OAN>OO:xQdO,5:uOOQO-E8X-E8XOOQO<<Hw<<HwOOQO,5:{,5:{OOQO-E8_-E8_OOQS1G0f1G0f",stateData:";[~O#ZOS#[QQ~OUYOXYO]VO^VOqXOxWO![aO!]ZO!i[O!k]O!m^O!p_O!v`O#XRO#bTO~OQfOUYOXYO]VO^VOqXOxWO![aO!]ZO!i[O!k]O!m^O!p_O!v`O#XeO#bTO~O#U#gP~P!ZO#[jO~O#XlO~O]qO^qOqsOtoOxrO!OtO!RvO#VuO#bnO~O!TwO~P#pO`}O#WzO#XyO~O#X!OO~O#X!QO~OQ![Ob!TOf![Oh![On!YOq!ZO#W!WO#X!SO#e!UO~Ob!^O!d!`O!g!aO#X!]O!T#hP~Oh!fOn!YO#X!eO~Oh!hO#X!hO~Ob!^O!d!`O!g!aO#X!]O~O!Y#hP~P%jO]WX]!WX^WXqWXtWXxWX!OWX!RWX!TWX#VWX#bWX~O]!mO~O!Y!nO#U#gX!S#gX~O#U#gX!S#gX~P!ZO#]!qO#^!qO#_!sO~OUYOXYO]VO^VOqXOxWO#XRO#bTO~OtoO!TwO~O`!zO#WzO#XyO~O!S#gP~P!ZOb#RO~Ob#SO~Op#TO|#UO~OP#WObgXjgX!YgX!dgX!ggX#XgXagXQgXfgXhgXngXqgXtgX!XgX#UgX#WgX#egXpgX!SgX~Ob!^Oj#XO!d!`O!g!aO#X!]O!Y#hP~Ob#[O~Op#`O#X#]O~Ob!^O!d!`O!g!aO#X#aO~Ot#eO!b#dO!T#hX!Y#hX~Ob#hO~Oj#XO!Y#jO~O!Y#kO~Oh#lOn!YO~O!T#mO~O!TwO!b#dO~O!TwO!Y#pO~O!Y#QX#U#QX!S#QX~P!ZO!Y!nO#U#ga!S#ga~O#]!qO#^!qO#_#wO~O]qO^qOqsOxrO!OtO!RvO#VuO#bnO~Ot#Oa!T#Oaa#Oa~P.`Op#yO|#zO~O]qO^qOqsOxrO#bnO~Ot}i!O}i!R}i!T}i#V}ia}i~P/aOt!Pi!O!Pi!R!Pi!T!Pi#V!Pia!Pi~P/aOt!Qi!O!Qi!R!Qi!T!Qi#V!Qia!Qi~P/aO!S#{O~Oa#fP~P(aOa#cP~P${Oa$SOj#XO~O!Y$UO~Oh$VOo$VO~Op$XO#X#]O~O]!`Xa!^X!b!^X~O]$YO~Oa$ZO!b#dO~Ot#eO!T#ha!Y#ha~O!b#dOt!ca!T!ca!Y!caa!ca~O!Y$`O~O!S$gO#X$bO#e$aO~Oj#XOt$iO!X$kO!Y!Vi#U!Vi!S!Vi~P${O!Y#Qa#U#Qa!S#Qa~P!ZO!Y!nO#U#gi!S#gi~Oa#fX~P#pOa$oO~Oj#XOQ!{Xa!{Xb!{Xf!{Xh!{Xn!{Xq!{Xt!{X#W!{X#X!{X#e!{X~Ot$qOa#cX~P${Oa$sO~Oj#XOp$tO~Oa$uO~O!b#dOt#Ra!T#Ra!Y#Ra~Oa$wO~P.`OP#WOtgX!TgX~O#e$aOt!sX!T!sX~Ot$yO!TwO~O!S$}O#X$bO#e$aO~Oj#XOQ#PXb#PXf#PXh#PXn#PXq#PXt#PX!X#PX!Y#PX#U#PX#W#PX#X#PX#e#PX!S#PX~Ot$iO!X%QO!Y!Vq#U!Vq!S!Vq~P${Oj#XOp%RO~OtoOa#fa~Ot$qOa#ca~Oa%UO~P${Oj#XOQ#Pab#Paf#Pah#Pan#Paq#Pat#Pa!X#Pa!Y#Pa#U#Pa#W#Pa#X#Pa#e#Pa!S#Pa~Oa!}at!}a~P${O#Zo#[#ej!R#e~",goto:"-g#jPPP#kP#nP#w$WP#w$g#wPP$mPPP$s$|$|P%`P$|P$|%z&^PPPP$|&vP&z'Q#wP'W#w'^P#wP#w#wPPP'd'y(WPP#nPP(_(_(i(_P(_P(_(_P#nP#nP#nP(l#nP(o(r(u(|#nP#nP)R)X)h)v)|*S*^*d*n*t*zPPPPPPPPPP+Q+ZP+v+yP,o,r,x-RRkQ_bOPdhw!n#skYOPdhotuvw!n#R#h#skSOPdhotuvw!n#R#h#sQmTR!tnQ{VR!xqQ!x}Q#Z!XR#x!zq![Z]!T!m#S#U#X#q#z$P$Y$i$j$q$v%Sp![Z]!T!m#S#U#X#q#z$P$Y$i$j$q$v%SU$d#m$f$yR$x$cq!XZ]!T!m#S#U#X#q#z$P$Y$i$j$q$v%Sp![Z]!T!m#S#U#X#q#z$P$Y$i$j$q$v%SQ!f^R#l!gT#^!Z#_Q|VR!yqQ!x|R#x!yQ!PWR!{rQ!RXR!|sQxUQ!wpQ#i!cQ#o!jQ#p!kQ${$eR%X$zSgPwQ!phQ#r!nR$l#sZfPhw!n#sa!b[`a!V!^!`#d#eR#b!^R!g^R!i_R#n!iS$e#m$fR%V$yV$c#m$f$yQ!rjR#v!rQdOShPwU!ldh#sR#s!nQ$P#SU$p$P$v%SQ$v$YR%S$qQ#_!ZR$W#_Q$r$PR%T$rQpUS!vp$nR$n#|Q$j#qR%P$jQ!ogS#t!o#uR#u!pQ#f!_R$^#fQ$f#mR$|$fQ$z$eR%W$z_cOPdhw!n#s^UOPdhw!n#sQ!uoQ!}tQ#OuQ#PvQ#|#RR$_#hR$Q#SQ!VZQ!d]Q#V!TQ#q!m[$O#S$P$Y$q$v%SQ$R#UQ$T#XS$h#q$jQ$m#zR%O$iR#}#RQiPR#QwQ!c[Q!kaR#Y!VU!_[a!VQ!j`Q#c!^Q#g!`Q$[#dR$]#e",nodeNames:"⚠ Unit VariableName Comment StyleSheet RuleSet UniversalSelector TagSelector TagName NestingSelector ClassSelector ClassName PseudoClassSelector : :: PseudoClassName PseudoClassName ) ( ArgList ValueName ParenthesizedValue ColorLiteral NumberLiteral StringLiteral BinaryExpression BinOp CallExpression Callee CallLiteral CallTag ParenthesizedContent ] [ LineNames LineName , PseudoClassName ArgList IdSelector # IdName AttributeSelector AttributeName MatchOp ChildSelector ChildOp DescendantSelector SiblingSelector SiblingOp } { Block Declaration PropertyName Important ; ImportStatement AtKeyword import KeywordQuery FeatureQuery FeatureName BinaryQuery LogicOp UnaryQuery UnaryQueryOp ParenthesizedQuery SelectorQuery selector MediaStatement media CharsetStatement charset NamespaceStatement namespace NamespaceName KeyframesStatement keyframes KeyframeName KeyframeList KeyframeSelector KeyframeRangeName SupportsStatement supports AtRule Styles",maxTerm:117,nodeProps:[["isolate",-2,3,24,""],["openedBy",17,"(",32,"[",50,"{"],["closedBy",18,")",33,"]",51,"}"]],propSources:[Yg],skippedNodes:[0,3,87],repeatNodeCount:11,tokenData:"J^~R!^OX$}X^%u^p$}pq%uqr)Xrs.Rst/utu6duv$}vw7^wx7oxy9^yz9oz{9t{|:_|}?Q}!O?c!O!P@Q!P!Q@i!Q![Ab![!]B]!]!^CX!^!_$}!_!`Cj!`!aC{!a!b$}!b!cDw!c!}$}!}#OFa#O#P$}#P#QFr#Q#R6d#R#T$}#T#UGT#U#c$}#c#dHf#d#o$}#o#pH{#p#q6d#q#rI^#r#sIo#s#y$}#y#z%u#z$f$}$f$g%u$g#BY$}#BY#BZ%u#BZ$IS$}$IS$I_%u$I_$I|$}$I|$JO%u$JO$JT$}$JT$JU%u$JU$KV$}$KV$KW%u$KW&FU$}&FU&FV%u&FV;'S$};'S;=`JW<%lO$}`%QSOy%^z;'S%^;'S;=`%o<%lO%^`%cSo`Oy%^z;'S%^;'S;=`%o<%lO%^`%rP;=`<%l%^~%zh#Z~OX%^X^'f^p%^pq'fqy%^z#y%^#y#z'f#z$f%^$f$g'f$g#BY%^#BY#BZ'f#BZ$IS%^$IS$I_'f$I_$I|%^$I|$JO'f$JO$JT%^$JT$JU'f$JU$KV%^$KV$KW'f$KW&FU%^&FU&FV'f&FV;'S%^;'S;=`%o<%lO%^~'mh#Z~o`OX%^X^'f^p%^pq'fqy%^z#y%^#y#z'f#z$f%^$f$g'f$g#BY%^#BY#BZ'f#BZ$IS%^$IS$I_'f$I_$I|%^$I|$JO'f$JO$JT%^$JT$JU'f$JU$KV%^$KV$KW'f$KW&FU%^&FU&FV'f&FV;'S%^;'S;=`%o<%lO%^l)[UOy%^z#]%^#]#^)n#^;'S%^;'S;=`%o<%lO%^l)sUo`Oy%^z#a%^#a#b*V#b;'S%^;'S;=`%o<%lO%^l*[Uo`Oy%^z#d%^#d#e*n#e;'S%^;'S;=`%o<%lO%^l*sUo`Oy%^z#c%^#c#d+V#d;'S%^;'S;=`%o<%lO%^l+[Uo`Oy%^z#f%^#f#g+n#g;'S%^;'S;=`%o<%lO%^l+sUo`Oy%^z#h%^#h#i,V#i;'S%^;'S;=`%o<%lO%^l,[Uo`Oy%^z#T%^#T#U,n#U;'S%^;'S;=`%o<%lO%^l,sUo`Oy%^z#b%^#b#c-V#c;'S%^;'S;=`%o<%lO%^l-[Uo`Oy%^z#h%^#h#i-n#i;'S%^;'S;=`%o<%lO%^l-uS!X[o`Oy%^z;'S%^;'S;=`%o<%lO%^~.UWOY.RZr.Rrs.ns#O.R#O#P.s#P;'S.R;'S;=`/o<%lO.R~.sOh~~.vRO;'S.R;'S;=`/P;=`O.R~/SXOY.RZr.Rrs.ns#O.R#O#P.s#P;'S.R;'S;=`/o;=`<%l.R<%lO.R~/rP;=`<%l.Rn/zYxQOy%^z!Q%^!Q![0j![!c%^!c!i0j!i#T%^#T#Z0j#Z;'S%^;'S;=`%o<%lO%^l0oYo`Oy%^z!Q%^!Q![1_![!c%^!c!i1_!i#T%^#T#Z1_#Z;'S%^;'S;=`%o<%lO%^l1dYo`Oy%^z!Q%^!Q![2S![!c%^!c!i2S!i#T%^#T#Z2S#Z;'S%^;'S;=`%o<%lO%^l2ZYf[o`Oy%^z!Q%^!Q![2y![!c%^!c!i2y!i#T%^#T#Z2y#Z;'S%^;'S;=`%o<%lO%^l3QYf[o`Oy%^z!Q%^!Q![3p![!c%^!c!i3p!i#T%^#T#Z3p#Z;'S%^;'S;=`%o<%lO%^l3uYo`Oy%^z!Q%^!Q![4e![!c%^!c!i4e!i#T%^#T#Z4e#Z;'S%^;'S;=`%o<%lO%^l4lYf[o`Oy%^z!Q%^!Q![5[![!c%^!c!i5[!i#T%^#T#Z5[#Z;'S%^;'S;=`%o<%lO%^l5aYo`Oy%^z!Q%^!Q![6P![!c%^!c!i6P!i#T%^#T#Z6P#Z;'S%^;'S;=`%o<%lO%^l6WSf[o`Oy%^z;'S%^;'S;=`%o<%lO%^d6gUOy%^z!_%^!_!`6y!`;'S%^;'S;=`%o<%lO%^d7QS|So`Oy%^z;'S%^;'S;=`%o<%lO%^b7cSXQOy%^z;'S%^;'S;=`%o<%lO%^~7rWOY7oZw7owx.nx#O7o#O#P8[#P;'S7o;'S;=`9W<%lO7o~8_RO;'S7o;'S;=`8h;=`O7o~8kXOY7oZw7owx.nx#O7o#O#P8[#P;'S7o;'S;=`9W;=`<%l7o<%lO7o~9ZP;=`<%l7on9cSb^Oy%^z;'S%^;'S;=`%o<%lO%^~9tOa~n9{UUQjWOy%^z!_%^!_!`6y!`;'S%^;'S;=`%o<%lO%^n:fWjW!RQOy%^z!O%^!O!P;O!P!Q%^!Q![>T![;'S%^;'S;=`%o<%lO%^l;TUo`Oy%^z!Q%^!Q![;g![;'S%^;'S;=`%o<%lO%^l;nYo`#e[Oy%^z!Q%^!Q![;g![!g%^!g!h<^!h#X%^#X#Y<^#Y;'S%^;'S;=`%o<%lO%^l<cYo`Oy%^z{%^{|=R|}%^}!O=R!O!Q%^!Q![=j![;'S%^;'S;=`%o<%lO%^l=WUo`Oy%^z!Q%^!Q![=j![;'S%^;'S;=`%o<%lO%^l=qUo`#e[Oy%^z!Q%^!Q![=j![;'S%^;'S;=`%o<%lO%^l>[[o`#e[Oy%^z!O%^!O!P;g!P!Q%^!Q![>T![!g%^!g!h<^!h#X%^#X#Y<^#Y;'S%^;'S;=`%o<%lO%^n?VSt^Oy%^z;'S%^;'S;=`%o<%lO%^l?hWjWOy%^z!O%^!O!P;O!P!Q%^!Q![>T![;'S%^;'S;=`%o<%lO%^n@VU#bQOy%^z!Q%^!Q![;g![;'S%^;'S;=`%o<%lO%^~@nTjWOy%^z{@}{;'S%^;'S;=`%o<%lO%^~AUSo`#[~Oy%^z;'S%^;'S;=`%o<%lO%^lAg[#e[Oy%^z!O%^!O!P;g!P!Q%^!Q![>T![!g%^!g!h<^!h#X%^#X#Y<^#Y;'S%^;'S;=`%o<%lO%^bBbU]QOy%^z![%^![!]Bt!];'S%^;'S;=`%o<%lO%^bB{S^Qo`Oy%^z;'S%^;'S;=`%o<%lO%^nC^S!Y^Oy%^z;'S%^;'S;=`%o<%lO%^dCoS|SOy%^z;'S%^;'S;=`%o<%lO%^bDQU!OQOy%^z!`%^!`!aDd!a;'S%^;'S;=`%o<%lO%^bDkS!OQo`Oy%^z;'S%^;'S;=`%o<%lO%^bDzWOy%^z!c%^!c!}Ed!}#T%^#T#oEd#o;'S%^;'S;=`%o<%lO%^bEk[![Qo`Oy%^z}%^}!OEd!O!Q%^!Q![Ed![!c%^!c!}Ed!}#T%^#T#oEd#o;'S%^;'S;=`%o<%lO%^nFfSq^Oy%^z;'S%^;'S;=`%o<%lO%^nFwSp^Oy%^z;'S%^;'S;=`%o<%lO%^bGWUOy%^z#b%^#b#cGj#c;'S%^;'S;=`%o<%lO%^bGoUo`Oy%^z#W%^#W#XHR#X;'S%^;'S;=`%o<%lO%^bHYS!bQo`Oy%^z;'S%^;'S;=`%o<%lO%^bHiUOy%^z#f%^#f#gHR#g;'S%^;'S;=`%o<%lO%^fIQS!TUOy%^z;'S%^;'S;=`%o<%lO%^nIcS!S^Oy%^z;'S%^;'S;=`%o<%lO%^fItU!RQOy%^z!_%^!_!`6y!`;'S%^;'S;=`%o<%lO%^`JZP;=`<%l$}",tokenizers:[Ug,qg,zg,1,2,3,4,new ag("m~RRYZ[z{a~~g~aO#^~~dP!P!Qg~lO#_~~",28,105)],topRules:{StyleSheet:[0,4],Styles:[1,86]},specialized:[{term:100,get:t=>Bg[t]||-1},{term:58,get:t=>Fg[t]||-1},{term:101,get:t=>Gg[t]||-1}],tokenPrec:1200});let Kg=null;function Jg(){if(!Kg&&"object"==typeof document&&document.body){let{style:t}=document.body,e=[],n=new Set;for(let o in t)"cssText"!=o&&"cssFloat"!=o&&"string"==typeof t[o]&&(/[A-Z]/.test(o)&&(o=o.replace(/[A-Z]/g,(t=>"-"+t.toLowerCase()))),n.has(o)||(e.push(o),n.add(o)));Kg=e.sort().map((t=>({type:"property",label:t})))}return Kg||[]}const tm=["active","after","any-link","autofill","backdrop","before","checked","cue","default","defined","disabled","empty","enabled","file-selector-button","first","first-child","first-letter","first-line","first-of-type","focus","focus-visible","focus-within","fullscreen","has","host","host-context","hover","in-range","indeterminate","invalid","is","lang","last-child","last-of-type","left","link","marker","modal","not","nth-child","nth-last-child","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","part","placeholder","placeholder-shown","read-only","read-write","required","right","root","scope","selection","slotted","target","target-text","valid","visited","where"].map((t=>({type:"class",label:t}))),em=["above","absolute","activeborder","additive","activecaption","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","antialiased","appworkspace","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","contents","content-box","context-menu","continuous","copy","counter","counters","cover","crop","cross","crosshair","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic-abegede-gez","ethiopic-halehame-aa-er","ethiopic-halehame-gez","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","graytext","grid","groove","hand","hard-light","help","hidden","hide","higher","highlight","highlighttext","horizontal","hsl","hsla","hue","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","justify","keep-all","landscape","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-hexadecimal","lower-latin","lower-norwegian","lowercase","ltr","luminosity","manipulation","match","matrix","matrix3d","medium","menu","menutext","message-box","middle","min-intrinsic","mix","monospace","move","multiple","multiple_mask_images","multiply","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","opacity","open-quote","optimizeLegibility","optimizeSpeed","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","self-start","self-end","semi-condensed","semi-expanded","separate","serif","show","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","text","text-bottom","text-top","textarea","textfield","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","to","top","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-latin","uppercase","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"].map((t=>({type:"keyword",label:t}))).concat(["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"].map((t=>({type:"constant",label:t})))),nm=["a","abbr","address","article","aside","b","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","dd","del","details","dfn","dialog","div","dl","dt","em","figcaption","figure","footer","form","header","hgroup","h1","h2","h3","h4","h5","h6","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","main","meter","nav","ol","output","p","pre","ruby","section","select","small","source","span","strong","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","tr","u","ul"].map((t=>({type:"type",label:t}))),om=/^(\w[\w-]*|-\w[\w-]*|)$/,im=/^-(-[\w-]*)?$/;const rm=new Ra,sm=["Declaration"];function am(t){for(let e=t;;){if(e.type.isTop)return e;if(!(e=e.parent))return t}}function lm(t,e,n){if(e.to-e.from>4096){let o=rm.get(e);if(o)return o;let i=[],r=new Set,s=e.cursor(ga.IncludeAnonymous);if(s.firstChild())do{for(let e of lm(t,s.node,n))r.has(e.label)||(r.add(e.label),i.push(e))}while(s.nextSibling());return rm.set(e,i),i}{let o=[],i=new Set;return e.cursor().iterate((e=>{var r;if(n(e)&&e.matchContext(sm)&&":"==(null===(r=e.node.nextSibling)||void 0===r?void 0:r.name)){let n=t.sliceString(e.from,e.to);i.has(n)||(i.add(n),o.push({label:n,type:"variable"}))}})),o}}const cm=t=>e=>{let{state:n,pos:o}=e,i=Al(n).resolveInner(o,-1),r=i.type.isError&&i.from==i.to-1&&"-"==n.doc.sliceString(i.from,i.to);if("PropertyName"==i.name||(r||"TagName"==i.name)&&/^(Block|Styles)$/.test(i.resolve(i.to).name))return{from:i.from,options:Jg(),validFor:om};if("ValueName"==i.name)return{from:i.from,options:em,validFor:om};if("PseudoClassName"==i.name)return{from:i.from,options:tm,validFor:om};if(t(i)||(e.explicit||r)&&function(t,e){var n;if(("("==t.name||t.type.isError)&&(t=t.parent||t),"ArgList"!=t.name)return!1;let o=null===(n=t.parent)||void 0===n?void 0:n.firstChild;return"Callee"==(null==o?void 0:o.name)&&"var"==e.sliceString(o.from,o.to)}(i,n.doc))return{from:t(i)||r?i.from:o,options:lm(n.doc,am(i),t),validFor:im};if("TagName"==i.name){for(let{parent:t}=i;t;t=t.parent)if("Block"==t.name)return{from:i.from,options:Jg(),validFor:om};return{from:i.from,options:nm,validFor:om}}if(!e.explicit)return null;let s=i.resolve(o),a=s.childBefore(o);return a&&":"==a.name&&"PseudoClassSelector"==s.name?{from:o,options:tm,validFor:om}:a&&":"==a.name&&"Declaration"==s.name||"ArgList"==s.name?{from:o,options:em,validFor:om}:"Block"==s.name||"Styles"==s.name?{from:o,options:Jg(),validFor:om}:null},um=cm((t=>"VariableName"==t.name)),pm=El.define({name:"css",parser:Hg.configure({props:[Yl.add({Declaration:ec()}),ic.add({"Block KeyframeList":rc})]}),languageData:{commentTokens:{block:{open:"/*",close:"*/"}},indentOnInput:/^\s*\}$/,wordChars:"-"}});function hm(){return new Nl(pm,pm.data.of({autocomplete:um}))}const dm=4,fm=5,gm=6,mm=7,vm=8,ym=9,_m=10,Om=11,bm=12,wm=13,xm=57,Sm=14,km=58,Pm=20,Cm=22,Tm=23,Em=24,Am=26,Qm=27,$m=28,jm=31,Rm=34,Mm=36,Vm=37,Zm=0,Dm=1,Im={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},Nm={dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},Wm={dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}};function Xm(t){return 9==t||10==t||13==t||32==t}let Lm=null,zm=null,Um=0;function qm(t,e){let n=t.pos+e;if(Um==n&&zm==t)return Lm;let o=t.peek(e);for(;Xm(o);)o=t.peek(++e);let i="";for(;45==(r=o)||46==r||58==r||r>=65&&r<=90||95==r||r>=97&&r<=122||r>=161;)i+=String.fromCharCode(o),o=t.peek(++e);var r;return zm=t,Um=n,Lm=i?i.toLowerCase():o==Gm||o==Hm?void 0:null}const Ym=60,Bm=62,Fm=47,Gm=63,Hm=33,Km=45;function Jm(t,e){this.name=t,this.parent=e}const tv=[gm,_m,mm,vm,ym],ev=new bg({start:null,shift:(t,e,n,o)=>tv.indexOf(e)>-1?new Jm(qm(o,1)||"",t):t,reduce:(t,e)=>e==Pm&&t?t.parent:t,reuse(t,e,n,o){let i=e.type.id;return i==gm||i==Mm?new Jm(qm(o,1)||"",t):t},strict:!1}),nv=new lg(((t,e)=>{if(t.next!=Ym)return void(t.next<0&&e.context&&t.acceptToken(xm));t.advance();let n=t.next==Fm;n&&t.advance();let o=qm(t,0);if(void 0===o)return;if(!o)return t.acceptToken(n?Sm:gm);let i=e.context?e.context.name:null;if(n){if(o==i)return t.acceptToken(Om);if(i&&Nm[i])return t.acceptToken(xm,-2);if(e.dialectEnabled(Zm))return t.acceptToken(bm);for(let t=e.context;t;t=t.parent)if(t.name==o)return;t.acceptToken(wm)}else{if("script"==o)return t.acceptToken(mm);if("style"==o)return t.acceptToken(vm);if("textarea"==o)return t.acceptToken(ym);if(Im.hasOwnProperty(o))return t.acceptToken(_m);i&&Wm[i]&&Wm[i][o]?t.acceptToken(xm,-1):t.acceptToken(gm)}}),{contextual:!0}),ov=new lg((t=>{for(let e=0,n=0;;n++){if(t.next<0){n&&t.acceptToken(km);break}if(t.next==Km)e++;else{if(t.next==Bm&&e>=2){n>=3&&t.acceptToken(km,-2);break}e=0}t.advance()}}));const iv=new lg(((t,e)=>{if(t.next==Fm&&t.peek(1)==Bm){let n=e.dialectEnabled(Dm)||function(t){for(;t;t=t.parent)if("svg"==t.name||"math"==t.name)return!0;return!1}(e.context);t.acceptToken(n?fm:dm,2)}else t.next==Bm&&t.acceptToken(dm,1)}));function rv(t,e,n){let o=2+t.length;return new lg((i=>{for(let r=0,s=0,a=0;;a++){if(i.next<0){a&&i.acceptToken(e);break}if(0==r&&i.next==Ym||1==r&&i.next==Fm||r>=2&&r<o&&i.next==t.charCodeAt(r-2))r++,s++;else if(2!=r&&r!=o||!Xm(i.next)){if(r==o&&i.next==Bm){a>s?i.acceptToken(e,-s):i.acceptToken(n,-(s-2));break}if((10==i.next||13==i.next)&&a){i.acceptToken(e,1);break}r=s=0}else s++;i.advance()}}))}const sv=rv("script",54,1),av=rv("style",55,2),lv=rv("textarea",56,3),cv=el({"Text RawText":wl.content,"StartTag StartCloseTag SelfClosingEndTag EndTag":wl.angleBracket,TagName:wl.tagName,"MismatchedCloseTag/TagName":[wl.tagName,wl.invalid],AttributeName:wl.attributeName,"AttributeValue UnquotedAttributeValue":wl.attributeValue,Is:wl.definitionOperator,"EntityReference CharacterReference":wl.character,Comment:wl.blockComment,ProcessingInst:wl.processingInstruction,DoctypeDecl:wl.documentMeta}),uv=wg.deserialize({version:14,states:",xOVO!rOOO!WQ#tO'#CqO!]Q#tO'#CzO!bQ#tO'#C}O!gQ#tO'#DQO!lQ#tO'#DSO!qOaO'#CpO!|ObO'#CpO#XOdO'#CpO$eO!rO'#CpOOO`'#Cp'#CpO$lO$fO'#DTO$tQ#tO'#DVO$yQ#tO'#DWOOO`'#Dk'#DkOOO`'#DY'#DYQVO!rOOO%OQ&rO,59]O%ZQ&rO,59fO%fQ&rO,59iO%qQ&rO,59lO%|Q&rO,59nOOOa'#D^'#D^O&XOaO'#CxO&dOaO,59[OOOb'#D_'#D_O&lObO'#C{O&wObO,59[OOOd'#D`'#D`O'POdO'#DOO'[OdO,59[OOO`'#Da'#DaO'dO!rO,59[O'kQ#tO'#DROOO`,59[,59[OOOp'#Db'#DbO'pO$fO,59oOOO`,59o,59oO'xQ#|O,59qO'}Q#|O,59rOOO`-E7W-E7WO(SQ&rO'#CsOOQW'#DZ'#DZO(bQ&rO1G.wOOOa1G.w1G.wOOO`1G/Y1G/YO(mQ&rO1G/QOOOb1G/Q1G/QO(xQ&rO1G/TOOOd1G/T1G/TO)TQ&rO1G/WOOO`1G/W1G/WO)`Q&rO1G/YOOOa-E7[-E7[O)kQ#tO'#CyOOO`1G.v1G.vOOOb-E7]-E7]O)pQ#tO'#C|OOOd-E7^-E7^O)uQ#tO'#DPOOO`-E7_-E7_O)zQ#|O,59mOOOp-E7`-E7`OOO`1G/Z1G/ZOOO`1G/]1G/]OOO`1G/^1G/^O*PQ,UO,59_OOQW-E7X-E7XOOOa7+$c7+$cOOO`7+$t7+$tOOOb7+$l7+$lOOOd7+$o7+$oOOO`7+$r7+$rO*[Q#|O,59eO*aQ#|O,59hO*fQ#|O,59kOOO`1G/X1G/XO*kO7[O'#CvO*|OMhO'#CvOOQW1G.y1G.yOOO`1G/P1G/POOO`1G/S1G/SOOO`1G/V1G/VOOOO'#D['#D[O+_O7[O,59bOOQW,59b,59bOOOO'#D]'#D]O+pOMhO,59bOOOO-E7Y-E7YOOQW1G.|1G.|OOOO-E7Z-E7Z",stateData:",]~O!^OS~OUSOVPOWQOXROYTO[]O][O^^O`^Oa^Ob^Oc^Ox^O{_O!dZO~OfaO~OfbO~OfcO~OfdO~OfeO~O!WfOPlP!ZlP~O!XiOQoP!ZoP~O!YlORrP!ZrP~OUSOVPOWQOXROYTOZqO[]O][O^^O`^Oa^Ob^Oc^Ox^O!dZO~O!ZrO~P#dO![sO!euO~OfvO~OfwO~OS|OT}OhyO~OS!POT}OhyO~OS!ROT}OhyO~OS!TOT}OhyO~OS}OT}OhyO~O!WfOPlX!ZlX~OP!WO!Z!XO~O!XiOQoX!ZoX~OQ!ZO!Z!XO~O!YlORrX!ZrX~OR!]O!Z!XO~O!Z!XO~P#dOf!_O~O![sO!e!aO~OS!bO~OS!cO~Oi!dOSgXTgXhgX~OS!fOT!gOhyO~OS!hOT!gOhyO~OS!iOT!gOhyO~OS!jOT!gOhyO~OS!gOT!gOhyO~Of!kO~Of!lO~Of!mO~OS!nO~Ok!qO!`!oO!b!pO~OS!rO~OS!sO~OS!tO~Oa!uOb!uOc!uO!`!wO!a!uO~Oa!xOb!xOc!xO!b!wO!c!xO~Oa!uOb!uOc!uO!`!{O!a!uO~Oa!xOb!xOc!xO!b!{O!c!xO~OT~bac!dx{!d~",goto:"%p!`PPPPPPPPPPPPPPPPPPPP!a!gP!mPP!yP!|#P#S#Y#]#`#f#i#l#r#x!aP!a!aP$O$U$l$r$x%O%U%[%bPPPPPPPP%hX^OX`pXUOX`pezabcde{!O!Q!S!UR!q!dRhUR!XhXVOX`pRkVR!XkXWOX`pRnWR!XnXXOX`pQrXR!XpXYOX`pQ`ORx`Q{aQ!ObQ!QcQ!SdQ!UeZ!e{!O!Q!S!UQ!v!oR!z!vQ!y!pR!|!yQgUR!VgQjVR!YjQmWR![mQpXR!^pQtZR!`tS_O`ToXp",nodeNames:"⚠ StartCloseTag StartCloseTag StartCloseTag EndTag SelfClosingEndTag StartTag StartTag StartTag StartTag StartTag StartCloseTag StartCloseTag StartCloseTag IncompleteCloseTag Document Text EntityReference CharacterReference InvalidEntity Element OpenTag TagName Attribute AttributeName Is AttributeValue UnquotedAttributeValue ScriptText CloseTag OpenTag StyleText CloseTag OpenTag TextareaText CloseTag OpenTag CloseTag SelfClosingTag Comment ProcessingInst MismatchedCloseTag CloseTag DoctypeDecl",maxTerm:67,context:ev,nodeProps:[["closedBy",-10,1,2,3,7,8,9,10,11,12,13,"EndTag",6,"EndTag SelfClosingEndTag",-4,21,30,33,36,"CloseTag"],["openedBy",4,"StartTag StartCloseTag",5,"StartTag",-4,29,32,35,37,"OpenTag"],["group",-9,14,17,18,19,20,39,40,41,42,"Entity",16,"Entity TextContent",-3,28,31,34,"TextContent Entity"],["isolate",-11,21,29,30,32,33,35,36,37,38,41,42,"ltr",-3,26,27,39,""]],propSources:[cv],skippedNodes:[0],repeatNodeCount:9,tokenData:"!<p!aR!YOX$qXY,QYZ,QZ[$q[]&X]^,Q^p$qpq,Qqr-_rs3_sv-_vw3}wxHYx}-_}!OH{!O!P-_!P!Q$q!Q![-_![!]Mz!]!^-_!^!_!$S!_!`!;x!`!a&X!a!c-_!c!}Mz!}#R-_#R#SMz#S#T1k#T#oMz#o#s-_#s$f$q$f%W-_%W%oMz%o%p-_%p&aMz&a&b-_&b1pMz1p4U-_4U4dMz4d4e-_4e$ISMz$IS$I`-_$I`$IbMz$Ib$Kh-_$Kh%#tMz%#t&/x-_&/x&EtMz&Et&FV-_&FV;'SMz;'S;:j!#|;:j;=`3X<%l?&r-_?&r?AhMz?Ah?BY$q?BY?MnMz?MnO$q!Z$|c`PkW!a`!cpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr$qrs&}sv$qvw+Pwx(tx!^$q!^!_*V!_!a&X!a#S$q#S#T&X#T;'S$q;'S;=`+z<%lO$q!R&bX`P!a`!cpOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&Xq'UV`P!cpOv&}wx'kx!^&}!^!_(V!_;'S&};'S;=`(n<%lO&}P'pT`POv'kw!^'k!_;'S'k;'S;=`(P<%lO'kP(SP;=`<%l'kp([S!cpOv(Vx;'S(V;'S;=`(h<%lO(Vp(kP;=`<%l(Vq(qP;=`<%l&}a({W`P!a`Or(trs'ksv(tw!^(t!^!_)e!_;'S(t;'S;=`*P<%lO(t`)jT!a`Or)esv)ew;'S)e;'S;=`)y<%lO)e`)|P;=`<%l)ea*SP;=`<%l(t!Q*^V!a`!cpOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!Q*vP;=`<%l*V!R*|P;=`<%l&XW+UYkWOX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+PW+wP;=`<%l+P!Z+}P;=`<%l$q!a,]``P!a`!cp!^^OX&XXY,QYZ,QZ]&X]^,Q^p&Xpq,Qqr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X!_-ljhS`PkW!a`!cpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx!P-_!P!Q$q!Q!^-_!^!_*V!_!a&X!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q[/ebhSkWOX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+PS0rXhSqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0mS1bP;=`<%l0m[1hP;=`<%l/^!V1vchS`P!a`!cpOq&Xqr1krs&}sv1kvw0mwx(tx!P1k!P!Q&X!Q!^1k!^!_*V!_!a&X!a#s1k#s$f&X$f;'S1k;'S;=`3R<%l?Ah1k?Ah?BY&X?BY?Mn1k?MnO&X!V3UP;=`<%l1k!_3[P;=`<%l-_!Z3hV!`h`P!cpOv&}wx'kx!^&}!^!_(V!_;'S&};'S;=`(n<%lO&}!_4WihSkWc!ROX5uXZ7SZ[5u[^7S^p5uqr8trs7Sst>]tw8twx7Sx!P8t!P!Q5u!Q!]8t!]!^/^!^!a7S!a#S8t#S#T;{#T#s8t#s$f5u$f;'S8t;'S;=`>V<%l?Ah8t?Ah?BY5u?BY?Mn8t?MnO5u!Z5zbkWOX5uXZ7SZ[5u[^7S^p5uqr5urs7Sst+Ptw5uwx7Sx!]5u!]!^7w!^!a7S!a#S5u#S#T7S#T;'S5u;'S;=`8n<%lO5u!R7VVOp7Sqs7St!]7S!]!^7l!^;'S7S;'S;=`7q<%lO7S!R7qOa!R!R7tP;=`<%l7S!Z8OYkWa!ROX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+P!Z8qP;=`<%l5u!_8{ihSkWOX5uXZ7SZ[5u[^7S^p5uqr8trs7Sst/^tw8twx7Sx!P8t!P!Q5u!Q!]8t!]!^:j!^!a7S!a#S8t#S#T;{#T#s8t#s$f5u$f;'S8t;'S;=`>V<%l?Ah8t?Ah?BY5u?BY?Mn8t?MnO5u!_:sbhSkWa!ROX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+P!V<QchSOp7Sqr;{rs7Sst0mtw;{wx7Sx!P;{!P!Q7S!Q!];{!]!^=]!^!a7S!a#s;{#s$f7S$f;'S;{;'S;=`>P<%l?Ah;{?Ah?BY7S?BY?Mn;{?MnO7S!V=dXhSa!Rqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0m!V>SP;=`<%l;{!_>YP;=`<%l8t!_>dhhSkWOX@OXZAYZ[@O[^AY^p@OqrBwrsAYswBwwxAYx!PBw!P!Q@O!Q!]Bw!]!^/^!^!aAY!a#SBw#S#TE{#T#sBw#s$f@O$f;'SBw;'S;=`HS<%l?AhBw?Ah?BY@O?BY?MnBw?MnO@O!Z@TakWOX@OXZAYZ[@O[^AY^p@Oqr@OrsAYsw@OwxAYx!]@O!]!^Az!^!aAY!a#S@O#S#TAY#T;'S@O;'S;=`Bq<%lO@O!RA]UOpAYq!]AY!]!^Ao!^;'SAY;'S;=`At<%lOAY!RAtOb!R!RAwP;=`<%lAY!ZBRYkWb!ROX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+P!ZBtP;=`<%l@O!_COhhSkWOX@OXZAYZ[@O[^AY^p@OqrBwrsAYswBwwxAYx!PBw!P!Q@O!Q!]Bw!]!^Dj!^!aAY!a#SBw#S#TE{#T#sBw#s$f@O$f;'SBw;'S;=`HS<%l?AhBw?Ah?BY@O?BY?MnBw?MnO@O!_DsbhSkWb!ROX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+P!VFQbhSOpAYqrE{rsAYswE{wxAYx!PE{!P!QAY!Q!]E{!]!^GY!^!aAY!a#sE{#s$fAY$f;'SE{;'S;=`G|<%l?AhE{?Ah?BYAY?BY?MnE{?MnOAY!VGaXhSb!Rqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0m!VHPP;=`<%lE{!_HVP;=`<%lBw!ZHcW!bx`P!a`Or(trs'ksv(tw!^(t!^!_)e!_;'S(t;'S;=`*P<%lO(t!aIYlhS`PkW!a`!cpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx}-_}!OKQ!O!P-_!P!Q$q!Q!^-_!^!_*V!_!a&X!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q!aK_khS`PkW!a`!cpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx!P-_!P!Q$q!Q!^-_!^!_*V!_!`&X!`!aMS!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q!TM_X`P!a`!cp!eQOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X!aNZ!ZhSfQ`PkW!a`!cpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx}-_}!OMz!O!PMz!P!Q$q!Q![Mz![!]Mz!]!^-_!^!_*V!_!a&X!a!c-_!c!}Mz!}#R-_#R#SMz#S#T1k#T#oMz#o#s-_#s$f$q$f$}-_$}%OMz%O%W-_%W%oMz%o%p-_%p&aMz&a&b-_&b1pMz1p4UMz4U4dMz4d4e-_4e$ISMz$IS$I`-_$I`$IbMz$Ib$Je-_$Je$JgMz$Jg$Kh-_$Kh%#tMz%#t&/x-_&/x&EtMz&Et&FV-_&FV;'SMz;'S;:j!#|;:j;=`3X<%l?&r-_?&r?AhMz?Ah?BY$q?BY?MnMz?MnO$q!a!$PP;=`<%lMz!R!$ZY!a`!cpOq*Vqr!$yrs(Vsv*Vwx)ex!a*V!a!b!4t!b;'S*V;'S;=`*s<%lO*V!R!%Q]!a`!cpOr*Vrs(Vsv*Vwx)ex}*V}!O!%y!O!f*V!f!g!']!g#W*V#W#X!0`#X;'S*V;'S;=`*s<%lO*V!R!&QX!a`!cpOr*Vrs(Vsv*Vwx)ex}*V}!O!&m!O;'S*V;'S;=`*s<%lO*V!R!&vV!a`!cp!dPOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!'dX!a`!cpOr*Vrs(Vsv*Vwx)ex!q*V!q!r!(P!r;'S*V;'S;=`*s<%lO*V!R!(WX!a`!cpOr*Vrs(Vsv*Vwx)ex!e*V!e!f!(s!f;'S*V;'S;=`*s<%lO*V!R!(zX!a`!cpOr*Vrs(Vsv*Vwx)ex!v*V!v!w!)g!w;'S*V;'S;=`*s<%lO*V!R!)nX!a`!cpOr*Vrs(Vsv*Vwx)ex!{*V!{!|!*Z!|;'S*V;'S;=`*s<%lO*V!R!*bX!a`!cpOr*Vrs(Vsv*Vwx)ex!r*V!r!s!*}!s;'S*V;'S;=`*s<%lO*V!R!+UX!a`!cpOr*Vrs(Vsv*Vwx)ex!g*V!g!h!+q!h;'S*V;'S;=`*s<%lO*V!R!+xY!a`!cpOr!+qrs!,hsv!+qvw!-Swx!.[x!`!+q!`!a!/j!a;'S!+q;'S;=`!0Y<%lO!+qq!,mV!cpOv!,hvx!-Sx!`!,h!`!a!-q!a;'S!,h;'S;=`!.U<%lO!,hP!-VTO!`!-S!`!a!-f!a;'S!-S;'S;=`!-k<%lO!-SP!-kO{PP!-nP;=`<%l!-Sq!-xS!cp{POv(Vx;'S(V;'S;=`(h<%lO(Vq!.XP;=`<%l!,ha!.aX!a`Or!.[rs!-Ssv!.[vw!-Sw!`!.[!`!a!.|!a;'S!.[;'S;=`!/d<%lO!.[a!/TT!a`{POr)esv)ew;'S)e;'S;=`)y<%lO)ea!/gP;=`<%l!.[!R!/sV!a`!cp{POr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!0]P;=`<%l!+q!R!0gX!a`!cpOr*Vrs(Vsv*Vwx)ex#c*V#c#d!1S#d;'S*V;'S;=`*s<%lO*V!R!1ZX!a`!cpOr*Vrs(Vsv*Vwx)ex#V*V#V#W!1v#W;'S*V;'S;=`*s<%lO*V!R!1}X!a`!cpOr*Vrs(Vsv*Vwx)ex#h*V#h#i!2j#i;'S*V;'S;=`*s<%lO*V!R!2qX!a`!cpOr*Vrs(Vsv*Vwx)ex#m*V#m#n!3^#n;'S*V;'S;=`*s<%lO*V!R!3eX!a`!cpOr*Vrs(Vsv*Vwx)ex#d*V#d#e!4Q#e;'S*V;'S;=`*s<%lO*V!R!4XX!a`!cpOr*Vrs(Vsv*Vwx)ex#X*V#X#Y!+q#Y;'S*V;'S;=`*s<%lO*V!R!4{Y!a`!cpOr!4trs!5ksv!4tvw!6Vwx!8]x!a!4t!a!b!:]!b;'S!4t;'S;=`!;r<%lO!4tq!5pV!cpOv!5kvx!6Vx!a!5k!a!b!7W!b;'S!5k;'S;=`!8V<%lO!5kP!6YTO!a!6V!a!b!6i!b;'S!6V;'S;=`!7Q<%lO!6VP!6lTO!`!6V!`!a!6{!a;'S!6V;'S;=`!7Q<%lO!6VP!7QOxPP!7TP;=`<%l!6Vq!7]V!cpOv!5kvx!6Vx!`!5k!`!a!7r!a;'S!5k;'S;=`!8V<%lO!5kq!7yS!cpxPOv(Vx;'S(V;'S;=`(h<%lO(Vq!8YP;=`<%l!5ka!8bX!a`Or!8]rs!6Vsv!8]vw!6Vw!a!8]!a!b!8}!b;'S!8];'S;=`!:V<%lO!8]a!9SX!a`Or!8]rs!6Vsv!8]vw!6Vw!`!8]!`!a!9o!a;'S!8];'S;=`!:V<%lO!8]a!9vT!a`xPOr)esv)ew;'S)e;'S;=`)y<%lO)ea!:YP;=`<%l!8]!R!:dY!a`!cpOr!4trs!5ksv!4tvw!6Vwx!8]x!`!4t!`!a!;S!a;'S!4t;'S;=`!;r<%lO!4t!R!;]V!a`!cpxPOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!;uP;=`<%l!4t!V!<TXiS`P!a`!cpOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X",tokenizers:[sv,av,lv,iv,nv,ov,0,1,2,3,4,5],topRules:{Document:[0,15]},dialects:{noMatch:0,selfClosing:509},tokenPrec:511});function pv(t,e){let n=Object.create(null);for(let o of t.getChildren(Tm)){let t=o.getChild(Em),i=o.getChild(Am)||o.getChild(Qm);t&&(n[e.read(t.from,t.to)]=i?i.type.id==Am?e.read(i.from+1,i.to-1):e.read(i.from,i.to):"")}return n}function hv(t,e){let n=t.getChild(Cm);return n?e.read(n.from,n.to):" "}function dv(t,e,n){let o;for(let i of n)if(!i.attrs||i.attrs(o||(o=pv(t.node.parent.firstChild,e))))return{parser:i.parser};return null}function fv(t=[],e=[]){let n=[],o=[],i=[],r=[];for(let e of t){("script"==e.tag?n:"style"==e.tag?o:"textarea"==e.tag?i:r).push(e)}let s=e.length?Object.create(null):null;for(let t of e)(s[t.name]||(s[t.name]=[])).push(t);return a=(t,e)=>{let a=t.type.id;if(a==$m)return dv(t,e,n);if(a==jm)return dv(t,e,o);if(a==Rm)return dv(t,e,i);if(a==Pm&&r.length){let n,o=t.node,i=o.firstChild,s=i&&hv(i,e);if(s)for(let t of r)if(t.tag==s&&(!t.attrs||t.attrs(n||(n=pv(i,e))))){let e=o.lastChild,n=e.type.id==Vm?e.from:o.to;if(n>i.to)return{parser:t.parser,overlay:[{from:i.to,to:n}]}}}if(s&&a==Tm){let n,o=t.node;if(n=o.firstChild){let t=s[e.read(n.from,n.to)];if(t)for(let n of t){if(n.tagName&&n.tagName!=hv(o.parent,e))continue;let t=o.lastChild;if(t.type.id==Am){let e=t.from+1,o=t.lastChild,i=t.to-(o&&o.isError?0:1);if(i>e)return{parser:n.parser,overlay:[{from:e,to:i}]}}else if(t.type.id==Qm)return{parser:n.parser,overlay:[{from:t.from,to:t.to}]}}}}return null},(t,e,n,o)=>new Xa(t,a,e,n,o);var a}const gv=312,mv=1,vv=2,yv=3,_v=4,Ov=313,bv=315,wv=316,xv=5,Sv=6,kv=0,Pv=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],Cv=125,Tv=59,Ev=47,Av=42,Qv=43,$v=45,jv=60,Rv=44,Mv=63,Vv=46,Zv=new bg({start:!1,shift:(t,e)=>e==xv||e==Sv||e==bv?t:e==wv,strict:!1}),Dv=new lg(((t,e)=>{let{next:n}=t;(n==Cv||-1==n||e.context)&&t.acceptToken(Ov)}),{contextual:!0,fallback:!0}),Iv=new lg(((t,e)=>{let n,{next:o}=t;Pv.indexOf(o)>-1||(o!=Ev||(n=t.peek(1))!=Ev&&n!=Av)&&(o==Cv||o==Tv||-1==o||e.context||t.acceptToken(gv))}),{contextual:!0}),Nv=new lg(((t,e)=>{let{next:n}=t;if(n==Qv||n==$v){if(t.advance(),n==t.next){t.advance();let n=!e.context&&e.canShift(mv);t.acceptToken(n?mv:vv)}}else n==Mv&&t.peek(1)==Vv&&(t.advance(),t.advance(),(t.next<48||t.next>57)&&t.acceptToken(yv))}),{contextual:!0});function Wv(t,e){return t>=65&&t<=90||t>=97&&t<=122||95==t||t>=192||!e&&t>=48&&t<=57}const Xv=new lg(((t,e)=>{if(t.next!=jv||!e.dialectEnabled(kv))return;if(t.advance(),t.next==Ev)return;let n=0;for(;Pv.indexOf(t.next)>-1;)t.advance(),n++;if(Wv(t.next,!0)){for(t.advance(),n++;Wv(t.next,!1);)t.advance(),n++;for(;Pv.indexOf(t.next)>-1;)t.advance(),n++;if(t.next==Rv)return;for(let e=0;;e++){if(7==e){if(!Wv(t.next,!0))return;break}if(t.next!="extends".charCodeAt(e))break;t.advance(),n++}}t.acceptToken(_v,-n)})),Lv=el({"get set async static":wl.modifier,"for while do if else switch try catch finally return throw break continue default case":wl.controlKeyword,"in of await yield void typeof delete instanceof":wl.operatorKeyword,"let var const using function class extends":wl.definitionKeyword,"import export from":wl.moduleKeyword,"with debugger as new":wl.keyword,TemplateString:wl.special(wl.string),super:wl.atom,BooleanLiteral:wl.bool,this:wl.self,null:wl.null,Star:wl.modifier,VariableName:wl.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":wl.function(wl.variableName),VariableDefinition:wl.definition(wl.variableName),Label:wl.labelName,PropertyName:wl.propertyName,PrivatePropertyName:wl.special(wl.propertyName),"CallExpression/MemberExpression/PropertyName":wl.function(wl.propertyName),"FunctionDeclaration/VariableDefinition":wl.function(wl.definition(wl.variableName)),"ClassDeclaration/VariableDefinition":wl.definition(wl.className),PropertyDefinition:wl.definition(wl.propertyName),PrivatePropertyDefinition:wl.definition(wl.special(wl.propertyName)),UpdateOp:wl.updateOperator,"LineComment Hashbang":wl.lineComment,BlockComment:wl.blockComment,Number:wl.number,String:wl.string,Escape:wl.escape,ArithOp:wl.arithmeticOperator,LogicOp:wl.logicOperator,BitOp:wl.bitwiseOperator,CompareOp:wl.compareOperator,RegExp:wl.regexp,Equals:wl.definitionOperator,Arrow:wl.function(wl.punctuation),": Spread":wl.punctuation,"( )":wl.paren,"[ ]":wl.squareBracket,"{ }":wl.brace,"InterpolationStart InterpolationEnd":wl.special(wl.brace),".":wl.derefOperator,", ;":wl.separator,"@":wl.meta,TypeName:wl.typeName,TypeDefinition:wl.definition(wl.typeName),"type enum interface implements namespace module declare":wl.definitionKeyword,"abstract global Privacy readonly override":wl.modifier,"is keyof unique infer":wl.operatorKeyword,JSXAttributeValue:wl.attributeValue,JSXText:wl.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":wl.angleBracket,"JSXIdentifier JSXNameSpacedName":wl.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":wl.attributeName,"JSXBuiltin/JSXIdentifier":wl.standard(wl.tagName)}),zv={__proto__:null,export:20,as:25,from:33,default:36,async:41,function:42,extends:54,this:58,true:66,false:66,null:78,void:82,typeof:86,super:102,new:136,delete:148,yield:157,await:161,class:166,public:229,private:229,protected:229,readonly:231,instanceof:250,satisfies:253,in:254,const:256,import:290,keyof:345,unique:349,infer:355,is:391,abstract:411,implements:413,type:415,let:418,var:420,using:423,interface:429,enum:433,namespace:439,module:441,declare:445,global:449,for:468,of:477,while:480,with:484,do:488,if:492,else:494,switch:498,case:504,try:510,catch:514,finally:518,return:522,throw:526,break:530,continue:534,debugger:538},Uv={__proto__:null,async:123,get:125,set:127,declare:189,public:191,private:191,protected:191,static:193,abstract:195,override:197,readonly:203,accessor:205,new:395},qv={__proto__:null,"<":187},Yv=wg.deserialize({version:14,states:"$=dO%TQ^OOO%[Q^OOO'_Q`OOP(lOWOOO*zQ?NdO'#CiO+RO!bO'#CjO+aO#tO'#CjO+oO!0LbO'#D^O.QQ^O'#DdO.bQ^O'#DoO%[Q^O'#DwO0fQ^O'#EPOOQ?Mr'#EX'#EXO1PQWO'#EUOOQO'#Em'#EmOOQO'#Ih'#IhO1XQWO'#GpO1dQWO'#ElO1iQWO'#ElO3hQ?NdO'#JmO6[Q?NdO'#JnO6uQWO'#F[O6zQ&jO'#FsOOQ?Mr'#Fe'#FeO7VO,YO'#FeO7eQ7[O'#FzO9RQWO'#FyOOQ?Mr'#Jn'#JnOOQ?Mp'#Jm'#JmO9WQWO'#GtOOQU'#KZ'#KZO9cQWO'#IUO9hQ?MxO'#IVOOQU'#JZ'#JZOOQU'#IZ'#IZQ`Q^OOO`Q^OOO9pQMnO'#DsO9wQ^O'#D{O:OQ^O'#D}O9^QWO'#GpO:VQ7[O'#CoO:eQWO'#EkO:pQWO'#EvO:uQ7[O'#FdO;dQWO'#GpOOQO'#K['#K[O;iQWO'#K[O;wQWO'#GxO;wQWO'#GyO;wQWO'#G{O9^QWO'#HOO<nQWO'#HRO>VQWO'#CeO>gQWO'#H_O>oQWO'#HeO>oQWO'#HgO`Q^O'#HiO>oQWO'#HkO>oQWO'#HnO>tQWO'#HtO>yQ?MyO'#HzO%[Q^O'#H|O?UQ?MyO'#IOO?aQ?MyO'#IQO9hQ?MxO'#ISO?lQ?NdO'#CiO@nQ`O'#DiQOQWOOO%[Q^O'#D}OAUQWO'#EQO:VQ7[O'#EkOAaQWO'#EkOAlQpO'#FdOOQU'#Cg'#CgOOQ?Mp'#Dn'#DnOOQ?Mp'#Jq'#JqO%[Q^O'#JqOOQO'#Jt'#JtOOQO'#Id'#IdOBlQ`O'#EdOOQ?Mp'#Ec'#EcOOQ?Mp'#Jx'#JxOChQ?NQO'#EdOCrQ`O'#ETOOQO'#Js'#JsODWQ`O'#JtOEeQ`O'#ETOCrQ`O'#EdPErO#@ItO'#CbPOOO)CDx)CDxOOOO'#I['#I[OE}O!bO,59UOOQ?Mr,59U,59UOOOO'#I]'#I]OF]O#tO,59UO%[Q^O'#D`OOOO'#I_'#I_OFkO!0LbO,59xOOQ?Mr,59x,59xOFyQ^O'#I`OG^QWO'#JoOI]QrO'#JoO+}Q^O'#JoOIdQWO,5:OOIzQWO'#EmOJXQWO'#KOOJdQWO'#J}OJdQWO'#J}OJlQWO,5;ZOJqQWO'#J|OOQ?Mv,5:Z,5:ZOJxQ^O,5:ZOLvQ?NdO,5:cOMgQWO,5:kONQQ?MxO'#J{ONXQWO'#JzO9WQWO'#JzONmQWO'#JzONuQWO,5;YONzQWO'#JzO!#PQrO'#JnOOQ?Mr'#Ci'#CiO%[Q^O'#EPO!#oQrO,5:pOOQQ'#Ju'#JuOOQO-E<f-E<fO9^QWO,5=[O!$VQWO,5=[O!$[Q^O,5;WO!&_Q7[O'#EhO!'xQWO,5;WO!'}Q^O'#DvO!(XQ`O,5;aO!(aQ`O,5;aO%[Q^O,5;aOOQU'#FS'#FSOOQU'#FU'#FUO%[Q^O,5;bO%[Q^O,5;bO%[Q^O,5;bO%[Q^O,5;bO%[Q^O,5;bO%[Q^O,5;bO%[Q^O,5;bO%[Q^O,5;bO%[Q^O,5;bO%[Q^O,5;bO%[Q^O,5;bOOQU'#FY'#FYO!(oQ^O,5;sOOQ?Mr,5;x,5;xOOQ?Mr,5;y,5;yOOQ?Mr,5;{,5;{O%[Q^O'#IlO!*rQ?MxO,5<gO!&_Q7[O,5;bO!+aQ7[O,5;bO!-RQ7[O'#EZO%[Q^O,5;vOOQ?Mr,5;z,5;zO!-YQ&jO'#FiO!.VQ&jO'#KSO!-qQ&jO'#KSO!.^Q&jO'#KSOOQO'#KS'#KSO!.rQ&jO,5<ROOOS,5<_,5<_O!/TQ^O'#FuOOOS'#Ik'#IkO7VO,YO,5<PO!/[Q&jO'#FwOOQ?Mr,5<P,5<PO!/{Q!LQO'#CvOOQ?Mr'#Cz'#CzO!0`QWO'#CzO!0eO!0LbO'#DOO!1RQ7[O,5<dO!1YQWO,5<fO!2uQ$ISO'#GVO!3SQWO'#GWO!3XQWO'#GWO!4wQ$ISO'#G[O!5sQ`O'#G`OOQO'#Gk'#GkO!+hQ7[O'#GjOOQO'#Gm'#GmO!+hQ7[O'#GlO!6fQ!LQO'#JgOOQ?Mr'#Jg'#JgO!6pQWO'#JfO!7OQWO'#JeO!7WQWO'#CuOOQ?Mr'#Cx'#CxOOQ?Mr'#DS'#DSOOQ?Mr'#DU'#DUO1SQWO'#DWO!+hQ7[O'#F}O!+hQ7[O'#GPO!7`QWO'#GRO!7eQWO'#GSO!3XQWO'#GYO!+hQ7[O'#G_O!7jQWO'#EnO!8XQWO,5<eOOQ?Mp'#Cr'#CrO!8aQWO'#EoO!9ZQ`O'#EpOOQ?Mp'#J|'#J|O!9bQ?MxO'#K]O9hQ?MxO,5=`O`Q^O,5>pOOQU'#Jc'#JcOOQU,5>q,5>qOOQU-E<X-E<XO!;aQ?NdO,5:_O!9UQ`O,5:]O!=zQ?NdO,5:gO%[Q^O,5:gO!@bQ?NdO,5:iOOQO,5@v,5@vO!ARQ7[O,5=[O!AaQ?MxO'#JdO9RQWO'#JdO!ArQ?MxO,59ZO!A}Q`O,59ZO!BVQ7[O,59ZO:VQ7[O,59ZO!BbQWO,5;WO!BjQWO'#H^O!COQWO'#K`O%[Q^O,5;|O!9UQ`O,5<OO!CWQWO,5=wO!C]QWO,5=wO!CbQWO,5=wO9hQ?MxO,5=wO;wQWO,5=gOOQO'#Cv'#CvO!CpQ`O,5=dO!CxQ7[O,5=eO!DTQWO,5=gO!DYQpO,5=jO!DbQWO'#K[O>tQWO'#HTO9^QWO'#HVO!DgQWO'#HVO:VQ7[O'#HXO!DlQWO'#HXOOQU,5=m,5=mO!DqQWO'#HYO!ESQWO'#CoO!EXQWO,59PO!EcQWO,59PO!GhQ^O,59POOQU,59P,59PO!GxQ?MxO,59PO%[Q^O,59PO!JTQ^O'#HaOOQU'#Hb'#HbOOQU'#Hc'#HcO`Q^O,5=yO!JkQWO,5=yO`Q^O,5>PO`Q^O,5>RO!JpQWO,5>TO`Q^O,5>VO!JuQWO,5>YO!JzQ^O,5>`OOQU,5>f,5>fO%[Q^O,5>fO9hQ?MxO,5>hOOQU,5>j,5>jO# UQWO,5>jOOQU,5>l,5>lO# UQWO,5>lOOQU,5>n,5>nO# rQ`O'#D[O%[Q^O'#JqO# |Q`O'#JqO#!kQ`O'#DjO#!|Q`O'#DjO#%_Q^O'#DjO#%fQWO'#JpO#%nQWO,5:TO#%sQWO'#EqO#&RQWO'#KPO#&ZQWO,5;[O#&`Q`O'#DjO#&mQ`O'#ESOOQ?Mr,5:l,5:lO%[Q^O,5:lO#&tQWO,5:lO>tQWO,5;VO!A}Q`O,5;VO!BVQ7[O,5;VO:VQ7[O,5;VO#&|QWO,5@]O#'RQ(CYO,5:pOOQO-E<b-E<bO#(XQ?NQO,5;OOCrQ`O,5:oO#(cQ`O,5:oOCrQ`O,5;OO!ArQ?MxO,5:oOOQ?Mp'#Eg'#EgOOQO,5;O,5;OO%[Q^O,5;OO#(pQ?MxO,5;OO#({Q?MxO,5;OO!A}Q`O,5:oOOQO,5;U,5;UO#)ZQ?MxO,5;OPOOO'#IY'#IYP#)oO#@ItO,58|POOO,58|,58|OOOO-E<Y-E<YOOQ?Mr1G.p1G.pOOOO-E<Z-E<ZO#)zQpO,59zOOOO-E<]-E<]OOQ?Mr1G/d1G/dO#*PQrO,5>zO+}Q^O,5>zOOQO,5?Q,5?QO#*ZQ^O'#I`OOQO-E<^-E<^O#*hQWO,5@ZO#*pQrO,5@ZO#*wQWO,5@iOOQ?Mr1G/j1G/jO%[Q^O,5@jO#+PQWO'#IfOOQO-E<d-E<dO#*wQWO,5@iOOQ?Mp1G0u1G0uOOQ?Mv1G/u1G/uOOQ?Mv1G0V1G0VO%[Q^O,5@gO#+eQ?MxO,5@gO#+vQ?MxO,5@gO#+}QWO,5@fO9WQWO,5@fO#,VQWO,5@fO#,eQWO'#IiO#+}QWO,5@fOOQ?Mp1G0t1G0tO!(XQ`O,5:rO!(dQ`O,5:rOOQQ,5:t,5:tO#-VQYO,5:tO#-_Q7[O1G2vO9^QWO1G2vOOQ?Mr1G0r1G0rO#-mQ?NdO1G0rO#.rQ?NbO,5;SOOQ?Mr'#GU'#GUO#/`Q?NdO'#JgO!$[Q^O1G0rO#1hQrO'#JrO%[Q^O'#JrO#1rQWO,5:bOOQ?Mr'#D['#D[OOQ?Mr1G0{1G0{O%[Q^O1G0{OOQ?Mr1G1e1G1eO#1wQWO1G0{O#4]Q?NdO1G0|O#4dQ?NdO1G0|O#6zQ?NdO1G0|O#7RQ?NdO1G0|O#9YQ?NdO1G0|O#9pQ?NdO1G0|O#<gQ?NdO1G0|O#<nQ?NdO1G0|O#?OQ?NdO1G0|O#?]Q?NdO1G0|O#AWQ?NdO1G0|O#DWQ07bO'#CiO#FRQ07bO1G1_O#FYQ07bO'#JnO#FmQ?NdO,5?WOOQ?Mp-E<j-E<jO#GaQ?NdO1G0|OOQ?Mr1G0|1G0|O#IiQ7[O'#JwO#IsQWO,5:uO#IxQ?NdO1G1bO#JlQ&jO,5<VO#JtQ&jO,5<WO#J|Q&jO'#FnO#KeQWO'#FmOOQO'#KT'#KTOOQO'#Ij'#IjO#KjQ&jO1G1mOOQ?Mr1G1m1G1mOOOS1G1x1G1xO#K{Q07bO'#JmO#LVQWO,5<aO!(oQ^O,5<aOOOS-E<i-E<iOOQ?Mr1G1k1G1kO#L[Q`O'#KSOOQ?Mr,5<c,5<cO#LdQ`O,5<cOOQ?Mr,59f,59fO!&_Q7[O'#DQOOOO'#I^'#I^O#LiO!0LbO,59jOOQ?Mr,59j,59jO%[Q^O1G2OO!7eQWO'#InO#LtQ7[O,5<xOOQ?Mr,5<u,5<uO!+hQ7[O'#IqO#MdQ7[O,5=UO!+hQ7[O'#IsO#NVQ7[O,5=WO!&_Q7[O,5=YOOQO1G2Q1G2QO#NaQpO'#CrO#NtQ$ISO'#EoO$ sQ`O'#G`O$!aQpO,5<qO$!hQWO'#KWO9WQWO'#KWO$!vQWO,5<sO!+hQ7[O,5<rO$!{QWO'#GXO$#^QWO,5<rO$#cQpO'#GUO$#pQpO'#KXO$#zQWO'#KXO!&_Q7[O'#KXO$$PQWO,5<vO$$UQ`O'#GaO!5nQ`O'#GaO$$gQWO'#GcO$$lQWO'#GeO!3XQWO'#GhO$$qQ?MxO'#IpO$$|Q`O,5<zOOQ?Mv,5<z,5<zO$%TQ`O'#GaO$%cQ`O'#GbO$%kQ`O'#GbO$%pQ7[O,5=UO$&QQ7[O,5=WOOQ?Mr,5=Z,5=ZO!+hQ7[O,5@QO!+hQ7[O,5@QO$&bQWO'#IuO$&mQWO,5@PO$&uQWO,59aO$'iQ!LSO,59rOOQ?Mr'#Jk'#JkO$([Q7[O,5<iO$(}Q7[O,5<kO@fQWO,5<mOOQ?Mr,5<n,5<nO$)XQWO,5<tO$)^Q7[O,5<yO$)nQWO'#JzO!$[Q^O1G2PO$)sQWO1G2PO9WQWO'#J}O9WQWO'#EqO%[Q^O'#EqO9WQWO'#IwO$)xQ?MxO,5@wOOQU1G2z1G2zOOQU1G4[1G4[OOQ?Mr1G/y1G/yOOQ?Mr1G/w1G/wO$+zQ?NdO1G0ROOQU1G2v1G2vO!&_Q7[O1G2vO%[Q^O1G2vO#-bQWO1G2vO$.OQ7[O'#EhOOQ?Mp,5@O,5@OO$.YQ?MxO,5@OOOQU1G.u1G.uO!ArQ?MxO1G.uO!A}Q`O1G.uO!BVQ7[O1G.uO$.kQWO1G0rO$.pQWO'#CiO$.{QWO'#KaO$/TQWO,5=xO$/YQWO'#KaO$/_QWO'#KaO$/mQWO'#I}O$/{QWO,5@zO$0TQrO1G1hOOQ?Mr1G1j1G1jO9^QWO1G3cO@fQWO1G3cO$0[QWO1G3cO$0aQWO1G3cOOQU1G3c1G3cO!DTQWO1G3RO!&_Q7[O1G3OO$0fQWO1G3OOOQU1G3P1G3PO!&_Q7[O1G3PO$0kQWO1G3PO$0sQ`O'#G}OOQU1G3R1G3RO!5nQ`O'#IyO!DYQpO1G3UOOQU1G3U1G3UOOQU,5=o,5=oO$0{Q7[O,5=qO9^QWO,5=qO$$lQWO,5=sO9RQWO,5=sO!A}Q`O,5=sO!BVQ7[O,5=sO:VQ7[O,5=sO$1ZQWO'#K_O$1fQWO,5=tOOQU1G.k1G.kO$1kQ?MxO1G.kO@fQWO1G.kO$1vQWO1G.kO9hQ?MxO1G.kO$4OQrO,5@|O$4]QWO,5@|O9WQWO,5@|O$4hQ^O,5={O$4oQWO,5={OOQU1G3e1G3eO`Q^O1G3eOOQU1G3k1G3kOOQU1G3m1G3mO>oQWO1G3oO$4tQ^O1G3qO$8xQ^O'#HpOOQU1G3t1G3tO$9VQWO'#HvO>tQWO'#HxOOQU1G3z1G3zO$9_Q^O1G3zO9hQ?MxO1G4QOOQU1G4S1G4SOOQ?Mp'#G]'#G]O9hQ?MxO1G4UO9hQ?MxO1G4WO$=fQWO,5@]O!(oQ^O,5;]O9WQWO,5;]O>tQWO,5:UO!(oQ^O,5:UO!A}Q`O,5:UO$=kQ07bO,5:UOOQO,5;],5;]O$=uQ`O'#IaO$>]QWO,5@[OOQ?Mr1G/o1G/oO$>eQ`O'#IgO$>oQWO,5@kOOQ?Mp1G0v1G0vO#!|Q`O,5:UOOQO'#Ic'#IcO$>wQ`O,5:nOOQ?Mv,5:n,5:nO#&wQWO1G0WOOQ?Mr1G0W1G0WO%[Q^O1G0WOOQ?Mr1G0q1G0qO>tQWO1G0qO!A}Q`O1G0qO!BVQ7[O1G0qOOQ?Mp1G5w1G5wO!ArQ?MxO1G0ZOOQO1G0j1G0jO%[Q^O1G0jO$?OQ?MxO1G0jO$?ZQ?MxO1G0jO!A}Q`O1G0ZOCrQ`O1G0ZO$?iQ?MxO1G0jOOQO1G0Z1G0ZO$?}Q?NdO1G0jPOOO-E<W-E<WPOOO1G.h1G.hOOOO1G/f1G/fO$@XQpO,5<gO$@aQrO1G4fOOQO1G4l1G4lO%[Q^O,5>zO$@kQWO1G5uO$@sQWO1G6TO$@{QrO1G6UO9WQWO,5?QO$AVQ?NdO1G6RO%[Q^O1G6RO$AgQ?MxO1G6RO$AxQWO1G6QO$AxQWO1G6QO9WQWO1G6QO$BQQWO,5?TO9WQWO,5?TOOQO,5?T,5?TO$BfQWO,5?TO$)nQWO,5?TOOQO-E<g-E<gOOQQ1G0^1G0^OOQQ1G0`1G0`O#-YQWO1G0`OOQU7+(b7+(bO!&_Q7[O7+(bO%[Q^O7+(bO$BtQWO7+(bO$CPQ7[O7+(bO$C_Q?NdO,5=UO$EgQ?NdO,5=WO$GoQ?NdO,5=UO$I}Q?NdO,5=WO$L]Q?NdO,59rO$NbQ?NdO,5<iO%!jQ?NdO,5<kO%$rQ?NdO,5<yOOQ?Mr7+&^7+&^O%'QQ?NdO7+&^O%'tQ^O'#IbO%(RQWO,5@^O%(ZQrO,5@^OOQ?Mr1G/|1G/|O%(eQWO7+&gOOQ?Mr7+&g7+&gO%(jQ07bO,5:cO%[Q^O7+&yO%(tQ07bO,5:_O%)RQ07bO,5:gO%)]Q07bO,5:iO%)gQ7[O'#IeO%)qQWO,5@cOOQ?Mr1G0a1G0aOOQO1G1q1G1qOOQO1G1r1G1rO%)yQtO,5<YO!(oQ^O,5<XOOQO-E<h-E<hOOQ?Mr7+'X7+'XOOOS7+'d7+'dOOOS1G1{1G1{O%*UQWO1G1{OOQ?Mr1G1}1G1}O%*ZQpO,59lOOOO-E<[-E<[OOQ?Mr1G/U1G/UO%*bQ?NdO7+'jOOQ?Mr,5?Y,5?YO%+UQpO,5?YOOQ?Mr1G2d1G2dP!&_Q7[O'#InPOQ?Mr-E<l-E<lO%+tQ7[O,5?]OOQ?Mr-E<o-E<oO%,gQ7[O,5?_OOQ?Mr-E<q-E<qO%,qQpO1G2tO%,xQpO'#CrO%-`Q7[O'#J}O%-gQ^O'#EqOOQ?Mr1G2]1G2]O%-qQWO'#ImO%.VQWO,5@rO%.VQWO,5@rO%._QWO,5@rO%.jQWO,5@rOOQO1G2_1G2_O%.xQ7[O1G2^O!+hQ7[O1G2^O%/YQ$ISO'#IoO%/gQWO,5@sO!&_Q7[O,5@sO%/oQpO,5@sOOQ?Mr1G2b1G2bOOQ?Mp,5<{,5<{OOQ?Mp,5<|,5<|O$)nQWO,5<|OCcQWO,5<|O!A}Q`O,5<{OOQO'#Gd'#GdO%/yQWO,5<}OOQ?Mp,5=P,5=PO$)nQWO,5=SOOQO,5?[,5?[OOQO-E<n-E<nOOQ?Mv1G2f1G2fO!5nQ`O,5<{O%0RQWO,5<|O$$gQWO,5<}O!5nQ`O,5<|O!+hQ7[O'#IqO%0uQ7[O1G2pO!+hQ7[O'#IsO%1hQ7[O1G2rO%1rQ7[O1G5lO%1|Q7[O1G5lOOQO,5?a,5?aOOQO-E<s-E<sOOQO1G.{1G.{O!9UQ`O,59tO%[Q^O,59tOOQ?Mr,5<h,5<hO%2ZQWO1G2XO!+hQ7[O1G2`O%2`Q?NdO7+'kOOQ?Mr7+'k7+'kO!$[Q^O7+'kO%3SQWO,5;]OOQ?Mp,5?c,5?cOOQ?Mp-E<u-E<uO%3XQpO'#KYO#&wQWO7+(bO4UQrO7+(bO$BwQWO7+(bO%3cQ?NbO'#CiO%3vQ?NbO,5=QO%4hQWO,5=QOOQ?Mp1G5j1G5jOOQU7+$a7+$aO!ArQ?MxO7+$aO!A}Q`O7+$aO!$[Q^O7+&^O%4mQWO'#I|O%5UQWO,5@{OOQO1G3d1G3dO9^QWO,5@{O%5UQWO,5@{O%5^QWO,5@{OOQO,5?i,5?iOOQO-E<{-E<{OOQ?Mr7+'S7+'SO%5cQWO7+(}O9hQ?MxO7+(}O9^QWO7+(}O@fQWO7+(}OOQU7+(m7+(mO%5hQ?NbO7+(jO!&_Q7[O7+(jO%5rQpO7+(kOOQU7+(k7+(kO!&_Q7[O7+(kO%5yQWO'#K^O%6UQWO,5=iOOQO,5?e,5?eOOQO-E<w-E<wOOQU7+(p7+(pO%7eQ`O'#HWOOQU1G3]1G3]O!&_Q7[O1G3]O%[Q^O1G3]O%7lQWO1G3]O%7wQ7[O1G3]O9hQ?MxO1G3_O$$lQWO1G3_O9RQWO1G3_O!A}Q`O1G3_O!BVQ7[O1G3_O%8VQWO'#I{O%8kQWO,5@yO%8sQ`O,5@yOOQ?Mp1G3`1G3`OOQU7+$V7+$VO@fQWO7+$VO9hQ?MxO7+$VO%9OQWO7+$VO%[Q^O1G6hO%[Q^O1G6iO%9TQ?MxO1G6hO%9_Q^O1G3gO%9fQWO1G3gO%9kQ^O1G3gOOQU7+)P7+)PO9hQ?MxO7+)ZO`Q^O7+)]OOQU'#Kd'#KdOOQU'#JO'#JOO%9rQ^O,5>[OOQU,5>[,5>[O%[Q^O'#HqO%:PQWO'#HsOOQU,5>b,5>bO9WQWO,5>bOOQU,5>d,5>dOOQU7+)f7+)fOOQU7+)l7+)lOOQU7+)p7+)pOOQU7+)r7+)rO%:UQ`O1G5wO%:jQ07bO1G0wO%:tQWO1G0wOOQO1G/p1G/pO%;PQ07bO1G/pO>tQWO1G/pO!(oQ^O'#DjOOQO,5>{,5>{OOQO-E<_-E<_OOQO,5?R,5?ROOQO-E<e-E<eO!A}Q`O1G/pOOQO-E<a-E<aOOQ?Mv1G0Y1G0YOOQ?Mr7+%r7+%rO#&wQWO7+%rOOQ?Mr7+&]7+&]O>tQWO7+&]O!A}Q`O7+&]OOQO7+%u7+%uO$?}Q?NdO7+&UOOQO7+&U7+&UO%[Q^O7+&UO%;ZQ?MxO7+&UO!ArQ?MxO7+%uO!A}Q`O7+%uO%;fQ?MxO7+&UO%;tQ?NdO7++mO%[Q^O7++mO%<UQWO7++lO%<UQWO7++lOOQO1G4o1G4oO9WQWO1G4oO%<^QWO1G4oOOQQ7+%z7+%zO#&wQWO<<K|O4UQrO<<K|O%<lQWO<<K|OOQU<<K|<<K|O!&_Q7[O<<K|O%[Q^O<<K|O%<tQWO<<K|O%=PQ?NdO,5?]O%?XQ?NdO,5?_O%AaQ?NdO1G2^O%CoQ?NdO1G2pO%EwQ?NdO1G2rO%HPQrO,5>|O%[Q^O,5>|OOQO-E<`-E<`O%HZQWO1G5xOOQ?Mr<<JR<<JRO%HcQ07bO1G0rO%JjQ07bO1G0|O%JqQ07bO1G0|O%LrQ07bO1G0|O%LyQ07bO1G0|O%NkQ07bO1G0|O& RQ07bO1G0|O&#cQ07bO1G0|O&#jQ07bO1G0|O&%eQ07bO1G0|O&%rQ07bO1G0|O&'mQ07bO1G0|O&(QQ?NdO<<JeO&)VQ07bO1G0|O&*xQ07bO'#JgO&,{Q07bO1G1bO&-YQ07bO1G0RO&-dQ7[O,5?POOQO-E<c-E<cO!(oQ^O'#FpOOQO'#KU'#KUOOQO1G1t1G1tO&-nQWO1G1sO&-sQ07bO,5?WOOOS7+'g7+'gOOOO1G/W1G/WOOQ?Mr1G4t1G4tO!+hQ7[O7+(`O&0TQrO'#CiO&0_QWO,5?XO9WQWO,5?XOOQO-E<k-E<kO&0mQWO1G6^O&0mQWO1G6^O&0uQWO1G6^O&1QQ7[O7+'xO&1bQpO,5?ZO&1lQWO,5?ZO!&_Q7[O,5?ZOOQO-E<m-E<mO&1qQpO1G6_O&1{QWO1G6_OOQ?Mp1G2h1G2hO$)nQWO1G2hOOQ?Mp1G2g1G2gO&2TQWO1G2iO!&_Q7[O1G2iOOQ?Mp1G2n1G2nO!A}Q`O1G2gOCcQWO1G2hO&2YQWO1G2iO&2bQWO1G2hO&3UQ7[O,5?]OOQ?Mr-E<p-E<pO&3wQ7[O,5?_OOQ?Mr-E<r-E<rO!+hQ7[O7++WOOQ?Mr1G/`1G/`O&4RQWO1G/`OOQ?Mr7+'s7+'sO&4WQ7[O7+'zO&4hQ?NdO<<KVOOQ?Mr<<KV<<KVO&5[QWO1G0wO!&_Q7[O'#IvO&5aQWO,5@tO&7cQrO<<K|O!&_Q7[O1G2lOOQU<<G{<<G{O!ArQ?MxO<<G{O&7jQ?NdO<<IxOOQ?Mr<<Ix<<IxOOQO,5?h,5?hO&8^QWO,5?hO&8cQWO,5?hOOQO-E<z-E<zO&8qQWO1G6gO&8qQWO1G6gO9^QWO1G6gO@fQWO<<LiOOQU<<Li<<LiO&8yQWO<<LiO9hQ?MxO<<LiOOQU<<LU<<LUO%5hQ?NbO<<LUOOQU<<LV<<LVO%5rQpO<<LVO&9OQ`O'#IxO&9ZQWO,5@xO!(oQ^O,5@xOOQU1G3T1G3TO%-gQ^O'#JqOOQO'#Iz'#IzO9hQ?MxO'#IzO&9cQ`O,5=rOOQU,5=r,5=rO&9jQ`O'#EdO&:OQWO7+(wO&:TQWO7+(wOOQU7+(w7+(wO!&_Q7[O7+(wO%[Q^O7+(wO&:]QWO7+(wOOQU7+(y7+(yO9hQ?MxO7+(yO$$lQWO7+(yO9RQWO7+(yO!A}Q`O7+(yO&:hQWO,5?gOOQO-E<y-E<yOOQO'#HZ'#HZO&:sQWO1G6eO9hQ?MxO<<GqOOQU<<Gq<<GqO@fQWO<<GqO&:{QWO7+,SO&;QQWO7+,TO%[Q^O7+,SO%[Q^O7+,TOOQU7+)R7+)RO&;VQWO7+)RO&;[Q^O7+)RO&;cQWO7+)ROOQU<<Lu<<LuOOQU<<Lw<<LwOOQU-E<|-E<|OOQU1G3v1G3vO&;hQWO,5>]OOQU,5>_,5>_O&;mQWO1G3|O9WQWO7+&cO!(oQ^O7+&cOOQO7+%[7+%[O&;rQ07bO1G6UO>tQWO7+%[OOQ?Mr<<I^<<I^OOQ?Mr<<Iw<<IwO>tQWO<<IwOOQO<<Ip<<IpO$?}Q?NdO<<IpO%[Q^O<<IpOOQO<<Ia<<IaO!ArQ?MxO<<IaO&;|Q?MxO<<IpO&<XQ?NdO<= XO&<iQWO<= WOOQO7+*Z7+*ZO9WQWO7+*ZOOQUANAhANAhO&<qQrOANAhO!&_Q7[OANAhO#&wQWOANAhO4UQrOANAhO&<xQWOANAhO%[Q^OANAhO&=QQ?NdO7+'xO&?`Q?NdO,5?]O&AhQ?NdO,5?_O&CpQ?NdO7+'zO&FOQrO1G4hO&FYQ07bO7+&^O&HZQ07bO,5=UO&J_Q07bO,5=WO&JoQ07bO,5=UO&KPQ07bO,5=WO&KaQ07bO,59rO&MdQ07bO,5<iO' dQ07bO,5<kO'#dQ07bO,5<yO'%VQ07bO7+'jO'%dQ07bO7+'kO'%qQWO,5<[OOQO7+'_7+'_O'%vQ7[O<<KzOOQO1G4s1G4sO'%}QWO1G4sO'&YQWO1G4sO'&hQWO7++xO'&hQWO7++xO!&_Q7[O1G4uO'&pQpO1G4uO'&zQWO7++yOOQ?Mp7+(S7+(SO$)nQWO7+(TO''SQpO7+(TOOQ?Mp7+(R7+(RO$)nQWO7+(SO''ZQWO7+(TO!&_Q7[O7+(TOCcQWO7+(SO''`Q7[O<<NrOOQ?Mr7+$z7+$zO''jQpO,5?bOOQO-E<t-E<tO''tQ?NbO7+(WOOQUAN=gAN=gO9^QWO1G5SOOQO1G5S1G5SO'(UQWO1G5SO'(ZQWO7+,RO'(ZQWO7+,RO9hQ?MxOANBTO@fQWOANBTOOQUANBTANBTOOQUANApANApOOQUANAqANAqO'(cQWO,5?dOOQO-E<v-E<vO'(nQ07bO1G6dOOQO,5?f,5?fOOQO-E<x-E<xOOQU1G3^1G3^O%-gQ^O,5<}OOQU<<Lc<<LcO!&_Q7[O<<LcO&:OQWO<<LcO'(xQWO<<LcO%[Q^O<<LcOOQU<<Le<<LeO9hQ?MxO<<LeO$$lQWO<<LeO9RQWO<<LeO')QQ`O1G5RO')]QWO7+,POOQUAN=]AN=]O9hQ?MxOAN=]OOQU<= n<= nOOQU<= o<= oO')eQWO<= nO')jQWO<= oOOQU<<Lm<<LmO')oQWO<<LmO')tQ^O<<LmOOQU1G3w1G3wO>tQWO7+)hO'){QWO<<I}O'*WQ07bO<<I}OOQO<<Hv<<HvOOQ?MrAN?cAN?cOOQOAN?[AN?[O$?}Q?NdOAN?[OOQOAN>{AN>{O%[Q^OAN?[OOQO<<Mu<<MuOOQUG27SG27SO!&_Q7[OG27SO#&wQWOG27SO'*bQrOG27SO4UQrOG27SO'*iQWOG27SO'*qQ07bO<<JeO'+OQ07bO1G2^O',qQ07bO,5?]O'.qQ07bO,5?_O'0qQ07bO1G2pO'2qQ07bO1G2rO'4qQ07bO<<KVO'5OQ07bO<<IxOOQO1G1v1G1vO!+hQ7[OANAfOOQO7+*_7+*_O'5]QWO7+*_O'5hQWO<= dO'5pQpO7+*aOOQ?Mp<<Ko<<KoO$)nQWO<<KoOOQ?Mp<<Kn<<KnO'5zQpO<<KoO$)nQWO<<KnOOQO7+*n7+*nO9^QWO7+*nO'6RQWO<= mOOQUG27oG27oO9hQ?MxOG27oO!(oQ^O1G5OO'6ZQWO7+,OO&:OQWOANA}OOQUANA}ANA}O!&_Q7[OANA}O'6cQWOANA}OOQUANBPANBPO9hQ?MxOANBPO$$lQWOANBPOOQO'#H['#H[OOQO7+*m7+*mOOQUG22wG22wOOQUANEYANEYOOQUANEZANEZOOQUANBXANBXO'6kQWOANBXOOQU<<MS<<MSO!(oQ^OAN?iOOQOG24vG24vO$?}Q?NdOG24vO#&wQWOLD,nOOQULD,nLD,nO!&_Q7[OLD,nO'6pQrOLD,nO'6wQ07bO7+'xO'8jQ07bO,5?]O':jQ07bO,5?_O'<jQ07bO7+'zO'>]Q7[OG27QOOQO<<My<<MyOOQ?MpANAZANAZO$)nQWOANAZOOQ?MpANAYANAYOOQO<<NY<<NYOOQULD-ZLD-ZO'>mQ07bO7+*jOOQUG27iG27iO&:OQWOG27iO!&_Q7[OG27iOOQUG27kG27kO9hQ?MxOG27kOOQUG27sG27sO'>wQ07bOG25TOOQOLD*bLD*bOOQU!$(!Y!$(!YO#&wQWO!$(!YO!&_Q7[O!$(!YO'?RQ?NdOG27QOOQ?MpG26uG26uOOQULD-TLD-TO&:OQWOLD-TOOQULD-VLD-VOOQU!)9Et!)9EtO#&wQWO!)9EtOOQU!$(!o!$(!oOOQU!.K;`!.K;`O'AaQ07bOG27QO!(oQ^O'#DwO1PQWO'#EUO'CSQrO'#JmO'CZQMnO'#DsO'CbQ^O'#D{O'CiQrO'#CiO'FPQrO'#CiO!(oQ^O'#D}O'FaQ^O,5;WO!(oQ^O,5;bO!(oQ^O,5;bO!(oQ^O,5;bO!(oQ^O,5;bO!(oQ^O,5;bO!(oQ^O,5;bO!(oQ^O,5;bO!(oQ^O,5;bO!(oQ^O,5;bO!(oQ^O,5;bO!(oQ^O,5;bO!(oQ^O'#IlO'HdQWO,5<gO'HlQ7[O,5;bO'JVQ7[O,5;bO!(oQ^O,5;vO!&_Q7[O'#GjO'HlQ7[O'#GjO!&_Q7[O'#GlO'HlQ7[O'#GlO1SQWO'#DWO1SQWO'#DWO!&_Q7[O'#F}O'HlQ7[O'#F}O!&_Q7[O'#GPO'HlQ7[O'#GPO!&_Q7[O'#G_O'HlQ7[O'#G_O!(oQ^O,5:gO'J^Q`O'#D[O!(oQ^O,5@jO'FaQ^O1G0rO'JhQ07bO'#CiO!(oQ^O1G2OO!&_Q7[O'#IqO'HlQ7[O'#IqO!&_Q7[O'#IsO'HlQ7[O'#IsO'JrQpO'#CrO!&_Q7[O,5<rO'HlQ7[O,5<rO'FaQ^O1G2PO!(oQ^O7+&yO!&_Q7[O1G2^O'HlQ7[O1G2^O!&_Q7[O'#IqO'HlQ7[O'#IqO!&_Q7[O'#IsO'HlQ7[O'#IsO!&_Q7[O1G2`O'HlQ7[O1G2`O'FaQ^O7+'kO'FaQ^O7+&^O!&_Q7[OANAfO'HlQ7[OANAfO'KVQWO'#ElO'K[QWO'#ElO'KdQWO'#F[O'KiQWO'#EvO'KnQWO'#KOO'KyQWO'#J|O'LUQWO,5;WO'LZQ7[O,5<dO'LbQWO'#GWO'LgQWO'#GWO'LlQWO,5<eO'LtQWO,5;WO'L|Q07bO1G1_O'MTQWO,5<rO'MYQWO,5<rO'M_QWO,5<tO'MdQWO,5<tO'MiQWO1G2PO'MnQWO1G0rO'MsQ7[O<<KzO'MzQ7[O<<KzO7eQ7[O'#FzO9RQWO'#FyOAaQWO'#EkO!(oQ^O,5;sO!3XQWO'#GWO!3XQWO'#GWO!3XQWO'#GYO!3XQWO'#GYO!+hQ7[O7+(`O!+hQ7[O7+(`O%,qQpO1G2tO%,qQpO1G2tO!&_Q7[O,5=YO!&_Q7[O,5=Y",stateData:"( O~O'wOS'xOSTOS'yRQ~OPYOQYOSfOY!VOaqOdzOeyOmkOoYOpkOqkOwkOyYO{YO!PWO!TkO!UkO![XO!fuO!iZO!lYO!mYO!nYO!pvO!rwO!uxO!y]O#t!PO$V|O%e}O%g!QO%i!OO%j!OO%k!OO%n!RO%p!SO%s!TO%t!TO%v!UO&S!WO&Y!XO&[!YO&^!ZO&`![O&c!]O&i!^O&o!_O&q!`O&s!aO&u!bO&w!cO(OSO(QTO(TUO([VO(j[O(yiO~OWtO~P`OPYOQYOSfOd!jOe!iOmkOoYOpkOqkOwkOyYO{YO!PWO!TkO!UkO![!eO!fuO!iZO!lYO!mYO!nYO!pvO!r!gO!u!hO$V!kO(O!dO(QTO(TUO([VO(j[O(yiO~Oa!wOp!nO!P!oO!_!yO!`!vO!a!vO!y:lO#Q!pO#R!pO#S!xO#T!pO#U!pO#X!zO#Y!zO(P!lO(QTO(TUO(`!mO(j!sO~O'y!{O~OP]XR]X[]Xa]Xo]X}]X!P]X!Y]X!i]X!m]X#O]X#P]X#]]X#hfX#k]X#l]X#m]X#n]X#o]X#p]X#q]X#r]X#s]X#u]X#w]X#y]X#z]X$P]X'u]X([]X(m]X(t]X(u]X~O!d%PX~P(qO_!}O(Q#PO(R!}O(S#PO~O_#QO(S#PO(T#PO(U#QO~Ou#SO!R#TO(]#TO(^#VO~OPYOQYOSfOd!jOe!iOmkOoYOpkOqkOwkOyYO{YO!PWO!TkO!UkO![!eO!fuO!iZO!lYO!mYO!nYO!pvO!r!gO!u!hO$V!kO(O:pO(QTO(TUO([VO(j[O(yiO~O!X#ZO!Y#WO!V(cP!V(qP~P+}O!Z#cO~P`OPYOQYOSfOd!jOe!iOoYOpkOqkOwkOyYO{YO!PWO!TkO!UkO![!eO!fuO!iZO!lYO!mYO!nYO!pvO!r!gO!u!hO$V!kO(QTO(TUO([VO(j[O(yiO~Om#mO!X#iO!y]O#f#lO#g#iO(O:qO!h(nP~P.iO!i#oO(O#nO~O!u#sO!y]O%e#tO~O#h#uO~O!d#vO#h#uO~OP$]OR#zO[$cOo$QO}#yO!P#{O!Y$`O!i#xO!m$]O#O$SO#k$OO#l$PO#m$PO#n$PO#o$RO#p$SO#q$SO#r$bO#s$SO#u$TO#w$VO#y$XO#z$YO([VO(m$ZO(t#|O(u#}O~Oa(aX'u(aX's(aX!h(aX!V(aX![(aX%f(aX!d(aX~P1qO#P$dO#]$eO$P$eOP(bXR(bX[(bXo(bX}(bX!P(bX!Y(bX!i(bX!m(bX#O(bX#k(bX#l(bX#m(bX#n(bX#o(bX#p(bX#q(bX#r(bX#s(bX#u(bX#w(bX#y(bX#z(bX([(bX(m(bX(t(bX(u(bX![(bX%f(bX~Oa(bX'u(bX's(bX!V(bX!h(bXs(bX!d(bX~P4UO#]$eO~O$[$hO$^$gO$e$mO~OSfO![$nO$h$oO$j$qO~Oh%WOm%XOo$uOp$tOq$tOw%YOy%ZO{%[O!P$|O![$}O!f%aO!i$yO#g%bO$V%_O$r%]O$t%^O$w%`O(O$sO(QTO(TUO([$vO(t%OO(u%QOg(XP~O!i%cO~O!P%fO![%gO(O%eO~O!d%kO~Oa%lO'u%lO~O}%pO~P%[O(P!lO~P%[O%k%tO~P%[Oh%WO!i%cO(O%eO(P!lO~Oe%{O!i%cO(O%eO~O#s$SO~O}&QO![%}O!i&PO%g&TO(O%eO(P!lO(QTO(TUO`)SP~O!u#sO~O%p&VO!P)OX![)OX(O)OX~O(O&WO~O!r&]O#t!PO%g!QO%i!OO%j!OO%k!OO%n!RO%p!SO%s!TO%t!TO~Od&bOe&aO!u&_O%e&`O%x&^O~P;|Od&eOeyO![&dO!r&]O!uxO!y]O#t!PO%e}O%i!OO%j!OO%k!OO%n!RO%p!SO%s!TO%t!TO%v!UO~Ob&hO#]&kO%g&fO(P!lO~P=RO!i&lO!r&pO~O!i#oO~O![XO~Oa%lO't&xO'u%lO~Oa%lO't&{O'u%lO~Oa%lO't&}O'u%lO~O's]X!V]Xs]X!h]X&W]X![]X%f]X!d]X~P(qO!_'[O!`'TO!a'TO(P!lO(QTO(TUO~Op'RO!P'QO!X'UO(`'PO!Z(dP!Z(sP~P@YOk'_O![']O(O%eO~Oe'dO!i%cO(O%eO~O}&QO!i&PO~Op!nO!P!oO!y:lO#Q!pO#R!pO#T!pO#U!pO(P!lO(QTO(TUO(`!mO(j!sO~O!_'jO!`'iO!a'iO#S!pO#X'kO#Y'kO~PAtOa%lOh%WO!d#vO!i%cO'u%lO(m'mO~O!m'qO#]'oO~PCSOp!nO!P!oO(QTO(TUO(`!mO(j!sO~O![XOp(hX!P(hX!_(hX!`(hX!a(hX!y(hX#Q(hX#R(hX#S(hX#T(hX#U(hX#X(hX#Y(hX(P(hX(Q(hX(T(hX(`(hX(j(hX~O!`'iO!a'iO(P!lO~PCrO'z'uO'{'uO'|'wO~O_!}O(Q'yO(R!}O(S'yO~O_#QO(S'yO(T'yO(U#QO~Ou#SO!R#TO(]#TO(^'}O~O!X(PO!V'SX!V'YX!Y'SX!Y'YX~P+}O!Y(RO!V(cX~OP$]OR#zO[$cOo$QO}#yO!P#{O!Y(RO!i#xO!m$]O#O$SO#k$OO#l$PO#m$PO#n$PO#o$RO#p$SO#q$SO#r$bO#s$SO#u$TO#w$VO#y$XO#z$YO([VO(m$ZO(t#|O(u#}O~O!V(cX~PGfO!V(WO~O!V(pX!Y(pX!d(pX!h(pX(m(pX~O#](pX#h#aX!Z(pX~PIiO#](XO!V(rX!Y(rX~O!Y(YO!V(qX~O!V(]O~O#]$eO~PIiO!Z(^O~P`OR#zO}#yO!P#{O!i#xO([VOP!ka[!kao!ka!Y!ka!m!ka#O!ka#k!ka#l!ka#m!ka#n!ka#o!ka#p!ka#q!ka#r!ka#s!ka#u!ka#w!ka#y!ka#z!ka(m!ka(t!ka(u!ka~Oa!ka'u!ka's!ka!V!ka!h!kas!ka![!ka%f!ka!d!ka~PKPO!h(_O~O!d#vO#](`O(m'mO!Y(oXa(oX'u(oX~O!h(oX~PMlO!P%fO![%gO!y]O#f(eO#g(dO(O%eO~O!Y(fO!h(nX~O!h(hO~O!P%fO![%gO#g(dO(O%eO~OP(bXR(bX[(bXo(bX}(bX!P(bX!Y(bX!i(bX!m(bX#O(bX#k(bX#l(bX#m(bX#n(bX#o(bX#p(bX#q(bX#r(bX#s(bX#u(bX#w(bX#y(bX#z(bX([(bX(m(bX(t(bX(u(bX~O!d#vO!h(bX~P! YOR(jO}(iO!i#xO#P$dO!y!xa!P!xa~O!u!xa%e!xa![!xa#f!xa#g!xa(O!xa~P!#ZO!u(nO~OPYOQYOSfOd!jOe!iOmkOoYOpkOqkOwkOyYO{YO!PWO!TkO!UkO![XO!fuO!iZO!lYO!mYO!nYO!pvO!r!gO!u!hO$V!kO(O!dO(QTO(TUO([VO(j[O(yiO~Oh%WOm%XOo$uOp$tOq$tOw%YOy%ZO{;YO!P$|O![$}O!f<jO!i$yO#g;`O$V%_O$r;[O$t;^O$w%`O(O(rO(QTO(TUO([$vO(t%OO(u%QO~O#h(tO~O!X(vO!h(fP~P%[O(`(xO(j[O~O!P(zO!i#xO(`(xO(j[O~OP:kOQ:kOSfOd<fOe!iOmkOo:kOpkOqkOwkOy:kO{:kO!PWO!TkO!UkO![!eO!f:nO!iZO!l:kO!m:kO!n:kO!p:oO!r:rO!u!hO$V!kO(O)YO(QTO(TUO([VO(j[O(y<dO~O!Y$`Oa$oa'u$oa's$oa!h$oa!V$oa![$oa%f$oa!d$oa~O#t)`O~P!&_Oh%WOm%XOo$uOp$tOq$tOw%YOy%ZO{%[O!P$|O![$}O!f%aO!i$yO#g%bO$V%_O$r%]O$t%^O$w%`O(O(rO(QTO(TUO([$vO(t%OO(u%QO~Og(kP~P!+hO})eO!d)dO![$]X$Y$]X$[$]X$^$]X$e$]X~O!d)dO![(vX$Y(vX$[(vX$^(vX$e(vX~O})eO~P!-qO})eO![(vX$Y(vX$[(vX$^(vX$e(vX~O![)gO$Y)kO$[)fO$^)fO$e)lO~O!X)oO~P!(oO$[$hO$^$gO$e)sO~Ok$xX}$xX!P$xX#P$xX(t$xX(u$xX~OgjXg$xXkjX!YjX#]jX~P!/gOp)uO~Ou)vO(])wO(^)yO~Ok*SO}){O!P)|O(t%OO(u%QO~Og)zO~P!0pOg*TO~Oh%WOm%XOo$uOp$tOq$tOw%YOy%ZO{;YO!P*VO![*WO!f<jO!i$yO#g;`O$V%_O$r;[O$t;^O$w%`O(QTO(TUO([$vO(t%OO(u%QO~O!X*ZO(O*UO!h(zP~P!1_O#h*]O~O!i*^O~Oh%WOm%XOo$uOp$tOq$tOw%YOy%ZO{;YO!P$|O![$}O!f<jO!i$yO#g;`O$V%_O$r;[O$t;^O$w%`O(O*`O(QTO(TUO([$vO(t%OO(u%QO~O!X*cO!V({P~P!3^Oo*oO!P*gO!_*mO!`*fO!a*fO!i*^O#X*nO%]*iO(P!lO(`!mO~O!Z*lO~P!5RO#P$dOk(ZX}(ZX!P(ZX(t(ZX(u(ZX!Y(ZX#](ZX~Og(ZX#}(ZX~P!5zOk*tO#]*sOg(YX!Y(YX~O!Y*uOg(XX~O(O&WOg(XP~O!i*|O~O(O(rO~Om+QO!P%fO!X#iO![%gO!y]O#f#lO#g#iO(O%eO!h(nP~O!d#vO#h+RO~O!P%fO!X+TO!Y(YO![%gO(O%eO!V(qP~Op'XO!P+VO!X+UO(QTO(TUO(`(xO~O!Z(sP~P!8uO!Y+WOa)PX'u)PX~OP$]OR#zO[$cOo$QO}#yO!P#{O!i#xO!m$]O#O$SO#k$OO#l$PO#m$PO#n$PO#o$RO#p$SO#q$SO#r$bO#s$SO#u$TO#w$VO#y$XO#z$YO([VO(m$ZO(t#|O(u#}O~Oa!ga!Y!ga'u!ga's!ga!V!ga!h!gas!ga![!ga%f!ga!d!ga~P!9mOR#zO}#yO!P#{O!i#xO([VOP!oa[!oao!oa!Y!oa!m!oa#O!oa#k!oa#l!oa#m!oa#n!oa#o!oa#p!oa#q!oa#r!oa#s!oa#u!oa#w!oa#y!oa#z!oa(m!oa(t!oa(u!oa~Oa!oa'u!oa's!oa!V!oa!h!oas!oa![!oa%f!oa!d!oa~P!<TOR#zO}#yO!P#{O!i#xO([VOP!qa[!qao!qa!Y!qa!m!qa#O!qa#k!qa#l!qa#m!qa#n!qa#o!qa#p!qa#q!qa#r!qa#s!qa#u!qa#w!qa#y!qa#z!qa(m!qa(t!qa(u!qa~Oa!qa'u!qa's!qa!V!qa!h!qas!qa![!qa%f!qa!d!qa~P!>kOh%WOk+aO![']O%f+`O~O!d+cOa(WX![(WX'u(WX!Y(WX~Oa%lO![XO'u%lO~Oh%WO!i%cO~Oh%WO!i%cO(O%eO~O!d#vO#h(tO~Ob+nO%g+oO(O+kO(QTO(TUO!Z)TP~O!Y+pO`)SX~O[+tO~O`+uO~O![%}O(O%eO(P!lO`)SP~Oh%WO#]+zO~Oh%WOk+}O![$}O~O![,PO~O},RO![XO~O%k%tO~O!u,WO~Oe,]O~Ob,^O(O#nO(QTO(TUO!Z)RP~Oe%{O~O%g!QO(O&WO~P=RO[,cO`,bO~OPYOQYOSfOdzOeyOmkOoYOpkOqkOwkOyYO{YO!PWO!TkO!UkO!fuO!iZO!lYO!mYO!nYO!pvO!uxO!y]O%e}O(QTO(TUO([VO(j[O(yiO~O![!eO!r!gO$V!kO(O!dO~P!EkO`,bOa%lO'u%lO~OPYOQYOSfOd!jOe!iOmkOoYOpkOqkOwkOyYO{YO!PWO!TkO!UkO![!eO!fuO!iZO!lYO!mYO!nYO!pvO!u!hO$V!kO(O!dO(QTO(TUO([VO(j[O(yiO~Oa,hO!rwO#t!OO%i!OO%j!OO%k!OO~P!HTO!i&lO~O&Y,nO~O![,pO~O&k,rO&m,sOP&haQ&haS&haY&haa&had&hae&ham&hao&hap&haq&haw&hay&ha{&ha!P&ha!T&ha!U&ha![&ha!f&ha!i&ha!l&ha!m&ha!n&ha!p&ha!r&ha!u&ha!y&ha#t&ha$V&ha%e&ha%g&ha%i&ha%j&ha%k&ha%n&ha%p&ha%s&ha%t&ha%v&ha&S&ha&Y&ha&[&ha&^&ha&`&ha&c&ha&i&ha&o&ha&q&ha&s&ha&u&ha&w&ha's&ha(O&ha(Q&ha(T&ha([&ha(j&ha(y&ha!Z&ha&a&hab&ha&f&ha~O(O,xO~Oh!bX!Y!OX!Z!OX!d!OX!d!bX!i!bX#]!OX~O!Y!bX!Z!bX~P# ZO!d,}O#],|Oh(eX!Y#eX!Y(eX!Z#eX!Z(eX!d(eX!i(eX~Oh%WO!d-PO!i%cO!Y!^X!Z!^X~Op!nO!P!oO(QTO(TUO(`!mO~OP:kOQ:kOSfOd<fOe!iOmkOo:kOpkOqkOwkOy:kO{:kO!PWO!TkO!UkO![!eO!f:nO!iZO!l:kO!m:kO!n:kO!p:oO!r:rO!u!hO$V!kO(QTO(TUO([VO(j[O(y<dO~O(O;fO~P##_O!Y-TO!Z(dX~O!Z-VO~O!d,}O#],|O!Y#eX!Z#eX~O!Y-WO!Z(sX~O!Z-YO~O!`-ZO!a-ZO(P!lO~P#!|O!Z-^O~P'_Ok-aO![']O~O!V-fO~Op!xa!_!xa!`!xa!a!xa#Q!xa#R!xa#S!xa#T!xa#U!xa#X!xa#Y!xa(P!xa(Q!xa(T!xa(`!xa(j!xa~P!#ZO!m-kO#]-iO~PCSO!`-mO!a-mO(P!lO~PCrOa%lO#]-iO'u%lO~Oa%lO!d#vO#]-iO'u%lO~Oa%lO!d#vO!m-kO#]-iO'u%lO(m'mO~O'z'uO'{'uO'|-rO~Os-sO~O!V'Sa!Y'Sa~P!9mO!X-wO!V'SX!Y'SX~P%[O!Y(RO!V(ca~O!V(ca~PGfO!Y(YO!V(qa~O!P%fO!X-{O![%gO(O%eO!V'YX!Y'YX~O#]-}O!Y(oa!h(oaa(oa'u(oa~O!d#vO~P#+eO!Y(fO!h(na~O!P%fO![%gO#g.RO(O%eO~Om.WO!P%fO!X.TO![%gO!y]O#f.VO#g.TO(O%eO!Y']X!h']X~OR.[O!i#xO~Oh%WOk._O![']O%f.^O~Oa#`i!Y#`i'u#`i's#`i!V#`i!h#`is#`i![#`i%f#`i!d#`i~P!9mOk<pO}){O!P)|O(t%OO(u%QO~O#h#[aa#[a#]#[a'u#[a!Y#[a!h#[a![#[a!V#[a~P#.aO#h(ZXP(ZXR(ZX[(ZXa(ZXo(ZX!i(ZX!m(ZX#O(ZX#k(ZX#l(ZX#m(ZX#n(ZX#o(ZX#p(ZX#q(ZX#r(ZX#s(ZX#u(ZX#w(ZX#y(ZX#z(ZX'u(ZX([(ZX(m(ZX!h(ZX!V(ZX's(ZXs(ZX![(ZX%f(ZX!d(ZX~P!5zO!Y.lO!h(fX~P!9mO!h.oO~O!V.qO~OP$]OR#zO}#yO!P#{O!i#xO!m$]O([VO[#jia#jio#ji!Y#ji#O#ji#l#ji#m#ji#n#ji#o#ji#p#ji#q#ji#r#ji#s#ji#u#ji#w#ji#y#ji#z#ji'u#ji(m#ji(t#ji(u#ji's#ji!V#ji!h#jis#ji![#ji%f#ji!d#ji~O#k#ji~P#1|O#k$OO~P#1|OP$]OR#zO}#yO!P#{O!i#xO!m$]O#k$OO#l$PO#m$PO#n$PO([VO[#jia#ji!Y#ji#O#ji#o#ji#p#ji#q#ji#r#ji#s#ji#u#ji#w#ji#y#ji#z#ji'u#ji(m#ji(t#ji(u#ji's#ji!V#ji!h#jis#ji![#ji%f#ji!d#ji~Oo#ji~P#4kOo$QO~P#4kOP$]OR#zOo$QO}#yO!P#{O!i#xO!m$]O#k$OO#l$PO#m$PO#n$PO#o$RO([VOa#ji!Y#ji#u#ji#w#ji#y#ji#z#ji'u#ji(m#ji(t#ji(u#ji's#ji!V#ji!h#jis#ji![#ji%f#ji!d#ji~O[#ji#O#ji#p#ji#q#ji#r#ji#s#ji~P#7YO[$cO#O$SO#p$SO#q$SO#r$bO#s$SO~P#7YOP$]OR#zO[$cOo$QO}#yO!P#{O!i#xO!m$]O#O$SO#k$OO#l$PO#m$PO#n$PO#o$RO#p$SO#q$SO#r$bO#s$SO#u$TO([VO(u#}Oa#ji!Y#ji#y#ji#z#ji'u#ji(m#ji(t#ji's#ji!V#ji!h#jis#ji![#ji%f#ji!d#ji~O#w$VO~P#:WO#w#ji~P#:WOP$]OR#zO[$cOo$QO}#yO!P#{O!i#xO!m$]O#O$SO#k$OO#l$PO#m$PO#n$PO#o$RO#p$SO#q$SO#r$bO#s$SO#u$TO([VOa#ji!Y#ji#y#ji#z#ji'u#ji(m#ji's#ji!V#ji!h#jis#ji![#ji%f#ji!d#ji~O#w#ji(t#ji(u#ji~P#<uO#w$VO(t#|O(u#}O~P#<uOP$]OR#zO[$cOo$QO}#yO!P#{O!i#xO!m$]O#O$SO#k$OO#l$PO#m$PO#n$PO#o$RO#p$SO#q$SO#r$bO#s$SO#u$TO#w$VO#y$XO([VO(t#|O(u#}O~Oa#ji!Y#ji#z#ji'u#ji(m#ji's#ji!V#ji!h#jis#ji![#ji%f#ji!d#ji~P#?jOP]XR]X[]Xo]X}]X!P]X!i]X!m]X#O]X#P]X#]]X#hfX#k]X#l]X#m]X#n]X#o]X#p]X#q]X#r]X#s]X#u]X#w]X#y]X#z]X$P]X([]X(m]X(t]X(u]X!Y]X!Z]X~O#}]X~P#BQOP$]OR#zO[;SOo:vO}#yO!P#{O!i#xO!m$]O#O:xO#k:tO#l:uO#m:uO#n:uO#o:wO#p:xO#q:xO#r;RO#s:xO#u:yO#w:{O#y:}O#z;OO([VO(m$ZO(t#|O(u#}O~O#}.sO~P#D_O#P$dO#];TO$P;TO#}(bX!Z(bX~P! YOa'`a!Y'`a'u'`a's'`a!h'`a!V'`as'`a!['`a%f'`a!d'`a~P!9mOP#jiR#ji[#jia#jio#ji!Y#ji!i#ji!m#ji#O#ji#k#ji#l#ji#m#ji#n#ji#o#ji#p#ji#q#ji#r#ji#s#ji#u#ji#w#ji#y#ji#z#ji'u#ji([#ji(m#ji's#ji!V#ji!h#jis#ji![#ji%f#ji!d#ji~P#.aO!Y.wOg(kX~P!0pOg.yO~Oa$Oi!Y$Oi'u$Oi's$Oi!V$Oi!h$Ois$Oi![$Oi%f$Oi!d$Oi~P!9mO$[.zO$^.zO~O$[.{O$^.{O~O!d)dO#].|O![$bX$Y$bX$[$bX$^$bX$e$bX~O!X.}O~O![)gO$Y/PO$[)fO$^)fO$e/QO~O!Y;PO!Z(aX~P#D_O!Z/RO~O!d)dO$e(vX~O$e/TO~Ou)vO(])wO(^/WO~O!V/[O~P!&_O(t%OOk%^a}%^a!P%^a(u%^a!Y%^a#]%^a~Og%^a#}%^a~P#L{O(u%QOk%`a}%`a!P%`a(t%`a!Y%`a#]%`a~Og%`a#}%`a~P#MnO!YfX!dfX!hfX!h$xX(mfX~P!/gO!X/eO!Y(YO(O/dO!V(qP!V({P~P!1_Oo*oO!_*mO!`*fO!a*fO!i*^O#X*nO%]*iO(P!lO~Op'XO!P/fO!X+UO!Z*lO(QTO(TUO(`;cO!Z(sP~P$ XO!h/gO~P#.aO!Y/hO!d#vO(m'mO!h(zX~O!h/mO~O!P%fO!X*ZO![%gO(O%eO!h(zP~O#h/oO~O!V$xX!Y$xX!d%PX~P!/gO!Y/pO!V({X~P#.aO!d/rO~O!V/tO~Oh%WOo/xO!d#vO!i%cO(m'mO~O(O/zO~O!d+cO~Oa%lO!Y0OO'u%lO~O!Z0QO~P!5RO!`0RO!a0RO(P!lO(`!mO~O!P0TO(`!mO~O#X0UO~Og%^a!Y%^a#]%^a#}%^a~P!0pOg%`a!Y%`a#]%`a#}%`a~P!0pO(O&WOg'iX!Y'iX~O!Y*uOg(Xa~Og0_O~OR0`O}0`O!P0aO#P$dOkza(tza(uza!Yza#]za~Ogza#}za~P$&zO}){O!P)|Ok$qa(t$qa(u$qa!Y$qa#]$qa~Og$qa#}$qa~P$'sO}){O!P)|Ok$sa(t$sa(u$sa!Y$sa#]$sa~Og$sa#}$sa~P$(fO#h0dO~Og%Ra!Y%Ra#]%Ra#}%Ra~P!0pO!d#vO~O#h0gO~O!Y+WOa)Pa'u)Pa~OR#zO}#yO!P#{O!i#xO([VOP!oi[!oio!oi!Y!oi!m!oi#O!oi#k!oi#l!oi#m!oi#n!oi#o!oi#p!oi#q!oi#r!oi#s!oi#u!oi#w!oi#y!oi#z!oi(m!oi(t!oi(u!oi~Oa!oi'u!oi's!oi!V!oi!h!ois!oi![!oi%f!oi!d!oi~P$*TOh%WOo$uOp$tOq$tOw%YOy%ZO{;YO!P$|O![$}O!f<jO!i$yO#g;`O$V%_O$r;[O$t;^O$w%`O(QTO(TUO([$vO(t%OO(u%QO~Om0pO(O0oO~P$,kO!d+cOa(Wa![(Wa'u(Wa!Y(Wa~O#h0vO~O[]X!YfX!ZfX~O!Y0wO!Z)TX~O!Z0yO~O[0zO~Ob0|O(O+kO(QTO(TUO~O![%}O(O%eO`'qX!Y'qX~O!Y+pO`)Sa~O!h1PO~P!9mO[1SO~O`1TO~O#]1WO~Ok1ZO![$}O~O(`(xO!Z)QP~Oh%WOk1dO![1aO%f1cO~O[1nO!Y1lO!Z)RX~O!Z1oO~O`1qOa%lO'u%lO~O(O#nO(QTO(TUO~O#P$dO#]$eO$P$eOP(bXR(bX[(bXo(bX}(bX!P(bX!Y(bX!i(bX!m(bX#O(bX#k(bX#l(bX#m(bX#n(bX#o(bX#p(bX#q(bX#r(bX#u(bX#w(bX#y(bX#z(bX([(bX(m(bX(t(bX(u(bX~O#s1tO&W1uOa(bX~P$2RO#]$eO#s1tO&W1uO~Oa1wO~P%[Oa1yO~O&a1|OP&_iQ&_iS&_iY&_ia&_id&_ie&_im&_io&_ip&_iq&_iw&_iy&_i{&_i!P&_i!T&_i!U&_i![&_i!f&_i!i&_i!l&_i!m&_i!n&_i!p&_i!r&_i!u&_i!y&_i#t&_i$V&_i%e&_i%g&_i%i&_i%j&_i%k&_i%n&_i%p&_i%s&_i%t&_i%v&_i&S&_i&Y&_i&[&_i&^&_i&`&_i&c&_i&i&_i&o&_i&q&_i&s&_i&u&_i&w&_i's&_i(O&_i(Q&_i(T&_i([&_i(j&_i(y&_i!Z&_ib&_i&f&_i~Ob2SO!Z2QO&f2RO~P`O![XO!i2UO~O&m,sOP&hiQ&hiS&hiY&hia&hid&hie&him&hio&hip&hiq&hiw&hiy&hi{&hi!P&hi!T&hi!U&hi![&hi!f&hi!i&hi!l&hi!m&hi!n&hi!p&hi!r&hi!u&hi!y&hi#t&hi$V&hi%e&hi%g&hi%i&hi%j&hi%k&hi%n&hi%p&hi%s&hi%t&hi%v&hi&S&hi&Y&hi&[&hi&^&hi&`&hi&c&hi&i&hi&o&hi&q&hi&s&hi&u&hi&w&hi's&hi(O&hi(Q&hi(T&hi([&hi(j&hi(y&hi!Z&hi&a&hib&hi&f&hi~O!V2[O~O!Y!^a!Z!^a~P#D_Op!nO!P!oO!X2bO(`!mO!Y'TX!Z'TX~P@YO!Y-TO!Z(da~O!Y'ZX!Z'ZX~P!8uO!Y-WO!Z(sa~O!Z2iO~P'_Oa%lO#]2rO'u%lO~Oa%lO!d#vO#]2rO'u%lO~Oa%lO!d#vO!m2vO#]2rO'u%lO(m'mO~Oa%lO'u%lO~P!9mO!Y$`Os$oa~O!V'Si!Y'Si~P!9mO!Y(RO!V(ci~O!Y(YO!V(qi~O!V(ri!Y(ri~P!9mO!Y(oi!h(oia(oi'u(oi~P!9mO#]2xO!Y(oi!h(oia(oi'u(oi~O!Y(fO!h(ni~O!P%fO![%gO!y]O#f2}O#g2|O(O%eO~O!P%fO![%gO#g2|O(O%eO~Ok3UO![']O%f3TO~Oh%WOk3UO![']O%f3TO~O#h%^aP%^aR%^a[%^aa%^ao%^a!i%^a!m%^a#O%^a#k%^a#l%^a#m%^a#n%^a#o%^a#p%^a#q%^a#r%^a#s%^a#u%^a#w%^a#y%^a#z%^a'u%^a([%^a(m%^a!h%^a!V%^a's%^as%^a![%^a%f%^a!d%^a~P#L{O#h%`aP%`aR%`a[%`aa%`ao%`a!i%`a!m%`a#O%`a#k%`a#l%`a#m%`a#n%`a#o%`a#p%`a#q%`a#r%`a#s%`a#u%`a#w%`a#y%`a#z%`a'u%`a([%`a(m%`a!h%`a!V%`a's%`as%`a![%`a%f%`a!d%`a~P#MnO#h%^aP%^aR%^a[%^aa%^ao%^a!Y%^a!i%^a!m%^a#O%^a#k%^a#l%^a#m%^a#n%^a#o%^a#p%^a#q%^a#r%^a#s%^a#u%^a#w%^a#y%^a#z%^a'u%^a([%^a(m%^a!h%^a!V%^a's%^a#]%^as%^a![%^a%f%^a!d%^a~P#.aO#h%`aP%`aR%`a[%`aa%`ao%`a!Y%`a!i%`a!m%`a#O%`a#k%`a#l%`a#m%`a#n%`a#o%`a#p%`a#q%`a#r%`a#s%`a#u%`a#w%`a#y%`a#z%`a'u%`a([%`a(m%`a!h%`a!V%`a's%`a#]%`as%`a![%`a%f%`a!d%`a~P#.aO#hzaPza[zaazaoza!iza!mza#Oza#kza#lza#mza#nza#oza#pza#qza#rza#sza#uza#wza#yza#zza'uza([za(mza!hza!Vza'szasza![za%fza!dza~P$&zO#h$qaP$qaR$qa[$qaa$qao$qa!i$qa!m$qa#O$qa#k$qa#l$qa#m$qa#n$qa#o$qa#p$qa#q$qa#r$qa#s$qa#u$qa#w$qa#y$qa#z$qa'u$qa([$qa(m$qa!h$qa!V$qa's$qas$qa![$qa%f$qa!d$qa~P$'sO#h$saP$saR$sa[$saa$sao$sa!i$sa!m$sa#O$sa#k$sa#l$sa#m$sa#n$sa#o$sa#p$sa#q$sa#r$sa#s$sa#u$sa#w$sa#y$sa#z$sa'u$sa([$sa(m$sa!h$sa!V$sa's$sas$sa![$sa%f$sa!d$sa~P$(fO#h%RaP%RaR%Ra[%Raa%Rao%Ra!Y%Ra!i%Ra!m%Ra#O%Ra#k%Ra#l%Ra#m%Ra#n%Ra#o%Ra#p%Ra#q%Ra#r%Ra#s%Ra#u%Ra#w%Ra#y%Ra#z%Ra'u%Ra([%Ra(m%Ra!h%Ra!V%Ra's%Ra#]%Ras%Ra![%Ra%f%Ra!d%Ra~P#.aOa#`q!Y#`q'u#`q's#`q!V#`q!h#`qs#`q![#`q%f#`q!d#`q~P!9mO!X3^O!Y'UX!h'UX~P%[O!Y.lO!h(fa~O!Y.lO!h(fa~P!9mO!V3aO~O#}!ka!Z!ka~PKPO#}!ga!Y!ga!Z!ga~P#D_O#}!oa!Z!oa~P!<TO#}!qa!Z!qa~P!>kOg'XX!Y'XX~P!+hO!Y.wOg(ka~OSfO![3uO$c3vO~O!Z3zO~Os3{O~P#.aOa$lq!Y$lq'u$lq's$lq!V$lq!h$lqs$lq![$lq%f$lq!d$lq~P!9mO!V3|O~P#.aO}){O!P)|O(u%QOk'ea(t'ea!Y'ea#]'ea~Og'ea#}'ea~P%+]O}){O!P)|Ok'ga(t'ga(u'ga!Y'ga#]'ga~Og'ga#}'ga~P%,OO(m$ZO~P#.aO!VfX!V$xX!YfX!Y$xX!d%PX#]fX~P!/gO(O;lO~P!1_OmkO(O4OO~P.iO!P%fO!X4QO![%gO(O%eO!Y'aX!h'aX~O!Y/hO!h(za~O!Y/hO!d#vO!h(za~O!Y/hO!d#vO(m'mO!h(za~Og$zi!Y$zi#]$zi#}$zi~P!0pO!X4YO!V'cX!Y'cX~P!3^O!Y/pO!V({a~O!Y/pO!V({a~P#.aO!d#vO#s4bO~Oo4eO!d#vO(m'mO~O(t%OOk%^i}%^i!P%^i(u%^i!Y%^i#]%^i~Og%^i#}%^i~P%0^O(u%QOk%`i}%`i!P%`i(t%`i!Y%`i#]%`i~Og%`i#}%`i~P%1POg(Yi!Y(Yi~P!0pO#]4lOg(Yi!Y(Yi~P!0pO!h4oO~Oa$mq!Y$mq'u$mq's$mq!V$mq!h$mqs$mq![$mq%f$mq!d$mq~P!9mO!V4sO~O!Y4tO![(|X~P#.aOa$xX![$xX%Z]X'u$xX!Y$xX~P!/gO%Z4wOalXklX}lX!PlX![lX'ulX(tlX(ulX!YlX~O%Z4wO~Ob4}O%g5OO(O+kO(QTO(TUO!Y'pX!Z'pX~O!Y0wO!Z)Ta~O[5SO~O`5TO~Oa%lO'u%lO~P#.aO![$}O~P#.aO!Y5]O#]5_O!Z)QX~O!Z5`O~Op!nO!P5aO!_!yO!`!vO!a!vO!y:lO#Q!pO#R!pO#S!pO#T!pO#U!pO#X5fO#Y!zO(P!lO(QTO(TUO(`!mO(j!sO~O!Z5eO~P%6ZOk5kO![1aO%f5jO~Oh%WOk5kO![1aO%f5jO~Ob5rO(O#nO(QTO(TUO!Y'oX!Z'oX~O!Y1lO!Z)Ra~O(QTO(TUO(`5tO~O`5xO~O#s5{O&W5|O~PMlO!h5}O~P%[Oa6PO~Oa6PO~P%[Ob2SO!Z6UO&f2RO~P`O!d6WO~O!d6YOh(ei!Y(ei!Z(ei!d(ei!i(ei~O!Y#ei!Z#ei~P#D_O#]6ZO!Y#ei!Z#ei~O!Y!^i!Z!^i~P#D_Oa%lO#]6dO'u%lO~Oa%lO!d#vO#]6dO'u%lO~O!Y(oq!h(oqa(oq'u(oq~P!9mO!Y(fO!h(nq~O!P%fO![%gO#g6kO(O%eO~O![']O%f6nO~Ok6rO![']O%f6nO~O#h'eaP'eaR'ea['eaa'eao'ea!i'ea!m'ea#O'ea#k'ea#l'ea#m'ea#n'ea#o'ea#p'ea#q'ea#r'ea#s'ea#u'ea#w'ea#y'ea#z'ea'u'ea(['ea(m'ea!h'ea!V'ea's'eas'ea!['ea%f'ea!d'ea~P%+]O#h'gaP'gaR'ga['gaa'gao'ga!i'ga!m'ga#O'ga#k'ga#l'ga#m'ga#n'ga#o'ga#p'ga#q'ga#r'ga#s'ga#u'ga#w'ga#y'ga#z'ga'u'ga(['ga(m'ga!h'ga!V'ga's'gas'ga!['ga%f'ga!d'ga~P%,OO#h$ziP$ziR$zi[$zia$zio$zi!Y$zi!i$zi!m$zi#O$zi#k$zi#l$zi#m$zi#n$zi#o$zi#p$zi#q$zi#r$zi#s$zi#u$zi#w$zi#y$zi#z$zi'u$zi([$zi(m$zi!h$zi!V$zi's$zi#]$zis$zi![$zi%f$zi!d$zi~P#.aO#h%^iP%^iR%^i[%^ia%^io%^i!i%^i!m%^i#O%^i#k%^i#l%^i#m%^i#n%^i#o%^i#p%^i#q%^i#r%^i#s%^i#u%^i#w%^i#y%^i#z%^i'u%^i([%^i(m%^i!h%^i!V%^i's%^is%^i![%^i%f%^i!d%^i~P%0^O#h%`iP%`iR%`i[%`ia%`io%`i!i%`i!m%`i#O%`i#k%`i#l%`i#m%`i#n%`i#o%`i#p%`i#q%`i#r%`i#s%`i#u%`i#w%`i#y%`i#z%`i'u%`i([%`i(m%`i!h%`i!V%`i's%`is%`i![%`i%f%`i!d%`i~P%1PO!Y'Ua!h'Ua~P!9mO!Y.lO!h(fi~O#}#`i!Y#`i!Z#`i~P#D_OP$]OR#zO}#yO!P#{O!i#xO!m$]O([VO[#jio#ji#O#ji#l#ji#m#ji#n#ji#o#ji#p#ji#q#ji#r#ji#s#ji#u#ji#w#ji#y#ji#z#ji#}#ji(m#ji(t#ji(u#ji!Y#ji!Z#ji~O#k#ji~P%HpO#k:tO~P%HpOP$]OR#zO}#yO!P#{O!i#xO!m$]O#k:tO#l:uO#m:uO#n:uO([VO[#ji#O#ji#o#ji#p#ji#q#ji#r#ji#s#ji#u#ji#w#ji#y#ji#z#ji#}#ji(m#ji(t#ji(u#ji!Y#ji!Z#ji~Oo#ji~P%JxOo:vO~P%JxOP$]OR#zOo:vO}#yO!P#{O!i#xO!m$]O#k:tO#l:uO#m:uO#n:uO#o:wO([VO#u#ji#w#ji#y#ji#z#ji#}#ji(m#ji(t#ji(u#ji!Y#ji!Z#ji~O[#ji#O#ji#p#ji#q#ji#r#ji#s#ji~P%MQO[;SO#O:xO#p:xO#q:xO#r;RO#s:xO~P%MQOP$]OR#zO[;SOo:vO}#yO!P#{O!i#xO!m$]O#O:xO#k:tO#l:uO#m:uO#n:uO#o:wO#p:xO#q:xO#r;RO#s:xO#u:yO([VO(u#}O#y#ji#z#ji#}#ji(m#ji(t#ji!Y#ji!Z#ji~O#w:{O~P& iO#w#ji~P& iOP$]OR#zO[;SOo:vO}#yO!P#{O!i#xO!m$]O#O:xO#k:tO#l:uO#m:uO#n:uO#o:wO#p:xO#q:xO#r;RO#s:xO#u:yO([VO#y#ji#z#ji#}#ji(m#ji!Y#ji!Z#ji~O#w#ji(t#ji(u#ji~P&#qO#w:{O(t#|O(u#}O~P&#qOP$]OR#zO[;SOo:vO}#yO!P#{O!i#xO!m$]O#O:xO#k:tO#l:uO#m:uO#n:uO#o:wO#p:xO#q:xO#r;RO#s:xO#u:yO#w:{O#y:}O([VO(t#|O(u#}O~O#z#ji#}#ji(m#ji!Y#ji!Z#ji~P&&POa#{y!Y#{y'u#{y's#{y!V#{y!h#{ys#{y![#{y%f#{y!d#{y~P!9mOk<qO}){O!P)|O(t%OO(u%QO~OP#jiR#ji[#jio#ji!i#ji!m#ji#O#ji#k#ji#l#ji#m#ji#n#ji#o#ji#p#ji#q#ji#r#ji#s#ji#u#ji#w#ji#y#ji#z#ji#}#ji([#ji(m#ji!Y#ji!Z#ji~P&(tO#P$dOP(ZXR(ZX[(ZXk(ZXo(ZX}(ZX!P(ZX!i(ZX!m(ZX#O(ZX#k(ZX#l(ZX#m(ZX#n(ZX#o(ZX#p(ZX#q(ZX#r(ZX#s(ZX#u(ZX#w(ZX#y(ZX#z(ZX#}(ZX([(ZX(m(ZX(t(ZX(u(ZX!Y(ZX!Z(ZX~O#}$Oi!Y$Oi!Z$Oi~P#D_O#}!oi!Z!oi~P$*TOg'Xa!Y'Xa~P!0pO!Z7UO~O!Y'`a!Z'`a~P#D_OP]XR]X[]Xo]X}]X!P]X!V]X!Y]X!i]X!m]X#O]X#P]X#]]X#hfX#k]X#l]X#m]X#n]X#o]X#p]X#q]X#r]X#s]X#u]X#w]X#y]X#z]X$P]X([]X(m]X(t]X(u]X~O!d%WX#s%WX~P&-}O!d#vO(m'mO!Y'aa!h'aa~O!Y/hO!h(zi~O!Y/hO!d#vO!h(zi~Og$zq!Y$zq#]$zq#}$zq~P!0pO!V'ca!Y'ca~P#.aO!d7]O~O!Y/pO!V({i~P#.aO!Y/pO!V({i~O!V7aO~O!d#vO#s7fO~Oo7gO!d#vO(m'mO~O}){O!P)|O(u%QOk'fa(t'fa!Y'fa#]'fa~Og'fa#}'fa~P&2mO}){O!P)|Ok'ha(t'ha(u'ha!Y'ha#]'ha~Og'ha#}'ha~P&3`O!V7iO~Og$|q!Y$|q#]$|q#}$|q~P!0pOa$my!Y$my'u$my's$my!V$my!h$mys$my![$my%f$my!d$my~P!9mO!d6YO~O!Y4tO![(|a~O![']OP$SaR$Sa[$Sao$Sa}$Sa!P$Sa!Y$Sa!i$Sa!m$Sa#O$Sa#k$Sa#l$Sa#m$Sa#n$Sa#o$Sa#p$Sa#q$Sa#r$Sa#s$Sa#u$Sa#w$Sa#y$Sa#z$Sa([$Sa(m$Sa(t$Sa(u$Sa~O%f6nO~P&5iOa#`y!Y#`y'u#`y's#`y!V#`y!h#`ys#`y![#`y%f#`y!d#`y~P!9mO[7nO~Ob7pO(O+kO(QTO(TUO~O!Y0wO!Z)Ti~O`7tO~O(`(xO!Y'lX!Z'lX~O!Y5]O!Z)Qa~O!Z7}O~P%6ZOp!nO!P8OO(QTO(TUO(`!mO(j!sO~O![1aO~O![1aO%f8QO~Ok8TO![1aO%f8QO~O[8YO!Y'oa!Z'oa~O!Y1lO!Z)Ri~O!h8^O~O!h8_O~O!h8bO~O!h8bO~P%[Oa8dO~O!d8eO~O!h8fO~O!Y(ri!Z(ri~P#D_Oa%lO#]8nO'u%lO~O!Y(oy!h(oya(oy'u(oy~P!9mO!Y(fO!h(ny~O%f8qO~P&5iO![']O%f8qO~O#h$zqP$zqR$zq[$zqa$zqo$zq!Y$zq!i$zq!m$zq#O$zq#k$zq#l$zq#m$zq#n$zq#o$zq#p$zq#q$zq#r$zq#s$zq#u$zq#w$zq#y$zq#z$zq'u$zq([$zq(m$zq!h$zq!V$zq's$zq#]$zqs$zq![$zq%f$zq!d$zq~P#.aO#h'faP'faR'fa['faa'fao'fa!i'fa!m'fa#O'fa#k'fa#l'fa#m'fa#n'fa#o'fa#p'fa#q'fa#r'fa#s'fa#u'fa#w'fa#y'fa#z'fa'u'fa(['fa(m'fa!h'fa!V'fa's'fas'fa!['fa%f'fa!d'fa~P&2mO#h'haP'haR'ha['haa'hao'ha!i'ha!m'ha#O'ha#k'ha#l'ha#m'ha#n'ha#o'ha#p'ha#q'ha#r'ha#s'ha#u'ha#w'ha#y'ha#z'ha'u'ha(['ha(m'ha!h'ha!V'ha's'has'ha!['ha%f'ha!d'ha~P&3`O#h$|qP$|qR$|q[$|qa$|qo$|q!Y$|q!i$|q!m$|q#O$|q#k$|q#l$|q#m$|q#n$|q#o$|q#p$|q#q$|q#r$|q#s$|q#u$|q#w$|q#y$|q#z$|q'u$|q([$|q(m$|q!h$|q!V$|q's$|q#]$|qs$|q![$|q%f$|q!d$|q~P#.aO!Y'Ui!h'Ui~P!9mO#}#`q!Y#`q!Z#`q~P#D_O(t%OOP%^aR%^a[%^ao%^a!i%^a!m%^a#O%^a#k%^a#l%^a#m%^a#n%^a#o%^a#p%^a#q%^a#r%^a#s%^a#u%^a#w%^a#y%^a#z%^a#}%^a([%^a(m%^a!Y%^a!Z%^a~Ok%^a}%^a!P%^a(u%^a~P&FgO(u%QOP%`aR%`a[%`ao%`a!i%`a!m%`a#O%`a#k%`a#l%`a#m%`a#n%`a#o%`a#p%`a#q%`a#r%`a#s%`a#u%`a#w%`a#y%`a#z%`a#}%`a([%`a(m%`a!Y%`a!Z%`a~Ok%`a}%`a!P%`a(t%`a~P&HkOk<qO}){O!P)|O(u%QO~P&FgOk<qO}){O!P)|O(t%OO~P&HkOR0`O}0`O!P0aO#P$dOPza[zakzaoza!iza!mza#Oza#kza#lza#mza#nza#oza#pza#qza#rza#sza#uza#wza#yza#zza#}za([za(mza(tza(uza!Yza!Zza~O}){O!P)|OP$qaR$qa[$qak$qao$qa!i$qa!m$qa#O$qa#k$qa#l$qa#m$qa#n$qa#o$qa#p$qa#q$qa#r$qa#s$qa#u$qa#w$qa#y$qa#z$qa#}$qa([$qa(m$qa(t$qa(u$qa!Y$qa!Z$qa~O}){O!P)|OP$saR$sa[$sak$sao$sa!i$sa!m$sa#O$sa#k$sa#l$sa#m$sa#n$sa#o$sa#p$sa#q$sa#r$sa#s$sa#u$sa#w$sa#y$sa#z$sa#}$sa([$sa(m$sa(t$sa(u$sa!Y$sa!Z$sa~OP%RaR%Ra[%Rao%Ra!i%Ra!m%Ra#O%Ra#k%Ra#l%Ra#m%Ra#n%Ra#o%Ra#p%Ra#q%Ra#r%Ra#s%Ra#u%Ra#w%Ra#y%Ra#z%Ra#}%Ra([%Ra(m%Ra!Y%Ra!Z%Ra~P&(tO#}$lq!Y$lq!Z$lq~P#D_O#}$mq!Y$mq!Z$mq~P#D_O!Z9OO~O#}9PO~P!0pO!d#vO!Y'ai!h'ai~O!d#vO(m'mO!Y'ai!h'ai~O!Y/hO!h(zq~O!V'ci!Y'ci~P#.aO!Y/pO!V({q~O!V9VO~P#.aO!V9VO~Og(Yy!Y(Yy~P!0pO!Y'ja!['ja~P#.aOa%Yq![%Yq'u%Yq!Y%Yq~P#.aO[9[O~O!Y0wO!Z)Tq~O#]9`O!Y'la!Z'la~O!Y5]O!Z)Qi~P#D_O![1aO%f9dO~O(QTO(TUO(`9iO~O!Y1lO!Z)Rq~O!h9lO~O!h9mO~O!h9nO~O!h9nO~P%[O#]9qO!Y#ey!Z#ey~O!Y#ey!Z#ey~P#D_O%f9vO~P&5iO![']O%f9vO~O#}#{y!Y#{y!Z#{y~P#D_OP$ziR$zi[$zio$zi!i$zi!m$zi#O$zi#k$zi#l$zi#m$zi#n$zi#o$zi#p$zi#q$zi#r$zi#s$zi#u$zi#w$zi#y$zi#z$zi#}$zi([$zi(m$zi!Y$zi!Z$zi~P&(tO}){O!P)|O(u%QOP'eaR'ea['eak'eao'ea!i'ea!m'ea#O'ea#k'ea#l'ea#m'ea#n'ea#o'ea#p'ea#q'ea#r'ea#s'ea#u'ea#w'ea#y'ea#z'ea#}'ea(['ea(m'ea(t'ea!Y'ea!Z'ea~O}){O!P)|OP'gaR'ga['gak'gao'ga!i'ga!m'ga#O'ga#k'ga#l'ga#m'ga#n'ga#o'ga#p'ga#q'ga#r'ga#s'ga#u'ga#w'ga#y'ga#z'ga#}'ga(['ga(m'ga(t'ga(u'ga!Y'ga!Z'ga~O(t%OOP%^iR%^i[%^ik%^io%^i}%^i!P%^i!i%^i!m%^i#O%^i#k%^i#l%^i#m%^i#n%^i#o%^i#p%^i#q%^i#r%^i#s%^i#u%^i#w%^i#y%^i#z%^i#}%^i([%^i(m%^i(u%^i!Y%^i!Z%^i~O(u%QOP%`iR%`i[%`ik%`io%`i}%`i!P%`i!i%`i!m%`i#O%`i#k%`i#l%`i#m%`i#n%`i#o%`i#p%`i#q%`i#r%`i#s%`i#u%`i#w%`i#y%`i#z%`i#}%`i([%`i(m%`i(t%`i!Y%`i!Z%`i~O#}$my!Y$my!Z$my~P#D_O#}#`y!Y#`y!Z#`y~P#D_O!d#vO!Y'aq!h'aq~O!Y/hO!h(zy~O!V'cq!Y'cq~P#.aO!V:PO~P#.aO!Y0wO!Z)Ty~O!Y5]O!Z)Qq~O![1aO%f:WO~O!h:ZO~O%f:`O~P&5iOP$zqR$zq[$zqo$zq!i$zq!m$zq#O$zq#k$zq#l$zq#m$zq#n$zq#o$zq#p$zq#q$zq#r$zq#s$zq#u$zq#w$zq#y$zq#z$zq#}$zq([$zq(m$zq!Y$zq!Z$zq~P&(tO}){O!P)|O(u%QOP'faR'fa['fak'fao'fa!i'fa!m'fa#O'fa#k'fa#l'fa#m'fa#n'fa#o'fa#p'fa#q'fa#r'fa#s'fa#u'fa#w'fa#y'fa#z'fa#}'fa(['fa(m'fa(t'fa!Y'fa!Z'fa~O}){O!P)|OP'haR'ha['hak'hao'ha!i'ha!m'ha#O'ha#k'ha#l'ha#m'ha#n'ha#o'ha#p'ha#q'ha#r'ha#s'ha#u'ha#w'ha#y'ha#z'ha#}'ha(['ha(m'ha(t'ha(u'ha!Y'ha!Z'ha~OP$|qR$|q[$|qo$|q!i$|q!m$|q#O$|q#k$|q#l$|q#m$|q#n$|q#o$|q#p$|q#q$|q#r$|q#s$|q#u$|q#w$|q#y$|q#z$|q#}$|q([$|q(m$|q!Y$|q!Z$|q~P&(tOg%b!Z!Y%b!Z#]%b!Z#}%b!Z~P!0pO!Y'lq!Z'lq~P#D_O!Y#e!Z!Z#e!Z~P#D_O#h%b!ZP%b!ZR%b!Z[%b!Za%b!Zo%b!Z!Y%b!Z!i%b!Z!m%b!Z#O%b!Z#k%b!Z#l%b!Z#m%b!Z#n%b!Z#o%b!Z#p%b!Z#q%b!Z#r%b!Z#s%b!Z#u%b!Z#w%b!Z#y%b!Z#z%b!Z'u%b!Z([%b!Z(m%b!Z!h%b!Z!V%b!Z's%b!Z#]%b!Zs%b!Z![%b!Z%f%b!Z!d%b!Z~P#.aOP%b!ZR%b!Z[%b!Zo%b!Z!i%b!Z!m%b!Z#O%b!Z#k%b!Z#l%b!Z#m%b!Z#n%b!Z#o%b!Z#p%b!Z#q%b!Z#r%b!Z#s%b!Z#u%b!Z#w%b!Z#y%b!Z#z%b!Z#}%b!Z([%b!Z(m%b!Z!Y%b!Z!Z%b!Z~P&(tOs(aX~P1qO}%pO~P!(oO(P!lO~P!(oO!VfX!YfX#]fX~P&-}OP]XR]X[]Xo]X}]X!P]X!Y]X!YfX!i]X!m]X#O]X#P]X#]]X#]fX#hfX#k]X#l]X#m]X#n]X#o]X#p]X#q]X#r]X#s]X#u]X#w]X#y]X#z]X$P]X([]X(m]X(t]X(u]X~O!dfX!h]X!hfX(mfX~P'CvOP:kOQ:kOSfOd<fOe!iOmkOo:kOpkOqkOwkOy:kO{:kO!PWO!TkO!UkO![XO!f:nO!iZO!l:kO!m:kO!n:kO!p:oO!r:rO!u!hO$V!kO(O)YO(QTO(TUO([VO(j[O(y<dO~O!Y;PO!Z$oa~Oh%WOm%XOo$uOp$tOq$tOw%YOy%ZO{;ZO!P$|O![$}O!f<kO!i$yO#g;aO$V%_O$r;]O$t;_O$w%`O(O(rO(QTO(TUO([$vO(t%OO(u%QO~O#t)`O~P'HlOo!bX(m!bX~P# ZO!Z]X!ZfX~P'CvO!VfX!V$xX!YfX!Y$xX#]fX~P!/gO#h:sO~O!d#vO#h:sO~O#];TO~O#s:xO~O#];dO!Y(rX!Z(rX~O#];TO!Y(pX!Z(pX~O#h;eO~Og;gO~P!0pO#h;mO~O#h;nO~O!d#vO#h;oO~O!d#vO#h;eO~O#};pO~P#D_O#h;qO~O#h;rO~O#h;wO~O#h;xO~O#h;yO~O#h;zO~O#};{O~P!0pO#};|O~P!0pO#P#Q#R#T#U#X#f#g#r(y$r$t$w%Z%e%f%g%n%p%s%t%v%x~'yT#l!U'w(P#mp#k#no}'x$['x(O$^(`~",goto:"$2y)XPPPPPP)YPP)]P)nP+O/PPPPP5wPP6_PP<U?kP@OP@OPPP@OPBOP@OP@OP@OPBSPBXPBvPGoPPPGsPPPPGsJuPPPJ{KwPGsPGsPPNVGsPPPGsPGsP!!^GsP!%s!&x!'RP!'u!'y!'u!+VPPPPPPP!+v!&xPP!,W!-QP!/tGsGs!/y!3U!7l!7l!;jPPP!;rGsPPPPPPPPPPP!?QP!@_PPGs!ApPGsPGsGsGsGsGsPGs!CSP!F]P!IbP!If!Ip!It!ItP!FYP!Ix!IxP!L}P!MRGsGs!MX#!]BS@OP@OP@O@OP##i@O@O#%s@O#(c@O#*g@O@O#+V#-c#-c#-h#-q#-c#-zP#-cP@O#.d@O#2T@O@O5wPPP#5zPPP#6e#6eP#6eP#6{#6ePP#7RP#6xP#6x#7f#6x#8Q#8W5t)]#8Z)]P#8b#8b#8bP)]P)]P)]P)]PP)]P#8h#8kP#8k)]P#8oP#8rP)]P)]P)]P)]P)]P)])]PP#8x#9O#9Z#9a#9g#9m#9s#:R#:X#:c#:i#:s#:y#;Z#;a#<R#<e#<k#<q#=P#=f#?T#?c#?j#AO#A^#Bx#CW#C^#Cd#Cj#Ct#Cz#DQ#D[#Dn#DtPPPPPPPPPP#DzPPPPPPP#Eo#Hv#JV#J^#JfPPP$ lP$ u$$m$+V$+Y$+]$+x$+{$,S$,[P$,b$,eP$-R$-V$-}$/]$/b$/xPP$/}$0T$0XP$0[$0`$0d$1Y$1q$2Y$2^$2a$2d$2j$2m$2q$2uR!|RoqOXst!Z#d%k&o&q&r&t,k,p1|2PY!vQ']-]1a5dQ%rvQ%zyQ&R|Q&g!VS'T!e-TQ'c!iS'i!r!yU*f$}*W*kQ+i%{Q+v&TQ,[&aQ-Z'[Q-e'dQ-m'jQ0R*mQ1k,]R;b:o%QdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Y$`$e%k%r&P&h&k&o&q&r&t&x'Q'_'o(P(R(X(`(t(v(z)z+R+V,h,k,p-a-i-w-}.l.s/f0a0g0v1d1t1u1w1y1|2P2R2r2x3^5a5k5{5|6P6d8O8T8d8nS#q]:l!r)[$[$n'U)o,|-P.}2b3u5_6Z9`9q:k:n:o:r:s:t:u:v:w:x:y:z:{:|:};O;P;T;b;d;e;g;o;p;y;z<gU*y%[;Y;ZQ+n%}Q,^&dQ,e&lQ0m+aQ0q+cQ0|+oQ1s,cQ3Q._Q4}0wQ5r1lQ6p3UQ7p5OR8t6r'OkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Y$[$`$e$n%k%r&P&h&k&l&o&q&r&t&x'Q'U'_'o(P(R(X(`(t(v(z)o)z+R+V+a,h,k,p,|-P-a-i-w-}._.l.s.}/f0a0g0v1d1t1u1w1y1|2P2R2b2r2x3U3^3u5_5a5k5{5|6P6Z6d6r8O8T8d8n9`9q:k:n:o:r:s:t:u:v:w:x:y:z:{:|:};O;P;T;b;d;e;g;o;p;y;z<gt!nQ!r!v!y!z'T'[']'i'j'k-T-Z-]-m1a5d5f$z$ti#v$b$c$d$y$|%P%R%]%^%b)v)|*O*Q*S*V*]*c*s*t+`+c+z+}.^.w/]/e/o/p/r0V0X0d1W1Z1c3T3}4Y4b4l4t4w5j6n7]7f8Q8q9P9d9v:W:`;R;S;U;V;W;X;[;];^;_;`;a;h;i;j;k;m;n;q;r;s;t;u;v;w;x;{;|<d<l<m<p<qQ&U|Q'R!eU'X%g*W-WQ+n%}Q,^&dQ0c*|Q0|+oQ1R+uQ1r,bQ1s,cQ4}0wQ5W1TQ5r1lQ5u1nQ5v1qQ7p5OQ7s5TQ8]5xQ9_7tR9j8YrnOXst!V!Z#d%k&f&o&q&r&t,k,p1|2PR,`&h&x^OPXYstuvwz!Z!`!g!j!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Y$[$`$e$n%k%r&P&h&k&l&o&q&r&t&x'Q'_'o(R(X(`(t(v(z)o)z+R+V+a,h,k,p,|-P-a-i-w-}._.l.s.}/f0a0g0v1d1t1u1w1y1|2P2R2b2r2x3U3^3u5_5a5k5{5|6P6Z6d6r8O8T8d8n9`9q:k:n:o:r:s:t:u:v:w:x:y:z:{:|:};O;P;T;b;d;e;g;o;p;y;z<f<g[#]WZ#W#Z'U(P!b%hm#h#i#l$y%c%f(Y(d(e(f*V*Z*^+T+U+W,g,}-{.R.S.T.V/e/h2U2|2}4Q6Y6kQ%uxQ%yyS&O|&TQ&[!TQ'`!hQ'b!iQ(m#sS+h%z%{Q+l%}Q,V&_Q,Z&aS-d'c'dQ.a(nQ0u+iQ0{+oQ0}+pQ1Q+tQ1f,WS1j,[,]Q2n-eQ4|0wQ5Q0zQ5V1SQ5q1kQ7o5OQ7r5SQ9Z7nR:R9[!O${i$d%P%R%]%^%b*O*Q*]*s*t.w/o0V0X0d3}4l9P<d<l<m!S%wy!i!u%y%z%{'S'b'c'd'h'r*e+h+i-Q-d-e-l/y0u2g2n2u4dQ+b%uQ+{&XQ,O&YQ,Y&aQ.`(mQ1e,VU1i,Z,[,]Q3V.aQ5l1fS5p1j1kQ8X5q#[<h#v$b$c$y$|)v)|*S*V*c+`+c+z+}.^/]/e/p/r1W1Z1c3T4Y4b4t4w5j6n7]7f8Q8q9d9v:W:`;U;W;[;^;`;h;j;m;q;s;u;w;{<p<qo<i;R;S;V;X;];_;a;i;k;n;r;t;v;x;|W%Ui%W*u<dS&X!Q&fQ&Y!RQ&Z!SR+y&V${%Ti#v$b$c$d$y$|%P%R%]%^%b)v)|*O*Q*S*V*]*c*s*t+`+c+z+}.^.w/]/e/o/p/r0V0X0d1W1Z1c3T3}4Y4b4l4t4w5j6n7]7f8Q8q9P9d9v:W:`;R;S;U;V;W;X;[;];^;_;`;a;h;i;j;k;m;n;q;r;s;t;u;v;w;x;{;|<d<l<m<p<qT)w$v)xV*y%[;Y;ZW'X!e%g*W-WS(y#y#zQ+]%pQ+s&QS.Y(i(jQ1[,PQ4m0`R7x5]'OkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Y$[$`$e$n%k%r&P&h&k&l&o&q&r&t&x'Q'U'_'o(P(R(X(`(t(v(z)o)z+R+V+a,h,k,p,|-P-a-i-w-}._.l.s.}/f0a0g0v1d1t1u1w1y1|2P2R2b2r2x3U3^3u5_5a5k5{5|6P6Z6d6r8O8T8d8n9`9q:k:n:o:r:s:t:u:v:w:x:y:z:{:|:};O;P;T;b;d;e;g;o;p;y;z<g$i$_c#Y#e%o%q%s(O(U(p(u(})O)P)Q)R)S)T)U)V)W)X)Z)])c)m+^+r-R-p-u-z-|.k.n.r.t.u.v/X0e2]2`2p2w3]3b3c3d3e3f3g3h3i3j3k3l3m3n3q3r3y4q4z6]6c6h6w6x7R7S7z8h8l8v8|8}9s:T:[:m<ZT#TV#U'PkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Y$[$`$e$n%k%r&P&h&k&l&o&q&r&t&x'Q'U'_'o(P(R(X(`(t(v(z)o)z+R+V+a,h,k,p,|-P-a-i-w-}._.l.s.}/f0a0g0v1d1t1u1w1y1|2P2R2b2r2x3U3^3u5_5a5k5{5|6P6Z6d6r8O8T8d8n9`9q:k:n:o:r:s:t:u:v:w:x:y:z:{:|:};O;P;T;b;d;e;g;o;p;y;z<gQ'V!eR2c-Tv!nQ!e!r!v!y!z'T'[']'i'j'k-T-Z-]-m1a5d5fU*e$}*W*kS/y*f*mQ0S*nQ1^,RQ4d0RR4g0UnqOXst!Z#d%k&o&q&r&t,k,p1|2PQ&v!^Q's!xS(o#u:sQ+f%xQ,T&[Q,U&^Q-b'aQ-o'lS.j(t;eS0f+R;oQ0s+gQ1`,SQ2T,rQ2V,sQ2_-OQ2l-cQ2o-gS4r0g;yQ4x0tS4{0v;zQ6[2aQ6`2mQ6e2tQ7m4yQ8i6^Q8j6aQ8m6fR9p8f$d$^c#Y#e%q%s(O(U(p(u(})O)P)Q)R)S)T)U)V)W)X)Z)])c)m+^+r-R-p-u-z-|.k.n.r.u.v/X0e2]2`2p2w3]3b3c3d3e3f3g3h3i3j3k3l3m3n3q3r3y4q4z6]6c6h6w6x7R7S7z8h8l8v8|8}9s:T:[:m<ZS(k#p'fQ({#zS+[%o.tS.Z(j(lR3O.['OkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Y$[$`$e$n%k%r&P&h&k&l&o&q&r&t&x'Q'U'_'o(P(R(X(`(t(v(z)o)z+R+V+a,h,k,p,|-P-a-i-w-}._.l.s.}/f0a0g0v1d1t1u1w1y1|2P2R2b2r2x3U3^3u5_5a5k5{5|6P6Z6d6r8O8T8d8n9`9q:k:n:o:r:s:t:u:v:w:x:y:z:{:|:};O;P;T;b;d;e;g;o;p;y;z<gS#q]:lQ&q!XQ&r!YQ&t![Q&u!]R1{,nQ'^!hQ+_%uQ-`'`S.](m+bQ2j-_W3S.`.a0l0nQ6_2kW6l3P3R3V4vU8p6m6o6qU9u8r8s8uS:^9t9wQ:f:_R:i:gU!wQ']-]T5b1a5d!Q_OXZ`st!V!Z#d#h%c%k&f&h&o&q&r&t(f,k,p.S1|2P]!pQ!r']-]1a5dT#q]:l%[{OPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Y$`$e%k%r&P&h&k&l&o&q&r&t&x'Q'_'o(P(R(X(`(t(v(z)z+R+V+a,h,k,p-a-i-w-}._.l.s/f0a0g0v1d1t1u1w1y1|2P2R2r2x3U3^5a5k5{5|6P6d6r8O8T8d8nS(y#y#zS.Y(i(j!s<Q$[$n'U)o,|-P.}2b3u5_6Z9`9q:k:n:o:r:s:t:u:v:w:x:y:z:{:|:};O;P;T;b;d;e;g;o;p;y;z<gU$fd)[,eS(l#p'fU*r%S(s3pU0b*x.f6}Q4v0mQ6m3QQ8s6pR9w8tm!tQ!r!v!y!z']'i'j'k-]-m1a5d5fQ'q!uS(b#g1vS-k'h'tQ/k*YQ/w*eQ2v-nQ4U/lS4_/x0SQ7X4PS7d4e4gQ9R7YR9Y7gQ#wbQ'p!uS(a#g1vS(c#m+QQ+S%dQ+d%vQ+j%|U-j'h'q'tQ.O(bQ/j*YQ/v*eQ/|*hQ0r+eQ1g,XS2s-k-nQ2{.WS4T/k/lS4^/w0SQ4a/{Q4c/}Q5n1hQ6g2vQ7W4PQ7[4US7`4_4gQ7e4fQ8V5oS9Q7X7YQ9U7aQ9W7dQ9g8WQ9}9RQ:O9VQ:Q9YQ:Y9hQ:b:PQ<T<OQ<`<XR<a<YV!wQ']-]%[aOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Y$`$e%k%r&P&h&k&l&o&q&r&t&x'Q'_'o(P(R(X(`(t(v(z)z+R+V+a,h,k,p-a-i-w-}._.l.s/f0a0g0v1d1t1u1w1y1|2P2R2r2x3U3^5a5k5{5|6P6d6r8O8T8d8nS#wz!j!r;}$[$n'U)o,|-P.}2b3u5_6Z9`9q:k:n:o:r:s:t:u:v:w:x:y:z:{:|:};O;P;T;b;d;e;g;o;p;y;z<gR<T<f%[bOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Y$`$e%k%r&P&h&k&l&o&q&r&t&x'Q'_'o(P(R(X(`(t(v(z)z+R+V+a,h,k,p-a-i-w-}._.l.s/f0a0g0v1d1t1u1w1y1|2P2R2r2x3U3^5a5k5{5|6P6d6r8O8T8d8nQ%dj!S%vy!i!u%y%z%{'S'b'c'd'h'r*e+h+i-Q-d-e-l/y0u2g2n2u4dS%|z!jQ+e%wQ,X&aW1h,Y,Z,[,]U5o1i1j1kS8W5p5qQ9h8X!r<O$[$n'U)o,|-P.}2b3u5_6Z9`9q:k:n:o:r:s:t:u:v:w:x:y:z:{:|:};O;P;T;b;d;e;g;o;p;y;z<gQ<X<eR<Y<f%OeOPXYstuvw!Z!`!g!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Y$`$e%k%r&P&h&k&o&q&r&t&x'Q'_'o(R(X(`(t(v(z)z+R+V+a,h,k,p-a-i-w-}._.l.s/f0a0g0v1d1t1u1w1y1|2P2R2r2x3U3^5a5k5{5|6P6d6r8O8T8d8nY#bWZ#W#Z(P!b%hm#h#i#l$y%c%f(Y(d(e(f*V*Z*^+T+U+W,g,}-{.R.S.T.V/e/h2U2|2}4Q6Y6kQ,f&l!p<P$[$n)o,|-P.}2b3u5_6Z9`9q:k:n:o:r:s:t:u:v:w:x:y:z:{:|:};O;P;T;b;d;e;g;o;p;y;z<gR<S'UU'Y!e%g*WR2e-W%QdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Y$`$e%k%r&P&h&k&o&q&r&t&x'Q'_'o(P(R(X(`(t(v(z)z+R+V,h,k,p-a-i-w-}.l.s/f0a0g0v1d1t1u1w1y1|2P2R2r2x3^5a5k5{5|6P6d8O8T8d8n!r)[$[$n'U)o,|-P.}2b3u5_6Z9`9q:k:n:o:r:s:t:u:v:w:x:y:z:{:|:};O;P;T;b;d;e;g;o;p;y;z<gQ,e&lQ0m+aQ3Q._Q6p3UR8t6r!b$Uc#Y%o(O(U(p(u)W)X)])c+r-p-u-z-|.k.n/X0e2p2w3]3n4q4z6c6h6w8l9s:m!P:z)Z)m-R.t2]2`3b3l3m3q3y6]6x7R7S7z8h8v8|8}:T:[<Z!f$Wc#Y%o(O(U(p(u)T)U)W)X)])c+r-p-u-z-|.k.n/X0e2p2w3]3n4q4z6c6h6w8l9s:m!T:|)Z)m-R.t2]2`3b3i3j3l3m3q3y6]6x7R7S7z8h8v8|8}:T:[<Z!^$[c#Y%o(O(U(p(u)])c+r-p-u-z-|.k.n/X0e2p2w3]3n4q4z6c6h6w8l9s:mQ3}/cz<g)Z)m-R.t2]2`3b3q3y6]6x7R7S7z8h8v8|8}:T:[<ZQ<l<nR<m<o'OkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Y$[$`$e$n%k%r&P&h&k&l&o&q&r&t&x'Q'U'_'o(P(R(X(`(t(v(z)o)z+R+V+a,h,k,p,|-P-a-i-w-}._.l.s.}/f0a0g0v1d1t1u1w1y1|2P2R2b2r2x3U3^3u5_5a5k5{5|6P6Z6d6r8O8T8d8n9`9q:k:n:o:r:s:t:u:v:w:x:y:z:{:|:};O;P;T;b;d;e;g;o;p;y;z<gS$oh$pR3v.|'VgOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Y$[$`$e$n$p%k%r&P&h&k&l&o&q&r&t&x'Q'U'_'o(P(R(X(`(t(v(z)o)z+R+V+a,h,k,p,|-P-a-i-w-}._.l.s.|.}/f0a0g0v1d1t1u1w1y1|2P2R2b2r2x3U3^3u5_5a5k5{5|6P6Z6d6r8O8T8d8n9`9q:k:n:o:r:s:t:u:v:w:x:y:z:{:|:};O;P;T;b;d;e;g;o;p;y;z<gT$kf$qQ$ifS)f$l)jR)r$qT$jf$qT)h$l)j'VhOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Y$[$`$e$n$p%k%r&P&h&k&l&o&q&r&t&x'Q'U'_'o(P(R(X(`(t(v(z)o)z+R+V+a,h,k,p,|-P-a-i-w-}._.l.s.|.}/f0a0g0v1d1t1u1w1y1|2P2R2b2r2x3U3^3u5_5a5k5{5|6P6Z6d6r8O8T8d8n9`9q:k:n:o:r:s:t:u:v:w:x:y:z:{:|:};O;P;T;b;d;e;g;o;p;y;z<gT$oh$pQ$rhR)q$p%[jOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Y$`$e%k%r&P&h&k&l&o&q&r&t&x'Q'_'o(P(R(X(`(t(v(z)z+R+V+a,h,k,p-a-i-w-}._.l.s/f0a0g0v1d1t1u1w1y1|2P2R2r2x3U3^5a5k5{5|6P6d6r8O8T8d8n!s<e$[$n'U)o,|-P.}2b3u5_6Z9`9q:k:n:o:r:s:t:u:v:w:x:y:z:{:|:};O;P;T;b;d;e;g;o;p;y;z<g#elOPXZst!Z!`!o#S#d#o#{$n%k&h&k&l&o&q&r&t&x'Q'_(z)o+V+a,h,k,p-a._.}/f0a1d1t1u1w1y1|2P2R3U3u5a5k5{5|6P6r8O8T8d!O%Si$d%P%R%]%^%b*O*Q*]*s*t.w/o0V0X0d3}4l9P<d<l<m#[(s#v$b$c$y$|)v)|*S*V*c+`+c+z+}.^/]/e/p/r1W1Z1c3T4Y4b4t4w5j6n7]7f8Q8q9d9v:W:`;U;W;[;^;`;h;j;m;q;s;u;w;{<p<qQ*}%`Q/Y){o3p;R;S;V;X;];_;a;i;k;n;r;t;v;x;|!O$zi$d%P%R%]%^%b*O*Q*]*s*t.w/o0V0X0d3}4l9P<d<l<mQ*_${U*h$}*W*kQ+O%aQ/}*i#[<V#v$b$c$y$|)v)|*S*V*c+`+c+z+}.^/]/e/p/r1W1Z1c3T4Y4b4t4w5j6n7]7f8Q8q9d9v:W:`;U;W;[;^;`;h;j;m;q;s;u;w;{<p<qn<W;R;S;V;X;];_;a;i;k;n;r;t;v;x;|Q<[<hQ<]<iQ<^<jR<_<k!O%Si$d%P%R%]%^%b*O*Q*]*s*t.w/o0V0X0d3}4l9P<d<l<m#[(s#v$b$c$y$|)v)|*S*V*c+`+c+z+}.^/]/e/p/r1W1Z1c3T4Y4b4t4w5j6n7]7f8Q8q9d9v:W:`;U;W;[;^;`;h;j;m;q;s;u;w;{<p<qo3p;R;S;V;X;];_;a;i;k;n;r;t;v;x;|noOXst!Z#d%k&o&q&r&t,k,p1|2PS*b$|*VQ,y&{Q,z&}R4X/p$z%Ti#v$b$c$d$y$|%P%R%]%^%b)v)|*O*Q*S*V*]*c*s*t+`+c+z+}.^.w/]/e/o/p/r0V0X0d1W1Z1c3T3}4Y4b4l4t4w5j6n7]7f8Q8q9P9d9v:W:`;R;S;U;V;W;X;[;];^;_;`;a;h;i;j;k;m;n;q;r;s;t;u;v;w;x;{;|<d<l<m<p<qQ+|&YQ1Y,OQ5Z1XR7w5[V*j$}*W*kU*j$}*W*kT5c1a5dU/{*g/f5aT4f0T8OQ+d%vQ/|*hQ0r+eQ1g,XQ5n1hQ8V5oQ9g8WR:Y9h!O%Pi$d%P%R%]%^%b*O*Q*]*s*t.w/o0V0X0d3}4l9P<d<l<mr*O$w)a*P*q+P/n0Z0[3s4V4p7V7h9|<U<b<cS0V*p0W#[;U#v$b$c$y$|)v)|*S*V*c+`+c+z+}.^/]/e/p/r1W1Z1c3T4Y4b4t4w5j6n7]7f8Q8q9d9v:W:`;U;W;[;^;`;h;j;m;q;s;u;w;{<p<qn;V;R;S;V;X;];_;a;i;k;n;r;t;v;x;|!^;h(q)_*X*a.b.e.i/U/Z/c/s0k1V1X3Y4W4[5Y5[6s6v7^7b7j7l9T9X:a<n<o`;i3o6y6|7Q8w9x9{:jS;s.d3ZT;t6{8z!O%Ri$d%P%R%]%^%b*O*Q*]*s*t.w/o0V0X0d3}4l9P<d<l<mv*Q$w)a*R*p+P/_/n0Z0[3s4V4h4p7V7h9|<U<b<cS0X*q0Y#[;W#v$b$c$y$|)v)|*S*V*c+`+c+z+}.^/]/e/p/r1W1Z1c3T4Y4b4t4w5j6n7]7f8Q8q9d9v:W:`;U;W;[;^;`;h;j;m;q;s;u;w;{<p<qn;X;R;S;V;X;];_;a;i;k;n;r;t;v;x;|!b;j(q)_*X*a.c.d.i/U/Z/c/s0k1V1X3W3Y4W4[5Y5[6s6t6v7^7b7j7l9T9X:a<n<od;k3o6z6{7Q8w8x9x9y9{:jS;u.e3[T;v6|8{rnOXst!V!Z#d%k&f&o&q&r&t,k,p1|2PQ&c!UR,h&lrnOXst!V!Z#d%k&f&o&q&r&t,k,p1|2PR&c!UQ,Q&ZR1U+ysnOXst!V!Z#d%k&f&o&q&r&t,k,p1|2PQ1b,VS5i1e1fU8P5g5h5lS9c8R8SS:U9b9eQ:c:VR:h:dQ&j!VR,a&fR5u1nS&O|&TR0}+pQ&o!WR,k&pR,q&uT1},p2PR,u&vQ,t&vR2W,uQ'v!{R-q'vSsOtQ#dXT%ns#dQ#OTR'x#OQ#RUR'z#RQ)x$vR/V)xQ#UVR'|#UQ#XWU(S#X(T-xQ(T#YR-x(UQ-U'VR2d-UQ.m(uS3_.m3`R3`.nQ-]']R2h-]Y!rQ']-]1a5dR'g!rQ.x)aR3t.xU#_W%f*VU(Z#_([-yQ([#`R-y(VQ-X'YR2f-Xt`OXst!V!Z#d%k&f&h&o&q&r&t,k,p1|2PS#hZ%cU#r`#h.SR.S(fQ(g#jQ.P(cW.X(g.P2y6iQ2y.QR6i2zQ)j$lR/O)jQ$phR)p$pQ$acU)^$a-t;QQ-t:mR;Q)mQ/i*YW4R/i4S7Z9SU4S/j/k/lS7Z4T4UR9S7[$X)}$w(q)_)a*X*a*p*q*z*{+P.d.e.g.h.i/U/Z/_/a/c/n/s0Z0[0k1V1X3W3X3Y3o3s4V4W4[4h4j4p5Y5[6s6t6u6v6{6|7O7P7Q7V7^7b7h7j7l8w8x8y9T9X9x9y9z9{9|:a:j<U<b<c<n<oQ/q*aU4Z/q4]7_Q4]/sR7_4[S*k$}*WR0P*kr*P$w)a*p*q+P/n0Z0[3s4V4p7V7h9|<U<b<c!^.b(q)_*X*a.d.e.i/U/Z/c/s0k1V1X3Y4W4[5Y5[6s6v7^7b7j7l9T9X:a<n<oU/`*P.b6ya6y3o6{6|7Q8w9x9{:jQ0W*pQ3Z.dU4i0W3Z8zR8z6{v*R$w)a*p*q+P/_/n0Z0[3s4V4h4p7V7h9|<U<b<c!b.c(q)_*X*a.d.e.i/U/Z/c/s0k1V1X3W3Y4W4[5Y5[6s6t6v7^7b7j7l9T9X:a<n<oU/b*R.c6ze6z3o6{6|7Q8w8x9x9y9{:jQ0Y*qQ3[.eU4k0Y3[8{R8{6|Q*v%VR0^*vQ4u0kR7k4uQ+X%iR0j+XQ5^1[S7y5^9aR9a7zQ,S&[R1_,SQ5d1aR7|5dQ1m,^S5s1m8ZR8Z5uQ0x+lW5P0x5R7q9]Q5R0{Q7q5QR9]7rQ+q&OR1O+qQ2P,pR6T2PYrOXst#dQ&s!ZQ+Z%kQ,j&oQ,l&qQ,m&rQ,o&tQ1z,kS1},p2PR6S1|Q%mpQ&w!_Q&z!aQ&|!bQ'O!cQ'n!uQ+Y%jQ+f%xQ+x&UQ,`&jQ,w&yW-h'h'p'q'tQ-o'lQ0O*jQ0s+gS1p,a,dQ2X,vQ2Y,yQ2Z,zQ2o-gW2q-j-k-n-pQ4x0tQ5U1RQ5X1VQ5m1gQ5w1rQ6R1{U6b2p2s2vQ6e2tQ7m4yQ7u5WQ7v5YQ7{5cQ8U5nQ8[5vS8k6c6gQ8m6fQ9^7sQ9f8VQ9k8]Q9r8lQ:S9_Q:X9gQ:]9sR:e:YQ%xyQ'a!iQ'l!uU+g%y%z%{Q-O'SU-c'b'c'dS-g'h'rQ/u*eS0t+h+iQ2a-QS2m-d-eQ2t-lQ4`/yQ4y0uQ6^2gQ6a2nQ6f2uR7c4dS$xi<dR*w%WU%Vi%W<dR0]*uQ$wiS(q#v+cS)_$b$cQ)a$dQ*X$yS*a$|*VQ*p%PQ*q%RQ*z%]Q*{%^Q+P%bQ.d;UQ.e;WQ.g;[Q.h;^Q.i;`Q/U)vS/Z)|/]Q/_*OQ/a*QQ/c*SQ/n*]S/s*c/eQ0Z*sQ0[*th0k+`.^1c3T5j6n8Q8q9d9v:W:`Q1V+zQ1X+}Q3W;hQ3X;jQ3Y;mS3o;R;SQ3s.wQ4V/oQ4W/pQ4[/rQ4h0VQ4j0XQ4p0dQ5Y1WQ5[1ZQ6s;qQ6t;sQ6u;uQ6v;wQ6{;VQ6|;XQ7O;]Q7P;_Q7Q;aQ7V3}Q7^4YQ7b4bQ7h4lQ7j4tQ7l4wQ8w;nQ8x;iQ8y;kQ9T7]Q9X7fQ9x;rQ9y;tQ9z;vQ9{;xQ9|9PQ:a;{Q:j;|Q<U<dQ<b<lQ<c<mQ<n<pR<o<qQ*x%[Q.f;YR6};ZnpOXst!Z#d%k&o&q&r&t,k,p1|2PQ!fPS#fZ#oQ&y!`U'e!o5a8OQ'{#SQ(|#{Q)n$nS,d&h&kQ,i&lQ,v&xQ,{'QQ-_'_Q.p(zQ/S)oS0h+V/fQ0n+aQ1x,hQ2k-aQ3R._Q3x.}Q4n0aQ5h1dQ5y1tQ5z1uQ6O1wQ6Q1yQ6V2RQ6q3UQ7T3uQ8S5kQ8`5{Q8a5|Q8c6PQ8u6rQ9e8TR9o8d#YcOPXZst!Z!`!o#d#o#{%k&h&k&l&o&q&r&t&x'Q'_(z+V+a,h,k,p-a._/f0a1d1t1u1w1y1|2P2R3U5a5k5{5|6P6r8O8T8dQ#YWQ#eYQ%ouQ%qvS%sw!gS(O#W(RQ(U#ZQ(p#uQ(u#xQ(}$OQ)O$PQ)P$QQ)Q$RQ)R$SQ)S$TQ)T$UQ)U$VQ)V$WQ)W$XQ)X$YQ)Z$[Q)]$`Q)c$eW)m$n)o.}3uQ+^%rQ+r&PS-R'U2bQ-p'oS-u(P-wQ-z(XQ-|(`Q.k(tQ.n(vQ.r:kQ.t:nQ.u:oQ.v:rQ/X)zQ0e+RQ2],|Q2`-PQ2p-iQ2w-}Q3].lQ3b:sQ3c:tQ3d:uQ3e:vQ3f:wQ3g:xQ3h:yQ3i:zQ3j:{Q3k:|Q3l:}Q3m;OQ3n.sQ3q;TQ3r;bQ3y;PQ4q0gQ4z0vQ6];dQ6c2rQ6h2xQ6w3^Q6x;eQ7R;gQ7S;oQ7z5_Q8h6ZQ8l6dQ8v;pQ8|;yQ8};zQ9s8nQ:T9`Q:[9qQ:m#SR<Z<gR#[WR'W!el!tQ!r!v!y!z']'i'j'k-]-m1a5d5fS'S!e-TS-Q'T'[R2g-ZR(w#xQ!fQT-[']-]]!qQ!r']-]1a5dQ#p]R'f:lR)b$dY!uQ']-]1a5dQ'h!rS'r!v!yS't!z5fS-l'i'jQ-n'kR2u-mT#kZ%cS#jZ%cS%im,gU(c#h#i#lS.Q(d(eQ.U(fQ0i+WQ2z.RU2{.S.T.VS6j2|2}R8o6kd#^W#W#Z%f(P(Y*V+T-{/er#gZm#h#i#l%c(d(e(f+W.R.S.T.V2|2}6kS*Y$y*^Q/l*ZQ1v,gQ2^,}Q4P/hQ6X2UQ7Y4QQ8g6YT<R'U+UV#aW%f*VU#`W%f*VS(Q#W(YU(V#Z+T/eS-S'U+UT-v(P-{V'Z!e%g*WQ$lfR)t$qT)i$l)jR3w.|T*[$y*^T*d$|*VQ0l+`Q3P.^Q5g1cQ6o3TQ8R5jQ8r6nQ9b8QQ9t8qQ:V9dQ:_9vQ:d:WR:g:`nqOXst!Z#d%k&o&q&r&t,k,p1|2PQ&i!VR,`&ftmOXst!U!V!Z#d%k&f&o&q&r&t,k,p1|2PR,g&lT%jm,gR1],PR,_&dQ&S|R+w&TR+m%}T&m!W&pT&n!W&pT2O,p2P",nodeNames:"⚠ ArithOp ArithOp ?. JSXStartTag LineComment BlockComment Script Hashbang ExportDeclaration export Star as VariableName String Escape from ; default FunctionDeclaration async function VariableDefinition > < TypeParamList TypeDefinition extends ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation InterpolationStart NullType null VoidType void TypeofType typeof MemberExpression . PropertyName [ TemplateString Escape Interpolation super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewTarget new NewExpression ) ( ArgList UnaryExpression delete LogicOp BitOp YieldExpression yield AwaitExpression await ParenthesizedExpression ClassExpression class ClassBody MethodDeclaration Decorator @ MemberExpression PrivatePropertyName CallExpression TypeArgList CompareOp < declare Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly accessor Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof satisfies in const CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression InstantiationExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXSelfClosingTag JSXIdentifier JSXBuiltin JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast ArrowFunction TypeParamList SequenceExpression InstantiationExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature PropertyDefinition CallSignature TypePredicate is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var using TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement SingleExpression SingleClassItem",maxTerm:376,context:Zv,nodeProps:[["isolate",-8,5,6,14,34,36,48,50,52,""],["group",-26,9,17,19,65,204,208,212,213,215,218,221,231,233,239,241,243,245,248,254,260,262,264,266,268,270,271,"Statement",-34,13,14,29,32,33,39,48,51,52,54,59,67,69,73,77,79,81,82,107,108,117,118,135,138,140,141,142,143,144,146,147,166,167,169,"Expression",-23,28,30,34,38,40,42,171,173,175,176,178,179,180,182,183,184,186,187,188,198,200,202,203,"Type",-3,85,100,106,"ClassItem"],["openedBy",23,"<",35,"InterpolationStart",53,"[",57,"{",70,"(",159,"JSXStartCloseTag"],["closedBy",24,">",37,"InterpolationEnd",47,"]",58,"}",71,")",164,"JSXEndTag"]],propSources:[Lv],skippedNodes:[0,5,6,274],repeatNodeCount:37,tokenData:"$Fq07[R!bOX%ZXY+gYZ-yZ[+g[]%Z]^.c^p%Zpq+gqr/mrs3cst:_tuEruvJSvwLkwx! Yxy!'iyz!(sz{!)}{|!,q|}!.O}!O!,q!O!P!/Y!P!Q!9j!Q!R#:O!R![#<_![!]#I_!]!^#Jk!^!_#Ku!_!`$![!`!a$$v!a!b$*T!b!c$,r!c!}Er!}#O$-|#O#P$/W#P#Q$4o#Q#R$5y#R#SEr#S#T$7W#T#o$8b#o#p$<r#p#q$=h#q#r$>x#r#s$@U#s$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$I|Er$I|$I}$Dk$I}$JO$Dk$JO$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr(n%d_$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&j&hT$h&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c&j&zP;=`<%l&c'|'U]$h&j(U!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!b(SU(U!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!b(iP;=`<%l'}'|(oP;=`<%l&}'[(y]$h&j(RpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(rp)wU(RpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)rp*^P;=`<%l)r'[*dP;=`<%l(r#S*nX(Rp(U!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g#S+^P;=`<%l*g(n+dP;=`<%l%Z07[+rq$h&j(Rp(U!b'w0/lOX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p$f%Z$f$g+g$g#BY%Z#BY#BZ+g#BZ$IS%Z$IS$I_+g$I_$JT%Z$JT$JU+g$JU$KV%Z$KV$KW+g$KW&FU%Z&FU&FV+g&FV;'S%Z;'S;=`+a<%l?HT%Z?HT?HU+g?HUO%Z07[.ST(S#S$h&j'x0/lO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c07[.n_$h&j(Rp(U!b'x0/lOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)3p/x`$h&j!m),Q(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW1V`#u(Ch$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`2X!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW2d_#u(Ch$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At3l_(Q':f$h&j(U!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k(^4r_$h&j(U!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k&z5vX$h&jOr5qrs6cs!^5q!^!_6y!_#o5q#o#p6y#p;'S5q;'S;=`7h<%lO5q&z6jT$c`$h&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c`6|TOr6yrs7]s;'S6y;'S;=`7b<%lO6y`7bO$c``7eP;=`<%l6y&z7kP;=`<%l5q(^7w]$c`$h&j(U!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!r8uZ(U!bOY8pYZ6yZr8prs9hsw8pwx6yx#O8p#O#P6y#P;'S8p;'S;=`:R<%lO8p!r9oU$c`(U!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!r:UP;=`<%l8p(^:[P;=`<%l4k%9[:hh$h&j(Rp(U!bOY%ZYZ&cZq%Zqr<Srs&}st%ZtuCruw%Zwx(rx!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr(r<__WS$h&j(Rp(U!bOY<SYZ&cZr<Srs=^sw<Swx@nx!^<S!^!_Bm!_#O<S#O#P>`#P#o<S#o#pBm#p;'S<S;'S;=`Cl<%lO<S(Q=g]WS$h&j(U!bOY=^YZ&cZw=^wx>`x!^=^!^!_?q!_#O=^#O#P>`#P#o=^#o#p?q#p;'S=^;'S;=`@h<%lO=^&n>gXWS$h&jOY>`YZ&cZ!^>`!^!_?S!_#o>`#o#p?S#p;'S>`;'S;=`?k<%lO>`S?XSWSOY?SZ;'S?S;'S;=`?e<%lO?SS?hP;=`<%l?S&n?nP;=`<%l>`!f?xWWS(U!bOY?qZw?qwx?Sx#O?q#O#P?S#P;'S?q;'S;=`@b<%lO?q!f@eP;=`<%l?q(Q@kP;=`<%l=^'`@w]WS$h&j(RpOY@nYZ&cZr@nrs>`s!^@n!^!_Ap!_#O@n#O#P>`#P#o@n#o#pAp#p;'S@n;'S;=`Bg<%lO@ntAwWWS(RpOYApZrAprs?Ss#OAp#O#P?S#P;'SAp;'S;=`Ba<%lOAptBdP;=`<%lAp'`BjP;=`<%l@n#WBvYWS(Rp(U!bOYBmZrBmrs?qswBmwxApx#OBm#O#P?S#P;'SBm;'S;=`Cf<%lOBm#WCiP;=`<%lBm(rCoP;=`<%l<S%9[C}i$h&j(j%1l(Rp(U!bOY%ZYZ&cZr%Zrs&}st%ZtuCruw%Zwx(rx!Q%Z!Q![Cr![!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr%9[EoP;=`<%lCr07[FRk$h&j(Rp(U!b$[#t(O,2j(`$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr+dHRk$h&j(Rp(U!b$[#tOY%ZYZ&cZr%Zrs&}st%ZtuGvuw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Gv![!^%Z!^!_*g!_!c%Z!c!}Gv!}#O%Z#O#P&c#P#R%Z#R#SGv#S#T%Z#T#oGv#o#p*g#p$g%Z$g;'SGv;'S;=`Iv<%lOGv+dIyP;=`<%lGv07[JPP;=`<%lEr(KWJ_`$h&j(Rp(U!b#m(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWKl_$h&j$P(Ch(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,#xLva(u+JY$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sv%ZvwM{wx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWNW`$h&j#y(Ch(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At! c_(T';W$h&j(RpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b'l!!i_$h&j(RpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b&z!#mX$h&jOw!#hwx6cx!^!#h!^!_!$Y!_#o!#h#o#p!$Y#p;'S!#h;'S;=`!$r<%lO!#h`!$]TOw!$Ywx7]x;'S!$Y;'S;=`!$l<%lO!$Y`!$oP;=`<%l!$Y&z!$uP;=`<%l!#h'l!%R]$c`$h&j(RpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r!Q!&PZ(RpOY!%zYZ!$YZr!%zrs!$Ysw!%zwx!&rx#O!%z#O#P!$Y#P;'S!%z;'S;=`!']<%lO!%z!Q!&yU$c`(RpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)r!Q!'`P;=`<%l!%z'l!'fP;=`<%l!!b/5|!'t_!i/.^$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#&U!)O_!h!Lf$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z-!n!*[b$h&j(Rp(U!b(P%&f#n(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rxz%Zz{!+d{!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW!+o`$h&j(Rp(U!b#k(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;x!,|`$h&j(Rp(U!bo+4YOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,$U!.Z_!Y+Jf$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!/ec$h&j(Rp(U!b}.2^OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!0p!P!Q%Z!Q![!3Y![!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!0ya$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!2O!P!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!2Z_!X!L^$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!3eg$h&j(Rp(U!bp'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!3Y![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S!3Y#S#X%Z#X#Y!4|#Y#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!5Vg$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx{%Z{|!6n|}%Z}!O!6n!O!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!6wc$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!8_c$h&j(Rp(U!bp'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!9uf$h&j(Rp(U!b#l(ChOY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcxz!;Zz{#-}{!P!;Z!P!Q#/d!Q!^!;Z!^!_#(i!_!`#7S!`!a#8i!a!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z?O!;fb$h&j(Rp(U!b!U7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z>^!<w`$h&j(U!b!U7`OY!<nYZ&cZw!<nwx!=yx!P!<n!P!Q!Eq!Q!^!<n!^!_!Gr!_!}!<n!}#O!KS#O#P!Dy#P#o!<n#o#p!Gr#p;'S!<n;'S;=`!L]<%lO!<n<z!>Q^$h&j!U7`OY!=yYZ&cZ!P!=y!P!Q!>|!Q!^!=y!^!_!@c!_!}!=y!}#O!CW#O#P!Dy#P#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!?Td$h&j!U7`O!^&c!_#W&c#W#X!>|#X#Z&c#Z#[!>|#[#]&c#]#^!>|#^#a&c#a#b!>|#b#g&c#g#h!>|#h#i&c#i#j!>|#j#k!>|#k#m&c#m#n!>|#n#o&c#p;'S&c;'S;=`&w<%lO&c7`!@hX!U7`OY!@cZ!P!@c!P!Q!AT!Q!}!@c!}#O!Ar#O#P!Bq#P;'S!@c;'S;=`!CQ<%lO!@c7`!AYW!U7`#W#X!AT#Z#[!AT#]#^!AT#a#b!AT#g#h!AT#i#j!AT#j#k!AT#m#n!AT7`!AuVOY!ArZ#O!Ar#O#P!B[#P#Q!@c#Q;'S!Ar;'S;=`!Bk<%lO!Ar7`!B_SOY!ArZ;'S!Ar;'S;=`!Bk<%lO!Ar7`!BnP;=`<%l!Ar7`!BtSOY!@cZ;'S!@c;'S;=`!CQ<%lO!@c7`!CTP;=`<%l!@c<z!C][$h&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#O!CW#O#P!DR#P#Q!=y#Q#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DWX$h&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DvP;=`<%l!CW<z!EOX$h&jOY!=yYZ&cZ!^!=y!^!_!@c!_#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!EnP;=`<%l!=y>^!Ezl$h&j(U!b!U7`OY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#W&}#W#X!Eq#X#Z&}#Z#[!Eq#[#]&}#]#^!Eq#^#a&}#a#b!Eq#b#g&}#g#h!Eq#h#i&}#i#j!Eq#j#k!Eq#k#m&}#m#n!Eq#n#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}8r!GyZ(U!b!U7`OY!GrZw!Grwx!@cx!P!Gr!P!Q!Hl!Q!}!Gr!}#O!JU#O#P!Bq#P;'S!Gr;'S;=`!J|<%lO!Gr8r!Hse(U!b!U7`OY'}Zw'}x#O'}#P#W'}#W#X!Hl#X#Z'}#Z#[!Hl#[#]'}#]#^!Hl#^#a'}#a#b!Hl#b#g'}#g#h!Hl#h#i'}#i#j!Hl#j#k!Hl#k#m'}#m#n!Hl#n;'S'};'S;=`(f<%lO'}8r!JZX(U!bOY!JUZw!JUwx!Arx#O!JU#O#P!B[#P#Q!Gr#Q;'S!JU;'S;=`!Jv<%lO!JU8r!JyP;=`<%l!JU8r!KPP;=`<%l!Gr>^!KZ^$h&j(U!bOY!KSYZ&cZw!KSwx!CWx!^!KS!^!_!JU!_#O!KS#O#P!DR#P#Q!<n#Q#o!KS#o#p!JU#p;'S!KS;'S;=`!LV<%lO!KS>^!LYP;=`<%l!KS>^!L`P;=`<%l!<n=l!Ll`$h&j(Rp!U7`OY!LcYZ&cZr!Lcrs!=ys!P!Lc!P!Q!Mn!Q!^!Lc!^!_# o!_!}!Lc!}#O#%P#O#P!Dy#P#o!Lc#o#p# o#p;'S!Lc;'S;=`#&Y<%lO!Lc=l!Mwl$h&j(Rp!U7`OY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#W(r#W#X!Mn#X#Z(r#Z#[!Mn#[#](r#]#^!Mn#^#a(r#a#b!Mn#b#g(r#g#h!Mn#h#i(r#i#j!Mn#j#k!Mn#k#m(r#m#n!Mn#n#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r8Q# vZ(Rp!U7`OY# oZr# ors!@cs!P# o!P!Q#!i!Q!}# o!}#O#$R#O#P!Bq#P;'S# o;'S;=`#$y<%lO# o8Q#!pe(Rp!U7`OY)rZr)rs#O)r#P#W)r#W#X#!i#X#Z)r#Z#[#!i#[#])r#]#^#!i#^#a)r#a#b#!i#b#g)r#g#h#!i#h#i)r#i#j#!i#j#k#!i#k#m)r#m#n#!i#n;'S)r;'S;=`*Z<%lO)r8Q#$WX(RpOY#$RZr#$Rrs!Ars#O#$R#O#P!B[#P#Q# o#Q;'S#$R;'S;=`#$s<%lO#$R8Q#$vP;=`<%l#$R8Q#$|P;=`<%l# o=l#%W^$h&j(RpOY#%PYZ&cZr#%Prs!CWs!^#%P!^!_#$R!_#O#%P#O#P!DR#P#Q!Lc#Q#o#%P#o#p#$R#p;'S#%P;'S;=`#&S<%lO#%P=l#&VP;=`<%l#%P=l#&]P;=`<%l!Lc?O#&kn$h&j(Rp(U!b!U7`OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#W%Z#W#X#&`#X#Z%Z#Z#[#&`#[#]%Z#]#^#&`#^#a%Z#a#b#&`#b#g%Z#g#h#&`#h#i%Z#i#j#&`#j#k#&`#k#m%Z#m#n#&`#n#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z9d#(r](Rp(U!b!U7`OY#(iZr#(irs!Grsw#(iwx# ox!P#(i!P!Q#)k!Q!}#(i!}#O#+`#O#P!Bq#P;'S#(i;'S;=`#,`<%lO#(i9d#)th(Rp(U!b!U7`OY*gZr*grs'}sw*gwx)rx#O*g#P#W*g#W#X#)k#X#Z*g#Z#[#)k#[#]*g#]#^#)k#^#a*g#a#b#)k#b#g*g#g#h#)k#h#i*g#i#j#)k#j#k#)k#k#m*g#m#n#)k#n;'S*g;'S;=`+Z<%lO*g9d#+gZ(Rp(U!bOY#+`Zr#+`rs!JUsw#+`wx#$Rx#O#+`#O#P!B[#P#Q#(i#Q;'S#+`;'S;=`#,Y<%lO#+`9d#,]P;=`<%l#+`9d#,cP;=`<%l#(i?O#,o`$h&j(Rp(U!bOY#,fYZ&cZr#,frs!KSsw#,fwx#%Px!^#,f!^!_#+`!_#O#,f#O#P!DR#P#Q!;Z#Q#o#,f#o#p#+`#p;'S#,f;'S;=`#-q<%lO#,f?O#-tP;=`<%l#,f?O#-zP;=`<%l!;Z07[#.[b$h&j(Rp(U!b'y0/l!U7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z07[#/o_$h&j(Rp(U!bT0/lOY#/dYZ&cZr#/drs#0nsw#/dwx#4Ox!^#/d!^!_#5}!_#O#/d#O#P#1p#P#o#/d#o#p#5}#p;'S#/d;'S;=`#6|<%lO#/d06j#0w]$h&j(U!bT0/lOY#0nYZ&cZw#0nwx#1px!^#0n!^!_#3R!_#O#0n#O#P#1p#P#o#0n#o#p#3R#p;'S#0n;'S;=`#3x<%lO#0n05W#1wX$h&jT0/lOY#1pYZ&cZ!^#1p!^!_#2d!_#o#1p#o#p#2d#p;'S#1p;'S;=`#2{<%lO#1p0/l#2iST0/lOY#2dZ;'S#2d;'S;=`#2u<%lO#2d0/l#2xP;=`<%l#2d05W#3OP;=`<%l#1p01O#3YW(U!bT0/lOY#3RZw#3Rwx#2dx#O#3R#O#P#2d#P;'S#3R;'S;=`#3r<%lO#3R01O#3uP;=`<%l#3R06j#3{P;=`<%l#0n05x#4X]$h&j(RpT0/lOY#4OYZ&cZr#4Ors#1ps!^#4O!^!_#5Q!_#O#4O#O#P#1p#P#o#4O#o#p#5Q#p;'S#4O;'S;=`#5w<%lO#4O00^#5XW(RpT0/lOY#5QZr#5Qrs#2ds#O#5Q#O#P#2d#P;'S#5Q;'S;=`#5q<%lO#5Q00^#5tP;=`<%l#5Q05x#5zP;=`<%l#4O01p#6WY(Rp(U!bT0/lOY#5}Zr#5}rs#3Rsw#5}wx#5Qx#O#5}#O#P#2d#P;'S#5};'S;=`#6v<%lO#5}01p#6yP;=`<%l#5}07[#7PP;=`<%l#/d)3h#7ab$h&j$P(Ch(Rp(U!b!U7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;ZAt#8vb$Y#t$h&j(Rp(U!b!U7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z'Ad#:Zp$h&j(Rp(U!bp'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#U%Z#U#V#?i#V#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#d#Bq#d#l%Z#l#m#Es#m#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#<jk$h&j(Rp(U!bp'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#>j_$h&j(Rp(U!bp'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#?rd$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#A]f$h&j(Rp(U!bp'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Bzc$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Dbe$h&j(Rp(U!bp'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#E|g$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Gpi$h&j(Rp(U!bp'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x#Il_!d$b$h&j#})Lv(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)[#Jv_al$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f#LS^h#)`#O-<U(Rp(U!b(y7`OY*gZr*grs'}sw*gwx)rx!P*g!P!Q#MO!Q!^*g!^!_#Mt!_!`$ f!`#O*g#P;'S*g;'S;=`+Z<%lO*g(n#MXX$j&j(Rp(U!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El#M}Z#o(Ch(Rp(U!bOY*gZr*grs'}sw*gwx)rx!_*g!_!`#Np!`#O*g#P;'S*g;'S;=`+Z<%lO*g(El#NyX$P(Ch(Rp(U!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El$ oX#p(Ch(Rp(U!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g*)x$!ga#]*!Y$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`!a$#l!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(K[$#w_#h(Cl$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x$%Vag!*r#p(Ch$e#|$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`$&[!`!a$'f!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$&g_#p(Ch$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$'qa#o(Ch$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`!a$(v!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$)R`#o(Ch$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(Kd$*`a(m(Ct$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!a%Z!a!b$+e!b#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$+p`$h&j#z(Ch(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#`$,}_!y$Ip$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f$.X_!P0,v$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(n$/]Z$h&jO!^$0O!^!_$0f!_#i$0O#i#j$0k#j#l$0O#l#m$2^#m#o$0O#o#p$0f#p;'S$0O;'S;=`$4i<%lO$0O(n$0VT_#S$h&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c#S$0kO_#S(n$0p[$h&jO!Q&c!Q![$1f![!^&c!_!c&c!c!i$1f!i#T&c#T#Z$1f#Z#o&c#o#p$3|#p;'S&c;'S;=`&w<%lO&c(n$1kZ$h&jO!Q&c!Q![$2^![!^&c!_!c&c!c!i$2^!i#T&c#T#Z$2^#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$2cZ$h&jO!Q&c!Q![$3U![!^&c!_!c&c!c!i$3U!i#T&c#T#Z$3U#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$3ZZ$h&jO!Q&c!Q![$0O![!^&c!_!c&c!c!i$0O!i#T&c#T#Z$0O#Z#o&c#p;'S&c;'S;=`&w<%lO&c#S$4PR!Q![$4Y!c!i$4Y#T#Z$4Y#S$4]S!Q![$4Y!c!i$4Y#T#Z$4Y#q#r$0f(n$4lP;=`<%l$0O#1[$4z_!V#)l$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$6U`#w(Ch$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;p$7c_$h&j(Rp(U!b([+4QOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$8qk$h&j(Rp(U!b(O,2j$^#t(`$I[OY%ZYZ&cZr%Zrs&}st%Ztu$8buw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$8b![!^%Z!^!_*g!_!c%Z!c!}$8b!}#O%Z#O#P&c#P#R%Z#R#S$8b#S#T%Z#T#o$8b#o#p*g#p$g%Z$g;'S$8b;'S;=`$<l<%lO$8b+d$:qk$h&j(Rp(U!b$^#tOY%ZYZ&cZr%Zrs&}st%Ztu$:fuw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$:f![!^%Z!^!_*g!_!c%Z!c!}$:f!}#O%Z#O#P&c#P#R%Z#R#S$:f#S#T%Z#T#o$:f#o#p*g#p$g%Z$g;'S$:f;'S;=`$<f<%lO$:f+d$<iP;=`<%l$:f07[$<oP;=`<%l$8b#Jf$<{X![#Hb(Rp(U!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g,#x$=sa(t+JY$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p#q$+e#q;'S%Z;'S;=`+a<%lO%Z(Kd$?V_!Z(Cds`$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z?O$@a_!n7`$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$Aq|$h&j(Rp(U!b'w0/l$[#t(O,2j(`$I[OX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr07[$D|k$h&j(Rp(U!b'x0/l$[#t(O,2j(`$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr",tokenizers:[Iv,Nv,Xv,2,3,4,5,6,7,8,9,10,11,12,13,14,Dv,new ag("$S~RRtu[#O#Pg#S#T#|~_P#o#pb~gOu~~jVO#i!P#i#j!U#j#l!P#l#m!q#m;'S!P;'S;=`#v<%lO!P~!UO!R~~!XS!Q![!e!c!i!e#T#Z!e#o#p#Z~!hR!Q![!q!c!i!q#T#Z!q~!tR!Q![!}!c!i!}#T#Z!}~#QR!Q![!P!c!i!P#T#Z!P~#^R!Q![#g!c!i#g#T#Z#g~#jS!Q![#g!c!i#g#T#Z#g#q#r!P~#yP;=`<%l!P~$RO(^~~",141,335),new ag("j~RQYZXz{^~^O'{~~aP!P!Qd~iO'|~~",25,318)],topRules:{Script:[0,7],SingleExpression:[1,272],SingleClassItem:[2,273]},dialects:{jsx:0,ts:14769},dynamicPrecedences:{77:1,79:1,91:1,167:1,196:1},specialized:[{term:322,get:t=>zv[t]||-1},{term:338,get:t=>Uv[t]||-1},{term:92,get:t=>qv[t]||-1}],tokenPrec:14793}),Bv=[Nd("function ${name}(${params}) {\n\t${}\n}",{label:"function",detail:"definition",type:"keyword"}),Nd("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n\t${}\n}",{label:"for",detail:"loop",type:"keyword"}),Nd("for (let ${name} of ${collection}) {\n\t${}\n}",{label:"for",detail:"of loop",type:"keyword"}),Nd("do {\n\t${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),Nd("while (${}) {\n\t${}\n}",{label:"while",detail:"loop",type:"keyword"}),Nd("try {\n\t${}\n} catch (${error}) {\n\t${}\n}",{label:"try",detail:"/ catch block",type:"keyword"}),Nd("if (${}) {\n\t${}\n}",{label:"if",detail:"block",type:"keyword"}),Nd("if (${}) {\n\t${}\n} else {\n\t${}\n}",{label:"if",detail:"/ else block",type:"keyword"}),Nd("class ${name} {\n\tconstructor(${params}) {\n\t\t${}\n\t}\n}",{label:"class",detail:"definition",type:"keyword"}),Nd("import {${names}} from \"${module}\"\n${}",{label:"import",detail:"named",type:"keyword"}),Nd("import ${name} from \"${module}\"\n${}",{label:"import",detail:"default",type:"keyword"})],Fv=Bv.concat([Nd("interface ${name} {\n\t${}\n}",{label:"interface",detail:"definition",type:"keyword"}),Nd("type ${name} = ${type}",{label:"type",detail:"definition",type:"keyword"}),Nd("enum ${name} {\n\t${}\n}",{label:"enum",detail:"definition",type:"keyword"})]),Gv=new Ra,Hv=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function Kv(t){return(e,n)=>{let o=e.node.getChild("VariableDefinition");return o&&n(o,t),!0}}const Jv=["FunctionDeclaration"],ty={FunctionDeclaration:Kv("function"),ClassDeclaration:Kv("class"),ClassExpression:()=>!0,EnumDeclaration:Kv("constant"),TypeAliasDeclaration:Kv("type"),NamespaceDeclaration:Kv("namespace"),VariableDefinition(t,e){t.matchContext(Jv)||e(t,"variable")},TypeDefinition(t,e){e(t,"type")},__proto__:null};function ey(t,e){let n=Gv.get(e);if(n)return n;let o=[],i=!0;function r(e,n){let i=t.sliceString(e.from,e.to);o.push({label:i,type:n})}return e.cursor(ga.IncludeAnonymous).iterate((e=>{if(i)i=!1;else if(e.name){let t=ty[e.name];if(t&&t(e,r)||Hv.has(e.name))return!1}else if(e.to-e.from>8192){for(let n of ey(t,e.node))o.push(n);return!1}})),Gv.set(e,o),o}const ny=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/,oy=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName",".","?."];function iy(t){let e=Al(t.state).resolveInner(t.pos,-1);if(oy.indexOf(e.name)>-1)return null;let n="VariableName"==e.name||e.to-e.from<20&&ny.test(t.state.sliceDoc(e.from,e.to));if(!n&&!t.explicit)return null;let o=[];for(let n=e;n;n=n.parent)Hv.has(n.name)&&(o=o.concat(ey(t.state.doc,n)));return{options:o,from:n?e.from:t.pos,validFor:ny}}const ry=El.define({name:"javascript",parser:Yv.configure({props:[Yl.add({IfStatement:ec({except:/^\s*({|else\b)/}),TryStatement:ec({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:t=>t.baseIndent,SwitchBody:t=>{let e=t.textAfter,n=/^\s*\}/.test(e),o=/^\s*(case|default)\b/.test(e);return t.baseIndent+(n?0:o?1:2)*t.unit},Block:Jl({closing:"}"}),ArrowFunction:t=>t.baseIndent+t.unit,"TemplateString BlockComment":()=>null,"Statement Property":ec({except:/^{/}),JSXElement(t){let e=/^\s*<\//.test(t.textAfter);return t.lineIndent(t.node.from)+(e?0:t.unit)},JSXEscape(t){let e=/\s*\}/.test(t.textAfter);return t.lineIndent(t.node.from)+(e?0:t.unit)},"JSXOpenTag JSXSelfClosingTag":t=>t.column(t.node.from)+t.unit}),ic.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression ObjectType":rc,BlockComment:t=>({from:t.from+2,to:t.to-2})})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),sy={test:t=>/^JSX/.test(t.name),facet:kl({commentTokens:{block:{open:"{/*",close:"*/}"}}})},ay=ry.configure({dialect:"ts"},"typescript"),ly=ry.configure({dialect:"jsx",props:[Pl.add((t=>t.isTop?[sy]:void 0))]}),cy=ry.configure({dialect:"jsx ts",props:[Pl.add((t=>t.isTop?[sy]:void 0))]},"typescript");let uy=t=>({label:t,type:"keyword"});const py="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(uy),hy=py.concat(["declare","implements","private","protected","public"].map(uy));function dy(t={}){let e=t.jsx?t.typescript?cy:ly:t.typescript?ay:ry,n=t.typescript?Fv.concat(hy):Bv.concat(py);return new Nl(e,[ry.data.of({autocomplete:(o=oy,i=Nh(n),t=>{for(let e=Al(t.state).resolveInner(t.pos,-1);e;e=e.parent){if(o.indexOf(e.name)>-1)return null;if(e.type.isTop)break}return i(t)})}),ry.data.of({autocomplete:iy}),t.jsx?my:[]]);var o,i}function fy(t,e,n=t.length){for(let o=null==e?void 0:e.firstChild;o;o=o.nextSibling)if("JSXIdentifier"==o.name||"JSXBuiltin"==o.name||"JSXNamespacedName"==o.name||"JSXMemberExpression"==o.name)return t.sliceString(o.from,Math.min(o.to,n));return""}const gy="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),my=cr.inputHandler.of(((t,e,n,o,i)=>{if((gy?t.composing:t.compositionStarted)||t.state.readOnly||e!=n||">"!=o&&"/"!=o||!ry.isActiveAt(t.state,e,-1))return!1;let r=i(),{state:s}=r,a=s.changeByRange((t=>{var e;let n,{head:i}=t,r=Al(s).resolveInner(i-1,-1);if("JSXStartTag"==r.name&&(r=r.parent),s.doc.sliceString(i-1,i)!=o||"JSXAttributeValue"==r.name&&r.to>i);else{if(">"==o&&"JSXFragmentTag"==r.name)return{range:t,changes:{from:i,insert:`</>`}};if("/"==o&&"JSXStartCloseTag"==r.name){let t=r.parent,o=t.parent;if(o&&t.from==i-2&&((n=fy(s.doc,o.firstChild,i))||"JSXFragmentTag"==(null===(e=o.firstChild)||void 0===e?void 0:e.name))){let t=`${n}>`;return{range:Z.cursor(i+t.length,-1),changes:{from:i,insert:t}}}}else if(">"==o){let e=function(t){for(;;){if("JSXOpenTag"==t.name||"JSXSelfClosingTag"==t.name||"JSXFragmentTag"==t.name)return t;if("JSXEscape"==t.name||!t.parent)return null;t=t.parent}}(r);if(e&&"JSXOpenTag"==e.name&&!/^\/?>|^<\//.test(s.doc.sliceString(i,i+2))&&(n=fy(s.doc,e,i)))return{range:t,changes:{from:i,insert:`</${n}>`}}}}return{range:t}}));return!a.changes.empty&&(t.dispatch([r,s.update(a,{userEvent:"input.complete",scrollIntoView:!0})]),!0)}));const vy=["_blank","_self","_top","_parent"],yy=["ascii","utf-8","utf-16","latin1","latin1"],_y=["get","post","put","delete"],Oy=["application/x-www-form-urlencoded","multipart/form-data","text/plain"],by=["true","false"],wy={},xy={a:{attrs:{href:null,ping:null,type:null,media:null,target:vy,hreflang:null}},abbr:wy,address:wy,area:{attrs:{alt:null,coords:null,href:null,target:null,ping:null,media:null,hreflang:null,type:null,shape:["default","rect","circle","poly"]}},article:wy,aside:wy,audio:{attrs:{src:null,mediagroup:null,crossorigin:["anonymous","use-credentials"],preload:["none","metadata","auto"],autoplay:["autoplay"],loop:["loop"],controls:["controls"]}},b:wy,base:{attrs:{href:null,target:vy}},bdi:wy,bdo:wy,blockquote:{attrs:{cite:null}},body:wy,br:wy,button:{attrs:{form:null,formaction:null,name:null,value:null,autofocus:["autofocus"],disabled:["autofocus"],formenctype:Oy,formmethod:_y,formnovalidate:["novalidate"],formtarget:vy,type:["submit","reset","button"]}},canvas:{attrs:{width:null,height:null}},caption:wy,center:wy,cite:wy,code:wy,col:{attrs:{span:null}},colgroup:{attrs:{span:null}},command:{attrs:{type:["command","checkbox","radio"],label:null,icon:null,radiogroup:null,command:null,title:null,disabled:["disabled"],checked:["checked"]}},data:{attrs:{value:null}},datagrid:{attrs:{disabled:["disabled"],multiple:["multiple"]}},datalist:{attrs:{data:null}},dd:wy,del:{attrs:{cite:null,datetime:null}},details:{attrs:{open:["open"]}},dfn:wy,div:wy,dl:wy,dt:wy,em:wy,embed:{attrs:{src:null,type:null,width:null,height:null}},eventsource:{attrs:{src:null}},fieldset:{attrs:{disabled:["disabled"],form:null,name:null}},figcaption:wy,figure:wy,footer:wy,form:{attrs:{action:null,name:null,"accept-charset":yy,autocomplete:["on","off"],enctype:Oy,method:_y,novalidate:["novalidate"],target:vy}},h1:wy,h2:wy,h3:wy,h4:wy,h5:wy,h6:wy,head:{children:["title","base","link","style","meta","script","noscript","command"]},header:wy,hgroup:wy,hr:wy,html:{attrs:{manifest:null}},i:wy,iframe:{attrs:{src:null,srcdoc:null,name:null,width:null,height:null,sandbox:["allow-top-navigation","allow-same-origin","allow-forms","allow-scripts"],seamless:["seamless"]}},img:{attrs:{alt:null,src:null,ismap:null,usemap:null,width:null,height:null,crossorigin:["anonymous","use-credentials"]}},input:{attrs:{alt:null,dirname:null,form:null,formaction:null,height:null,list:null,max:null,maxlength:null,min:null,name:null,pattern:null,placeholder:null,size:null,src:null,step:null,value:null,width:null,accept:["audio/*","video/*","image/*"],autocomplete:["on","off"],autofocus:["autofocus"],checked:["checked"],disabled:["disabled"],formenctype:Oy,formmethod:_y,formnovalidate:["novalidate"],formtarget:vy,multiple:["multiple"],readonly:["readonly"],required:["required"],type:["hidden","text","search","tel","url","email","password","datetime","date","month","week","time","datetime-local","number","range","color","checkbox","radio","file","submit","image","reset","button"]}},ins:{attrs:{cite:null,datetime:null}},kbd:wy,keygen:{attrs:{challenge:null,form:null,name:null,autofocus:["autofocus"],disabled:["disabled"],keytype:["RSA"]}},label:{attrs:{for:null,form:null}},legend:wy,li:{attrs:{value:null}},link:{attrs:{href:null,type:null,hreflang:null,media:null,sizes:["all","16x16","16x16 32x32","16x16 32x32 64x64"]}},map:{attrs:{name:null}},mark:wy,menu:{attrs:{label:null,type:["list","context","toolbar"]}},meta:{attrs:{content:null,charset:yy,name:["viewport","application-name","author","description","generator","keywords"],"http-equiv":["content-language","content-type","default-style","refresh"]}},meter:{attrs:{value:null,min:null,low:null,high:null,max:null,optimum:null}},nav:wy,noscript:wy,object:{attrs:{data:null,type:null,name:null,usemap:null,form:null,width:null,height:null,typemustmatch:["typemustmatch"]}},ol:{attrs:{reversed:["reversed"],start:null,type:["1","a","A","i","I"]},children:["li","script","template","ul","ol"]},optgroup:{attrs:{disabled:["disabled"],label:null}},option:{attrs:{disabled:["disabled"],label:null,selected:["selected"],value:null}},output:{attrs:{for:null,form:null,name:null}},p:wy,param:{attrs:{name:null,value:null}},pre:wy,progress:{attrs:{value:null,max:null}},q:{attrs:{cite:null}},rp:wy,rt:wy,ruby:wy,samp:wy,script:{attrs:{type:["text/javascript"],src:null,async:["async"],defer:["defer"],charset:yy}},section:wy,select:{attrs:{form:null,name:null,size:null,autofocus:["autofocus"],disabled:["disabled"],multiple:["multiple"]}},slot:{attrs:{name:null}},small:wy,source:{attrs:{src:null,type:null,media:null}},span:wy,strong:wy,style:{attrs:{type:["text/css"],media:null,scoped:null}},sub:wy,summary:wy,sup:wy,table:wy,tbody:wy,td:{attrs:{colspan:null,rowspan:null,headers:null}},template:wy,textarea:{attrs:{dirname:null,form:null,maxlength:null,name:null,placeholder:null,rows:null,cols:null,autofocus:["autofocus"],disabled:["disabled"],readonly:["readonly"],required:["required"],wrap:["soft","hard"]}},tfoot:wy,th:{attrs:{colspan:null,rowspan:null,headers:null,scope:["row","col","rowgroup","colgroup"]}},thead:wy,time:{attrs:{datetime:null}},title:wy,tr:wy,track:{attrs:{src:null,label:null,default:null,kind:["subtitles","captions","descriptions","chapters","metadata"],srclang:null}},ul:{children:["li","script","template","ul","ol"]},var:wy,video:{attrs:{src:null,poster:null,width:null,height:null,crossorigin:["anonymous","use-credentials"],preload:["auto","metadata","none"],autoplay:["autoplay"],mediagroup:["movie"],muted:["muted"],controls:["controls"]}},wbr:wy},Sy={accesskey:null,class:null,contenteditable:by,contextmenu:null,dir:["ltr","rtl","auto"],draggable:["true","false","auto"],dropzone:["copy","move","link","string:","file:"],hidden:["hidden"],id:null,inert:["inert"],itemid:null,itemprop:null,itemref:null,itemscope:["itemscope"],itemtype:null,lang:["ar","bn","de","en-GB","en-US","es","fr","hi","id","ja","pa","pt","ru","tr","zh"],spellcheck:by,autocorrect:by,autocapitalize:by,style:null,tabindex:null,title:null,translate:["yes","no"],rel:["stylesheet","alternate","author","bookmark","help","license","next","nofollow","noreferrer","prefetch","prev","search","tag"],role:"alert application article banner button cell checkbox complementary contentinfo dialog document feed figure form grid gridcell heading img list listbox listitem main navigation region row rowgroup search switch tab table tabpanel textbox timer".split(" "),"aria-activedescendant":null,"aria-atomic":by,"aria-autocomplete":["inline","list","both","none"],"aria-busy":by,"aria-checked":["true","false","mixed","undefined"],"aria-controls":null,"aria-describedby":null,"aria-disabled":by,"aria-dropeffect":null,"aria-expanded":["true","false","undefined"],"aria-flowto":null,"aria-grabbed":["true","false","undefined"],"aria-haspopup":by,"aria-hidden":by,"aria-invalid":["true","false","grammar","spelling"],"aria-label":null,"aria-labelledby":null,"aria-level":null,"aria-live":["off","polite","assertive"],"aria-multiline":by,"aria-multiselectable":by,"aria-owns":null,"aria-posinset":null,"aria-pressed":["true","false","mixed","undefined"],"aria-readonly":by,"aria-relevant":null,"aria-required":by,"aria-selected":["true","false","undefined"],"aria-setsize":null,"aria-sort":["ascending","descending","none","other"],"aria-valuemax":null,"aria-valuemin":null,"aria-valuenow":null,"aria-valuetext":null},ky=("beforeunload copy cut dragstart dragover dragleave dragenter dragend "+"drag paste focus blur change click load mousedown mouseenter mouseleave "+"mouseup keydown keyup resize scroll unload").split(" ").map((t=>"on"+t));for(let t of ky)Sy[t]=null;class Py{constructor(t,e){this.tags=Object.assign(Object.assign({},xy),t),this.globalAttrs=Object.assign(Object.assign({},Sy),e),this.allTags=Object.keys(this.tags),this.globalAttrNames=Object.keys(this.globalAttrs)}}function Cy(t,e,n=t.length){if(!e)return"";let o=e.firstChild,i=o&&o.getChild("TagName");return i?t.sliceString(i.from,Math.min(i.to,n)):""}function Ty(t,e=!1){for(;t;t=t.parent)if("Element"==t.name){if(!e)return t;e=!1}return null}function Ey(t,e,n){let o=n.tags[Cy(t,Ty(e))];return(null==o?void 0:o.children)||n.allTags}function Ay(t,e){let n=[];for(let o=Ty(e);o&&!o.type.isTop;o=Ty(o.parent)){let i=Cy(t,o);if(i&&"CloseTag"==o.lastChild.name)break;i&&n.indexOf(i)<0&&("EndTag"==e.name||e.from>=o.firstChild.to)&&n.push(i)}return n}Py.default=new Py;const Qy=/^[:\-\.\w\u00b7-\uffff]*$/;function $y(t,e,n,o,i){let r=/\s*>/.test(t.sliceDoc(i,i+5))?"":">",s=Ty(n,!0);return{from:o,to:i,options:Ey(t.doc,s,e).map((t=>({label:t,type:"type"}))).concat(Ay(t.doc,n).map(((t,e)=>({label:"/"+t,apply:"/"+t+r,type:"type",boost:99-e})))),validFor:/^\/?[:\-\.\w\u00b7-\uffff]*$/}}function jy(t,e,n,o){let i=/\s*>/.test(t.sliceDoc(o,o+5))?"":">";return{from:n,to:o,options:Ay(t.doc,e).map(((t,e)=>({label:t,apply:t+i,type:"type",boost:99-e}))),validFor:Qy}}function Ry(t,e){let{state:n,pos:o}=e,i=Al(n).resolveInner(o,-1),r=i.resolve(o);for(let t,e=o;r==i&&(t=i.childBefore(e));){let n=t.lastChild;if(!n||!n.type.isError||n.from<n.to)break;r=i=t,e=n.from}return"TagName"==i.name?i.parent&&/CloseTag$/.test(i.parent.name)?jy(n,i,i.from,o):$y(n,t,i,i.from,o):"StartTag"==i.name?$y(n,t,i,o,o):"StartCloseTag"==i.name||"IncompleteCloseTag"==i.name?jy(n,i,o,o):"OpenTag"==i.name||"SelfClosingTag"==i.name||"AttributeName"==i.name?function(t,e,n,o,i){let r=Ty(n),s=r?e.tags[Cy(t.doc,r)]:null,a=s&&s.attrs?Object.keys(s.attrs):[];return{from:o,to:i,options:(s&&!1===s.globalAttrs?a:a.length?a.concat(e.globalAttrNames):e.globalAttrNames).map((t=>({label:t,type:"property"}))),validFor:Qy}}(n,t,i,"AttributeName"==i.name?i.from:o,o):"Is"==i.name||"AttributeValue"==i.name||"UnquotedAttributeValue"==i.name?function(t,e,n,o,i){var r;let s,a=null===(r=n.parent)||void 0===r?void 0:r.getChild("AttributeName"),l=[];if(a){let r=t.sliceDoc(a.from,a.to),c=e.globalAttrs[r];if(!c){let o=Ty(n),i=o?e.tags[Cy(t.doc,o)]:null;c=(null==i?void 0:i.attrs)&&i.attrs[r]}if(c){let e=t.sliceDoc(o,i).toLowerCase(),n='"',r='"';/^['"]/.test(e)?(s='"'==e[0]?/^[^"]*$/:/^[^']*$/,n="",r=t.sliceDoc(i,i+1)==e[0]?"":e[0],e=e.slice(1),o++):s=/^[^\s<>='"]*$/;for(let t of c)l.push({label:t,apply:n+t+r,type:"constant"})}}return{from:o,to:i,options:l,validFor:s}}(n,t,i,"Is"==i.name?o:i.from,o):!e.explicit||"Element"!=r.name&&"Text"!=r.name&&"Document"!=r.name?null:function(t,e,n,o){let i=[],r=0;for(let o of Ey(t.doc,n,e))i.push({label:"<"+o,type:"type"});for(let e of Ay(t.doc,n))i.push({label:"</"+e+">",type:"type",boost:99-r++});return{from:o,to:o,options:i,validFor:/^<\/?[:\-\.\w\u00b7-\uffff]*$/}}(n,t,i,o)}function My(t){let{extraTags:e,extraGlobalAttributes:n}=t,o=n||e?new Py(e,n):Py.default;return t=>Ry(o,t)}const Vy=ry.parser.configure({top:"SingleExpression"}),Zy=[{tag:"script",attrs:t=>"text/typescript"==t.type||"ts"==t.lang,parser:ay.parser},{tag:"script",attrs:t=>"text/babel"==t.type||"text/jsx"==t.type,parser:ly.parser},{tag:"script",attrs:t=>"text/typescript-jsx"==t.type,parser:cy.parser},{tag:"script",attrs:t=>/^(importmap|speculationrules|application\/(.+\+)?json)$/i.test(t.type),parser:Vy},{tag:"script",attrs:t=>!t.type||/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i.test(t.type),parser:ry.parser},{tag:"style",attrs:t=>(!t.lang||"css"==t.lang)&&(!t.type||/^(text\/)?(x-)?(stylesheet|css)$/i.test(t.type)),parser:pm.parser}],Dy=[{name:"style",parser:pm.parser.configure({top:"Styles"})}].concat(ky.map((t=>({name:t,parser:ry.parser})))),Iy=El.define({name:"html",parser:uv.configure({props:[Yl.add({Element(t){let e=/^(\s*)(<\/)?/.exec(t.textAfter);return t.node.to<=t.pos+e[0].length?t.continue():t.lineIndent(t.node.from)+(e[2]?0:t.unit)},"OpenTag CloseTag SelfClosingTag":t=>t.column(t.node.from)+t.unit,Document(t){if(t.pos+/\s*/.exec(t.textAfter)[0].length<t.node.to)return t.continue();let e,n=null;for(let e=t.node;;){let t=e.lastChild;if(!t||"Element"!=t.name||t.to!=e.to)break;n=e=t}return n&&(!(e=n.lastChild)||"CloseTag"!=e.name&&"SelfClosingTag"!=e.name)?t.lineIndent(n.from)+t.unit:null}}),ic.add({Element(t){let e=t.firstChild,n=t.lastChild;return e&&"OpenTag"==e.name?{from:e.to,to:"CloseTag"==n.name?n.from:t.to}:null}}),qc.add({"OpenTag CloseTag":t=>t.getChild("TagName")})]}),languageData:{commentTokens:{block:{open:"\x3c!--",close:"--\x3e"}},indentOnInput:/^\s*<\/\w+\W$/,wordChars:"-._"}}),Ny=Iy.configure({wrap:fv(Zy,Dy)});const Wy=new Set("area base br col command embed frame hr img input keygen link meta param source track wbr menuitem".split(" ")),Xy=cr.inputHandler.of(((t,e,n,o,i)=>{if(t.composing||t.state.readOnly||e!=n||">"!=o&&"/"!=o||!Ny.isActiveAt(t.state,e,-1))return!1;let r=i(),{state:s}=r,a=s.changeByRange((t=>{var e,n,i;let r,a=s.doc.sliceString(t.from-1,t.to)==o,{head:l}=t,c=Al(s).resolveInner(l,-1);if(a&&">"==o&&"EndTag"==c.name){let o=c.parent;if("CloseTag"!=(null===(n=null===(e=o.parent)||void 0===e?void 0:e.lastChild)||void 0===n?void 0:n.name)&&(r=Cy(s.doc,o.parent,l))&&!Wy.has(r)){return{range:t,changes:{from:l,to:l+(">"===s.doc.sliceString(l,l+1)?1:0),insert:`</${r}>`}}}}else if(a&&"/"==o&&"IncompleteCloseTag"==c.name){let t=c.parent;if(c.from==l-2&&"CloseTag"!=(null===(i=t.lastChild)||void 0===i?void 0:i.name)&&(r=Cy(s.doc,t,l))&&!Wy.has(r)){let t=l+(">"===s.doc.sliceString(l,l+1)?1:0),e=`${r}>`;return{range:Z.cursor(l+e.length,-1),changes:{from:l,to:t,insert:e}}}}return{range:t}}));return!a.changes.empty&&(t.dispatch([r,s.update(a,{userEvent:"input.complete",scrollIntoView:!0})]),!0)}));var Ly=n(8921);function zy(t,{state:e,dispatch:n}){var o;let i=e.doc.iterRange(t.from,t.to),r='';for(;!i.done;)r+=i.value,i=i.next();const s=null!==(o=e.facet(Uy))&&void 0!==o?o:{},a=function(t){const e=t.facet(Il);return e===pm?(t,e)=>(0,Ly.css_beautify)(t,e):e===Ny?(t,e)=>(0,Ly.html_beautify)(t,e):e===ry?(t,e)=>(0,Ly.js_beautify)(t,e):(t,e)=>t}(e)(e.doc.toString(),Object.assign({indent_size:Ll(e)},s));return e.selection.asSingle().main==t?n(e.update(e.replaceSelection(a))):n({changes:{from:t.from,to:t.to,insert:a}}),!0}const Uy=N.define();var qy,Yy=void 0&&(void 0).__extends||(qy=function(t,e){return qy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},qy(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}qy(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),By=void 0&&(void 0).__assign||function(){return By=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},By.apply(this,arguments)},Fy=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.readOnlyCompartment=new et,e.lineNumbersCompartment=new et,e}return Yy(e,t),e.prototype.defaults=function(){return{input:'',label:'',codeName:'',theme:'hopscotch',readOnly:!0,lineNumbers:!0,autoFormat:!0,readOnlyRanges:function(t){return[]}}},Object.defineProperty(e.prototype,"readonly",{get:function(){return this.get('readOnly')},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"readOnlyRanges",{get:function(){return this.get('readOnlyRanges')},enumerable:!1,configurable:!0}),e.prototype.editorFromTextArea=function(t,e){var n,o=new cr(By({doc:t.value},e));return null===(n=t.parentNode)||void 0===n||n.insertBefore(o.dom,t),t.style.display='none',t.form&&t.form.addEventListener('submit',(function(){t.value=o.state.doc.toString()})),o},e.prototype.getCodeLanguage=function(t){switch(t){case'htmlmixed':return function(t={}){let e,n="";!1===t.matchClosingTags&&(n="noMatch"),!0===t.selfClosingTags&&(n=(n?n+" ":"")+"selfClosing"),(t.nestedLanguages&&t.nestedLanguages.length||t.nestedAttributes&&t.nestedAttributes.length)&&(e=fv((t.nestedLanguages||[]).concat(Zy),(t.nestedAttributes||[]).concat(Dy)));let o=e?Iy.configure({wrap:e,dialect:n}):n?Ny.configure({dialect:n}):Ny;return new Nl(o,[Ny.data.of({autocomplete:My(t)}),!1!==t.autoCloseTags?Xy:[],dy().support,hm().support])}();case'css':return hm();case'js':return dy();default:return}},e.prototype.setReadonlyState=function(t){var e=this.editor,n=this.readOnlyCompartment;if(e){var o=e.state.update({effects:[n.reconfigure(Tt.readOnly.of(t))]});e.update([o])}},e.prototype.init=function(t){var e=this,n=this.getCodeLanguage(this.get('codeName')),o=[];o.push(jf),o.push(Gf),o.push(this.lineNumbersCompartment.of(Fs())),o.push($c(Hf)),n&&o.push(n),o.push(this.readOnlyCompartment.of(Tt.readOnly.of(this.readonly))),o.push(function(t){return[ia(t),(n=t,Tt.transactionFilter.of((function(t){if(t.isUserEvent("delete.selection")&&!t.isUserEvent("delete.selection.smart")){var e=t.startState.selection.ranges.map((function(t){return{from:t.from,to:t.to}}));if(e.length>0){var o=n(t.startState);return na(o,e[0],{from:0,to:t.startState.doc.line(t.startState.doc.lines).to}).map((function(e){return t.startState.update({changes:{from:e.from,to:e.to},annotations:vt.userEvent.of("".concat(t.annotation(vt.userEvent),".smart"))})}))}}return t}))),(e=t,Tt.changeFilter.of((function(t){var n,o,i,r;try{for(var s=e(t.startState),a=e(t.state),l=0;l<s.length;l++){var c=null!==(n=s[l].from)&&void 0!==n?n:0,u=null!==(o=s[l].to)&&void 0!==o?o:t.startState.doc.line(t.startState.doc.lines).to,p=null!==(i=a[l].from)&&void 0!==i?i:0,h=null!==(r=a[l].to)&&void 0!==r?r:t.state.doc.line(t.state.doc.lines).to;if(t.startState.sliceDoc(c,u)!==t.state.sliceDoc(p,h))return!1}}catch(t){return!1}return!0})))];var e,n}(this.readOnlyRanges)),o.push(cr.updateListener.of((function(t){t.docChanged&&e.trigger('update',e)})));var i=Tt.create({doc:t.value,extensions:o});return this.editor=this.editorFromTextArea(t,By({state:i},this.attributes)),this.element=t,this},e.prototype.getEditor=function(){return this.editor},e.prototype.getElement=function(){return this.element},e.prototype.setElement=function(t){return this.element=t,this},e.prototype.focus=function(){return this.getEditor().focus(),this},e.prototype.getContent=function(){var t=this.getEditor();return t&&t.state.doc},e.prototype.setContent=function(t,e){void 0===e&&(e={});var n=this.readonly;if(this.editor){this.setReadonlyState(!1);var o=this.editor.state,i=o.update({changes:{from:0,to:o.doc.length,insert:t}});this.editor.update([i]);var r=this.get('autoFormat');(!0===r||Array.isArray(r)&&r.includes(this.get('codeName')))&&(({state:t,dispatch:e})=>{zy(Z.range(0,t.doc.length),{state:t,dispatch:e})})(this.editor),this.setReadonlyState(n)}},e}(o.Hn);const Gy=Fy;Fy.prototype.CodeMirror=cr},2266:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>o});const o={run:function(t){t.Components.clear(),t.Css.clear()}}},2142:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>s});var o=n(9050),i=n(1250),r=n(4968);const s={run:function(t){(0,o.bindAll)(this,'onKeyUp','enableDragger','disableDragger'),this.editor=t,this.canvasModel=this.canvas.getCanvasView().model,this.toggleMove(1)},stop:function(t){this.toggleMove(),this.disableDragger()},onKeyUp:function(t){' '===(0,r.sN)(t)&&this.editor.stopCommand(this.id)},enableDragger:function(t){this.toggleDragger(1,t)},disableDragger:function(t){this.toggleDragger(0,t)},toggleDragger:function(t,e){var n=this.canvasModel,o=this.em,r=this.dragger,s=t?'add':'remove';this.getCanvas().classList[s]("".concat(this.ppfx,"is__grabbing")),r||(r=new i.Z({getPosition:function(){return{x:n.get('x'),y:n.get('y')}},setPosition:function(t){var e=t.x,o=t.y;n.set({x:e,y:o})},onStart:function(t,e){o.trigger('canvas:move:start',e)},onDrag:function(t,e){o.trigger('canvas:move',e)},onEnd:function(t,e){o.trigger('canvas:move:end',e)}}),this.dragger=r),t?r.start(e):r.stop()},toggleMove:function(t){var e=this.ppfx,n=t?'add':'remove',o=t?'on':'off',i={on:r.on,off:r.S1},s=this.getCanvas(),a=["".concat(e,"is__grab")];!t&&a.push("".concat(e,"is__grabbing")),a.forEach((function(t){return s.classList[n](t)})),i[o](document,'keyup',this.onKeyUp),i[o](s,'mousedown',this.enableDragger),i[o](document,'mouseup',this.disableDragger)}}},9458:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a,defineCommand:()=>s});var o,i=n(6847),r=void 0&&(void 0).__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});function s(t){return t}const a=function(t){function e(e){var n=t.call(this,0)||this;n.config=e||{},n.em=n.config.em||{};var o=n.config.stylePrefix;return n.pfx=o,n.ppfx=n.config.pStylePrefix,n.hoverClass="".concat(o,"hover"),n.badgeClass="".concat(o,"badge"),n.plhClass="".concat(o,"placeholder"),n.freezClass="".concat(n.ppfx,"freezed"),n.canvas=n.em.Canvas,n.init(n.config),n}return r(e,t),e.prototype.onFrameScroll=function(t){},e.prototype.getCanvas=function(){return this.canvas.getElement()},e.prototype.getCanvasBody=function(){return this.canvas.getBody()},e.prototype.getCanvasTools=function(){return this.canvas.getToolsEl()},e.prototype.offset=function(t){var e=t.getBoundingClientRect();return{top:e.top+t.ownerDocument.body.scrollTop,left:e.left+t.ownerDocument.body.scrollLeft}},e.prototype.init=function(t){},e.prototype.callRun=function(t,e){void 0===e&&(e={});var n=this.id;if(t.trigger("run:".concat(n,":before"),e),!e||!e.abort){var o=e.sender||t,i=this.run(t,o,e);return t.trigger("run:".concat(n),i,e),t.trigger('run',n,i,e),i}t.trigger("abort:".concat(n),e)},e.prototype.callStop=function(t,e){void 0===e&&(e={});var n=this.id,o=e.sender||t;t.trigger("stop:".concat(n,":before"),e);var i=this.stop(t,o,e);return t.trigger("stop:".concat(n),i,e),t.trigger('stop',n,i,e),i},e.prototype.stopCommand=function(t){this.em.Commands.stop(this.id,t)},e.prototype.run=function(t,e,n){},e.prototype.stop=function(t,e,n){},e}(i.Hn)},8463:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});var o=n(9050),i=void 0&&(void 0).__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))};const r={run:function(t,e,n){var r=this;void 0===n&&(n={});var s=[],a=n.component||t.getSelectedAll();return(a=(0,o.isArray)(a)?i([],a,!0):[a]).filter(Boolean).forEach((function(t){var e,n;if(!t.get('removable'))return r.em.logWarning('The element is not removable',{component:t});s.push(t),((null===(n=null===(e=t.delegate)||void 0===e?void 0:e.remove)||void 0===n?void 0:n.call(e,t))||t).remove()})),t.selectRemove(s),s}}},1474:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var o=n(9050),i=n(1250),r=void 0&&(void 0).__assign||function(){return r=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)},s='dmode';const a={run:function(t,e,n){var a=this;void 0===n&&(n={}),(0,o.bindAll)(this,'setPosition','onStart','onDrag','onEnd','getPosition','getGuidesStatic','renderGuide','getGuidesTarget');var l=n.target,c=n.event,u=n.mode,p=n.dragger,h=void 0===p?{}:p,d=l.getEl(),f=r({doc:d.ownerDocument,onStart:this.onStart,onEnd:this.onEnd,onDrag:this.onDrag,getPosition:this.getPosition,setPosition:this.setPosition,guidesStatic:function(){return a.guidesStatic},guidesTarget:function(){return a.guidesTarget}},h);this.setupGuides(),this.opts=n,this.editor=t,this.em=t.getModel(),this.target=l,this.isTran='translate'==u,this.guidesContainer=this.getGuidesContainer(),this.guidesTarget=this.getGuidesTarget(),this.guidesStatic=this.getGuidesStatic();var g=this.dragger;return g?g.setOptions(f):(g=new i.Z(f),this.dragger=g),c&&g.start(c),this.toggleDrag(1),this.em.trigger("".concat(s,":start"),this.getEventOpts()),g},getEventOpts:function(){return{mode:this.opts.mode,target:this.target,guidesTarget:this.guidesTarget,guidesStatic:this.guidesStatic}},stop:function(){this.toggleDrag()},setupGuides:function(){(this.guides||[]).forEach((function(t){var e=t.guide;e&&e.parentNode.removeChild(e)})),this.guides=[]},getGuidesContainer:function(){var t=this,e=this.guidesEl;if(!e){var n=this,i=n.editor,r=n.em,s=n.opts,a=i.getConfig().stylePrefix,l=document.createElement('div'),c=document.createElement('div'),u="<div class=\"".concat(a,"guide-info__line ").concat(a,"danger-bg\">\n        <div class=\"").concat(a,"guide-info__content ").concat(a,"danger-color\"></div>\n      </div>");(e=document.createElement('div')).className="".concat(a,"guides"),l.className="".concat(a,"guide-info ").concat(a,"guide-info__x"),c.className="".concat(a,"guide-info ").concat(a,"guide-info__y"),l.innerHTML=u,c.innerHTML=u,e.appendChild(l),e.appendChild(c),i.Canvas.getGlobalToolsEl().appendChild(e),this.guidesEl=e,this.elGuideInfoX=l,this.elGuideInfoY=c,this.elGuideInfoContentX=l.querySelector(".".concat(a,"guide-info__content")),this.elGuideInfoContentY=c.querySelector(".".concat(a,"guide-info__content")),r.on('canvas:update frame:scroll',(0,o.debounce)((function(){var e;t.updateGuides(),s.debug&&(null===(e=t.guides)||void 0===e||e.forEach((function(e){return t.renderGuide(e)})))}),200))}return e},getGuidesStatic:function(){var t=this,e=[],n=this.target.getEl(),i=n.parentNode,r=void 0===i?{}:i;return(0,o.each)(r.children,(function(o){return e=e.concat(n!==o?t.getElementGuides(o):[])})),e.concat(this.getElementGuides(r))},getGuidesTarget:function(){return this.getElementGuides(this.target.getEl())},updateGuides:function(t){var e,n,i=this;(t||this.guides).forEach((function(t){var r=t.origin,s=e===r?n:i.getElementPos(r);e=r,n=s,(0,o.each)(i.getGuidePosUpdate(t,s),(function(e,n){return t[n]=e})),t.originRect=s}))},getGuidePosUpdate:function(t,e){var n={},o=e.top,i=e.height,r=e.left,s=e.width;switch(t.type){case't':n.y=o;break;case'b':n.y=o+i;break;case'l':n.x=r;break;case'r':n.x=r+s;break;case'x':n.x=r+s/2;break;case'y':n.y=o+i/2}return n},renderGuide:function(t){void 0===t&&(t={});var e=t.guide||document.createElement('div'),n='px',o=t.active?2:1,i=e.children[0];return e.style="position: absolute; background-color: ".concat(t.active?'green':'red',";"),e.children.length||((i=document.createElement('div')).style='position: absolute; color: red; padding: 5px; top: 0; left: 0;',e.appendChild(i)),t.y?(e.style.width='100%',e.style.height="".concat(o).concat(n),e.style.top="".concat(t.y).concat(n),e.style.left=0):(e.style.width="".concat(o).concat(n),e.style.height='100%',e.style.left="".concat(t.x).concat(n),e.style.top="0".concat(n)),!t.guide&&this.guidesContainer.appendChild(e),e},getElementPos:function(t){return this.editor.Canvas.getElementPos(t,{noScroll:1})},getElementGuides:function(t){var e=this,n=this.opts,o=this.getElementPos(t),i=o.top,s=o.height,a=o.left,l=o.width,c=[{type:'t',y:i},{type:'b',y:i+s},{type:'l',x:a},{type:'r',x:a+l},{type:'x',x:a+l/2},{type:'y',y:i+s/2}].map((function(i){return r(r({},i),{origin:t,originRect:o,guide:n.debug&&e.renderGuide(i)})}));return c.forEach((function(t){var n;return null===(n=e.guides)||void 0===n?void 0:n.push(t)})),c},getTranslate:function(t,e){void 0===e&&(e='x');var n=0;return(t||'').split(' ').forEach((function(t){var o=t.trim(),i="translate".concat(e.toUpperCase(),"(");0===o.indexOf(i)&&(n=parseFloat(o.replace(i,'')))})),n},setTranslate:function(t,e,n){var o="translate".concat(e.toUpperCase(),"("),i="".concat(o).concat(n,")"),r=(t||'').split(' ').map((function(t){return 0===t.trim().indexOf(o)&&(t=i),t})).join(' ');return r.indexOf(o)<0&&(r+=" ".concat(i)),r},getPosition:function(){var t=this.target,e=this.isTran,n=t.getStyle(),o=n.left,i=n.top,r=n.transform,s=0,a=0;return e?(s=this.getTranslate(r),a=this.getTranslate(r,'y')):(s=parseFloat(o||0),a=parseFloat(i||0)),{x:s,y:a}},setPosition:function(t){var e=t.x,n=t.y,i=t.end,r=t.position,s=t.width,a=t.height,l=this,c=l.target,u=l.isTran,p=l.em,h='px',d=!i,f="".concat(parseInt(e,10)).concat(h),g="".concat(parseInt(n,10)).concat(h),m={};if(u){var v=c.getStyle()['transform']||'';v=this.setTranslate(v,'x',f),m={transform:v=this.setTranslate(v,'y',g),__p:d},c.addStyle(m,{avoidStore:!i})}else{var y={position:r,width:s,height:a},_={left:f,top:g,__p:d};(0,o.keys)(y).forEach((function(t){var e=y[t];e&&(_[t]=e)})),m=_,c.addStyle(m,{avoidStore:!i})}null==p||p.Styles.__emitCmpStyleUpdate(m,{components:p.getSelected()})},_getDragData:function(){var t=this.target;return{target:t,parent:t.parent(),index:t.index()}},onStart:function(t){var e=this,n=e.target,o=e.editor,i=e.isTran,r=e.opts,s=r.center,a=r.onStart,l=o.Canvas,c=n.getStyle(),u='absolute',p=[u,'relative'];if(a&&a(this._getDragData()),!i&&c.position!==u){var h=l.offset(n.getEl()),d=h.left,f=h.top,g=h.width,m=h.height,v=n.parent(),y=void 0;do{var _=v.getStyle();y=p.indexOf(_.position)>=0?v:null,v=v.parent()}while(v&&!y);if(s){var O=l.getMouseRelativeCanvas(t);d=O.x,f=O.y}else if(y){var b=l.offset(y.getEl());d-=b.left,f-=b.top}this.setPosition({x:d,y:f,width:"".concat(g,"px"),height:"".concat(m,"px"),position:u})}},onDrag:function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var o=this.guidesTarget,i=this.opts,r=i.onDrag;this.updateGuides(o),i.debug&&o.forEach((function(e){return t.renderGuide(e)})),i.guidesInfo&&this.renderGuideInfo(o.filter((function(t){return t.active}))),r&&r(this._getDragData())},onEnd:function(t,e,n){void 0===n&&(n={});var o=this,i=o.editor,a=o.opts,l=o.id,c=a.onEnd;c&&c(t,n,r(r({event:t},n),this._getDragData())),i.stopCommand(l),this.hideGuidesInfo(),this.em.trigger("".concat(s,":end"),this.getEventOpts())},hideGuidesInfo:function(){var t=this;['X','Y'].forEach((function(e){var n=t["elGuideInfo".concat(e)];n&&(n.style.display='none')}))},renderGuideInfo:function(t){var e=this;void 0===t&&(t=[]);var n=this.guidesStatic;this.hideGuidesInfo(),t.forEach((function(t){var i=t.origin,a=t.x,l=e.getElementPos(i),c=(0,o.isUndefined)(a)?'y':'x',u='y'===c,p=l[u?'left':'top'],h=l.rect[u?'left':'top'],d=u?p+l.width:p+l.height,f=u?h+l.rect.width:h+l.rect.height,g=e["elGuideInfo".concat(c.toUpperCase())],m=e["elGuideInfoContent".concat(c.toUpperCase())],v=g.style,y=null==n?void 0:n.filter((function(e){return e.type===t.type})).map((function(t){var e=t.originRect,n=e.left,o=e.width,i=e.top,r=e.height,s=u?n+o:i+r;return{gap:s<p?p-s:(u?n:i)-d,guide:t}})).filter((function(t){return t.gap>0})).sort((function(t,e){return t.gap-e.gap})).map((function(t){return t.guide}))[0];if(y){var _=y.originRect,O=_.left,b=_.width,w=_.top,x=_.height,S=_.rect,k=u?O<l.left:w<l.top,P=u?O:w,C=u?S.left:S.top,T=u?O+b:w+x,E=u?S.left+S.width:S.top+S.height,A=u?t.y:t.x,Q=k?T:d,$="".concat(A,"px"),j=k?p-T:P-d,R=k?h-E:C-f;v.display='',v[u?'top':'left']=$,v[u?'left':'top']="".concat(Q,"px"),v[u?'width':'height']="".concat(j,"px"),m.innerHTML="".concat(Math.round(R),"px"),e.em.trigger("".concat(s,":active"),r(r({},e.getEventOpts()),{guide:t,guidesStatic:n,matched:y,posFirst:A,posSecond:Q,size:j,sizeRaw:R,elGuideInfo:g,elGuideInfoCnt:m}))}}))},toggleDrag:function(t){var e=this.ppfx,n=this.editor,o=t?'add':'remove',i=["".concat(e,"is__grabbing")],r=n.Canvas,s=r.getBody();i.forEach((function(t){return s.classList[o](t)})),r[t?'startAutoscroll':'stopAutoscroll']()}}},4866:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>o});const o={run:function(t){if(t.Canvas.hasFocus()){var e=[];t.getSelectedAll().forEach((function(t){var n=t.components(),o=n&&n.filter((function(t){return t.get('selectable')}))[0];o&&e.push(o)})),e.length&&t.select(e)}}}},3594:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>o});const o={run:function(t,e,n){if(void 0===n&&(n={}),t.Canvas.hasFocus()||n.force){var o=[];t.getSelectedAll().forEach((function(t){for(var e=t.parent();e&&!e.get('selectable');)e=e.parent();e&&o.push(e)})),o.length&&t.select(o)}}}},656:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>o});const o={run:function(t){if(t.Canvas.hasFocus()){var e=[];t.getSelectedAll().forEach((function(t){var n=t.parent();if(n){var o,i=n.components().length,r=0,s=0;do{r++,o=(s=t.index()+r)<=i?n.getChildAt(s):null}while(o&&!o.get('selectable'));e.push(o||t)}})),e.length&&t.select(e)}}}},4768:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>o});const o={run:function(t){if(t.Canvas.hasFocus()){var e=[];t.getSelectedAll().forEach((function(t){var n=t.parent();if(n){var o,i=0,r=0;do{i++,o=(r=t.index()-i)>=0?n.getChildAt(r):null}while(o&&!o.get('selectable'));e.push(o||t)}})),e.length&&t.select(e)}}}},2570:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});var o=n(9050);const i={run:function(t,e,n){void 0===n&&(n={});var i=n.target,r=[];if(!i.get('styles'))return r;var s=i.get('type'),a=t.Pages.getAllWrappers();if(!(0,o.flatten)(a.map((function(t){return t.findType(s)}))).length){var l=t.CssComposer.getAll();r=l.filter((function(t){return t.get('group')==="cmp:".concat(s)})),l.remove(r)}return r}}},7282:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});var o=void 0&&(void 0).__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))};const i={run:function(t){var e=t.getModel(),n=o([],t.getSelectedAll(),!0).map((function(t){var e,n;return(null===(n=null===(e=t.delegate)||void 0===e?void 0:e.copy)||void 0===n?void 0:n.call(e,t))||t})).filter(Boolean);n.length&&e.set('clipboard',n)}}},8905:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});var o=n(4968);const i={run:function(t,e,n){var i=this;void 0===n&&(n={}),e&&e.set&&e.set('active',0);var r=t.getConfig(),s=t.Modal,a=r.stylePrefix;if(this.cm=t.CodeManager||null,!this.editors){var l=this.buildEditor('htmlmixed','hopscotch','HTML'),c=this.buildEditor('css','hopscotch','CSS');this.htmlEditor=l.model,this.cssEditor=c.model;var u=(0,o.ut)('div',{class:"".concat(a,"export-dl")});u.appendChild(l.el),u.appendChild(c.el),this.editors=u}s.open({title:r.textViewCode,content:this.editors}).getModel().once('change:open',(function(){return t.stopCommand("".concat(i.id))})),this.htmlEditor.setContent(t.getHtml(n.optsHtml)),this.cssEditor.setContent(t.getCss(n.optsCss))},stop:function(t){var e=t.Modal;e&&e.close()},buildEditor:function(t,e,n){var o=this.em.CodeManager,i=o.createViewer({label:n,codeName:t,theme:e});return{model:i,el:new o.EditorView({model:i,config:o.getConfig()}).render().el}}}},5212:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});var o=n(9050);const i={isEnabled:function(){var t=document;return!!(t.fullscreenElement||t.webkitFullscreenElement||t.mozFullScreenElement)},enable:function(t){var e='';return t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen?(e='webkit',t.webkitRequestFullscreen()):t.mozRequestFullScreen?(e='moz',t.mozRequestFullScreen()):t.msRequestFullscreen&&t.msRequestFullscreen(),e},disable:function(){var t=document;this.isEnabled()&&(t.exitFullscreen?t.exitFullscreen():t.webkitExitFullscreen?t.webkitExitFullscreen():t.mozCancelFullScreen?t.mozCancelFullScreen():t.msExitFullscreen&&t.msExitFullscreen())},fsChanged:function(t){this.isEnabled()||(this.stopCommand({sender:this.sender}),document.removeEventListener("".concat(t||'',"fullscreenchange"),this.fsChanged))},run:function(t,e,n){void 0===n&&(n={}),this.sender=e;var i=n.target,r=(0,o.isElement)(i)?i:document.querySelector(i),s=this.enable(r||t.getContainer());this.fsChanged=this.fsChanged.bind(this,s),document.addEventListener(s+'fullscreenchange',this.fsChanged),t.trigger('change:canvasOffset')},stop:function(t,e){e&&e.set&&e.set('active',!1),this.disable(),t&&t.trigger('change:canvasOffset')}}},6907:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>l});var o=n(9050),i=n(2815),r=n(4968),s=n(5938),a=n(3477);const l=(0,o.extend)({},a["default"],s["default"],{init:function(t){s["default"].init.apply(this,arguments),(0,o.bindAll)(this,'initSorter','rollback','onEndMove'),this.opt=t,this.hoverClass=this.ppfx+'highlighter-warning',this.badgeClass=this.ppfx+'badge-warning',this.noSelClass=this.ppfx+'no-select'},enable:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s["default"].enable.apply(this,t),this.getBadgeEl().addClass(this.badgeClass),this.getHighlighterEl().addClass(this.hoverClass);var n=this.$wrapper;n.css('cursor','move'),n.on('mousedown',this.initSorter),n.addClass(this.noSelClass)},toggleClipboard:function(){},initSorter:function(t){var e=(0,i["default"])(t.target).data('model').get('draggable');e&&(this.cacheEl=null,this.startSelectPosition(t.target,this.frameEl.contentDocument),this.sorter.draggable=e,this.sorter.onEndMove=this.onEndMove.bind(this),this.stopSelectComponent(),this.$wrapper.off('mousedown',this.initSorter),(0,r.on)(this.getContentWindow(),'keydown',this.rollback))},initSorterFromModel:function(t){var e=t.get('draggable');if(e){this.cacheEl=null;var n=t.view.el;this.startSelectPosition(n,this.frameEl.contentDocument),this.sorter.draggable=e,this.sorter.onEndMove=this.onEndMoveFromModel.bind(this),this.stopSelectComponent(),(0,r.on)(this.getContentWindow(),'keydown',this.rollback)}},initSorterFromModels:function(t){this.cacheEl=null;var e=t[t.length-1],n=this.em.getCurrentFrame(),o=e.getEl(null==n?void 0:n.model),i=o.ownerDocument;this.startSelectPosition(o,i,{onStart:this.onStart}),this.sorter.draggable=e.get('draggable'),this.sorter.toMove=t,this.sorter.onMoveClb=this.onDrag,this.sorter.onEndMove=this.onEndMoveFromModel.bind(this),this.stopSelectComponent(),(0,r.on)(this.getContentWindow(),'keydown',this.rollback)},onEndMoveFromModel:function(){(0,r.S1)(this.getContentWindow(),'keydown',this.rollback)},onEndMove:function(){this.enable(),(0,r.S1)(this.getContentWindow(),'keydown',this.rollback)},onSelect:function(t,e){},rollback:function(t,e){(27==(t.which||t.keyCode)||e)&&(this.sorter.moved=!1,this.sorter.endMove())},getBadgeEl:function(){return this.$badge||(this.$badge=(0,i["default"])(this.getBadge())),this.$badge},getHighlighterEl:function(){return this.$hl||(this.$hl=(0,i["default"])(this.canvas.getHighlighter())),this.$hl},stop:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s["default"].stop.apply(this,t),this.getBadgeEl().removeClass(this.badgeClass),this.getHighlighterEl().removeClass(this.hoverClass),this.$wrapper.css('cursor','').unbind().removeClass(this.noSelClass)}})},4963:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});var o=n(9050),i=n(4968);const r={open:function(t){var e=this,n=this,i=n.editor,r=n.title,s=n.config,a=n.am,l=s.custom;if((0,o.isFunction)(l.open))return l.open(a.__customData());i.Modal.open({title:r,content:t}).onceClose((function(){return i.stopCommand(e.id)}))},close:function(){var t=this.config.custom;if((0,o.isFunction)(t.close))return t.close(this.am.__customData());var e=this.editor.Modal;e&&e.close()},run:function(t,e,n){void 0===n&&(n={});var o=t.AssetManager,r=o.getConfig(),s=n.types,a=void 0===s?[]:s,l=n.accept,c=n.select;if(this.title=n.modalTitle||t.t('assetManager.modalTitle')||'',this.editor=t,this.config=r,this.am=o,o.setTarget(n.target),o.onClick(n.onClick),o.onDblClick(n.onDblClick),o.onSelect(n.onSelect),o.__behaviour({select:c,types:a,options:n}),r.custom)this.rendered=this.rendered||(0,i.ut)('div'),this.rendered.className="".concat(r.stylePrefix,"custom-wrp"),o.__behaviour({container:this.rendered}),o.__trgCustom();else{if(!this.rendered||a){var u=o.getAll().filter((function(t){return t}));a&&a.length&&(u=u.filter((function(t){return-1!==a.indexOf(t.get('type'))}))),o.render(u),this.rendered=o.getContainer()}if(l){var p=this.rendered.querySelector("input#".concat(r.stylePrefix,"uploadFile"));p&&p.setAttribute('accept',l)}}return this.open(this.rendered),this},stop:function(t){this.editor=t,this.close(this.rendered)}}},1268:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});var o=n(9050),i=n(4968);const r={open:function(){var t=this,e=t.container,n=t.editor,i=t.bm,r=t.config,s=r.custom,a=r.appendTo;if((0,o.isFunction)(s.open))return s.open(i.__customData());if(this.firstRender&&!a){var l='views-container',c=n.Panels;(c.getPanel(l)||c.addPanel({id:l})).set('appendContent',e).trigger('change:appendContent'),s||e.appendChild(i.render())}e&&(e.style.display='block')},close:function(){var t=this.container,e=this.config.custom;if((0,o.isFunction)(e.close))return e.close(this.bm.__customData());t&&(t.style.display='none')},run:function(t){var e=t.Blocks;this.config=e.getConfig(),this.firstRender=!this.container,this.container=this.container||(0,i.ut)('div'),this.editor=t,this.bm=e;var n=this.container;e.__behaviour({container:n}),this.config.custom&&e.__trgCustom(),this.open()},stop:function(){this.close()}}},3556:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>o});const o={run:function(t){var e=t.LayerManager,n=t.Panels,o=e.getConfig();if(!o.appendTo){if(!this.layers){var i='views-container',r=document.createElement('div'),s=n.getPanel(i)||n.addPanel({id:i});o.custom?e.__trgCustom({container:r}):r.appendChild(e.render()),s.set('appendContent',r).trigger('change:appendContent'),this.layers=r}this.layers.style.display='block'}},stop:function(){var t=this.layers;t&&(t.style.display='none')}}},1120:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>o});const o={run:function(t){var e=t.Pages,n=t.Panels;if(!e.getConfig().appendTo){if(!this.layers){var o='views-container',i=document.createElement('div'),r=n.getPanel(o)||n.addPanel({id:o});i.appendChild(e.render()),r.set('appendContent',i).trigger('change:appendContent'),this.layers=i}this.layers.style.display='block'}},stop:function(){var t=this.layers;t&&(t.style.display='none')}}},9283:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});var o=n(2815);const i={run:function(t,e){if(this.sender=e,!this.$cnt){var n=t.getConfig(),i=t.Panels,r=t.DeviceManager,s=t.SelectorManager,a=t.StyleManager,l='change:appendContent',c=(0,o["default"])('<div></div>'),u=(0,o["default"])('<div></div>'),p=(0,o["default"])('<div></div>'),h=(0,o["default"])('<div></div>');if(this.$cnt=c,this.$cntInner=u,u.append(p),u.append(h),c.append(u),r&&n.showDevices){var d=i.addPanel({id:'devices-c'}),f=r.render();d.set('appendContent',f).trigger(l)}var g=s.getConfig();g.custom?s.__trgCustom({container:p.get(0)}):g.appendTo||p.append(s.render([])),this.sm=a;var m=a.getConfig(),v=m.stylePrefix;this.$header=(0,o["default"])("<div class=\"".concat(v,"header\">").concat(t.t('styleManager.empty'),"</div>")),c.append(this.$header),m.custom?a.__trgCustom({container:h.get(0)}):m.appendTo||h.append(a.render());var y='views-container';(i.getPanel(y)||i.addPanel({id:y})).set('appendContent',c).trigger(l);var _=t.getModel();this.listenTo(_,a.events.target,this.toggleSm)}this.toggleSm()},toggleSm:function(){var t=this,e=t.sender,n=t.sm,o=t.$cntInner,i=t.$header;e&&e.get&&!e.get('active')||!n||(n.getSelected()?(null==o||o.show(),null==i||i.hide()):(null==o||o.hide(),null==i||i.show()))},stop:function(){var t,e;null===(t=this.$cntInner)||void 0===t||t.hide(),null===(e=this.$header)||void 0===e||e.hide()}}},9521:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});var o=n(2815);const i={run:function(t,e){this.sender=e;var n,i=t.getModel(),r=t.Config.stylePrefix,s=t.TraitManager,a=s.getConfig();if(!a.appendTo){if(!this.$cn){this.$cn=(0,o["default"])('<div></div>'),this.$cn2=(0,o["default"])('<div></div>'),this.$cn.append(this.$cn2),this.$header=(0,o["default"])('<div>').append("<div class=\"".concat(a.stylePrefix,"header\">").concat(i.t('traitManager.empty'),"</div>")),this.$cn.append(this.$header),a.custom?s.__trgCustom({container:this.$cn2.get(0)}):(this.$cn2.append("<div class=\"".concat(r,"traits-label\">").concat(i.t('traitManager.label'),"</div>")),this.$cn2.append(s.render()));var l=t.Panels;null==(n=l.getPanel('views-container')?l.getPanel('views-container'):l.addPanel({id:'views-container'}))||n.set('appendContent',this.$cn.get(0)).trigger('change:appendContent'),this.target=t.getModel(),this.listenTo(this.target,'component:toggled',this.toggleTm)}this.toggleTm()}},toggleTm:function(){var t=this.sender;t&&t.get&&!t.get('active')||(1===this.target.getSelectedAll().length?(this.$cn2.show(),this.$header.hide()):(this.$cn2.hide(),this.$header.show()))},stop:function(){this.$cn2&&this.$cn2.hide(),this.$header&&this.$header.hide()}}},2133:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});var o=n(9050);const i={run:function(t,e,n){void 0===n&&(n={});var i=t.getModel(),s=i.get('clipboard'),a=t.getSelected();(null==s?void 0:s.length)&&a&&(t.getSelectedAll().forEach((function(e){var a,l,c,u,p=(null===(l=null===(a=e.delegate)||void 0===a?void 0:a.copy)||void 0===l?void 0:l.call(a,e))||e,h=p.collection;if(h){var d={at:p.index()+1,action:n.action||'paste-component'};u=(0,o.contains)(s,p)&&p.get('copyable')?h.add(p.clone(),d):r(t,s,p.parent(),d)}else{var f=null===(c=i.Pages.getSelected())||void 0===c?void 0:c.getMainComponent();d={at:(null==f?void 0:f.components().length)||0,action:n.action||'paste-component'};u=r(t,s,f,d)}(u=(0,o.isArray)(u)?u:[u]).forEach((function(e){return t.trigger('component:paste',e)}))})),a.emitUpdate())}};function r(t,e,n,o){var i=e.filter((function(t){return t.get('copyable')})).filter((function(e){return t.Components.canMove(n,e).result}));return n.components().add(i.map((function(t){return t.clone()})),o)}},8931:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>s});var o=n(9050),i=void 0&&(void 0).__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))},r='core:component-outline';const s={getPanels:function(t){return this.panels||(this.panels=t.Panels.getPanels()),this.panels},preventDrag:function(t){t.abort=1},tglEffects:function(t){var e=this.em,n=t?'on':'off';if(e){var i=e.Canvas,r=i.getBody(),s=i.getToolbarEl();s&&(s.style.display=t?'none':'');var a=r.querySelectorAll(".".concat(this.ppfx,"no-pointer"));(0,o.each)(a,(function(e){return e.style.pointerEvents=t?'all':''})),e[n]('run:tlb-move:before',this.preventDrag)}},run:function(t,e){var n=this;this.sender=e,this.selected=i([],t.getSelectedAll(),!0),t.select(),this.shouldRunSwVisibility||(this.shouldRunSwVisibility=t.Commands.isActive(r)),this.shouldRunSwVisibility&&t.stopCommand(r),t.getModel().stopDefault();var o=this.getPanels(t),s=t.Canvas.getElement(),a=t.getEl(),l=t.Config.stylePrefix;if(!this.helper){var c=document.createElement('span');c.className="".concat(l,"off-prv fa fa-eye-slash"),a.appendChild(c),c.onclick=function(){return n.stopCommand()},this.helper=c}this.helper.style.display='inline-block',o.forEach((function(t){return t.set('visible',!1)}));var u=s.style;u.width='100%',u.height='100%',u.top='0',u.left='0',u.padding='0',u.margin='0',t.refresh(),this.tglEffects(1)},stop:function(t){var e=this.sender,n=void 0===e?{}:e,o=this.selected;n.set&&n.set('active',0);var i=this.getPanels(t);this.shouldRunSwVisibility&&(t.runCommand(r),this.shouldRunSwVisibility=!1),t.getModel().runDefault(),i.forEach((function(t){return t.set('visible',!0)})),t.Canvas.getElement().setAttribute('style',''),o&&t.select(o),delete this.selected,this.helper&&(this.helper.style.display='none'),t.refresh(),this.tglEffects()}}},5676:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});var o=void 0&&(void 0).__assign||function(){return o=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},o.apply(this,arguments)};const i={run:function(t,e,n){var i=n||{},r=t.Canvas,s=r.getCanvasView(),a=o({appendTo:r.getResizerEl(),prefix:t.getConfig().stylePrefix,posFetcher:s.getElementPos.bind(s),mousePosFetcher:r.getMouseRelativePos.bind(r)},i.options||{}),l=this.canvasResizer;return l&&!i.forceNew||(this.canvasResizer=new t.Utils.Resizer(a),l=this.canvasResizer),l.setOptions(a,!0),l.blur(),l.focus(i.el),l},stop:function(){var t;null===(t=this.canvasResizer)||void 0===t||t.blur()}}},5938:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>P});var o,i=n(9050),r=n(6847),s=void 0&&(void 0).__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});const a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.defaults=function(){return{command:'',attributes:{}}},e}(r.Hn);var l=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e}(r.FE);const u=c;c.prototype.model=a;var p=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),h=function(t){function e(e,n,o){void 0===e&&(e={}),void 0===o&&(o=!1);var i=t.call(this,e)||this;return i.itemsView='',i.itemType='type',i.reuseView=!1,i.config=n||e.config||{},o&&i.listenTo(i.collection,'add',i.addTo),i.items=[],i}return p(e,t),e.prototype.addTo=function(t){this.add(t)},e.prototype.itemViewNotFound=function(t){var e=this.config,n=this.ns,o=e.em,i="".concat(n?"[".concat(n,"]: "):'',"'").concat(t,"' type not found");o&&o.logWarning(i)},e.prototype.add=function(t,e){var n,o=this,r=o.config,s=o.reuseView,a=o.items,l=this.itemsView||{},c=e||null,u=this.itemView,p=t.get(this.itemType);l[p]?u=l[p]:!p||l[p]||(0,i.includes)(['button','checkbox','color','date','datetime-local','email','file','hidden','image','month','number','password','radio','range','reset','search','submit','tel','text','time','url','week'],p)||this.itemViewNotFound(p),n=t.view&&s?t.view:new u({model:t,config:r},r),a&&a.push(n);var h=n.render().el;c?c.appendChild(h):this.$el.append(h)},e.prototype.render=function(){var t=document.createDocumentFragment();return this.clearItems(),this.$el.empty(),this.collection.length&&this.collection.each((function(e){this.add(e,t)}),this),this.$el.append(t),this.onRender(),this},e.prototype.onRender=function(){},e.prototype.onRemoveBefore=function(t,e){},e.prototype.onRemove=function(t,e){},e.prototype.remove=function(e){void 0===e&&(e={});var n=this.items;return this.onRemoveBefore(n,e),this.clearItems(),t.prototype.remove.call(this),this.onRemove(n,e),this},e.prototype.clearItems=function(){this.items},e}(r.G7);const d=h;h.prototype.itemView='';var f=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),g=void 0&&(void 0).__assign||function(){return g=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},g.apply(this,arguments)};const m=function(t){function e(e){var n=t.call(this,e)||this;return n.em=e.config.em,n}return f(e,t),e.prototype.events=function(){return this.model.get('events')||{mousedown:'handleClick'}},e.prototype.attributes=function(){return this.model.get('attributes')},e.prototype.handleClick=function(t){t.preventDefault(),t.stopPropagation();var e=this.em,n=e.Canvas.getFrameEl().getBoundingClientRect(),o=n.left,i=n.top,r=g(g({},t),{clientX:t.clientX-o,clientY:t.clientY-i});e.trigger('toolbar:run:before',{event:r}),this.execCommand(r)},e.prototype.execCommand=function(t){var e=this.em,n={event:t},o=this.model.get('command'),r=e.Editor;(0,i.isFunction)(o)&&o(r,null,n),(0,i.isString)(o)&&r.runCommand(o,n)},e.prototype.render=function(){var t=this,e=t.em,n=t.$el,o=t.model,i=o.get('id'),r=o.get('label'),s=e.getConfig().stylePrefix;return n.addClass("".concat(s,"toolbar-item")),i&&n.addClass("".concat(s,"toolbar-item__").concat(i)),r&&n.append(r),this},e}(r.G7);var v=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),y=function(t){function e(e){var n=t.call(this,e)||this,o=e.em;return n.em=o,n.config={em:o},n.listenTo(n.collection,'reset',n.render),n}return v(e,t),e.prototype.onRender=function(){var t=this.em.config.stylePrefix;this.el.className="".concat(t,"toolbar-items")},e}(d);const _=y;y.prototype.itemView=m;var O,b=n(4968),w=n(8283),x=n(2201),S=void 0&&(void 0).__assign||function(){return S=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},S.apply(this,arguments)},k=void 0&&(void 0).__rest||function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(t);i<o.length;i++)e.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(t,o[i])&&(n[o[i]]=t[o[i]])}return n};const P={init:function(){this.onSelect=(0,i.debounce)(this.onSelect,0),(0,i.bindAll)(this,'onHover','onOut','onClick','onFrameScroll','onFrameResize','onFrameUpdated','onContainerChange')},enable:function(){this.frameOff=this.canvasOff=this.adjScroll=null,this.startSelectComponent(),O=!0},startSelectComponent:function(){this.toggleSelectComponent(1),this.em.getSelected()&&this.onSelect()},stopSelectComponent:function(){this.toggleSelectComponent()},toggleSelectComponent:function(t){var e=this,n=this.em,o=n.getConfig().listenToEl,i=n.getContainer().parentNode,r=t?'on':'off',s={on:b.on,off:b.S1};!o.length&&i&&o.push(i);s[r](window,'resize',this.onFrameUpdated),s[r](o,'scroll',this.onContainerChange),n[r]('component:toggled component:update undo redo',this.onSelect,this),n[r]('change:componentHovered',this.onHovered,this),n[r]('component:resize styleable:change component:input',this.updateGlobalPos,this),n[r]('component:update:toolbar',this._upToolbar,this),n[r]('change:canvasOffset',this.updateAttached,this),n[r]('frame:updated',this.onFrameUpdated,this),n[r]('canvas:updateTools',this.onFrameUpdated,this),n.Canvas.getFrames().forEach((function(t){var n=t.view,o=null==n?void 0:n.getWindow();o&&function(t,n){s[r](n,'mouseover',e.onHover),s[r](n,'mouseleave',e.onOut),s[r](n,'click',e.onClick),s[r](t,'scroll',e.onFrameScroll,!0),s[r](t,'resize',e.onFrameResize)}(o,null==n?void 0:n.getBody())}))},onHover:function(t){t.stopPropagation();var e=this.em,n=t.target,o=(0,w.getComponentView)(n),i=null==o?void 0:o.frameView,r=null==o?void 0:o.model;if(!r)for(var s=n.parentNode;!r&&s&&!(0,b.Mx)(s);)r=(0,w.getComponentModel)(s),s=s.parentNode;this.currentDoc=n.ownerDocument,e.setHovered(r,{useValid:!0}),i&&e.setCurrentFrame(i)},onFrameUpdated:function(){this.updateLocalPos(),this.updateGlobalPos()},onHovered:function(t,e){var n,o=this,i={};e?null===(n=e.views)||void 0===n||n.forEach((function(t){var n=t.el,r=o.getElementPos(n);i={el:n,pos:r,component:e,view:(0,w.getViewEl)(n)},n.ownerDocument===o.currentDoc&&(o.elHovered=i),o.updateToolsLocal(i)})):(this.currentDoc=null,this.elHovered=0,this.updateToolsLocal(),this.canvas.getFrames().forEach((function(t){var e=t.view,n=e&&e.getToolsEl();n&&o.toggleToolsEl(0,0,{el:n})})))},onSelect:function(){var t=this.em,e=t.getSelected(),n=t.getCurrentFrame(),o=e&&e.getView(null==n?void 0:n.model),i=o&&o.el,r={};i&&(0,b.pn)(i)&&(r={el:i,pos:this.getElementPos(i),component:e,view:(0,w.getViewEl)(i)});this.elSelected=r,this.updateToolsGlobal(),this.updateLocalPos(r),this.initResize(e)},updateGlobalPos:function(){var t=this.getElSelected();t.el&&(t.pos=this.getElementPos(t.el),this.updateToolsGlobal())},updateLocalPos:function(t){var e=this.getElHovered();e.el&&(e.pos=this.getElementPos(e.el),this.updateToolsLocal(t))},getElHovered:function(){return this.elHovered||{}},getElSelected:function(){return this.elSelected||{}},onOut:function(){this.em.setHovered()},toggleToolsEl:function(t,e,n){void 0===n&&(n={});var o=n.el||this.canvas.getToolsEl(e);return o&&(o.style.display=t?'':'none'),o||{}},showElementOffset:function(t,e,n){void 0===n&&(n={}),O&&this.editor.runCommand('show-offset',{el:t,elPos:e,view:n.view,force:1,top:0,left:0})},hideElementOffset:function(t){this.editor.stopCommand('show-offset',{view:t})},showFixedElementOffset:function(t,e){this.editor.runCommand('show-offset',{el:t,elPos:e,state:'Fixed'})},hideFixedElementOffset:function(){this.editor&&this.editor.stopCommand('show-offset',{state:'Fixed'})},hideHighlighter:function(t){this.canvas.getHighlighter(t).style.opacity=0},onClick:function(t){t.stopPropagation(),t.preventDefault();var e=this.em;if(e.get('_cmpDrag'))return e.set('_cmpDrag');var n=t.target,o=(0,w.getComponentModel)(n);if(!o)for(var i=n.parentNode;!o&&i&&!(0,b.Mx)(i);)o=(0,w.getComponentModel)(i),i=i.parentNode;if(o){if(e.isEditing()&&!o.get('textable')&&o.isChildOf('text'))return;this.select(o,t)}},select:function(t,e){void 0===e&&(e={}),t&&(this.editor.select(t,{event:e,useValid:!0}),this.initResize(t))},updateBadge:function(t,e,n){void 0===n&&(n={});var o=this.canvas,i=(0,w.getComponentModel)(t),r=this.getBadge(n),s=r.style;if(i&&i.get('badgable')){if(!n.posOnly){var a=this.canvas.getConfig(),l=i.getIcon(),c=a.pStylePrefix||'',u="".concat(c,"badge"),p=a.customBadgeLabel,h="".concat(l?"<div class=\"".concat(u,"__icon\">").concat(l,"</div>"):'',"\n        <div class=\"").concat(u,"__name\">").concat(i.getName(),"</div>");r.innerHTML=p?p(i):h}var d='px';s.display='block';var f=o.getTargetToElementFixed(t,r,{pos:e}).top,g=n.leftOff<0?-n.leftOff:0;s.top=f+d,s.left=g+d}else s.display='none'},showHighlighter:function(t){this.canvas.getHighlighter(t).style.opacity=''},initResize:function(t){var e=this.em,n=this.canvas,o=e.Editor,r=!(0,i.isElement)(t)&&(0,b.o5)(t)?t:e.getSelected(),s=null==r?void 0:r.get('resizable'),a=x.q.Resize,l=n.hasCustomSpot(a);if(n.removeSpots({type:a}),r&&s){n.addSpot({type:a,component:r});var c,u=(0,i.isElement)(t)?t:r.getEl(),p=(0,w.isObject)(s)?s:{},h=p.onStart,d=void 0===h?function(){}:h,f=p.onMove,g=void 0===f?function(){}:f,m=p.onEnd,v=void 0===m?function(){}:m,y=p.updateTarget,_=void 0===y?function(){}:y,P=k(p,["onStart","onMove","onEnd","updateTarget"]);if(l||!u)return;var C=e.config.stylePrefix||'',T="".concat(C,"resizing"),E=function(t,e,n){var o=n.docs;o&&o.forEach((function(e){var n=e.body,o=n.className||'';n.className=('add'==t?"".concat(o," ").concat(T):o.replace(T,'')).trim()}))},A=S({onStart:function(t,o){d(t,o);var i=o.el,s=o.config,a=o.resizer,l=s.keyHeight,u=s.keyWidth,p=s.currentUnit,h=s.keepAutoHeight,f=s.keepAutoWidth;E('add',0,o),c=e.Styles.getModelToStyle(r),n.toggleFramesEvents(!1);var g=getComputedStyle(i),m=c.getStyle(),v=m[u];s.autoWidth=f&&'auto'===v,isNaN(parseFloat(v))&&(v=g[u]);var y=m[l];s.autoHeight=h&&'auto'===y,isNaN(parseFloat(y))&&(y=g[l]),a.startDim.w=parseFloat(v),a.startDim.h=parseFloat(y),O=!1,p&&(s.unitHeight=(0,w.getUnitFromValue)(y),s.unitWidth=(0,w.getUnitFromValue)(v))},onMove:function(t){g(t),o.trigger('component:resize')},onEnd:function(t,e){v(t,e),E('remove',0,e),o.trigger('component:resize'),n.toggleFramesEvents(!0),O=!0},updateTarget:function(t,o,i){if(_(t,o,i),c){var s=i.store,a=i.selectedHandler,l=i.config,u=l.keyHeight,p=l.keyWidth,h=l.autoHeight,d=l.autoWidth,f=l.unitWidth,g=l.unitHeight,m=['tc','bc'].indexOf(a)>=0,v=['cl','cr'].indexOf(a)>=0,y={};if(!m){var O=n.getBody().offsetWidth,b=o.w<O?o.w:O;y[p]=d?'auto':"".concat(b).concat(f)}v||(y[u]=h?'auto':"".concat(o.h).concat(g)),e.getDragMode(r)&&(y.top="".concat(o.t).concat(g),y.left="".concat(o.l).concat(f));var w=S(S({},y),{__p:!s});c.addStyle(w,{avoidStore:!s}),e.Styles.__emitCmpStyleUpdate(w,{components:e.getSelected()})}}},P);this.resizer=o.runCommand('resize',{el:u,options:A,force:1})}else{if(l)return;o.stopCommand('resize'),this.resizer=null}},updateToolbar:function(t){var e=this.canvas,n=this.config.em,o=t===n?n.getSelected():t,i=e.getToolbarEl(),r=i.style,s=o.get('toolbar'),a=n.config.showToolbar,l=!e.hasCustomSpot(x.q.Select);if(o&&a&&s&&s.length&&l){if(r.display='',!this.toolbar){i.innerHTML='',this.toolbar=new u(s);var c=new _({collection:this.toolbar,em:n});i.appendChild(c.render().el)}this.toolbar.reset(s),r.top='-100px',r.left='0'}else r.display='none'},updateToolbarPos:function(t){var e='px',n=this.canvas.getToolbarEl().style;n.top="".concat(t.top).concat(e),n.left="".concat(t.left).concat(e),n.opacity=''},getCanvasPosition:function(){return this.canvas.getCanvasView().getPosition()},getBadge:function(t){return void 0===t&&(t={}),this.canvas.getBadgeEl(t.view)},onFrameScroll:function(){this.updateTools(),this.canvas.refreshSpots()},onFrameResize:function(){this.canvas.refreshSpots()},updateTools:function(){this.updateLocalPos(),this.updateGlobalPos()},isCompSelected:function(t){return t&&'selected'===t.get('status')},updateToolsLocal:function(t){var e=this.em.getConfig(),n=t||this.getElHovered(),o=n.el,i=n.pos,r=n.view,s=n.component;if(o){var a=s.get('hoverable'),l=this.lastHovered!==o,c=l?{}:{posOnly:1},u=this.canvas.hasCustomSpot(x.q.Hover);l&&a&&(this.lastHovered=o,u?this.hideHighlighter(r):this.showHighlighter(r),this.showElementOffset(o,i,{view:r})),this.isCompSelected(s)&&(this.hideHighlighter(r),!e.showOffsetsSelected&&this.hideElementOffset(r));var p='px',h=this.toggleToolsEl(1,r),d=h.style,f=this.canvas.canvasRectOffset(o,i),g=f.top,m=f.left;!u&&this.updateBadge(o,i,S(S({},c),{view:r,topOff:g,leftOff:m})),d.top=g+p,d.left=m+p,d.width=i.width+p,d.height=i.height+p,this._trgToolUp('local',{component:s,el:h,top:g,left:m,width:i.width,height:i.height})}else this.lastHovered=0},_upToolbar:(0,i.debounce)((function(){this.updateToolsGlobal({force:1})}),0),_trgToolUp:function(t,e){void 0===e&&(e={}),this.em.trigger('canvas:tools:update',S({type:t},e))},updateToolsGlobal:function(t){void 0===t&&(t={});var e=this.getElSelected(),n=e.el,o=e.pos,i=e.component;if(!n)return this.toggleToolsEl(),void(this.lastSelected=0);var r=this.canvas;(this.lastSelected!==n||t.force)&&(this.lastSelected=n,this.updateToolbar(i));var s='px',a=this.toggleToolsEl(1),l=a.style,c=r.getTargetToElementFixed(n,r.getToolbarEl(),{pos:o}),u=c.canvasOffsetTop,p=c.canvasOffsetLeft;l.top=u+s,l.left=p+s,l.width=o.width+s,l.height=o.height+s,this.updateToolbarPos({top:c.top,left:c.left}),this._trgToolUp('global',{component:i,el:a,top:u,left:p,width:o.width,height:o.height})},updateAttached:(0,i.debounce)((function(){this.updateGlobalPos()}),0),onContainerChange:(0,i.debounce)((function(){this.em.refreshCanvas()}),150),getElementPos:function(t){return this.canvas.getCanvasView().getElementPos(t,{noScroll:!0})},hideBadge:function(){this.getBadge().style.display='none'},cleanPrevious:function(t){t&&t.set({status:'',state:''})},getContentWindow:function(){return this.canvas.getWindow()},run:function(t){(0,w.hasWin)()&&(this.editor=t&&t.get('Editor'),this.enable())},stop:function(t,e,n){if(void 0===n&&(n={}),(0,w.hasWin)()){var o=this.em,i=this.editor;this.onHovered(),this.stopSelectComponent(),!n.preserveSelected&&o.setSelected(),this.toggleToolsEl(),i&&i.stopCommand('resize')}}}},3477:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});var o=n(2815);const i={startSelectPosition:function(t,e,n){var o=this;void 0===n&&(n={}),this.isPointed=!1;var i=this.em.Utils,r=t.ownerDocument.body;i&&!this.sorter&&(this.sorter=new i.Sorter({container:r,placer:this.canvas.getPlacerEl(),containerSel:'*',itemSel:'*',pfx:this.ppfx,direction:'a',document:e,wmargin:1,nested:1,em:this.em,canvasRelative:1,scale:function(){return o.em.getZoomDecimal()}})),n.onStart&&(this.sorter.onStart=n.onStart),t&&this.sorter.startSort(t,{container:r})},getOffsetDim:function(){var t=this.offset(this.canvas.getFrameEl()),e=this.offset(this.canvas.getElement());return{top:t.top-e.top,left:t.left-e.left}},stopSelectPosition:function(){this.posTargetCollection=null,this.posIndex='after'==this.posMethod&&0!==this.cDim.length?this.posIndex+1:this.posIndex,this.sorter&&(this.sorter.moved=0,this.sorter.endMove()),this.cDim&&(this.posIsLastEl=0!==this.cDim.length&&'after'==this.posMethod&&this.posIndex==this.cDim.length,this.posTargetEl=0===this.cDim.length?(0,o["default"])(this.outsideElem):!this.posIsLastEl&&this.cDim[this.posIndex]?(0,o["default"])(this.cDim[this.posIndex][5]).parent():(0,o["default"])(this.outsideElem),this.posTargetModel=this.posTargetEl.data('model'),this.posTargetCollection=this.posTargetEl.data('model-comp'))},enable:function(){this.startSelectPosition()},nearFloat:function(t,e,n){var o=t||0,i=e||'before',r=n.length,s=0!==r&&'after'==i&&o==r;return 0!==r&&(!s&&!n[o][4]||n[o-1]&&!n[o-1][4]||s&&!n[o-1][4])?1:0},run:function(){this.enable()},stop:function(){this.stopSelectPosition(),this.$wrapper.css('cursor',''),this.$wrapper.unbind()}}},5815:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>l});var o=n(9050),i=n(2201),r=n(2815),s=n(4968),a=void 0&&(void 0).__assign||function(){return a=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},a.apply(this,arguments)};const l={getOffsetMethod:function(t){return'get'+(t||'')+'OffsetViewerEl'},run:function(t,e,n){var l=this.canvas,c=n||{},u=c.state||'',p=t.getConfig(),h=this.em.getZoomDecimal(),d=c.el;if(p.showOffsets&&d&&!(0,s.BM)(d)&&(p.showOffsetsSelected||'Fixed'!=u)){if(!l.hasCustomSpot(i.q.Spacing)){var f=a({},c.elPos||l.getElementPos(d));(0,o.isUndefined)(c.top)||(f.top=c.top),(0,o.isUndefined)(c.left)||(f.left=c.left);var g=window.getComputedStyle(d),m=this.ppfx,v=u+'State',y=l[this.getOffsetMethod(u)](n.view);y.style.opacity='';var _=this['marginT'+u],O=this['marginB'+u],b=this['marginL'+u],w=this['marginR'+u],x=this['padT'+u],S=this['padB'+u],k=this['padL'+u],P=this['padR'+u];if(y.childNodes.length&&(this[v]='1',_=y.querySelector('[data-offset-m-t]'),O=y.querySelector('[data-offset-m-b]'),b=y.querySelector('[data-offset-m-l]'),w=y.querySelector('[data-offset-m-r]'),x=y.querySelector('[data-offset-p-t]'),S=y.querySelector('[data-offset-p-b]'),k=y.querySelector('[data-offset-p-l]'),P=y.querySelector('[data-offset-p-r]')),!this[v]){var C=u.toLowerCase(),T=C+'margin-v',E=C+'padding-v',A=(0,r["default"])("<div class=\"".concat(m,"marginName\">")).get(0),Q=(0,r["default"])("<div class=\"".concat(m,"paddingName\">")).get(0),$=m+E+'-el',j="".concat(m+T+'-el'," ").concat(m+T),R="".concat($," ").concat(m+E);_=(0,r["default"])("<div class=\"".concat(j,"-top\"></div>")).get(0),O=(0,r["default"])("<div class=\"".concat(j,"-bottom\"></div>")).get(0),b=(0,r["default"])("<div class=\"".concat(j,"-left\"></div>")).get(0),w=(0,r["default"])("<div class=\"".concat(j,"-right\"></div>")).get(0),x=(0,r["default"])("<div class=\"".concat(R,"-top\"></div>")).get(0),S=(0,r["default"])("<div class=\"".concat(R,"-bottom\"></div>")).get(0),k=(0,r["default"])("<div class=\"".concat(R,"-left\"></div>")).get(0),P=(0,r["default"])("<div class=\"".concat(R,"-right\"></div>")).get(0),this['marginT'+u]=_,this['marginB'+u]=O,this['marginL'+u]=b,this['marginR'+u]=w,this['padT'+u]=x,this['padB'+u]=S,this['padL'+u]=k,this['padR'+u]=P,A.appendChild(_),A.appendChild(O),A.appendChild(b),A.appendChild(w),Q.appendChild(x),Q.appendChild(S),Q.appendChild(k),Q.appendChild(P),y.appendChild(A),y.appendChild(Q),this[v]='1'}var M='px',V=parseFloat(g.marginLeft.replace(M,''))*h,Z=parseFloat(g.marginRight.replace(M,''))*h,D=parseFloat(g.marginTop.replace(M,''))*h,I=parseFloat(g.marginBottom.replace(M,''))*h,N=_.style,W=O.style,X=b.style,L=w.style,z=x.style,U=S.style,q=k.style,Y=P.style,B=parseFloat(f.left),F=parseFloat(g.width)*h+M;N.height=D+M,N.width=F,N.top=f.top-D+M,N.left=B+M,W.height=I+M,W.width=F,W.top=f.top+f.height+M,W.left=B+M;var G=f.height+D+I+M,H=f.top-D+M;X.height=G,X.width=V+M,X.top=H,X.left=B-V+M,L.height=G,L.width=Z+M,L.top=H,L.left=B+f.width+M;var K=parseFloat(g.paddingTop)*h;z.height=K+M;var J=parseFloat(g.paddingBottom)*h;U.height=J+M;var tt=f.height-J-K+M,et=f.top+K+M;q.height=tt,q.width=parseFloat(g.paddingLeft)*h+M,q.top=et;var nt=parseFloat(g.paddingRight)*h;Y.height=tt,Y.width=nt+M,Y.top=et}}else t.stopCommand("".concat(this.id),n)},stop:function(t,e,n){void 0===n&&(n={});var o=(n||{}).state||'',i=this.getOffsetMethod(o),r=n.view;this.canvas[i](r).style.opacity=0}}},5133:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});var o=n(9050),i=n(8283);const r={init:function(){(0,o.bindAll)(this,'_onFramesChange')},run:function(t){this.toggleVis(t,!0)},stop:function(t){this.toggleVis(t,!1)},toggleVis:function(t,e){if(void 0===e&&(e=!0),!t.Commands.isActive('preview')){var n=t.Canvas,o=e?'on':'off';n.getModel()[o]('change:frames',this._onFramesChange),this.handleFrames(n.getFrames(),e)}},handleFrames:function(t,e){var n=this;t.forEach((function(t){var o;(null===(o=t.view)||void 0===o?void 0:o.loaded)&&n._upFrame(t,e),t.__ol||(t.on('loaded',(function(){return n._upFrame(t)})),t.__ol=!0)}))},_onFramesChange:function(t,e){this.handleFrames(e)},_upFrame:function(t,e){var n,o=this,r=o.ppfx,s=o.em,a=o.id,l=((0,i.isDef)(e)?e:s.Commands.isActive(a))?'add':'remove',c="".concat(r,"dashed");null===(n=t.view)||void 0===n||n.getBody().classList[l](c)}}},6847:(t,e,n)=>{"use strict";n.d(e,{FE:()=>u,G7:()=>p,Hn:()=>c,pH:()=>h,vA:()=>i});var o,i,r=n(2316),s=n.n(r),a=void 0&&(void 0).__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),l=void 0&&(void 0).__assign||function(){return l=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},l.apply(this,arguments)},c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e}(s().Model),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e}(s().Collection),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e}(s().View);!function(t){function e(e){var n=t.call(this,e)||this;return n.collection=e.collection,n}a(e,t)}(s().View);!function(t){t["Screen"]="screen",t["World"]="world"}(i||(i={}));var h={x:0,y:0};l(l({},h),{width:0,height:0})},4617:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});var o=void 0&&(void 0).__assign||function(){return o=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},o.apply(this,arguments)};const i=function(){function t(t){this.updatingValue=!1,this.opts=o({},t)}return Object.defineProperty(t.prototype,"name",{get:function(){return''},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this.opts.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"templates",{get:function(){var t;return null!==(t=this.opts.traits)&&void 0!==t?t:[]},enumerable:!1,configurable:!0}),t.prototype.registerForUpdateEvent=function(t){this.view=t},Object.defineProperty(t.prototype,"changeProp",{get:function(){var t;return null!==(t=this.opts.changeProp)&&void 0!==t&&t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){var t;return null!==(t=this.getValue())&&void 0!==t?t:void 0!==this.opts.default?(this.value=this.opts.default)&&this.opts.default:''},set:function(t){this.updatingValue=!0,console.log('setvalue ',this),this.setValue(t),this.updatingValue=!1,this.triggerTraitChanged(this.updateEventName)},enumerable:!1,configurable:!0}),t.prototype.refreshChildren=function(){},t.prototype.setValueFromModel=function(t,e){var n,o=this.name,i=this.component;console.log('ChangeScriptEVENTSetTryasdfasdfasd',t,e),console.log('ChangeScriptEVENTSetTry',this.updatingValue),!this.updatingValue&&t&&(console.log('ChangeScriptEVENTSet',this.value),console.log('ChangeScriptEVENTSetInit',this.view,null===(n=this.target)||void 0===n?void 0:n.view),i.off('change:'+o,this.setValueFromModel,this),this.refreshChildren(),this.onUpdateEvent(),i.on('change:'+o,this.setValueFromModel,this))},t.prototype.onUpdateEvent=function(){var t;null===(t=this.view)||void 0===t||t.onUpdateEvent(this.value,!0)},t.prototype.updateOpts=function(t){this.opts=o(o({},this.opts),t)},Object.defineProperty(t.prototype,"viewType",{get:function(){var t;return null!==(t=this.type)&&void 0!==t?t:'text'},enumerable:!1,configurable:!0}),t.prototype.setTraitElement=function(t){},t}()},305:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var o,i=n(4617),r=void 0&&(void 0).__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});const s=function(t){function e(e,n){var o=t.call(this,null!=n?n:e.opts)||this;return o.target=e,o.refreshChildren(),e.setTraitElement(o),o}return r(e,t),Object.defineProperty(e.prototype,"component",{get:function(){return this.target.component},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"em",{get:function(){return this.target.em},enumerable:!1,configurable:!0}),e.prototype.getValue=function(){return this.target.value},e.prototype.setValue=function(t){this.target.value=t,this.target.onUpdateEvent()},e.prototype.triggerTraitChanged=function(t){this.target.triggerTraitChanged(t)},Object.defineProperty(e.prototype,"updateEventName",{get:function(){var t=this.name;return this.target.updateEventName+':'+t},enumerable:!1,configurable:!0}),e.prototype.onUpdateEvent=function(){var t;console.log('ChangeScriptEVENTSetInitElement',this.view,null===(t=this.target)||void 0===t?void 0:t.view),this.view?this.view.onUpdateEvent(this.value,!0):this.target.onUpdateEvent()},e}(i.Z)},2611:(t,e,n)=>{"use strict";n.d(e,{Z:()=>Y});var o,i=n(9050),r=n(4617),s=void 0&&(void 0).__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=void 0&&(void 0).__assign||function(){return a=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},a.apply(this,arguments)};const l=function(t){function e(e,n,o){var i=t.call(this,a({name:e},o))||this;return i.model=n,i._name=e,n.on('change:'+e,(function(t,e){return console.log("urlTestTriggerParentValueChanged",t,e)})),'list'!=o.type&&'object'!=o.type||(i.opts.changeProp=!0),i}return s(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"component",{get:function(){return this.model},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"em",{get:function(){return this.model.em},enumerable:!1,configurable:!0}),e.prototype.getValue=function(){var t=this,e=t.changeProp,n=t.model,o=t.name;return e?n.get(o):n.get('attributes')[o]},e.prototype.setValue=function(t,e){var n;void 0===e&&(e={});var o=this,i=o.name,r=o.model,s=o.changeProp,l=((n={})[i]=t,n);l.__p=e.avoidStore?null:void 0;var c=this.traitElement;console.log('urlTestTrigger',t,this),s?(c&&r.off('change:'+i,c.setValueFromModel,c),r.set(l,e),c&&r.on('change:'+i,c.setValueFromModel,c)):r.set('attributes',a(a({},r.get('attributes')),l),e)},e.prototype.triggerTraitChanged=function(t){this.name;this.model.trigger(t)},Object.defineProperty(e.prototype,"updateEventName",{get:function(){return'trait:change:'+this.name},enumerable:!1,configurable:!0}),e.prototype.setTraitElement=function(t){var e=this.name;this.model;console.log('ChangeScriptEVENTSetInit','change:'+e,t,t.value,t.defaultValue),this.traitElement=t,t.defaultValue&&t.value!=t.defaultValue&&(t.value=t.defaultValue)},e}(r.Z);var c=void 0&&(void 0).__assign||function(){return c=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},c.apply(this,arguments)};function u(t){return{type:'variable',resultType:'string',render:function(){return t}}}function p(t){return function(e){return c(c({},e),{_js:t})}}var h=n(6811),d=n(9334),f=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const g=function(t){function e(e){var n=t.call(this,e)||this;return e.opts.type='object',e.opts.editable=!1,n}return f(e,t),e.prototype.initChildren=function(){var t,e,n=this.target,o=Object.values(n.em.Components.componentsById)[0];console.log('fon',o);var i=Object.entries(n.em.Components.componentsById).filter((function(t){t[0];return t[1].get('script-global').length>0})).map((function(t){var e=t[0],n=t[1];return{value:e,name:"".concat(n.getName(),"-").concat(e)}})),r=null!==(e=null===(t=n.value)||void 0===t?void 0:t.componentId)&&void 0!==e?e:null==o?void 0:o.id;if(r){console.log(r);n.em.Components.getById(r)}return[new h.Z('componentId',this,{type:'select',options:i,default:null==o?void 0:o.id,noLabel:!0,width:50}),new h.Z('variableName',this,{type:'select',options:[],noLabel:!0,width:50})]},e.prototype.overrideValue=function(t){return console.log(t),console.log('/////////////////////////////////////////////////'),p(u((null==t?void 0:t.componentId)&&(null==t?void 0:t.variableName)&&"window.".concat(null==t?void 0:t.componentId,"ScopedVariables").concat((null==t?void 0:t.variableName)?"['".concat(null==t?void 0:t.variableName,"']"):'')||'undefined'))(t)},e.prototype.setValue=function(e){if(t.prototype.setValue.call(this,e),this.target.children.find((function(t){return'variableName'==t.opts.name}))){var n=null==e?void 0:e.componentId;if(n){console.log(n);this.em.Components.getById(n);this.target.onUpdateEvent()}}},e}(d.Z);var m=n(3052),v=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const y=function(t){function e(e){return t.call(this,e)||this}return v(e,t),e.prototype.initChildren=function(){return[new h.Z('url',this,{type:'url'}),new h.Z('dataSrc',this,{type:'text',default:'data'})]},e.prototype.overrideValue=function(t){return p((e=function(t){var e=null==t?void 0:t.dataSrc,n=e?"data['".concat(e,"']"):'data';return"function(){\n            let savedOpts = {url: ".concat(t.url,"};\n            const callbacks = []\n            let result;\n            return function(opts, callback){\n              if (typeof result === \"undefined\" || JSON.stringify({...opts, url: ").concat(t.url,"}) != JSON.stringify(savedOpts)){\n                savedOpts = opts;\n                result = $.get(").concat(t.url,")\n              }\n              if(callback){\n                  callbacks.push(callback)\n              }\n              result.done((data) => callbacks.foreach(c => c(").concat(n,", data)))\n              return result;\n            }\n          }()")},{type:'function',resultType:'list',render:function(t){return e(t)}}))(t);var e},e}(d.Z);var _=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const O=function(t){function e(e){var n=t.call(this,e)||this;return e.opts.editable=!1,n}return _(e,t),e.prototype.initChildren=function(){var t,e,n=this.target,o=Object.entries(n.em.Components.componentsById).filter((function(t){t[0];return t[1].get('script-events').length>0})).map((function(t){var e=t[0],n=t[1];return{value:e,name:"".concat(n.getName(),"-").concat(e)}})),i=Object.values(n.em.Components.componentsById)[0],r=null!==(e=null===(t=n.value)||void 0===t?void 0:t.componentId)&&void 0!==e?e:null==i?void 0:i.id;if(r){console.log(r);n.em.Components.getById(r)}return[new h.Z('componentId',this,{type:'select',options:o,default:null==i?void 0:i.id,noLabel:!0,width:50},this.onComponentIdChange),new h.Z('eventName',this,{type:'select',options:[],noLabel:!0,width:50})]},e.prototype.onComponentIdChange=function(t){},e.prototype.overrideValue=function(t){return console.log(t),console.log('/////////////////////////////////////////////////'),p(u((null==t?void 0:t.componentId)&&(null==t?void 0:t.eventName)&&"(callback) => window.globalEvents['".concat(t.componentId,"']['").concat(t.eventName,"'].subscribe('test', callback)")||'() => {}'))(t)},e.prototype.setValue=function(e){var n;if(t.prototype.setValue.call(this,e),null===(n=this.target)||void 0===n?void 0:n.children.find((function(t){return'eventName'==t.opts.name}))){var o=null==e?void 0:e.componentId;if(o){console.log(o);this.em.Components.getById(o);this.target.onUpdateEvent()}}},e}(d.Z);var b=n(305),w=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),x=void 0&&(void 0).__assign||function(){return x=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},x.apply(this,arguments)};const S=function(t){function e(e,n,o){var i=t.call(this,n,x(x({},o),{changeProp:!0}))||this;return i.index=e,console.log('alamr',i.target.value),i}return w(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return this.index+''},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultValue",{get:function(){var t,e=this.index;return(null===(t=this.target.value)||void 0===t?void 0:t.length)>e?this.value:void 0},enumerable:!1,configurable:!0}),e.prototype.initTrait=function(t,e){this.templates,this.templates},e.prototype.getValue=function(){var t=this.index;return this.target.value[t]},e.prototype.setValue=function(t){var e=this.index,n=this.target.value;n[e]=t,this.target.value=n},e}(b.Z);var k=n(3169),P=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const C=function(t){function e(e){return e.opts.changeProp=!0,t.call(this,e)||this}return P(e,t),e.prototype.initChildren=function(){var t=this;return console.log(this.value),((0,i.isArray)(this.value)?this.value:[]).map((function(e,n){return new S(n,t,t.target.templates)}))},Object.defineProperty(e.prototype,"defaultValue",{get:function(){return(0,i.isArray)(this.value)?this.value:this.children.map((function(t){return t.defaultValue})).filter((function(t){return null!=t}))},enumerable:!1,configurable:!0}),e.prototype.add=function(){this.addChildren(new S(this.value.length,this,this.target.templates)),console.log("Tryed to select",this),console.log("Tryed to select",this.children)},e.prototype.remove=function(t){this.removeChildren("".concat(t))},e}(k.Z);var T=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const E=function(t){function e(e){return e.opts.changeProp=!0,t.call(this,e)||this}return T(e,t),e.prototype.initChildren=function(){var t=this;return console.log("urlTestTriggerParentValue",this.value),((0,i.isObject)(this.value)?Object.keys(this.value):[]).map((function(e){return new h.Z(e,t,t.templates)}))},Object.defineProperty(e.prototype,"defaultValue",{get:function(){return Object.fromEntries(this.children.map((function(t){var e;return[t.name,null!==(e=t.value)&&void 0!==e?e:t.defaultValue]})))},enumerable:!1,configurable:!0}),e.prototype.add=function(t){this.addChildren(new h.Z(t,this,this.templates)),console.log("Tryed to select",this),console.log("Tryed to select",this.children)},e.prototype.remove=function(t){this.value;this.removeChildren(t)},e}(k.Z);var A=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Q=void 0&&(void 0).__assign||function(){return Q=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Q.apply(this,arguments)};const $=function(t){function e(e){var n=t.call(this,e)||this;return e.opts.editable=!1,n}return A(e,t),Object.defineProperty(e.prototype,"selectType",{get:function(){return this.opts.selectType},enumerable:!1,configurable:!0}),e.prototype.getComponentWithSlots=function(){this.dataType;return console.log("getComponentWithSlots",this.value),function(t){return Object.entries(t.Components.componentsById).filter((function(t){t[0];var e=t[1];return Object.values(e.slots).length>0})).map((function(t){var e=t[0],n=t[1];return{value:e,name:"".concat(n.getName(),"-").concat(e)}}))}},e.prototype.getSlotNames=function(t){console.log('vaasl;dfkj;asldkjf',this.dataType);this.dataType;return function(e){var n=e.Components.getById(t);return(null==n?void 0:n.scriptSubComp)?Object.keys(n.scriptSubComp.slots):[]}},e.prototype.initChildren=function(){var t,e,n,o=this.target,i=Object.values(o.em.Components.componentsById)[0],r=null!==(e=null===(t=o.value)||void 0===t?void 0:t.componentId)&&void 0!==e?e:null==i?void 0:i.id;console.log("really important staff2222",o.value,this.value);var s=new h.Z('variables',this,{type:'unique-list',traits:{type:'variable'},noLabel:!0,editable:!1,width:100}),a=new h.Z('slot',this,{type:'select',options:this.getSlotNames(r),noLabel:!0,width:50},this.onSlotChange(s,null!==(n=this.value.params)&&void 0!==n?n:{}));return[new h.Z('componentId',this,{type:'select',options:this.getComponentWithSlots(),default:null==i?void 0:i.id,noLabel:!0,width:50},this.onComponentIdChange(a)),a,s]},e.prototype.onComponentIdChange=function(t){return function(t){}},e.prototype.onSlotChange=function(t,e){return function(n){var o=n.componentId,i=n.slot;if(o&&i){var r=t.em.Components.getById(o).slots[i];console.log("really important staff333",t.value,n,r,r.params,e),t.target.childrenChanged(),console.log(i,r.params),r.params?(t.value=Object.fromEntries(Object.keys(r.params).map((function(t){return[t,{params:e,selectType:r.params[t]}]}))),t.onUpdateEvent()):t.value={},console.log("setParams1",t.value),console.log("setParams2",t)}}},e.prototype.setValue=function(e){t.prototype.setValue.call(this,Q(Q({},this.value),e));var n=this.children.find((function(t){return'slot'==t.name}));if(n){var o=null==e?void 0:e.componentId;o&&(n.opts.options=this.getSlotNames(o),n.onUpdateEvent())}this.onUpdateEvent()},Object.defineProperty(e.prototype,"dataType",{get:function(){var t,e,n,o=this.value;o.componentId,o.slot;return console.log(this.value),null!==(n=null===(e=null===(t=this.value)||void 0===t?void 0:t.optType)||void 0===e?void 0:e.type)&&void 0!==n?n:'unkown'},enumerable:!1,configurable:!0}),e}(d.Z);var j=n(3213),R=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const M=function(t){function e(e){var n=t.call(this,e)||this;return e.opts.editable=!1,n}return R(e,t),e.prototype.getComponentWithSignals=function(){var t=this.dataType;return function(e){return Object.entries(e.Components.componentsById).filter((function(e){e[0];var n,o,i=e[1];return Object.values(null!==(o=null===(n=i.scriptSubComp)||void 0===n?void 0:n.signals)&&void 0!==o?o:{}).filter((function(e){var n;return(null===(n=null==e?void 0:e.optType)||void 0===n?void 0:n.type)==t})).length>0})).map((function(t){var e=t[0],n=t[1];return{value:e,name:"".concat(n.getName(),"-").concat(e)}}))}},e.prototype.getSignalNames=function(t){var e=this.dataType;return function(n){var o=n.Components.getById(t);return(null==o?void 0:o.scriptSubComp)?Object.entries(o.scriptSubComp.signals).filter((function(t){var n;t[0];return(null===(n=t[1].optType)||void 0===n?void 0:n.type)==e})).map((function(t){var e=t[0];t[1];return e})):[]}},e.prototype.initChildren=function(){var t,e,n=this.target,o=Object.values(n.em.Components.componentsById)[0],i=null!==(e=null===(t=n.value.subscription)||void 0===t?void 0:t.componentId)&&void 0!==e?e:null==o?void 0:o.id,r=new d.Z(new h.Z('subscription',this,{type:'object',noLabel:!0,width:100})),s=new h.Z('params',r,{type:'unique-list',traits:{type:'variable'},noLabel:!0,editable:!1,width:100});return[new h.Z('componentId',r,{type:'select',options:this.getComponentWithSignals(),default:null==o?void 0:o.id,noLabel:!0,width:50},this.onComponentIdChange),new h.Z('name',r,{type:'select',options:this.getSignalNames(i),noLabel:!0,width:50},this.onSignalChange(s)),s]},e.prototype.onComponentIdChange=function(t){},e.prototype.onSignalChange=function(t){return function(e){var n,o,i=e.componentId,r=e.name;if(i&&r){var s=null===(n=t.em.Components.getById(i).scriptSubComp)||void 0===n?void 0:n.signals[r];t.value=Object.fromEntries(Object.keys(null!==(o=null==s?void 0:s.optType)&&void 0!==o?o:{}).map((function(t){return[t,'']}))),console.log("setParams1",t.value),console.log("setParams2",t)}}},e.prototype.setValue=function(e){var n,o;t.prototype.setValue.call(this,e);var i=null===(n=this.children)||void 0===n?void 0:n.find((function(t){return'name'==t.name}));if(i){var r=null===(o=e.subscription)||void 0===o?void 0:o.componentId;r&&(i.opts.options=this.getSignalNames(r),i.onUpdateEvent())}this.onUpdateEvent()},Object.defineProperty(e.prototype,"dataType",{get:function(){var t,e;return console.log("dataTypeasdfdsaf",this.value),console.log("dataTypeasdfdsaf",this),null!==(e=null===(t=this.value)||void 0===t?void 0:t.params)&&void 0!==e?e:'unkown'},enumerable:!1,configurable:!0}),e}(d.Z);var V=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Z=function(t){function e(e){var n=this;return e.opts.changeProp=!0,n=t.call(this,e)||this,console.log("asklfjleksdj",n.value),n.value.on("all",(function(t){return console.log("asklfjleksdj",t)}),n),n}return V(e,t),e.prototype.initChildren=function(){return console.log("really important stasfrf",this.value),[]},Object.defineProperty(e.prototype,"defaultValue",{get:function(){console.log('importantValueDefault',this.children)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewType",{get:function(){return'object'},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"editable",{get:function(){var t;return null===(t=this.opts.editable)||void 0===t||t},enumerable:!1,configurable:!0}),e}(k.Z);var D=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),I=void 0&&(void 0).__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))};const N=function(t){function e(e){var n=t.call(this,e)||this;return e.opts.editable=!1,n}return D(e,t),e.prototype.initChildren=function(){this.target;var t=new h.Z('type',this,{type:'select',options:['string','bool','object','list'],default:'string',noLabel:!0,width:100});return console.log('setValueinitChildren',''),console.log('setValueValue',t.value),I([t],this.selectedTraits(t.value),!0)},e.prototype.selectedTraits=function(t){switch(t){case'string':default:return[];case'object':return[new h.Z('params',this,{type:'unique-list',width:100,traits:{type:'value'}})];case'list':return[new h.Z('itemType',this,{type:'value',width:100})]}},e.prototype.setValue=function(e){this.value.type!=e.type&&(console.log('setValuechildrenChanged',e),this.childrenChanged()),t.prototype.setValue.call(this,e),console.log('setValue',this.children,this),this.onUpdateEvent()},e}(d.Z);var W=n(4455),X=n(5430),L=n(5440),z=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const U=function(t){function e(e){var n=t.call(this,e)||this;return e.opts.editable=!1,n}return z(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return this.target.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultValue",{get:function(){return this.target.value},enumerable:!1,configurable:!0}),e.prototype.setValue=function(t){var e=this,n=this.opts.options,o=((0,i.isFunction)(n)?n(this.em):n).map((function(t){return(0,i.isString)(t)?t:t.value}));if((0,i.isString)(t)){o.forEach((function(t){t.split(' ').forEach((function(t){return e.target.value.remove({name:t,type:L.Z.TYPE_CLASS})}))}));var r=t.split(' ').filter((function(t){return''!=t}));r.length>0&&r.forEach((function(t){return e.target.value.add({name:t,type:L.Z.TYPE_CLASS})}))}},e.prototype.getValue=function(){var t=this.opts.options,e=((0,i.isFunction)(t)?t(this.em):t).map((function(t){return(0,i.isString)(t)?t:t.value})),n=this.target.value.getFullString().split('.').filter((function(t){return''!=t}));return e.find((function(t){return t.split(' ').every((function(t){return n.find((function(e){return e==t}))}))}))},Object.defineProperty(e.prototype,"viewType",{get:function(){return'select'},enumerable:!1,configurable:!0}),e}(b.Z);var q=void 0&&(void 0).__assign||function(){return q=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},q.apply(this,arguments)};const Y=function(){function t(){}return t.build=function(e,n){if(n instanceof l)return n;if((0,i.isString)(n))return new l(n,e,{type:'text',label:n});if('target'==n.name){var o=e.em.Traits.config.optionsTarget;return new l(n.name,e,q(q({},n),{type:'select',default:!1,options:o}))}var r=new l(n.name,e,n);return t.buildNestedTraits(r)},t.buildNestedTraits=function(t){switch(console.log('asdfasdf',t.type),t.type){case'list':return new C(t);case'unique-list':return new E(t);case'object':return new d.Z(t);case'class':return new U(t);case'url':return new m.Z(t);case'link':return new g(t);case'ajax':return new y(t);case'signal':return new $(t);case'slot':return new M(t);case'variable':return new j.Z(t);case'event':return new O(t);case'component':return new Z(t);case'value':return new N(t);case'state':return new W.Z(t);case'state-ref':return new X.Z(t);default:return t}},t}()},9334:(t,e,n)=>{"use strict";n.d(e,{Z:()=>c});var o,i=n(9050),r=n(6811),s=n(3169),a=void 0&&(void 0).__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),l=void 0&&(void 0).__assign||function(){return l=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},l.apply(this,arguments)};const c=function(t){function e(e){return e.opts.changeProp=!0,t.call(this,e)||this}return a(e,t),e.prototype.initChildren=function(){var t=this;return((0,i.isArray)(this.templates)?this.templates:[this.templates]).map((function(e){return new r.Z(e.name,t,e)}))},Object.defineProperty(e.prototype,"defaultValue",{get:function(){var t=this;console.log('importantValueDefault',this.children,this.value,l(l({},Object.fromEntries(this.target.templates.map((function(e){var n;return[e.name,null===(n=t.children.find((function(t){return t.name==e.name})))||void 0===n?void 0:n.defaultValue]})))),this.value));var e=this.target.templates.map((function(e){var n;return[e.name,null===(n=t.children.find((function(t){return t.name==e.name})))||void 0===n?void 0:n.defaultValue]})).filter((function(t){return null!=t[1]}));if(e.length>0)return this.childrenChanged(),l(l({},Object.fromEntries(e)),this.value)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewType",{get:function(){return'object'},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"editable",{get:function(){var t;return null===(t=this.opts.editable)||void 0===t||t},enumerable:!1,configurable:!0}),e.prototype.getValue=function(){return(0,i.isObject)(this.target.value)?this.target.value:{}},e}(s.Z)},6811:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var o,i=n(305),r=void 0&&(void 0).__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=void 0&&(void 0).__assign||function(){return s=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},s.apply(this,arguments)};const a=function(t){function e(e,n,o,i){var r=t.call(this,n,o)||this;return r._name=e,r.onValueChange=i,r}return r(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultValue",{get:function(){var t,e;this.name;return null!==(e=null!==(t=this.value)&&void 0!==t?t:this.opts.default)&&void 0!==e?e:void 0},enumerable:!1,configurable:!0}),e.prototype.getValue=function(){var t=this.name;return this.target.value[t]},e.prototype.setValue=function(t){var e;console.log('setValue',t),console.log('setValueTarget',this.target);var n=this.name,o=s(s({},this.target.value),((e={})[n]=t,e));console.log('setValue',o),this.target.value=o,this.onValueChange&&this.onValueChange(o)},e.prototype.onUpdateEvent=function(){console.log('ChangeScriptEVENTSetInitElement',this.view,this,this.target),this.target.onUpdateEvent()},e}(i.Z)},3169:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var o,i=n(305),r=void 0&&(void 0).__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});const s=function(t){function e(e){var n=t.call(this,e)||this;return n.updateChildren=!1,n}return r(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return this.target.name},enumerable:!1,configurable:!0}),e.prototype.refreshChildren=function(){var t,e=this;null===(t=this.children)||void 0===t||t.forEach((function(t,n){return delete e.children[n]})),this.children=[],this.children=this.initChildren().map((function(t){return console.log('urlTestTriggerParentValueFontos',t),e.em.Traits.TraitFactory.buildNestedTraits(t)})),console.log('importantValue',this.value),console.log("urlTestTriggerParentValueChildren",this.name,this.children,this.value),this.onUpdateEvent()},e.prototype.getValue=function(){return this.target.value},e.prototype.setValue=function(t){console.log('urlTestTriggerParent',this,t),this.updateChildren?(this.updateChildren=!1,this.target.value=t,this.refreshChildren()):this.target.value=t},e.prototype.childrenChanged=function(){this.updateChildren=!0},e.prototype.addChildren=function(t){this.children.push(this.em.Traits.TraitFactory.buildNestedTraits(t)),this.value=this.defaultValue,this.onUpdateEvent()},e.prototype.removeChildren=function(t){var e=this.children.findIndex((function(e){return e.name==t}));-1!=e&&(this.children.splice(e,1),this.value=this.defaultValue,this.onUpdateEvent())},Object.defineProperty(e.prototype,"updateEventName",{get:function(){return this.target.updateEventName},enumerable:!1,configurable:!0}),e}(i.Z)},4455:(t,e,n)=>{"use strict";n.d(e,{Z:()=>u});var o,i=n(9334),r=n(6811),s=n(3052),a=void 0&&(void 0).__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),l=void 0&&(void 0).__assign||function(){return l=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},l.apply(this,arguments)},c=void 0&&(void 0).__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))};const u=function(t){function e(e){var n=t.call(this,e)||this;return e.opts.editable=!1,console.log("a;sldkfj;alskdjfeibv;xkjz;",n.value,n.defaultValue),n}return a(e,t),e.prototype.initChildren=function(){this.target;var t=new r.Z('meta',this,{type:'value',default:{type:'string'},noLabel:!0,width:100});console.log('setValueinitChildren',''),console.log('setValueValue',t.value),console.log('setValueinitChildrenasdfasdfesas',this.selectedTraits(t.value));var e=new r.Z('type',this,{type:'select',options:['default','query']});return c([t,e],this.selectValueTrait(e.value,t.value),!0)},e.prototype.selectValueTrait=function(t,e){var n,o,i=[];switch(t){case'default':return[new r.Z('default',this,this.selectedTraits(e))];case'query':return[new r.Z('url',this,{type:'url'})];default:return console.log(t,e),[]}return('default'==(null===(n=this.value)||void 0===n?void 0:n.type)||'query'==(null===(o=this.value)||void 0===o?void 0:o.type))&&i.push(l({name:'default'},this.selectedTraits(e))),[new r.Z('value',this,{type:'object',traits:c([{name:'type',type:'select',options:['default','query']}],i,!0)})]},e.prototype.selectedTraits=function(t){var e,n=this;switch(console.log('setValueinitChildrenasdfasdfesas',t),null==t?void 0:t.type){case'string':return{type:'text',default:'',width:100};case'object':return{type:'object',width:100,default:{},traits:Object.entries(null!==(e=t.params)&&void 0!==e?e:{}).map((function(t){var e=t[0],o=t[1];return l({name:e},n.selectedTraits(o))}))};case'list':return{type:'list',width:100,default:[],traits:this.selectedTraits(t.itemType)};default:return{}}},e.prototype.setValue=function(n){var o,i;(console.log('setValueinitChildrenasdfasdfesas',this.value,n),'query'==this.value.type)&&(null===(o=this.em.Components.getById(this.component.getId()).scriptSubComp)||void 0===o||o.removeSlot(this.name));(this.value!=n&&this.childrenChanged(),t.prototype.setValue.call(this,n),'query'==this.value.type)&&(null===(i=this.em.Components.getById(this.component.getId()).scriptSubComp)||void 0===i||i.addSlot(this.name,e.getSlot(this.value,this.name)));this.onUpdateEvent()},e.getSlot=function(t,e){return{script:"(opts)=>{\n        var cachedInput;\n        var cachedData;\n        return (i)=>{\n  const url = ".concat(s.Z.renderJs(t.url,'i.data'),";\n      if (cachedInput != i?.data || typeof cachedData == 'undefined'){\n        url && $.get(url).done(data => {\n          console.log(\"fromSite\", data)\n          cachedData = data;\n          cachedInput = i?.data;\n          opts.slots['updateState']({data: {'").concat(e,"': data}});\n        });\n      }\n    }}"),params:{}}},e.renderJs=function(t,e){var n;if('default'===(null==t?void 0:t.type)){var o=null!==(n=null==t?void 0:t.default)&&void 0!==n?n:'';return o?"'".concat(o,"'"):'undefined'}return'undefined'},e.renderValueJs=function(t,e){var n;if('default'===(null==t?void 0:t.type)){var o=null!==(n=null==t?void 0:t.default)&&void 0!==n?n:'';return o?"".concat(JSON.stringify(o)):'undefined'}return'undefined'},e}(i.Z)},5430:(t,e,n)=>{"use strict";n.d(e,{Z:()=>l});var o,i=n(9334),r=n(6811),s=void 0&&(void 0).__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=void 0&&(void 0).__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))};const l=function(t){function e(e){var n=t.call(this,e)||this;return e.opts.editable=!1,n}return s(e,t),e.getAllSelectableParam=function(t,e,n){var o=this,i=[];return(null==t?void 0:t.type)==e&&i.push({names:n,meta:t}),'object'==(null==t?void 0:t.type)&&t.params&&i.push.apply(i,Object.entries(t.params).map((function(t){var i=t[0],r=t[1];return o.getAllSelectableParam(r,e,a(a([],n,!0),[i],!1))})).flat()),i},e.filterWithSelectType=function(t,e){var n=this;return Object.entries(t).map((function(t){var o=t[0],i=t[1];return n.getAllSelectableParam(null==i?void 0:i.meta,e,[o])})).flat()},e.prototype.getComponentWithStates=function(t){return function(n){return Object.entries(n.Components.componentsById).filter((function(n){n[0];var o=n[1];return o.scriptSubComp&&e.filterWithSelectType(o.scriptSubComp.states,t).length>0})).map((function(t){var e=t[0],n=t[1];return{value:e,name:"".concat(n.getName(),"-").concat(e)}}))}},e.prototype.getStateNames=function(t,n){return function(o){var i=t.value;if(i){var r=o.Components.getById(i);return r.scriptSubComp?e.filterWithSelectType(r.scriptSubComp.states,n).map((function(t){return{name:t.names.join(':'),value:t.names.join('?.')}})):[]}return[]}},e.prototype.initChildren=function(){var t=new r.Z('componentId',this,{type:'select',options:this.getComponentWithStates(this.selectType.type),noLabel:!0,width:50});return[t,new r.Z('stateName',this,{type:'select',options:this.getStateNames(t,this.selectType.type),noLabel:!0,width:50})]},e.prototype.setValue=function(e){var n,o;this.value.componentId&&(null===(n=this.em.Components.getById(this.value.componentId).scriptSubComp)||void 0===n||n.removeStateRef(this.updateEventName));t.prototype.setValue.call(this,e),console.log('setValue',this.children,this),console.log('setValueValue',e);var i=e.componentId;i&&(null===(o=this.em.Components.getById(i).scriptSubComp)||void 0===o||o.addStateRef(this.updateEventName,{componentId:this.component.getId(),stateName:e.stateName}));this.onUpdateEvent()},e.renderJs=function(t){var e=null!=t?t:{},n=e.componentId,o=e.stateName;return n&&o?"window.globalScriptParams['".concat(n,"'].vars.").concat(o):'undefined'},Object.defineProperty(e.prototype,"selectType",{get:function(){var t;return null!==(t=this.opts['selectType'])&&void 0!==t?t:{type:'unkown'}},enumerable:!1,configurable:!0}),e}(i.Z)},3052:(t,e,n)=>{"use strict";n.d(e,{Z:()=>c});var o,i=n(9334),r=n(6811),s=n(3213),a=void 0&&(void 0).__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),l=void 0&&(void 0).__assign||function(){return l=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},l.apply(this,arguments)};const c=function(t){function e(e){var n,o=t.call(this,e)||this,i=Object.entries(null!==(n=e.value.variables)&&void 0!==n?n:{});return console.log(i),console.log('traits'),o}return a(e,t),e.prototype.initChildren=function(){this.target;var t=new r.Z('variables',this,{type:'unique-list',traits:{type:'variable'},label:!1,editable:!1});return[new r.Z('url',this,{type:'text',label:'url'},this.onUrlChange(this)),t]},e.prototype.onUrlChange=function(t){return function(t){}},e.overrideValue=function(t){var n,o=t.url,i=void 0===o?'':o;console.log(t),console.log(t.url);var r=e.parseUrlToVariables(i);console.log(r);var s=null!==(n=t.variables)&&void 0!==n?n:{},a=Object.fromEntries(r.map((function(t){return[t,l(l({},s[t]),{selectType:{type:'string'},params:{}})]})));return console.log('urlTe',a),{url:i,variables:a}},e.renderJs=function(t,n){var o=null!=t?t:{},i=o.url,r=o.variables,a=void 0===r?{}:r;console.log(t),console.log(null==t?void 0:t.url);var l=e.parseUrlToVariables(i);return console.log(l),l.forEach((function(t){var e=s.Z.renderJs(a[t],n&&"".concat(n,"?.").concat(t));console.log(",variable",e),i=null==i?void 0:i.replaceAll("<".concat(t,">"),"${".concat(e,"}"))})),console.log('urlTest',i,l,null==t?void 0:t.variables),i?'`'+i+'`':void 0},e.parseUrlToVariables=function(t){return t?Array.from(t.matchAll(/(?<=<)[\w\d]+(?=>)/g),(function(t){return t[0]})):[]},e.prototype.setValue=function(n){t.prototype.setValue.call(this,e.overrideValue(n)),console.log('setValue',n),console.log('setValue',this.children);var o=this.children.find((function(t){return'variables'==t.name}));console.log('setValue',o),null==o||o.refreshChildren(),this.onUpdateEvent(),console.log('aaa',this.value)},Object.defineProperty(e.prototype,"defaultValue",{get:function(){return Object.fromEntries(this.children.map((function(t){return[t.name,t.defaultValue]})))},enumerable:!1,configurable:!0}),e}(i.Z)},3213:(t,e,n)=>{"use strict";n.d(e,{Z:()=>u});var o,i=n(9334),r=n(6811),s=n(5430),a=void 0&&(void 0).__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),l=void 0&&(void 0).__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))},c=['fixed','parameter','global'];const u=function(t){function e(e){var n=t.call(this,e)||this;return e.opts.editable=!1,n}return a(e,t),e.getAllSelectableParam=function(t,e,n){var o=this,i=[];return t.type==e&&i.push({names:n,meta:t}),'object'==t.type&&t.params&&i.push.apply(i,Object.entries(t.params).map((function(t){var i=t[0],r=t[1];return o.getAllSelectableParam(r,e,l(l([],n,!0),[i],!1))})).flat()),i},e.prototype.initChildren=function(){var t=this,e=new r.Z('variableType',this,{type:'select',options:function(e){var n;return 0==Object.keys(null!==(n=t.value.params)&&void 0!==n?n:{}).length?[c[0],c[2]]:c}.bind(this),default:c[0],noLabel:!0,width:100});return l([e],this.selectedTraits(e.value),!0)},e.prototype.selectedTraits=function(t){var n,o=new r.Z('data',this,{type:'object',noLabel:!0,width:100}),i=e.getAllSelectableParam({type:'object',params:null!==(n=this.value.params)&&void 0!==n?n:{}},this.selectType.type,[]).map((function(t){return{name:t.names.join('|'),value:t.names.join('?.')}}));switch(t){case'parameter':return[new r.Z('param',o,{type:'select',options:i,width:100}),new r.Z('default',o,{type:'text',default:'',width:100})];case'global':return[new r.Z('data',this,{type:'state-ref',selectType:this.selectType,noLabel:!0,width:100})];case'fixed':return[new r.Z('default',o,{type:'text',default:'',width:100})];default:return[]}},e.prototype.setValue=function(e){this.value.variableType!=e.variableType&&this.childrenChanged(),t.prototype.setValue.call(this,e)},e.renderJs=function(t,e){var n,o,i,r;switch(null==t?void 0:t.variableType){case'parameter':var a=null!==(o=null===(n=t.data)||void 0===n?void 0:n.default)&&void 0!==o?o:'',l=e+(t.data.param?"?.".concat(t.data.param):'');return l?"".concat(l," ?? '").concat(a,"'"):a?"'".concat(a,"'"):'undefined';case'global':return s.Z.renderJs(t.data);case'fixed':return null!==(r="'".concat(null===(i=t.data)||void 0===i?void 0:i.default,"'"))&&void 0!==r?r:'undefined';default:return'undefined'}},Object.defineProperty(e.prototype,"selectType",{get:function(){var t;return null!==(t=this.value.selectType)&&void 0!==t?t:{type:'unkown'}},enumerable:!1,configurable:!0}),e}(i.Z)},1962:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _code_manager_model_CodeMirrorEditor__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(8809),_TraitInputView__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(8217),underscore__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(9050),__extends=void 0&&(void 0).__extends||(extendStatics=function(t,e){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},extendStatics(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),extendStatics,TraitFunctionView=function(_super){function TraitFunctionView(t,e){var n=_super.call(this,t,e)||this;return n.type='function',n.variables=null==e?void 0:e.variables,n}return __extends(TraitFunctionView,_super),Object.defineProperty(TraitFunctionView.prototype,"clsLabel",{get:function(){var t=this.ppfx;return"".concat(t,"field")},enumerable:!1,configurable:!0}),Object.defineProperty(TraitFunctionView.prototype,"inputValue",{get:function(){var t,e;return null!==(e=this.editor&&(null===(t=this.editor)||void 0===t?void 0:t.getContent().toString()))&&void 0!==e?e:this.target.value},set:function(t){var e;null===(e=this.editor)||void 0===e||e.setContent(t)},enumerable:!1,configurable:!0}),TraitFunctionView.prototype.templateInput=function(){return''},TraitFunctionView.prototype.codeUpdated=function(){var editor=this.editor;editor&&(this.target.value=eval(editor.getContent().toString()))},TraitFunctionView.prototype.renderField=function(){var t,e,n=this,o=n.$el,i=n.variables,r=n.target,s=o.find('[data-input]'),a=s[s.length-1],l=document.createElement('textarea');(0,underscore__WEBPACK_IMPORTED_MODULE_0__.isUndefined)(r.value)?l.value="(".concat(null!==(t=null==i?void 0:i.join(', '))&&void 0!==t?t:'',") => { \n \n}"):(0,underscore__WEBPACK_IMPORTED_MODULE_0__.isString)(r.value)?l.value="(".concat(null!==(e=null==i?void 0:i.join(', '))&&void 0!==e?e:'',") => { \n return ").concat(r.value,"\n}"):l.value=r.value,a.appendChild(l),this.editor=new _code_manager_model_CodeMirrorEditor__WEBPACK_IMPORTED_MODULE_1__.Z({el:l,readOnly:!1,lineNumbers:!1,codeName:'js',readOnlyRanges:function(t){return[{to:t.doc.line(1).to},{from:t.doc.line(t.doc.lines).from}]}}),this.editor.init(l),this.editor.on('update',this.codeUpdated,this)},TraitFunctionView}(_TraitInputView__WEBPACK_IMPORTED_MODULE_2__.Z);const __WEBPACK_DEFAULT_EXPORT__=TraitFunctionView},8217:(t,e,n)=>{"use strict";n.d(e,{Z:()=>u});var o,i=n(9050),r=n(2815),s=n(8283),a=n(6489),l=void 0&&(void 0).__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),c=void 0&&(void 0).__assign||function(){return c=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},c.apply(this,arguments)};const u=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.appendInput=!0,o}return l(e,t),Object.defineProperty(e.prototype,"clsField",{get:function(){var t=this.ppfx,e=this.type;return"".concat(t,"field ").concat(t,"field-").concat(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clsLabel",{get:function(){var t=this.ppfx;return"".concat(t,"label-wrp")},enumerable:!1,configurable:!0}),e.prototype.events=function(){return{change:this.onChange}},e.prototype.templateLabel=function(){var t=this.ppfx,e=this.name,n=this.getLabel();return"<div class=\"".concat(t,"label\" title=\"").concat(e,"\">").concat(n,"</div>")},e.prototype.templateInput=function(t){var e=this.clsField;return"<div class=\"".concat(e,"\" data-input></div>")},e.prototype.onChange=function(t){console.log('setValueOnchange',this.target),null==t||t.stopPropagation(),null==t||t.preventDefault(),this.target.value=this.inputValue,console.log('setValueOnchange',this.target)},e.prototype.onUpdateEvent=function(t,e){console.log('setValueUpdateEvent'),e&&(this.inputValue=t)},e.prototype.renderLabel=function(){var t=this.$el,e=this.templateLabel();t.find('[data-label]').append(e)},e.prototype.getLabel=function(){var t,e=this.em,n=this.name,o=null!==(t=this.label)&&void 0!==t?t:n;return e.t("traitManager.traits.labels.".concat(o))||(0,s.capitalize)(o).replace(/-/g,' ')},e.prototype.getInputEl=function(){if(!this.$input){var t=this,e=t.em,n=t.name,o=t.type,s=this.target.value,a=(0,r["default"])("<input type=\"".concat(o,"\">")),l=e.t("traitManager.traits.attributes.".concat(n))||{};a.attr(c({placeholder:this.paceholder||s},l)),this.$input=a,(0,i.isUndefined)(s)||(this.inputValue=s)}return this.$input.get(0)},e.prototype.getElInput=function(){return this.elInput},e.prototype.renderField=function(){var t=this,e=t.$el,n=t.appendInput,o=t.elInput,i=e.find('[data-input]'),r=i[i.length-1];o||(this.elInput=this.getInputEl(),n?r.appendChild(this.elInput):r.insertBefore(this.elInput,r.firstChild))},e.prototype.rerender=function(){delete this.elInput,this.render()},e.prototype.render=function(){var t=this,e=t.$el,n=t.pfx,o=t.ppfx,i=t.name,r=t.type,s=t.clsLabel,a=this.hasLabel(),l="".concat(n,"trait");delete this.$input;var c="<div class=\"".concat(l," ").concat(l,"--").concat(r,"\">\n      ").concat(a?"<div class=\"".concat(s,"\" data-label></div>"):'',"\n      <div class=\"").concat(o,"field-wrp ").concat(o,"field-wrp--").concat(r,"\" data-input>\n        ").concat(this.templateInput(this.target.value),"\n      </div>\n    </div>");return e.empty().append(c),a&&this.renderLabel(),this.renderField(),this.el.className="".concat(l,"__wrp ").concat(l,"__wrp-").concat(i),this.setElement(this.el),this},e}(a.Z)},6489:(t,e,n)=>{"use strict";n.d(e,{Z:()=>u});var o,i=n(9050),r=n(2611),s=n(6847),a=n(8283),l=void 0&&(void 0).__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),c=void 0&&(void 0).__assign||function(){return c=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},c.apply(this,arguments)};const u=function(t){function e(e,n){var o,i=t.call(this,{el:null==n?void 0:n.el})||this;i.em=e;var r=i.em.Traits.config;return i.ppfx=r.pStylePrefix||'',i.pfx=i.ppfx+r.stylePrefix||'',i._label=null==n?void 0:n.label,i.noLabel=null!==(o=(null==n?void 0:n.noLabel)&&!1!==(null==n?void 0:n.label))&&void 0!==o&&o,i}return l(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return this.target.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clsField",{get:function(){var t=this.ppfx,e=this.type;return"".concat(t,"field ").concat(t,"field-").concat(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"label",{get:function(){var t;return null!==(t=this._label)&&void 0!==t?t:this.name},enumerable:!1,configurable:!0}),e.prototype.setTarget=function(t,e,n){return(0,i.isString)(t)&&void 0!==e&&(t=r.Z.build(e,c(c({},n),{type:this.type,name:t}))),this.target=t,this.initTarget&&this.initTarget(this.target),this.target.registerForUpdateEvent(this),this},e.prototype.getLabelText=function(){var t=this.em,e=this.label;return e&&(t.t("traitManager.traits.labels.".concat(e))||(0,a.capitalize)(e).replace(/-/g,' '))},e.prototype.hasLabel=function(){return!this.noLabel},e.prototype.render=function(){return this},e}(s.G7)},5440:(t,e,n)=>{"use strict";n.d(e,{Z:()=>u});var o,i=n(9050),r=n(6847),s=void 0&&(void 0).__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=1,l=2,c=function(t){function e(n,o){void 0===o&&(o={});var i=t.call(this,n,o)||this,r=o.config,s=void 0===r?{}:r,a=i.get('name'),l=i.get('label');a?l||i.set('label',a):i.set('name',l);var c=i.get('name'),u=s.escapeName,p=u?u(c):e.escapeName(c);return i.set('name',p),i.em=o.em,i}return s(e,t),e.prototype.defaults=function(){return{name:'',label:'',type:a,active:!0,private:!1,protected:!1,_undo:!0}},e.prototype.isId=function(){return this.get('type')===l},e.prototype.isClass=function(){return this.get('type')===a},e.prototype.getFullName=function(t){void 0===t&&(t={});var e=t.escape,n=this.get('name'),o='';switch(this.get('type')){case a:o='.';break;case l:o='#'}return o+(e?e(n):n)},e.prototype.toString=function(){return this.getFullName()},e.prototype.getName=function(){return this.get('name')||''},e.prototype.getLabel=function(){return this.get('label')||''},e.prototype.setLabel=function(t){return this.set('label',t)},e.prototype.getActive=function(){return!!this.get('active')},e.prototype.setActive=function(t){return this.set('active',t)},e.prototype.toJSON=function(t){void 0===t&&(t={});var e=this.em,n=r.Hn.prototype.toJSON.call(this,[t]),o=(0,i.result)(this,'defaults');if(e&&e.getConfig().avoidDefaults){(0,i.forEach)(o,(function(t,e){n[e]===t&&delete n[e]})),n.label===n.name&&delete n.label;var s=(0,i.keys)(n).length;1===s&&n.name&&(n=n.name),2===s&&n.name&&n.type&&(n=this.getFullName())}return n},e.escapeName=function(t){return"".concat(t).trim().replace(/([^a-z0-9\w-\\:@\\/]+)/gi,'-')},e.TYPE_CLASS=a,e.TYPE_ID=l,e}(r.Hn);const u=c;c.prototype.idAttribute='name'},1250:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var o=n(9050),i=n(4968),r=void 0&&(void 0).__assign||function(){return r=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)},s=['x','y'];const a=function(){function t(t){return void 0===t&&(t={}),this.opts={snapOffset:5,scale:1},(0,o.bindAll)(this,'drag','stop','keyHandle','handleScroll'),this.setOptions(t),this.delta={x:0,y:0},this.lastScroll={x:0,y:0},this.lastScrollDiff={x:0,y:0},this.startPointer={x:0,y:0},this.startPosition={x:0,y:0},this.globScrollDiff={x:0,y:0},this.currentPointer={x:0,y:0},this.position={x:0,y:0},this.guidesStatic=[],this.guidesTarget=[],this.docs=[],this}return t.prototype.setOptions=function(t){void 0===t&&(t={}),this.opts=r(r({},this.opts),t)},t.prototype.toggleDrag=function(t){var e=this.getDocumentEl(),n=this.getContainerEl(),o=this.getWindowEl(),r=t?'on':'off',s={on:i.on,off:i.S1};s[r](n,'mousemove dragover',this.drag),s[r](e,'mouseup dragend touchend',this.stop),s[r](e,'keydown',this.keyHandle),s[r](o,'scroll',this.handleScroll)},t.prototype.handleScroll=function(){var t=this.lastScroll,e=this.delta,n=this.getScrollInfo(),o={x:n.x-t.x,y:n.y-t.y};this.move(e.x+o.x,e.y+o.y),this.lastScrollDiff=o},t.prototype.start=function(t){var e=this.opts,n=e.onStart;this.toggleDrag(!0),this.startPointer=this.getPointerPos(t),this.guidesStatic=(0,o.result)(e,'guidesStatic')||[],this.guidesTarget=(0,o.result)(e,'guidesTarget')||[],(0,o.isFunction)(n)&&n(t,this),this.startPosition=this.getStartPosition(),this.lastScrollDiff={x:0,y:0},this.globScrollDiff={x:0,y:0},this.drag(t)},t.prototype.drag=function(t){var e=this,n=this,i=n.opts,a=n.lastScrollDiff,l=n.globScrollDiff,c=i.onDrag,u=this.startPointer,p=this.getPointerPos(t),h={x:l.x+a.x,y:l.y+a.y};this.globScrollDiff=h;var d={x:p.x-u.x+h.x,y:p.y-u.y+h.y};this.lastScrollDiff={x:0,y:0};var f=this.lockedAxis;'x'===(f=t.shiftKey?!f&&this.detectAxisLock(d.x,d.y):null)?d.x=u.x:'y'===f&&(d.y=u.y);var g=function(n){s.forEach((function(t){return n[t]=n[t]*(0,o.result)(i,'scale')})),e.delta=n,e.move(n.x,n.y),(0,o.isFunction)(c)&&c(t,e)},m=r({},d);if(this.currentPointer=p,this.lockedAxis=f,this.lastScroll=this.getScrollInfo(),g(d),this.guidesTarget.length){var v=this.snapGuides(m),y=v.newDelta,_=v.trgX,O=v.trgY;(_||O)&&g(y)}0===t.which&&this.stop(t)},t.prototype.snapGuides=function(t){var e=this,n=t,i=this.trgX,r=this.trgY;return this.guidesTarget.forEach((function(n){n.x&&e.trgX||n.y&&e.trgY||(n.active=!1,e.guidesStatic.forEach((function(s){if(!(n.y&&s.x||n.x&&s.y)){var a=n.y&&s.y,l=a?'y':'x',c=n[l],u=s[l],p=t[l],h=a?r:i;if(e.isPointIn(c,u)&&(0,o.isUndefined)(h)){var d=p-(c-u);e.setGuideLock(n,d)}}})))})),i=this.trgX,r=this.trgY,s.forEach((function(i){var r=i.toUpperCase(),s=e["trg".concat(r)];s&&!e.isPointIn(t[i],s.lock)&&(e.setGuideLock(s,null),s=null),s&&!(0,o.isUndefined)(s.lock)&&(n[i]=s.lock)})),{newDelta:n,trgX:this.trgX,trgY:this.trgY}},t.prototype.isPointIn=function(t,e,n){var o=(void 0===n?{}:n).offset||this.opts.snapOffset||0;return t>=e&&t<=e+o||t<=e&&t>=e-o},t.prototype.setGuideLock=function(t,e){var n=(0,o.isUndefined)(t.x)?'Y':'X',i="trg".concat(n);return null!==e?(t.active=!0,t.lock=e,this[i]=t):(delete t.active,delete t.lock,delete this[i]),t},t.prototype.stop=function(t,e){void 0===e&&(e={});var n=this.delta,i=!!e.cancel,r=i?0:n.x,s=i?0:n.y;this.toggleDrag(),this.lockedAxis=null,this.move(r,s,!0);var a=this.opts.onEnd;(0,o.isFunction)(a)&&a(t,this,{cancelled:i})},t.prototype.keyHandle=function(t){(0,i.kl)(t)&&this.stop(t,{cancel:!0})},t.prototype.move=function(t,e,n){var i=this.el,r=this.opts,s=this.startPosition;if(s){var a=r.setPosition,l=s.x+t,c=s.y+e;this.position={x:l,y:c,end:n},(0,o.isFunction)(a)&&a(this.position),i&&(i.style.left="".concat(l,"px"),i.style.top="".concat(c,"px"))}},t.prototype.getContainerEl=function(){var t=this.opts.container;return t?[t]:this.getDocumentEl()},t.prototype.getWindowEl=function(){return this.getContainerEl().map((function(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow}))},t.prototype.getDocumentEl=function(t){var e=this.opts.doc;if(t=t||this.el,!this.docs.length){var n=[document];t&&n.push(t.ownerDocument),e&&n.push(e),this.docs=n}return this.docs},t.prototype.getPointerPos=function(t){var e=this.opts.getPointerPosition,n=(0,i.VB)(t);return e?e(t):{x:n.clientX,y:n.clientY}},t.prototype.getStartPosition=function(){var t=this.el,e=this.opts.getPosition,n={x:0,y:0};return(0,o.isFunction)(e)?n=e():t&&(n={x:parseFloat(t.style.left),y:parseFloat(t.style.top)}),n},t.prototype.getScrollInfo=function(){var t=this.opts.doc,e=t&&t.body;return{y:e?e.scrollTop:0,x:e?e.scrollLeft:0}},t.prototype.detectAxisLock=function(t,e){var n=t,o=e,i=Math.abs(n),r=Math.abs(o);return o>=i||o<=-i?'x':n>r||n<-r?'y':void 0},t}()},2815:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>mt});var o='undefined'!=typeof document?document:null,i='undefined'!=typeof window?window:null,r=Array.prototype,s=r.filter,a=r.indexOf,l=r.map,c=r.push,u=r.reverse,p=r.slice,h=r.splice,d=/^#[\w-]*$/,f=/^\.[\w-]*$/,g=/<.+>/,m=/^\w+$/;function v(t,e){return void 0===e&&(e=o),f.test(t)?e.getElementsByClassName(t.slice(1)):m.test(t)?e.getElementsByTagName(t):e.querySelectorAll(t)}function y(t,e){if(void 0===e&&(e=o),t){if(t.__cash)return t;var n=t;if(T(t)){if(e.__cash&&(e=e[0]),!(n=d.test(t)?e.getElementById(t.slice(1)):g.test(t)?dt(t):v(t,e)))return}else if(C(t))return this.ready(t);(n.nodeType||n===i)&&(n=[n]),this.length=n.length;for(var r=0,s=this.length;r<s;r++)this[r]=n[r]}}function _(t,e){return new y(t,e)}var O=_.fn=_.prototype=y.prototype={constructor:_,__cash:!0,length:0,splice:h};O.get=function(t){return void 0===t?p.call(this):this[t<0?t+this.length:t]},O.eq=function(t){return _(this.get(t))},O.first=function(){return this.eq(0)},O.last=function(){return this.eq(-1)},O.map=function(t){return _(l.call(this,(function(e,n){return t.call(e,n,e)})))},O.slice=function(){return _(p.apply(this,arguments))};var b=/(?:^\w|[A-Z]|\b\w)/g,w=/[\s-_]+/g;function x(t){return t.replace(b,(function(t,e){return t[e?'toUpperCase':'toLowerCase']()})).replace(w,'')}function S(t,e){for(var n=0,o=t.length;n<o&&!1!==e.call(t[n],t[n],n,t);n++);}_.camelCase=x,_.each=S,O.each=function(t){return S(this,(function(e,n){return t.call(e,n,e)})),this},O.removeProp=function(t){return this.each((function(e,n){delete n[t]}))},_.extend=O.extend=function(t){void 0===t&&(t=this);for(var e=arguments,n=e.length,o=n<2?0:1;o<n;o++)for(var i in e[o])t[i]=e[o][i];return t};var k=1;function P(t,e){var n=t&&(t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector);return!!n&&n.call(t,e)}function C(t){return'function'==typeof t}function T(t){return'string'==typeof t}function E(t){return!isNaN(parseFloat(t))&&isFinite(t)}_.guid=k,_.matches=P,_.isFunction=C,_.isString=T,_.isNumeric=E;var A=Array.isArray;function Q(t){return T(t)?function(e,n){return P(n,t)}:t.__cash?function(e,n){return t.is(n)}:function(t,e,n){return e===n}}_.isArray=A,O.prop=function(t,e){if(t){if(T(t))return arguments.length<2?this[0]&&this[0][t]:this.each((function(n,o){o[t]=e}));for(var n in t)this.prop(n,t[n]);return this}},O.filter=function(t){if(!t)return _();var e=C(t)?t:Q(t);return _(s.call(this,(function(n,o){return e.call(n,o,n,t)})))};var $=/\S+/g;function j(t){return T(t)&&t.match($)||[]}function R(t){return t.filter((function(t,e,n){return n.indexOf(t)===e}))}function M(t,e,n){if(1===t.nodeType){var o=i.getComputedStyle(t,null);return e?n?o.getPropertyValue(e):o[e]:o}}function V(t,e){return parseInt(M(t,e),10)||0}O.hasClass=function(t){var e=j(t),n=!1;return e.length&&this.each((function(t,o){return!(n=o.classList.contains(e[0]))})),n},O.removeAttr=function(t){var e=j(t);return e.length?this.each((function(t,n){S(e,(function(t){n.removeAttribute(t)}))})):this},O.attr=function(t,e){if(t){if(T(t)){if(arguments.length<2){if(!this[0])return;var n=this[0].getAttribute(t);return null===n?void 0:n}return null===e?this.removeAttr(t):this.each((function(n,o){o.setAttribute(t,e)}))}for(var o in t)this.attr(o,t[o]);return this}},O.toggleClass=function(t,e){var n=j(t),o=void 0!==e;return n.length?this.each((function(t,i){S(n,(function(t){o?e?i.classList.add(t):i.classList.remove(t):i.classList.toggle(t)}))})):this},O.addClass=function(t){return this.toggleClass(t,!0)},O.removeClass=function(t){return arguments.length?this.toggleClass(t,!1):this.attr('class','')},_.unique=R,O.add=function(t,e){return _(R(this.get().concat(_(t,e).get())))};var Z=/^--/;function D(t){return Z.test(t)}var I={},N=o&&o.createElement('div'),W=N?N.style:{},X=['webkit','moz','ms','o'];function L(t,e){if(void 0===e&&(e=D(t)),e)return t;if(!I[t]){var n=x(t),o=''+n.charAt(0).toUpperCase()+n.slice(1);S((n+' '+X.join(o+' ')+o).split(' '),(function(e){if(e in W)return I[t]=e,!1}))}return I[t]}_.prefixedProp=L;var z={animationIterationCount:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0};function U(t,e,n){return void 0===n&&(n=D(t)),n||z[t]||!E(e)?e:e+'px'}O.css=function(t,e){if(T(t)){var n=D(t);return t=L(t,n),arguments.length<2?this[0]&&M(this[0],t,n):t?(e=U(t,e,n),this.each((function(o,i){1===i.nodeType&&(n?i.style.setProperty(t,e):i.style[t]=e)}))):this}for(var o in t)this.css(o,t[o]);return this};var q='__cashData',Y=/^data-(.*)/;function B(t){return t[q]=t[q]||{}}function F(t,e){var n=B(t);if(e){if(!(e in n)){var o=t.dataset?t.dataset[e]||t.dataset[x(e)]:_(t).attr('data-'+e);if(void 0!==o){try{o=JSON.parse(o)}catch(t){}n[e]=o}}return n[e]}return n}function G(t,e){return V(t,'border'+(e?'Left':'Top')+'Width')+V(t,'padding'+(e?'Left':'Top'))+V(t,'padding'+(e?'Right':'Bottom'))+V(t,'border'+(e?'Right':'Bottom')+'Width')}function H(t,e){for(var n=0,o=e.length;n<o;n++)if(t.indexOf(e[n])<0)return!1;return!0}function K(t,e,n){S(t[n],(function(t){t[0];var o=t[1];e.removeEventListener(n,o)})),delete t[n]}_.hasData=function(t){return q in t},O.data=function(t,e){var n=this;if(!t){if(!this[0])return;return S(this[0].attributes,(function(t){var e=t.name.match(Y);e&&n.data(e[1])})),F(this[0])}if(T(t))return void 0===e?this[0]&&F(this[0],t):this.each((function(n,o){return function(t,e,n){B(t)[e]=n}(o,t,e)}));for(var o in t)this.data(o,t[o]);return this},O.removeData=function(t){return this.each((function(e,n){return function(t,e){void 0===e?delete t[q]:delete B(t)[e]}(n,t)}))},S(['Width','Height'],(function(t){O['inner'+t]=function(){if(this[0])return this[0]===i?i['inner'+t]:this[0]['client'+t]}})),S(['width','height'],(function(t,e){O[t]=function(n){return this[0]?arguments.length?(n=parseInt(n,10),this.each((function(o,i){if(1===i.nodeType){var r=M(i,'boxSizing');i.style[t]=U(t,n+('border-box'===r?G(i,!e):0))}}))):this[0]===i?this[0][x('outer-'+t)]:this[0].getBoundingClientRect()[t]-G(this[0],!e):void 0===n?void 0:this}})),S(['Width','Height'],(function(t,e){O['outer'+t]=function(n){if(this[0])return this[0]===i?i['outer'+t]:this[0]['offset'+t]+(n?V(this[0],'margin'+(e?'Top':'Left'))+V(this[0],'margin'+(e?'Bottom':'Right')):0)}}));var J='__cashEvents',tt='.';function et(t){return t[J]=t[J]||{}}function nt(t){var e=t.split(tt);return[e[0],e.slice(1).sort()]}function ot(t,e,n,o){var i=et(t);if(e){var r=i[e];if(!r)return;o&&(o.guid=o.guid||k++),i[e]=r.filter((function(i){var r=i[0],s=i[1];if(o&&s.guid!==o.guid||!H(r,n))return!0;t.removeEventListener(e,s)}))}else if(n&&n.length)for(e in i)ot(t,e,n,o);else for(e in i)K(i,t,e)}O.off=function(t,e){var n=this;return void 0===t?this.each((function(t,e){return ot(e)})):S(j(t),(function(t){var o=nt(t),i=o[0],r=o[1];n.each((function(t,n){return ot(n,i,r,e)}))})),this},O.on=function(t,e,n,o){var i=this;if(!T(t)){for(var r in t)this.on(r,e,t[r]);return this}return C(e)&&(n=e,e=!1),S(j(t),(function(t){var r=nt(t),s=r[0],a=r[1];i.each((function(t,i){var r=function t(r){if(!r.namespace||H(a,r.namespace.split(tt))){var l=i;if(e){for(var c=r.target;!P(c,e);){if(c===i)return;if(!(c=c.parentNode))return}l=c}r.namespace=r.namespace||'';var u=n.call(l,r,r.data);o&&ot(i,s,a,t),!1===u&&(r.preventDefault(),r.stopPropagation())}};r.guid=n.guid=n.guid||k++,function(t,e,n,o){o.guid=o.guid||k++;var i=et(t);i[e]=i[e]||[],i[e].push([n,o]),t.addEventListener(e,o)}(i,s,a,r)}))})),this},O.one=function(t,e,n){return this.on(t,e,n,!0)},O.ready=function(t){var e=function(){return t(_)};return'loading'!==o.readyState?setTimeout(e):o.addEventListener('DOMContentLoaded',e),this},O.trigger=function(t,e){var n=t;if(T(t)){var i=nt(t),r=i[0],s=i[1];(n=o.createEvent('HTMLEvents')).initEvent(r,!0,!0),n.namespace=s.join(tt)}return n.data=e,this.each((function(t,e){e.dispatchEvent(n)}))};var it=/select-one/i,rt=/select-multiple/i;function st(t){var e=t.type;return it.test(e)?function(t){return t.selectedIndex<0?null:t.options[t.selectedIndex].value}(t):rt.test(e)?function(t){var e=[];return S(t.options,(function(t){!t.selected||t.disabled||t.parentNode.disabled||e.push(t.value)})),e}(t):t.value}var at=/%20/g;var lt=/file|reset|submit|button|image/i,ct=/radio|checkbox/i;O.serialize=function(){var t='';return this.each((function(e,n){S(n.elements||[n],(function(e){if(!e.disabled&&e.name&&'FIELDSET'!==e.tagName&&!lt.test(e.type)&&(!ct.test(e.type)||e.checked)){var n=st(e);if(void 0!==n)S(A(n)?n:[n],(function(n){t+=function(t,e){return'&'+encodeURIComponent(t)+'='+encodeURIComponent(e).replace(at,'+')}(e.name,n)}))}}))})),t.substr(1)},O.val=function(t){return void 0===t?this[0]&&st(this[0]):this.each((function(e,n){var o=rt.test(n.type),i=null===t?o?[]:'':t;o&&A(i)?S(n.options,(function(t){t.selected=i.indexOf(t.value)>=0})):n.value=i}))},O.clone=function(){return this.map((function(t,e){return e.cloneNode(!0)}))},O.detach=function(){return this.each((function(t,e){e.parentNode&&e.parentNode.removeChild(e)}))};var ut,pt=/^\s*<(\w+)[^>]*>/,ht=/^\s*<(\w+)\s*\/?>(?:<\/\1>)?\s*$/;function dt(t){if(function(){if(!ut){var t=o.createElement('table'),e=o.createElement('tr');ut={'*':o.createElement('div'),tr:o.createElement('tbody'),td:e,th:e,thead:t,tbody:t,tfoot:t}}}(),!T(t))return[];if(ht.test(t))return[o.createElement(RegExp.$1)];var e=pt.test(t)&&RegExp.$1,n=ut[e]||ut['*'];return n.innerHTML=t,_(n.childNodes).detach().get()}function ft(t,e,n){if(void 0!==e){var o=T(e);!o&&e.length?S(e,(function(e){return ft(t,e,n)})):S(t,o?function(t){t.insertAdjacentHTML(n?'afterbegin':'beforeend',e)}:function(t,o){return function(t,e,n){n?t.insertBefore(e,t.childNodes[0]):t.appendChild(e)}(t,o?e.cloneNode(!0):e,n)})}}_.parseHTML=dt,O.empty=function(){var t=this[0];if(t)for(;t.firstChild;)t.removeChild(t.firstChild);return this},O.append=function(){var t=this;return S(arguments,(function(e){ft(t,e)})),this},O.appendTo=function(t){return ft(_(t),this),this},O.html=function(t){if(void 0===t)return this[0]&&this[0].innerHTML;var e=t.nodeType?t[0].outerHTML:t;return this.each((function(t,n){n.innerHTML=e}))},O.insertAfter=function(t){var e=this;return _(t).each((function(t,n){var o=n.parentNode;e.each((function(e,i){o.insertBefore(t?i.cloneNode(!0):i,n.nextSibling)}))})),this},O.after=function(){var t=this;return S(u.apply(arguments),(function(e){u.apply(_(e).slice()).insertAfter(t)})),this},O.insertBefore=function(t){var e=this;return _(t).each((function(t,n){var o=n.parentNode;e.each((function(e,i){o.insertBefore(t?i.cloneNode(!0):i,n)}))})),this},O.before=function(){var t=this;return S(arguments,(function(e){_(e).insertBefore(t)})),this},O.prepend=function(){var t=this;return S(arguments,(function(e){ft(t,e,!0)})),this},O.prependTo=function(t){return ft(_(t),u.apply(this.slice()),!0),this},O.remove=function(){return this.detach().off()},O.replaceWith=function(t){var e=this;return this.each((function(n,o){var i=o.parentNode;if(i){var r=n?_(t).clone():_(t);if(!r[0])return e.remove(),!1;i.replaceChild(r[0],o),_(r[0]).after(r.slice(1))}}))},O.replaceAll=function(t){return _(t).replaceWith(this),this},O.text=function(t){return void 0===t?this[0]?this[0].textContent:'':this.each((function(e,n){n.textContent=t}))};var gt=o&&o.documentElement;O.offset=function(){var t=this[0];if(t){var e=t.getBoundingClientRect();return{top:e.top+i.pageYOffset-gt.clientTop,left:e.left+i.pageXOffset-gt.clientLeft}}},O.offsetParent=function(){return _(this[0]&&this[0].offsetParent)},O.position=function(){var t=this[0];if(t)return{left:t.offsetLeft,top:t.offsetTop}},O.children=function(t){var e=[];return this.each((function(t,n){c.apply(e,n.children)})),e=_(R(e)),t?e.filter((function(e,n){return P(n,t)})):e},O.contents=function(){var t=[];return this.each((function(e,n){c.apply(t,'IFRAME'===n.tagName?[n.contentDocument]:n.childNodes)})),_(t.length&&R(t))},O.find=function(t){for(var e=[],n=0,o=this.length;n<o;n++){var i=v(t,this[n]);i.length&&c.apply(e,i)}return _(e.length&&R(e))},O.has=function(t){var e=T(t)?function(e,n){return!!v(t,n).length}:function(e,n){return n.contains(t)};return this.filter(e)},O.is=function(t){if(!t||!this[0])return!1;var e=Q(t),n=!1;return this.each((function(o,i){return!(n=e(o,i,t))})),n},O.next=function(){return _(this[0]&&this[0].nextElementSibling)},O.not=function(t){if(!t||!this[0])return this;var e=Q(t);return this.filter((function(n,o){return!e(n,o,t)}))},O.parent=function(){var t=[];return this.each((function(e,n){n&&n.parentNode&&t.push(n.parentNode)})),_(R(t))},O.index=function(t){var e=t?_(t)[0]:this[0],n=t?this:_(e).parent().children();return a.call(n,e)},O.closest=function(t){return t&&this[0]?this.is(t)?this.filter(t):this.parent().closest(t):_()},O.parents=function(t){var e,n=[];return this.each((function(i,r){for(e=r;e&&e.parentNode&&e!==o.body.parentNode;)e=e.parentNode,(!t||t&&P(e,t))&&n.push(e)})),_(R(n))},O.prev=function(){return _(this[0]&&this[0].previousElementSibling)},O.siblings=function(){var t=this[0];return this.parent().children().filter((function(e,n){return n!==t}))};const mt=_},4968:(t,e,n)=>{"use strict";n.d(e,{$Q:()=>g,BM:()=>b,FW:()=>h,G1:()=>a,GX:()=>S,L_:()=>c,Mx:()=>l,R3:()=>m,S1:()=>$,SJ:()=>O,Ut:()=>x,VB:()=>C,Vb:()=>A,cx:()=>u,dL:()=>f,kl:()=>T,o5:()=>w,on:()=>Q,pn:()=>d,r$:()=>E,rw:()=>y,sE:()=>p,sN:()=>P,t3:()=>_,ut:()=>v});var o=n(9050),i=void 0&&(void 0).__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))},r='tag',s='attributes',a='transitionend oTransitionEnd transitionend webkitTransitionEnd',l=function(t){return(null==t?void 0:t.nodeType)===Node.DOCUMENT_NODE},c=function(t){var e=t&&t.parentNode;e&&e.removeChild(t)};function u(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(Array.isArray(t[0])?t[0]:i([],t,!0)).filter(Boolean).join(' ')}var p=function(t,e){return t.querySelectorAll(e)},h=function(t,e){return void 0===e&&(e={}),t&&t.setAttribute&&(0,o.each)(e,(function(e,n){return t.setAttribute(n,e)}))},d=function(t){return t&&!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},f=function(t,e){var n;null===(n=t.parentNode)||void 0===n||n.replaceChild(e,t)},g=function(t,e,n){var i=t.childNodes,r=i.length,s=(0,o.isUndefined)(n)?r:n;(0,o.isString)(e)&&(t.insertAdjacentHTML('beforeEnd',e),e=t.lastChild,t.removeChild(e)),s>=r?t.appendChild(e):t.insertBefore(e,i[s])},m=function(t,e){return g(t,e)},v=function(t,e,n){void 0===e&&(e={});var i=document.createElement(t);return e&&(0,o.each)(e,(function(t,e){return i.setAttribute(e,t)})),n&&((0,o.isString)(n)?i.innerHTML=n:i.appendChild(n)),i},y=function(t){return document.createTextNode(t)},_=function(t,e){var n,o=t.type;try{n=new window[e](o,t)}catch(t){(n=document.createEvent(e)).initEvent(o,!0,!0)}return n._parentEvent=t,0===o.indexOf('key')&&(n.keyCodeVal=t.keyCode,['keyCode','which'].forEach((function(t){Object.defineProperty(n,t,{get:function(){return this.keyCodeVal}})}))),n},O=function(t,e){void 0===e&&(e=[]),(Array.isArray(e)?e:[e]).forEach((function(e){var n=e[r]||'div',i=e[s]||{},a=document.createElement(n);(0,o.each)(i,(function(t,e){a.setAttribute(e,t)})),t.appendChild(a)}))},b=function(t){return(null==t?void 0:t.nodeType)===Node.TEXT_NODE},w=function(t){return t&&!b(t)&&!function(t){return(null==t?void 0:t.nodeType)===Node.COMMENT_NODE}(t)},x=function(t){var e,n={top:0,left:0,width:0,height:0};if(!t)return n;if(b(t)){var o=document.createRange();o.selectNode(t),e=o.getBoundingClientRect(),o.detach()}return e||(t.getBoundingClientRect?t.getBoundingClientRect():n)},S=function(t){var e=(null==t?void 0:t.ownerDocument)||document,n=e.documentElement,o=e.defaultView||window;return{x:(o.pageXOffset||n.scrollLeft||0)-(n.clientLeft||0),y:(o.pageYOffset||n.scrollTop||0)-(n.clientTop||0)}},k=function(t){return t.which||t.keyCode},P=function(t){return String.fromCharCode(k(t))},C=function(t){return t.touches&&t.touches[0]?t.touches[0]:t},T=function(t){return 27===k(t)},E=function(t){return 13===k(t)},A=function(t){return function(t){return t.ctrlKey}(t)||t.metaKey},Q=function(t,e,n,i){var r=e.split(/\s+/),s=(0,o.isArray)(t)?t:[t];r.forEach((function(t){s.forEach((function(e){return null==e?void 0:e.addEventListener(t,n,i)}))}))},$=function(t,e,n,i){var r=e.split(/\s+/),s=(0,o.isArray)(t)?t:[t];r.forEach((function(t){s.forEach((function(e){return null==e?void 0:e.removeEventListener(t,n,i)}))}))}},8283:(t,e,n)=>{"use strict";n.r(e),n.d(e,{appendStyles:()=>y,buildBase64UrlFromSvg:()=>W,camelCase:()=>w,capitalize:()=>j,createId:()=>N,deepMerge:()=>E,escape:()=>C,escapeNodeContent:()=>T,find:()=>P,getComponentModel:()=>D,getComponentView:()=>Z,getElement:()=>k,getGlobal:()=>d,getModel:()=>A,getUiClass:()=>v,getUnitFromValue:()=>O,getViewEl:()=>M,hasDnd:()=>S,hasWin:()=>h,isBultInMethod:()=>l,isComponent:()=>V,isDef:()=>p,isEmptyObj:()=>$,isObject:()=>Q,isRule:()=>R,matches:()=>m,normalizeFloat:()=>x,normalizeKey:()=>c,setViewEl:()=>I,shallowDiff:()=>_,toLowerCase:()=>f,upFirst:()=>b,wait:()=>u});var o=n(9050),i=n(4968),r=void 0&&(void 0).__assign||function(){return r=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)},s=void 0&&(void 0).__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))},a={},l=function(t){return(0,o.isFunction)(a[t])},c=function(t){return l(t)?"_".concat(t):t},u=function(t){return void 0===t&&(t=0),new Promise((function(e){return setTimeout(e,t)}))},p=function(t){return void 0!==t},h=function(){return'undefined'!=typeof window},d=function(){return'undefined'!=typeof globalThis?globalThis:'undefined'!=typeof window?window:n.g},f=function(t){return(t||'').toLowerCase()},g=h()?window.Element.prototype:{},m=g.matches||g.webkitMatchesSelector||g.mozMatchesSelector||g.msMatchesSelector,v=function(t,e){var n=t.getConfig(),o=n.stylePrefix;return[n.customUI&&"".concat(o,"cui"),e].filter((function(t){return t})).join(' ')},y=function(t,e){void 0===e&&(e={});var n=(0,o.isArray)(t)?s([],t,!0):[t];if(n.length){var i=n.shift();if(i&&(!e.unique||!document.querySelector("link[href=\"".concat(i,"\"]")))){var r=document.head,a=document.createElement('link');a.href=i,a.rel='stylesheet',e.prepand?r.insertBefore(a,r.firstChild):r.appendChild(a)}y(n)}},_=function(t,e){var n={},i=(0,o.keys)(e);for(var r in t)if(t.hasOwnProperty(r)){var s=t[r],a=e[r];i.indexOf(r)>=0?s!==a&&(n[r]=a):n[r]=null}for(var r in e)e.hasOwnProperty(r)&&(0,o.isUndefined)(t[r])&&(n[r]=e[r]);return n},O=function(t){return t.replace(parseFloat(t),'')},b=function(t){return t[0].toUpperCase()+t.toLowerCase().slice(1)},w=function(t){return t.replace(/-./g,(function(t){return t[1].toUpperCase()}))},x=function(t,e,n){void 0===e&&(e=1),void 0===n&&(n=0);var o=0;if(isNaN(t))return n;if(t=parseFloat(t),Math.floor(t)!==t){var i=e.toString().split('.')[1];o=i?i.length:0}return o?parseFloat(t.toFixed(o)):t},S=function(t){return'draggable'in document.createElement('i')&&(!t||t.config.nativeDnD)},k=function(t){return(0,o.isElement)(t)||(0,i.BM)(t)?t:t&&t.getEl?t.getEl():void 0},P=function(t,e){var n=null;return t.some((function(o,i){return e(o,i,t)?(n=o,1):0})),n},C=function(t){return void 0===t&&(t=''),"".concat(t).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;').replace(/'/g,'&#039;').replace(/`/g,'&#96;')},T=function(t){return void 0===t&&(t=''),"".concat(t).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;')},E=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=r({},t[0]),o=1;o<t.length;o++){var i=r({},t[o]);for(var s in i){var a=n[s],l=i[s];Q(a)&&Q(l)?n[s]=E(a,l):n[s]=l}}return n},A=function(t,e){var n;return!e&&t&&t.__cashData?n=t.__cashData.model:e&&(0,o.isElement)(t)&&(n=e(t).data('model')),n},Q=function(t){return t&&!Array.isArray(t)&&'object'==typeof t},$=function(t){return Object.keys(t).length<=0},j=function(t){return void 0===t&&(t=''),t&&t.charAt(0).toUpperCase()+t.substring(1)},R=function(t){return t&&t.toCSS},M=function(t){return null==t?void 0:t.__gjsv},V=function(t){return!!(null==t?void 0:t.toHTML)},Z=function(t){return M(t)},D=function(t){var e;return null===(e=Z(t))||void 0===e?void 0:e.model},I=function(t,e){t.__gjsv=e},N=function(t){void 0===t&&(t=16);for(var e='',n='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789',o=n.length,i=0;i<t;i++)e+=n.charAt(Math.floor(Math.random()*o));return e},W=function(t){if(t&&'<svg'===t.substr(0,4)){var e='';return h()?e=window.btoa(t):'undefined'!=typeof Buffer&&(e=Buffer.from(t,'utf8').toString('base64')),e?"data:image/svg+xml;base64,".concat(e):t}return t}},2828:(t,e,n)=>{var o={"./CanvasClear":2266,"./CanvasClear.ts":2266,"./CanvasMove":2142,"./CanvasMove.ts":2142,"./CommandAbstract":9458,"./CommandAbstract.ts":9458,"./ComponentDelete":8463,"./ComponentDelete.ts":8463,"./ComponentDrag":1474,"./ComponentDrag.ts":1474,"./ComponentEnter":4866,"./ComponentEnter.ts":4866,"./ComponentExit":3594,"./ComponentExit.ts":3594,"./ComponentNext":656,"./ComponentNext.ts":656,"./ComponentPrev":4768,"./ComponentPrev.ts":4768,"./ComponentStyleClear":2570,"./ComponentStyleClear.ts":2570,"./CopyComponent":7282,"./CopyComponent.ts":7282,"./ExportTemplate":8905,"./ExportTemplate.ts":8905,"./Fullscreen":5212,"./Fullscreen.ts":5212,"./MoveComponent":6907,"./MoveComponent.ts":6907,"./OpenAssets":4963,"./OpenAssets.ts":4963,"./OpenBlocks":1268,"./OpenBlocks.ts":1268,"./OpenLayers":3556,"./OpenLayers.ts":3556,"./OpenPages":1120,"./OpenPages.ts":1120,"./OpenStyleManager":9283,"./OpenStyleManager.ts":9283,"./OpenTraitManager":9521,"./OpenTraitManager.ts":9521,"./PasteComponent":2133,"./PasteComponent.ts":2133,"./Preview":8931,"./Preview.ts":8931,"./Resize":5676,"./Resize.ts":5676,"./SelectComponent":5938,"./SelectComponent.ts":5938,"./SelectPosition":3477,"./SelectPosition.ts":3477,"./ShowOffset":5815,"./ShowOffset.ts":5815,"./SwitchVisibility":5133,"./SwitchVisibility.ts":5133};function i(t){var e=r(t);return n(e)}function r(t){if(!n.o(o,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code='MODULE_NOT_FOUND',e}return o[t]}i.keys=function(){return Object.keys(o)},i.resolve=r,t.exports=i,i.id=2828},1002:(t,e,n)=>{"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}n.d(e,{Z:()=>o})},9050:(t,e,n)=>{"use strict";n.r(e),n.d(e,{VERSION:()=>i,after:()=>Me,all:()=>en,allKeys:()=>mt,any:()=>nn,assign:()=>Mt,before:()=>Ve,bind:()=>xe,bindAll:()=>Pe,chain:()=>_e,chunk:()=>In,clone:()=>It,collect:()=>Fe,compact:()=>Tn,compose:()=>Re,constant:()=>K,contains:()=>on,countBy:()=>yn,create:()=>Dt,debounce:()=>Qe,default:()=>zn,defaults:()=>Vt,defer:()=>Ee,delay:()=>Te,detect:()=>qe,difference:()=>An,drop:()=>Pn,each:()=>Be,escape:()=>ae,every:()=>en,extend:()=>Rt,extendOwn:()=>Mt,filter:()=>Je,find:()=>qe,findIndex:()=>Ne,findKey:()=>De,findLastIndex:()=>We,findWhere:()=>Ye,first:()=>kn,flatten:()=>En,foldl:()=>He,foldr:()=>Ke,forEach:()=>Be,functions:()=>$t,get:()=>zt,groupBy:()=>mn,has:()=>Ut,head:()=>kn,identity:()=>qt,include:()=>on,includes:()=>on,indexBy:()=>vn,indexOf:()=>ze,initial:()=>Sn,inject:()=>He,intersection:()=>Rn,invert:()=>Qt,invoke:()=>rn,isArguments:()=>F,isArray:()=>q,isArrayBuffer:()=>Z,isBoolean:()=>T,isDataView:()=>U,isDate:()=>j,isElement:()=>E,isEmpty:()=>lt,isEqual:()=>gt,isError:()=>M,isFinite:()=>G,isFunction:()=>N,isMap:()=>kt,isMatch:()=>ct,isNaN:()=>H,isNull:()=>P,isNumber:()=>$,isObject:()=>k,isRegExp:()=>R,isSet:()=>Ct,isString:()=>Q,isSymbol:()=>V,isTypedArray:()=>it,isUndefined:()=>C,isWeakMap:()=>Pt,isWeakSet:()=>Tt,iteratee:()=>Ht,keys:()=>at,last:()=>Cn,lastIndexOf:()=>Ue,map:()=>Fe,mapObject:()=>Jt,matcher:()=>Yt,matches:()=>Yt,max:()=>ln,memoize:()=>Ce,methods:()=>$t,min:()=>cn,mixin:()=>Wn,negate:()=>je,noop:()=>te,now:()=>ie,object:()=>Zn,omit:()=>xn,once:()=>Ze,pairs:()=>At,partial:()=>we,partition:()=>_n,pick:()=>wn,pluck:()=>sn,property:()=>Bt,propertyOf:()=>ee,random:()=>oe,range:()=>Dn,reduce:()=>He,reduceRight:()=>Ke,reject:()=>tn,rest:()=>Pn,restArguments:()=>S,result:()=>me,sample:()=>hn,select:()=>Je,shuffle:()=>dn,size:()=>On,some:()=>nn,sortBy:()=>fn,sortedIndex:()=>Xe,tail:()=>Pn,take:()=>kn,tap:()=>Nt,template:()=>ge,templateSettings:()=>ce,throttle:()=>Ae,times:()=>ne,toArray:()=>pn,toPath:()=>Wt,transpose:()=>Mn,unescape:()=>le,union:()=>jn,uniq:()=>$n,unique:()=>$n,uniqueId:()=>ye,unzip:()=>Mn,values:()=>Et,where:()=>an,without:()=>Qn,wrap:()=>$e,zip:()=>Vn});var o={};n.r(o),n.d(o,{VERSION:()=>i,after:()=>Me,all:()=>en,allKeys:()=>mt,any:()=>nn,assign:()=>Mt,before:()=>Ve,bind:()=>xe,bindAll:()=>Pe,chain:()=>_e,chunk:()=>In,clone:()=>It,collect:()=>Fe,compact:()=>Tn,compose:()=>Re,constant:()=>K,contains:()=>on,countBy:()=>yn,create:()=>Dt,debounce:()=>Qe,default:()=>Xn,defaults:()=>Vt,defer:()=>Ee,delay:()=>Te,detect:()=>qe,difference:()=>An,drop:()=>Pn,each:()=>Be,escape:()=>ae,every:()=>en,extend:()=>Rt,extendOwn:()=>Mt,filter:()=>Je,find:()=>qe,findIndex:()=>Ne,findKey:()=>De,findLastIndex:()=>We,findWhere:()=>Ye,first:()=>kn,flatten:()=>En,foldl:()=>He,foldr:()=>Ke,forEach:()=>Be,functions:()=>$t,get:()=>zt,groupBy:()=>mn,has:()=>Ut,head:()=>kn,identity:()=>qt,include:()=>on,includes:()=>on,indexBy:()=>vn,indexOf:()=>ze,initial:()=>Sn,inject:()=>He,intersection:()=>Rn,invert:()=>Qt,invoke:()=>rn,isArguments:()=>F,isArray:()=>q,isArrayBuffer:()=>Z,isBoolean:()=>T,isDataView:()=>U,isDate:()=>j,isElement:()=>E,isEmpty:()=>lt,isEqual:()=>gt,isError:()=>M,isFinite:()=>G,isFunction:()=>N,isMap:()=>kt,isMatch:()=>ct,isNaN:()=>H,isNull:()=>P,isNumber:()=>$,isObject:()=>k,isRegExp:()=>R,isSet:()=>Ct,isString:()=>Q,isSymbol:()=>V,isTypedArray:()=>it,isUndefined:()=>C,isWeakMap:()=>Pt,isWeakSet:()=>Tt,iteratee:()=>Ht,keys:()=>at,last:()=>Cn,lastIndexOf:()=>Ue,map:()=>Fe,mapObject:()=>Jt,matcher:()=>Yt,matches:()=>Yt,max:()=>ln,memoize:()=>Ce,methods:()=>$t,min:()=>cn,mixin:()=>Wn,negate:()=>je,noop:()=>te,now:()=>ie,object:()=>Zn,omit:()=>xn,once:()=>Ze,pairs:()=>At,partial:()=>we,partition:()=>_n,pick:()=>wn,pluck:()=>sn,property:()=>Bt,propertyOf:()=>ee,random:()=>oe,range:()=>Dn,reduce:()=>He,reduceRight:()=>Ke,reject:()=>tn,rest:()=>Pn,restArguments:()=>S,result:()=>me,sample:()=>hn,select:()=>Je,shuffle:()=>dn,size:()=>On,some:()=>nn,sortBy:()=>fn,sortedIndex:()=>Xe,tail:()=>Pn,take:()=>kn,tap:()=>Nt,template:()=>ge,templateSettings:()=>ce,throttle:()=>Ae,times:()=>ne,toArray:()=>pn,toPath:()=>Wt,transpose:()=>Mn,unescape:()=>le,union:()=>jn,uniq:()=>$n,unique:()=>$n,uniqueId:()=>ye,unzip:()=>Mn,values:()=>Et,where:()=>an,without:()=>Qn,wrap:()=>$e,zip:()=>Vn});var i='1.13.6',r='object'==typeof self&&self.self===self&&self||'object'==typeof global&&global.global===global&&global||Function('return this')()||{},s=Array.prototype,a=Object.prototype,l='undefined'!=typeof Symbol?Symbol.prototype:null,c=s.push,u=s.slice,p=a.toString,h=a.hasOwnProperty,d='undefined'!=typeof ArrayBuffer,f='undefined'!=typeof DataView,g=Array.isArray,m=Object.keys,v=Object.create,y=d&&ArrayBuffer.isView,_=isNaN,O=isFinite,b=!{toString:null}.propertyIsEnumerable('toString'),w=['valueOf','isPrototypeOf','toString','propertyIsEnumerable','hasOwnProperty','toLocaleString'],x=Math.pow(2,53)-1;function S(t,e){return e=null==e?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),o=Array(n),i=0;i<n;i++)o[i]=arguments[i+e];switch(e){case 0:return t.call(this,o);case 1:return t.call(this,arguments[0],o);case 2:return t.call(this,arguments[0],arguments[1],o)}var r=Array(e+1);for(i=0;i<e;i++)r[i]=arguments[i];return r[e]=o,t.apply(this,r)}}function k(t){var e=typeof t;return'function'===e||'object'===e&&!!t}function P(t){return null===t}function C(t){return void 0===t}function T(t){return!0===t||!1===t||'[object Boolean]'===p.call(t)}function E(t){return!(!t||1!==t.nodeType)}function A(t){var e='[object '+t+']';return function(t){return p.call(t)===e}}const Q=A('String'),$=A('Number'),j=A('Date'),R=A('RegExp'),M=A('Error'),V=A('Symbol'),Z=A('ArrayBuffer');var D=A('Function'),I=r.document&&r.document.childNodes;1&&'object'!=typeof Int8Array&&'function'!=typeof I&&(D=function(t){return'function'==typeof t||!1});const N=D,W=A('Object');var X=f&&W(new DataView(new ArrayBuffer(8))),L='undefined'!=typeof Map&&W(new Map),z=A('DataView');const U=X?function(t){return null!=t&&N(t.getInt8)&&Z(t.buffer)}:z,q=g||A('Array');function Y(t,e){return null!=t&&h.call(t,e)}var B=A('Arguments');!function(){B(arguments)||(B=function(t){return Y(t,'callee')})}();const F=B;function G(t){return!V(t)&&O(t)&&!isNaN(parseFloat(t))}function H(t){return $(t)&&_(t)}function K(t){return function(){return t}}function J(t){return function(e){var n=t(e);return'number'==typeof n&&n>=0&&n<=x}}function tt(t){return function(e){return null==e?void 0:e[t]}}const et=tt('byteLength'),nt=J(et);var ot=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;const it=d?function(t){return y?y(t)&&!U(t):nt(t)&&ot.test(p.call(t))}:K(!1),rt=tt('length');function st(t,e){e=function(t){for(var e={},n=t.length,o=0;o<n;++o)e[t[o]]=!0;return{contains:function(t){return!0===e[t]},push:function(n){return e[n]=!0,t.push(n)}}}(e);var n=w.length,o=t.constructor,i=N(o)&&o.prototype||a,r='constructor';for(Y(t,r)&&!e.contains(r)&&e.push(r);n--;)(r=w[n])in t&&t[r]!==i[r]&&!e.contains(r)&&e.push(r)}function at(t){if(!k(t))return[];if(m)return m(t);var e=[];for(var n in t)Y(t,n)&&e.push(n);return b&&st(t,e),e}function lt(t){if(null==t)return!0;var e=rt(t);return'number'==typeof e&&(q(t)||Q(t)||F(t))?0===e:0===rt(at(t))}function ct(t,e){var n=at(e),o=n.length;if(null==t)return!o;for(var i=Object(t),r=0;r<o;r++){var s=n[r];if(e[s]!==i[s]||!(s in i))return!1}return!0}function ut(t){return t instanceof ut?t:this instanceof ut?void(this._wrapped=t):new ut(t)}function pt(t){return new Uint8Array(t.buffer||t,t.byteOffset||0,et(t))}ut.VERSION=i,ut.prototype.value=function(){return this._wrapped},ut.prototype.valueOf=ut.prototype.toJSON=ut.prototype.value,ut.prototype.toString=function(){return String(this._wrapped)};var ht='[object DataView]';function dt(t,e,n,o){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var i=typeof t;return('function'===i||'object'===i||'object'==typeof e)&&ft(t,e,n,o)}function ft(t,e,n,o){t instanceof ut&&(t=t._wrapped),e instanceof ut&&(e=e._wrapped);var i=p.call(t);if(i!==p.call(e))return!1;if(X&&'[object Object]'==i&&U(t)){if(!U(e))return!1;i=ht}switch(i){case'[object RegExp]':case'[object String]':return''+t==''+e;case'[object Number]':return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case'[object Date]':case'[object Boolean]':return+t==+e;case'[object Symbol]':return l.valueOf.call(t)===l.valueOf.call(e);case'[object ArrayBuffer]':case ht:return ft(pt(t),pt(e),n,o)}var r='[object Array]'===i;if(!r&&it(t)){if(et(t)!==et(e))return!1;if(t.buffer===e.buffer&&t.byteOffset===e.byteOffset)return!0;r=!0}if(!r){if('object'!=typeof t||'object'!=typeof e)return!1;var s=t.constructor,a=e.constructor;if(s!==a&&!(N(s)&&s instanceof s&&N(a)&&a instanceof a)&&'constructor'in t&&'constructor'in e)return!1}o=o||[];for(var c=(n=n||[]).length;c--;)if(n[c]===t)return o[c]===e;if(n.push(t),o.push(e),r){if((c=t.length)!==e.length)return!1;for(;c--;)if(!dt(t[c],e[c],n,o))return!1}else{var u,h=at(t);if(c=h.length,at(e).length!==c)return!1;for(;c--;)if(!Y(e,u=h[c])||!dt(t[u],e[u],n,o))return!1}return n.pop(),o.pop(),!0}function gt(t,e){return dt(t,e)}function mt(t){if(!k(t))return[];var e=[];for(var n in t)e.push(n);return b&&st(t,e),e}function vt(t){var e=rt(t);return function(n){if(null==n)return!1;var o=mt(n);if(rt(o))return!1;for(var i=0;i<e;i++)if(!N(n[t[i]]))return!1;return t!==xt||!N(n[yt])}}var yt='forEach',_t='has',Ot=['clear','delete'],bt=['get',_t,'set'],wt=Ot.concat(yt,bt),xt=Ot.concat(bt),St=['add'].concat(Ot,yt,_t);const kt=L?vt(wt):A('Map'),Pt=L?vt(xt):A('WeakMap'),Ct=L?vt(St):A('Set'),Tt=A('WeakSet');function Et(t){for(var e=at(t),n=e.length,o=Array(n),i=0;i<n;i++)o[i]=t[e[i]];return o}function At(t){for(var e=at(t),n=e.length,o=Array(n),i=0;i<n;i++)o[i]=[e[i],t[e[i]]];return o}function Qt(t){for(var e={},n=at(t),o=0,i=n.length;o<i;o++)e[t[n[o]]]=n[o];return e}function $t(t){var e=[];for(var n in t)N(t[n])&&e.push(n);return e.sort()}function jt(t,e){return function(n){var o=arguments.length;if(e&&(n=Object(n)),o<2||null==n)return n;for(var i=1;i<o;i++)for(var r=arguments[i],s=t(r),a=s.length,l=0;l<a;l++){var c=s[l];e&&void 0!==n[c]||(n[c]=r[c])}return n}}const Rt=jt(mt),Mt=jt(at),Vt=jt(mt,!0);function Zt(t){if(!k(t))return{};if(v)return v(t);var e=function(){};e.prototype=t;var n=new e;return e.prototype=null,n}function Dt(t,e){var n=Zt(t);return e&&Mt(n,e),n}function It(t){return k(t)?q(t)?t.slice():Rt({},t):t}function Nt(t,e){return e(t),t}function Wt(t){return q(t)?t:[t]}function Xt(t){return ut.toPath(t)}function Lt(t,e){for(var n=e.length,o=0;o<n;o++){if(null==t)return;t=t[e[o]]}return n?t:void 0}function zt(t,e,n){var o=Lt(t,Xt(e));return C(o)?n:o}function Ut(t,e){for(var n=(e=Xt(e)).length,o=0;o<n;o++){var i=e[o];if(!Y(t,i))return!1;t=t[i]}return!!n}function qt(t){return t}function Yt(t){return t=Mt({},t),function(e){return ct(e,t)}}function Bt(t){return t=Xt(t),function(e){return Lt(e,t)}}function Ft(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,o,i){return t.call(e,n,o,i)};case 4:return function(n,o,i,r){return t.call(e,n,o,i,r)}}return function(){return t.apply(e,arguments)}}function Gt(t,e,n){return null==t?qt:N(t)?Ft(t,e,n):k(t)&&!q(t)?Yt(t):Bt(t)}function Ht(t,e){return Gt(t,e,1/0)}function Kt(t,e,n){return ut.iteratee!==Ht?ut.iteratee(t,e):Gt(t,e,n)}function Jt(t,e,n){e=Kt(e,n);for(var o=at(t),i=o.length,r={},s=0;s<i;s++){var a=o[s];r[a]=e(t[a],a,t)}return r}function te(){}function ee(t){return null==t?te:function(e){return zt(t,e)}}function ne(t,e,n){var o=Array(Math.max(0,t));e=Ft(e,n,1);for(var i=0;i<t;i++)o[i]=e(i);return o}function oe(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))}ut.toPath=Wt,ut.iteratee=Ht;const ie=Date.now||function(){return(new Date).getTime()};function re(t){var e=function(e){return t[e]},n='(?:'+at(t).join('|')+')',o=RegExp(n),i=RegExp(n,'g');return function(t){return t=null==t?'':''+t,o.test(t)?t.replace(i,e):t}}const se={'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#x27;','`':'&#x60;'},ae=re(se),le=re(Qt(se)),ce=ut.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var ue=/(.)^/,pe={"'":"'",'\\':'\\','\r':'r','\n':'n','\u2028':'u2028','\u2029':'u2029'},he=/\\|'|\r|\n|\u2028|\u2029/g;function de(t){return'\\'+pe[t]}var fe=/^\s*(\w|\$)+\s*$/;function ge(t,e,n){!e&&n&&(e=n),e=Vt({},e,ut.templateSettings);var o=RegExp([(e.escape||ue).source,(e.interpolate||ue).source,(e.evaluate||ue).source].join('|')+'|$','g'),i=0,r="__p+='";t.replace(o,(function(e,n,o,s,a){return r+=t.slice(i,a).replace(he,de),i=a+e.length,n?r+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":o?r+="'+\n((__t=("+o+"))==null?'':__t)+\n'":s&&(r+="';\n"+s+"\n__p+='"),e})),r+="';\n";var s,a=e.variable;if(a){if(!fe.test(a))throw new Error('variable is not a bare identifier: '+a)}else r='with(obj||{}){\n'+r+'}\n',a='obj';r="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+r+'return __p;\n';try{s=new Function(a,'_',r)}catch(t){throw t.source=r,t}var l=function(t){return s.call(this,t,ut)};return l.source='function('+a+'){\n'+r+'}',l}function me(t,e,n){var o=(e=Xt(e)).length;if(!o)return N(n)?n.call(t):n;for(var i=0;i<o;i++){var r=null==t?void 0:t[e[i]];void 0===r&&(r=n,i=o),t=N(r)?r.call(t):r}return t}var ve=0;function ye(t){var e=++ve+'';return t?t+e:e}function _e(t){var e=ut(t);return e._chain=!0,e}function Oe(t,e,n,o,i){if(!(o instanceof e))return t.apply(n,i);var r=Zt(t.prototype),s=t.apply(r,i);return k(s)?s:r}var be=S((function(t,e){var n=be.placeholder,o=function(){for(var i=0,r=e.length,s=Array(r),a=0;a<r;a++)s[a]=e[a]===n?arguments[i++]:e[a];for(;i<arguments.length;)s.push(arguments[i++]);return Oe(t,o,this,this,s)};return o}));be.placeholder=ut;const we=be,xe=S((function(t,e,n){if(!N(t))throw new TypeError('Bind must be called on a function');var o=S((function(i){return Oe(t,o,e,this,n.concat(i))}));return o})),Se=J(rt);function ke(t,e,n,o){if(o=o||[],e||0===e){if(e<=0)return o.concat(t)}else e=1/0;for(var i=o.length,r=0,s=rt(t);r<s;r++){var a=t[r];if(Se(a)&&(q(a)||F(a)))if(e>1)ke(a,e-1,n,o),i=o.length;else for(var l=0,c=a.length;l<c;)o[i++]=a[l++];else n||(o[i++]=a)}return o}const Pe=S((function(t,e){var n=(e=ke(e,!1,!1)).length;if(n<1)throw new Error('bindAll must be passed function names');for(;n--;){var o=e[n];t[o]=xe(t[o],t)}return t}));function Ce(t,e){var n=function(o){var i=n.cache,r=''+(e?e.apply(this,arguments):o);return Y(i,r)||(i[r]=t.apply(this,arguments)),i[r]};return n.cache={},n}const Te=S((function(t,e,n){return setTimeout((function(){return t.apply(null,n)}),e)})),Ee=we(Te,ut,1);function Ae(t,e,n){var o,i,r,s,a=0;n||(n={});var l=function(){a=!1===n.leading?0:ie(),o=null,s=t.apply(i,r),o||(i=r=null)},c=function(){var c=ie();a||!1!==n.leading||(a=c);var u=e-(c-a);return i=this,r=arguments,u<=0||u>e?(o&&(clearTimeout(o),o=null),a=c,s=t.apply(i,r),o||(i=r=null)):o||!1===n.trailing||(o=setTimeout(l,u)),s};return c.cancel=function(){clearTimeout(o),a=0,o=i=r=null},c}function Qe(t,e,n){var o,i,r,s,a,l=function(){var c=ie()-i;e>c?o=setTimeout(l,e-c):(o=null,n||(s=t.apply(a,r)),o||(r=a=null))},c=S((function(c){return a=this,r=c,i=ie(),o||(o=setTimeout(l,e),n&&(s=t.apply(a,r))),s}));return c.cancel=function(){clearTimeout(o),o=r=a=null},c}function $e(t,e){return we(e,t)}function je(t){return function(){return!t.apply(this,arguments)}}function Re(){var t=arguments,e=t.length-1;return function(){for(var n=e,o=t[e].apply(this,arguments);n--;)o=t[n].call(this,o);return o}}function Me(t,e){return function(){if(--t<1)return e.apply(this,arguments)}}function Ve(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}}const Ze=we(Ve,2);function De(t,e,n){e=Kt(e,n);for(var o,i=at(t),r=0,s=i.length;r<s;r++)if(e(t[o=i[r]],o,t))return o}function Ie(t){return function(e,n,o){n=Kt(n,o);for(var i=rt(e),r=t>0?0:i-1;r>=0&&r<i;r+=t)if(n(e[r],r,e))return r;return-1}}const Ne=Ie(1),We=Ie(-1);function Xe(t,e,n,o){for(var i=(n=Kt(n,o,1))(e),r=0,s=rt(t);r<s;){var a=Math.floor((r+s)/2);n(t[a])<i?r=a+1:s=a}return r}function Le(t,e,n){return function(o,i,r){var s=0,a=rt(o);if('number'==typeof r)t>0?s=r>=0?r:Math.max(r+a,s):a=r>=0?Math.min(r+1,a):r+a+1;else if(n&&r&&a)return o[r=n(o,i)]===i?r:-1;if(i!=i)return(r=e(u.call(o,s,a),H))>=0?r+s:-1;for(r=t>0?s:a-1;r>=0&&r<a;r+=t)if(o[r]===i)return r;return-1}}const ze=Le(1,Ne,Xe),Ue=Le(-1,We);function qe(t,e,n){var o=(Se(t)?Ne:De)(t,e,n);if(void 0!==o&&-1!==o)return t[o]}function Ye(t,e){return qe(t,Yt(e))}function Be(t,e,n){var o,i;if(e=Ft(e,n),Se(t))for(o=0,i=t.length;o<i;o++)e(t[o],o,t);else{var r=at(t);for(o=0,i=r.length;o<i;o++)e(t[r[o]],r[o],t)}return t}function Fe(t,e,n){e=Kt(e,n);for(var o=!Se(t)&&at(t),i=(o||t).length,r=Array(i),s=0;s<i;s++){var a=o?o[s]:s;r[s]=e(t[a],a,t)}return r}function Ge(t){return function(e,n,o,i){var r=arguments.length>=3;return function(e,n,o,i){var r=!Se(e)&&at(e),s=(r||e).length,a=t>0?0:s-1;for(i||(o=e[r?r[a]:a],a+=t);a>=0&&a<s;a+=t){var l=r?r[a]:a;o=n(o,e[l],l,e)}return o}(e,Ft(n,i,4),o,r)}}const He=Ge(1),Ke=Ge(-1);function Je(t,e,n){var o=[];return e=Kt(e,n),Be(t,(function(t,n,i){e(t,n,i)&&o.push(t)})),o}function tn(t,e,n){return Je(t,je(Kt(e)),n)}function en(t,e,n){e=Kt(e,n);for(var o=!Se(t)&&at(t),i=(o||t).length,r=0;r<i;r++){var s=o?o[r]:r;if(!e(t[s],s,t))return!1}return!0}function nn(t,e,n){e=Kt(e,n);for(var o=!Se(t)&&at(t),i=(o||t).length,r=0;r<i;r++){var s=o?o[r]:r;if(e(t[s],s,t))return!0}return!1}function on(t,e,n,o){return Se(t)||(t=Et(t)),('number'!=typeof n||o)&&(n=0),ze(t,e,n)>=0}const rn=S((function(t,e,n){var o,i;return N(e)?i=e:(e=Xt(e),o=e.slice(0,-1),e=e[e.length-1]),Fe(t,(function(t){var r=i;if(!r){if(o&&o.length&&(t=Lt(t,o)),null==t)return;r=t[e]}return null==r?r:r.apply(t,n)}))}));function sn(t,e){return Fe(t,Bt(e))}function an(t,e){return Je(t,Yt(e))}function ln(t,e,n){var o,i,r=-1/0,s=-1/0;if(null==e||'number'==typeof e&&'object'!=typeof t[0]&&null!=t)for(var a=0,l=(t=Se(t)?t:Et(t)).length;a<l;a++)null!=(o=t[a])&&o>r&&(r=o);else e=Kt(e,n),Be(t,(function(t,n,o){((i=e(t,n,o))>s||i===-1/0&&r===-1/0)&&(r=t,s=i)}));return r}function cn(t,e,n){var o,i,r=1/0,s=1/0;if(null==e||'number'==typeof e&&'object'!=typeof t[0]&&null!=t)for(var a=0,l=(t=Se(t)?t:Et(t)).length;a<l;a++)null!=(o=t[a])&&o<r&&(r=o);else e=Kt(e,n),Be(t,(function(t,n,o){((i=e(t,n,o))<s||i===1/0&&r===1/0)&&(r=t,s=i)}));return r}var un=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function pn(t){return t?q(t)?u.call(t):Q(t)?t.match(un):Se(t)?Fe(t,qt):Et(t):[]}function hn(t,e,n){if(null==e||n)return Se(t)||(t=Et(t)),t[oe(t.length-1)];var o=pn(t),i=rt(o);e=Math.max(Math.min(e,i),0);for(var r=i-1,s=0;s<e;s++){var a=oe(s,r),l=o[s];o[s]=o[a],o[a]=l}return o.slice(0,e)}function dn(t){return hn(t,1/0)}function fn(t,e,n){var o=0;return e=Kt(e,n),sn(Fe(t,(function(t,n,i){return{value:t,index:o++,criteria:e(t,n,i)}})).sort((function(t,e){var n=t.criteria,o=e.criteria;if(n!==o){if(n>o||void 0===n)return 1;if(n<o||void 0===o)return-1}return t.index-e.index})),'value')}function gn(t,e){return function(n,o,i){var r=e?[[],[]]:{};return o=Kt(o,i),Be(n,(function(e,i){var s=o(e,i,n);t(r,e,s)})),r}}const mn=gn((function(t,e,n){Y(t,n)?t[n].push(e):t[n]=[e]})),vn=gn((function(t,e,n){t[n]=e})),yn=gn((function(t,e,n){Y(t,n)?t[n]++:t[n]=1})),_n=gn((function(t,e,n){t[n?0:1].push(e)}),!0);function On(t){return null==t?0:Se(t)?t.length:at(t).length}function bn(t,e,n){return e in n}const wn=S((function(t,e){var n={},o=e[0];if(null==t)return n;N(o)?(e.length>1&&(o=Ft(o,e[1])),e=mt(t)):(o=bn,e=ke(e,!1,!1),t=Object(t));for(var i=0,r=e.length;i<r;i++){var s=e[i],a=t[s];o(a,s,t)&&(n[s]=a)}return n})),xn=S((function(t,e){var n,o=e[0];return N(o)?(o=je(o),e.length>1&&(n=e[1])):(e=Fe(ke(e,!1,!1),String),o=function(t,n){return!on(e,n)}),wn(t,o,n)}));function Sn(t,e,n){return u.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))}function kn(t,e,n){return null==t||t.length<1?null==e||n?void 0:[]:null==e||n?t[0]:Sn(t,t.length-e)}function Pn(t,e,n){return u.call(t,null==e||n?1:e)}function Cn(t,e,n){return null==t||t.length<1?null==e||n?void 0:[]:null==e||n?t[t.length-1]:Pn(t,Math.max(0,t.length-e))}function Tn(t){return Je(t,Boolean)}function En(t,e){return ke(t,e,!1)}const An=S((function(t,e){return e=ke(e,!0,!0),Je(t,(function(t){return!on(e,t)}))})),Qn=S((function(t,e){return An(t,e)}));function $n(t,e,n,o){T(e)||(o=n,n=e,e=!1),null!=n&&(n=Kt(n,o));for(var i=[],r=[],s=0,a=rt(t);s<a;s++){var l=t[s],c=n?n(l,s,t):l;e&&!n?(s&&r===c||i.push(l),r=c):n?on(r,c)||(r.push(c),i.push(l)):on(i,l)||i.push(l)}return i}const jn=S((function(t){return $n(ke(t,!0,!0))}));function Rn(t){for(var e=[],n=arguments.length,o=0,i=rt(t);o<i;o++){var r=t[o];if(!on(e,r)){var s;for(s=1;s<n&&on(arguments[s],r);s++);s===n&&e.push(r)}}return e}function Mn(t){for(var e=t&&ln(t,rt).length||0,n=Array(e),o=0;o<e;o++)n[o]=sn(t,o);return n}const Vn=S(Mn);function Zn(t,e){for(var n={},o=0,i=rt(t);o<i;o++)e?n[t[o]]=e[o]:n[t[o][0]]=t[o][1];return n}function Dn(t,e,n){null==e&&(e=t||0,t=0),n||(n=e<t?-1:1);for(var o=Math.max(Math.ceil((e-t)/n),0),i=Array(o),r=0;r<o;r++,t+=n)i[r]=t;return i}function In(t,e){if(null==e||e<1)return[];for(var n=[],o=0,i=t.length;o<i;)n.push(u.call(t,o,o+=e));return n}function Nn(t,e){return t._chain?ut(e).chain():e}function Wn(t){return Be($t(t),(function(e){var n=ut[e]=t[e];ut.prototype[e]=function(){var t=[this._wrapped];return c.apply(t,arguments),Nn(this,n.apply(ut,t))}})),ut}Be(['pop','push','reverse','shift','sort','splice','unshift'],(function(t){var e=s[t];ut.prototype[t]=function(){var n=this._wrapped;return null!=n&&(e.apply(n,arguments),'shift'!==t&&'splice'!==t||0!==n.length||delete n[0]),Nn(this,n)}})),Be(['concat','join','slice'],(function(t){var e=s[t];ut.prototype[t]=function(){var t=this._wrapped;return null!=t&&(t=e.apply(t,arguments)),Nn(this,t)}}));const Xn=ut;var Ln=Wn(o);Ln._=Ln;const zn=Ln}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var n=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=t=>{var e=t&&t.__esModule?()=>t['default']:()=>t;return __webpack_require__.d(e,{a:e}),e},__webpack_require__.d=(t,e)=>{for(var n in e)__webpack_require__.o(e,n)&&!__webpack_require__.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},__webpack_require__.g=function(){if('object'==typeof globalThis)return globalThis;try{return this||new Function('return this')()}catch(t){if('object'==typeof window)return window}}(),__webpack_require__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),__webpack_require__.r=t=>{'undefined'!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:'Module'}),Object.defineProperty(t,'__esModule',{value:!0})};var __webpack_exports__={};return(()=>{"use strict";__webpack_require__.d(__webpack_exports__,{default:()=>Kg});var t=__webpack_require__(9050),e=__webpack_require__(8283);function n(t){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];var i=t.raw;return i.reduce((function(t,o,r){var s=n[r-1],a=i[r-1];return Array.isArray(s)?s=s.join(''):a&&'$'===a.slice(-1)?t=t.slice(0,-1):s=(0,e.escape)(s),t+s+o}))}const o={stylePrefix:'gjs-',components:'',style:'',fromElement:!1,projectData:void 0,noticeOnUnload:!0,showOffsets:!1,showOffsetsSelected:!1,forceClass:!0,height:'900px',width:'100%',log:['warning','error'],baseCss:'',protectedCss:'* { box-sizing: border-box; } body {margin: 0;}',canvasCss:'',defaultCommand:'select-comp',showToolbar:!0,showDevices:!0,devicePreviewMode:!1,mediaCondition:'max-width',tagVarStart:'{[ ',tagVarEnd:' ]}',keepEmptyTextNodes:!1,jsInHtml:!0,nativeDnD:!0,multipleSelection:!0,optsHtml:{},optsCss:{},avoidInlineStyle:!0,avoidDefaults:!0,clearStyles:!1,listenToEl:[],cssIcons:'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css',icons:{close:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>',move:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M13,6V11H18V7.75L22.25,12L18,16.25V13H13V18H16.25L12,22.25L7.75,18H11V13H6V16.25L1.75,12L6,7.75V11H11V6H7.75L12,1.75L16.25,6H13Z"/></svg>',plus:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z" /></svg>',caret:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M7,10L12,15L17,10H7Z" /></svg>',delete:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z" /></svg>',copy:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z" /></svg>',arrowUp:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M13,20H11V8L5.5,13.5L4.08,12.08L12,4.16L19.92,12.08L18.5,13.5L13,8V20Z" /></svg>',chevron:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z" /></svg>',eye:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z" /></svg>',eyeOff:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M11.83,9L15,12.16C15,12.11 15,12.05 15,12A3,3 0 0,0 12,9C11.94,9 11.89,9 11.83,9M7.53,9.8L9.08,11.35C9.03,11.56 9,11.77 9,12A3,3 0 0,0 12,15C12.22,15 12.44,14.97 12.65,14.92L14.2,16.47C13.53,16.8 12.79,17 12,17A5,5 0 0,1 7,12C7,11.21 7.2,10.47 7.53,9.8M2,4.27L4.28,6.55L4.73,7C3.08,8.3 1.78,10 1,12C2.73,16.39 7,19.5 12,19.5C13.55,19.5 15.03,19.2 16.38,18.66L16.81,19.08L19.73,22L21,20.73L3.27,3M12,7A5,5 0 0,1 17,12C17,12.64 16.87,13.26 16.64,13.82L19.57,16.75C21.07,15.5 22.27,13.86 23,12C21.27,7.61 17,4.5 12,4.5C10.6,4.5 9.26,4.75 8,5.2L10.17,7.35C10.74,7.13 11.35,7 12,7Z" /></svg>'},i18n:{},undoManager:{},assetManager:{},canvas:{},layerManager:{},storageManager:{},richTextEditor:{},domComponents:{},modal:{},codeManager:{},panels:{},commands:{},cssComposer:{},selectorManager:{},deviceManager:{},styleManager:{},blockManager:{},traitManager:{},textViewCode:'Code',keepUnusedStyles:!1,customUI:!1};var i=__webpack_require__(2316),r=__webpack_require__.n(i),s=__webpack_require__(2815);var a,l=__webpack_require__(6847),c=void 0&&(void 0).__extends||(a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},a(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e}(l.Hn);const p=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return c(n,e),n.prototype.getByComponent=function(t){var e=this;return this.filter((function(n){return e.getComponent(n)===t}))[0]},n.prototype.addComponent=function(e,n){var o=this,i=((0,t.isArray)(e)?e:[e]).filter((function(t){return!o.hasComponent(t)})).map((function(t){return new u({component:t})}))[0];return this.push(i,n)},n.prototype.getComponent=function(t){return t.get('component')},n.prototype.hasComponent=function(t){var e=this.getByComponent(t);return e&&this.contains(e)},n.prototype.lastComponent=function(){var t=this.last();return t?this.getComponent(t):void 0},n.prototype.allComponents=function(){var t=this;return this.map((function(e){return t.getComponent(e)})).filter((function(t){return t}))},n.prototype.removeComponent=function(e,n){var o=this,i=((0,t.isArray)(e)?e:[e]).map((function(t){return o.getByComponent(t)}));return this.remove(i,n)},n}(l.FE);var h=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),d=void 0&&(void 0).__assign||function(){return d=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},d.apply(this,arguments)},f=void 0&&(void 0).__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))},g=function(){function n(n,o,i){this.debounced=[],this.collections=[],this.cls=[],this._em=n,this._name=o;var r=this.name.charAt(0).toLowerCase()+this.name.slice(1),s=(0,t.isUndefined)(n.config[r])?n.config[this.name]:n.config[r],a=!0===s?{}:s||{};a.pStylePrefix=n.config.pStylePrefix||'',(0,t.isUndefined)(s)||s||(a._disable=1),a.em=n,this._config=(0,e.deepMerge)(i||{},a)}return Object.defineProperty(n.prototype,"em",{get:function(){return this._em},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),n.prototype.render=function(t){},n.prototype.postLoad=function(t){},Object.defineProperty(n.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),n.prototype.getConfig=function(t){return t?this.config[t]:this.config},n.prototype.__logWarn=function(t,e){void 0===e&&(e={}),this.em.logWarning("[".concat(this.name,"]: ").concat(t),e)},n.prototype.destroy=function(){this.__destroy()},n.prototype.__destroy=function(){var t,e,n;null===(t=this.view)||void 0===t||t.remove(),null===(e=this.state)||void 0===e||e.stopListening(),null===(n=this.state)||void 0===n||n.clear(),this.debounced.forEach((function(t){return t.cancel()})),this.collections.forEach((function(t){t.stopListening(),t.reset()}))},n.prototype.__appendTo=function(){var e=this.getConfig().appendTo;if(e){var n=(0,t.isElement)(e)?e:document.querySelector(e);if(!n)return this.__logWarn('"appendTo" element not found');n.appendChild(this.render())}},n}();const m=g;var v=function(n){function o(t,e,o,i,r,s){void 0===s&&(s={});var a=n.call(this,t,e,r)||this;return a.cls=[],a.private=!1,a.all=o,a.events=i,!s.skipListen&&a.__initListen(),a}return h(o,n),o.prototype.postLoad=function(t){},o.prototype.render=function(t){},o.prototype.getProjectData=function(t){var e={},n=this.storageKey;return n&&(e[n]=(t||this.getAll()).map((function(t){return delete t['em']}))),e},o.prototype.loadProjectData=function(t,n){void 0===t&&(t={}),void 0===n&&(n={});var o=n.all,i=n.onResult,r=n.reset,s=this.storageKey,a={action:'load'},l=o||this.all,c=t[s];if('string'==typeof c)try{c=JSON.parse(c)}catch(t){this.__logWarn('Data parsing failed',{input:c})}return r&&c&&l.reset(void 0,a),i?c&&i(c,a):c&&(0,e.isDef)(c.length)&&l.reset(c,a),c},o.prototype.clear=function(t){void 0===t&&(t={});var e=this.all;return e&&e.reset(void 0,t),this},o.prototype.getAll=function(){return f([],this.all.models,!0)},o.prototype.getAllMap=function(){return this.getAll().reduce((function(t,e){return t[e.get(e.idAttribute)]=e,t}),{})},o.prototype.__initListen=function(t){void 0===t&&(t={});var e=this,n=e.all,o=e.em,i=e.events;n&&o&&n.on('add',(function(t,e,n){return o.trigger(i.add,t,n)})).on('remove',(function(t,e,n){return o.trigger(i.remove,t,n)})).on('change',(function(t,e){return o.trigger(i.update,t,t.changedAttributes(),e)})).on('all',this.__catchAllEvent,this),this.cls=[n].concat(t.collections||[]),(t.propagate||[]).forEach((function(t){var e=t.entity,i=t.event;e.on('all',(function(t,e,r,s){var a=d({event:t},s||r);[o,n].map((function(t){return t.trigger(i,e,a)}))}))}))},o.prototype.__remove=function(e,n){var o=this;void 0===n&&(n={});var i=this.em,r=(0,t.isString)(e)?this.get(e):e,s=function(){return r&&o.all.remove(r,n),r};return!n.silent&&(null==i||i.trigger(this.events.removeBefore,r,s,n)),!n.abort&&s()},o.prototype.__catchAllEvent=function(t,e,n,o){var i=this.em,r=this.events,s=o||n;i&&r.all&&i.trigger(r.all,{event:t,model:e,options:s}),this.__onAllEvent()},o.prototype.__appendTo=function(e){var n=this.config.appendTo;if(n){var o=(0,t.isElement)(n)?n:document.querySelector(n);if(!o)return this.__logWarn('"appendTo" element not found');o.appendChild(this.render(e))}},o.prototype.__onAllEvent=function(){},o.prototype._createId=function(t){void 0===t&&(t=16);var n,o=this.getAll().length+t,i=this.getAllMap();do{n=(0,e.createId)(o)}while(i[n]);return n},o.prototype.__listenAdd=function(t,e){var n=this;t.on('add',(function(t,o,i){return n.em.trigger(e,t,i)}))},o.prototype.__listenRemove=function(t,e){var n=this;t.on('remove',(function(t,o,i){return n.em.trigger(e,t,i)}))},o.prototype.__listenUpdate=function(t,e){var n=this;t.on('change',(function(t,o){return n.em.trigger(e,t,t.changedAttributes(),o)}))},o.prototype.__destroy=function(){var t;this.cls.forEach((function(t){t.stopListening(),t.reset()})),null===(t=this.view)||void 0===t||t.remove(),this.view=void 0},o}(g);const y={stylePrefix:'cv-',scripts:[],styles:[],customBadgeLabel:void 0,autoscrollLimit:50,extHl:!1,frameContent:'<!DOCTYPE html>',frameStyle:"\n    body { background-color: #fff }\n    * ::-webkit-scrollbar-track { background: rgba(0, 0, 0, 0.1) }\n    * ::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.2) }\n    * ::-webkit-scrollbar { width: 10px }\n  ",notTextable:['button','a','input[type=checkbox]','input[type=radio]'],allowExternalDrop:!0};var _=__webpack_require__(8728);const O={default:'',devices:[{id:'desktop',name:'Desktop',width:''},{id:'tablet',name:'Tablet',width:'770px',widthMedia:'992px'},{id:'mobileLandscape',name:'Mobile landscape',width:'568px',widthMedia:'768px'},{id:'mobilePortrait',name:'Mobile portrait',width:'320px',widthMedia:'480px'}]};var b=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const w=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return b(e,t),e.prototype.defaults=function(){return{name:'',width:null,height:'',widthMedia:null,priority:null}},e.prototype.initialize=function(){var t=this;null===this.get('widthMedia')&&this.set('widthMedia',this.get('width')),null===this.get('width')&&this.set('width',this.get('widthMedia')),!this.get('priority')&&this.set('priority',parseFloat(this.get('widthMedia'))||0);['width','height','widthMedia'].forEach((function(e){return t.checkUnit(e)}))},e.prototype.checkUnit=function(t){var e=this.get(t)||'';(parseFloat(e)||0).toString()===e.toString()&&this.set(t,"".concat(e,"px"))},e.prototype.getName=function(){return this.get('name')||this.get('id')},e.prototype.getWidthMedia=function(){return this.get('widthMedia')||''},e}(l.Hn);var x=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),S=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return x(e,t),e}(l.FE);const k=S;S.prototype.model=w;var P=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),C=void 0&&(void 0).__makeTemplateObject||function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},T=function(t){function e(e){var n=t.call(this,e)||this;return n.config=e.config||{},n.em=n.config.em,n.ppfx=n.config.pStylePrefix||'',n.listenTo(n.em,'change:device',n.updateSelect),n}return P(e,t),e.prototype.template=function(t){var e=t.ppfx,o=t.label;return n(A||(A=C(["\n      <div class=\"","device-label\">","</div>\n      <div class=\"","field ","select\">\n        <span id=\"","input-holder\">\n          <select class=\"","devices\"></select>\n        </span>\n        <div class=\"","sel-arrow\">\n          <div class=\"","d-s-arrow\"></div>\n        </div>\n      </div>\n      <button style=\"display:none\" class=\"","add-trasp\" data-add-trasp>+</button>\n    "],["\n      <div class=\"","device-label\">","</div>\n      <div class=\"","field ","select\">\n        <span id=\"","input-holder\">\n          <select class=\"","devices\"></select>\n        </span>\n        <div class=\"","sel-arrow\">\n          <div class=\"","d-s-arrow\"></div>\n        </div>\n      </div>\n      <button style=\"display:none\" class=\"","add-trasp\" data-add-trasp>+</button>\n    "])),e,o,e,e,e,e,e,e,e)},e.prototype.events=function(){return{change:'updateDevice','click [data-add-trasp]':'startAdd'}},e.prototype.startAdd=function(){},e.prototype.updateDevice=function(){var t=this.em;if(t){var e=this.devicesEl;t.set('device',e?e.val():'')}},e.prototype.updateSelect=function(){var t=this.em,e=this.devicesEl;if(t&&t.getDeviceModel&&e){var n=t.getDeviceModel();e.val(n?n.get('id'):'')}},e.prototype.getOptions=function(){var t=this.collection,e=this.em,n='';return t.forEach((function(t){var o=t.attributes,i=o.name,r=o.id,s=e&&e.t&&e.t("deviceManager.devices.".concat(r))||i;n+="<option value=\"".concat(r||i,"\">").concat(s,"</option>")})),n},e.prototype.render=function(){var t=this,e=t.em,n=t.ppfx,o=t.$el,i=t.el,r=e&&e.t&&e.t('deviceManager.device');return o.html(this.template({ppfx:n,label:r})),this.devicesEl=o.find(".".concat(n,"devices")),this.devicesEl.append(this.getOptions()),this.devicesEl.val(e.get('device')),i.className="".concat(n,"devices-c"),this},e}(l.G7);const E=T;var A,Q=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),j=void 0&&(void 0).__assign||function(){return j=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},j.apply(this,arguments)},R='device',M="".concat(R,":"),V="".concat(M,"select"),Z=("".concat(V,":before"),"".concat(M,"update")),D="".concat(M,"add"),I=("".concat(D,":before"),"".concat(M,"remove")),N="".concat(I,":before"),W='change:device',X={all:R,select:V,update:Z,add:D,remove:I,removeBefore:N},L=function(e){function n(t){var n,o=e.call(this,t,'DeviceManager',new k,X,O)||this;return o.Device=w,o.Devices=k,o.storageKey='',o.devices=o.all,null===(n=o.config.devices)||void 0===n||n.forEach((function(t){return o.add(t,{silent:!0})})),o.select(o.config.default||o.devices.at(0)),t.on(W,o._onSelect,o),o}return Q(n,e),n.prototype._onSelect=function(t,e,n){var o=this.em,i=this.events,r=t.previous('device'),s=this.get(e),a=i.select;o.trigger(a,s,this.get(r)),this.__catchAllEvent(a,s,n)},n.prototype.add=function(e,n){var o;void 0===n&&(n={});var i=n;if((0,t.isString)(e)){var r=n;o=j(j({},i=arguments[2]||{}),{id:e,name:i.name||e,width:r})}else o=e;return o.id||(o.id=o.name||this._createId()),this.devices.add(o,i)},n.prototype.get=function(t){return this.getAll().filter((function(e){return e.get('name')===t}))[0]||this.devices.get(t)||null},n.prototype.remove=function(t,e){return void 0===e&&(e={}),this.__remove(t,e)},n.prototype.getDevices=function(){return this.devices.models},n.prototype.select=function(e,n){void 0===n&&(n={});var o=(0,t.isString)(e)?this.get(e):e;return o&&this.em.set('device',o.get('id'),n),this},n.prototype.getSelected=function(){return this.get(this.em.get('device'))},n.prototype.getAll=function(){return this.devices},n.prototype.render=function(){var t,e=this.em;return null===(t=this.view)||void 0===t||t.remove(),this.view=new E({collection:this.devices,config:j({em:e},this.config)}),this.view.render().el},n.prototype.destroy=function(){this.__destroy()},n}(v);const z=L;var U;!function(t){t["add"]="page:add",t["addBefore"]="page:add:before",t["remove"]="page:remove",t["removeBefore"]="page:remove:before",t["select"]="page:select",t["selectBefore"]="page:select:before",t["update"]="page:update",t["all"]="page"}(U||(U={}));const q=U;var Y=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),B=function(e){function n(t,n,o){return e.call(this,n,{module:t,modelConstructor:o})||this}return Y(n,e),n.prototype.add=function(n,o){var i,r=this,s=(0,t.isArray)(n)?n:(0,t.isUndefined)(n)?void 0:[n];return s=null!==(i=null==s?void 0:s.map((function(t){return t instanceof r.newModel?t:new r.newModel(r.module,t)})))&&void 0!==i?i:[void 0],e.prototype.add.call(this,(0,t.isArray)(n)?s:s[0],o)},n.prototype.preinitialize=function(t,e){this.newModel=e.modelConstructor,this.module=e.module},n}(l.FE);const F=B;var G=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),H=void 0&&(void 0).__assign||function(){return H=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},H.apply(this,arguments)},K=void 0&&(void 0).__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))},J='__aw',tt='__ah',et=function(e,n){var o,i=e.get(n),r=null===(o=e.view)||void 0===o?void 0:o.el['width'===n?'offsetWidth':'offsetHeight'];return(0,t.isNumber)(i)?i:(0,t.isString)(i)&&i.endsWith('px')?parseFloat(i):r||0},nt=function(n){function o(o,i){var r=n.call(this,o,i)||this,s=r.em,a=r.attributes,l=a.styles,c=a.component,u=s.Components,p=u.getConfig(),h=s.Css.getAll(),d={},f={em:s,config:p,frame:r,idMap:d};if(!(0,e.isComponent)(c)){var g=(0,e.isObject)(c)?c:{components:c};!g.type&&(g.type='wrapper');var m=u.getType('wrapper').model;r.set('component',new m(g,f))}if(l){if(!(0,e.isObject)(l)){var v=l;(0,t.keys)(d).length&&(v=(0,t.isString)(v)?s.Parser.parseCss(v):v,s.Css.checkId(v,{idMap:d})),h.add(v),r.set('styles',h)}}else r.set('styles',h);return!i.width&&r.set(J,1),!i.height&&r.set(tt,1),!r.id&&r.set('id',(0,e.createId)()),r}return G(o,n),o.prototype.defaults=function(){return{x:0,y:0,changesCount:0,attributes:{},width:null,height:null,head:[],component:'',styles:'',refFrame:null,_undo:!0,_undoexc:['changesCount']}},Object.defineProperty(o.prototype,"width",{get:function(){return et(this,'width')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"height",{get:function(){return et(this,'height')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"head",{get:function(){return this.get('head')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"refFrame",{get:function(){return this.get('refFrame')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"root",{get:function(){var t=this.refFrame;return(null==t?void 0:t.getComponent())||this.getComponent()},enumerable:!1,configurable:!0}),o.prototype.initRefs=function(){var e=this.refFrame;if((0,t.isString)(e)){var n=this.module.framesById[e];n&&this.set({refFrame:n},{silent:!0})}},o.prototype.getBoxRect=function(){var t=this.attributes;return{x:t.x,y:t.y,width:this.width,height:this.height}},o.prototype.onRemove=function(){!this.refFrame&&this.getComponent().remove({root:1})},o.prototype.changesUp=function(t){void 0===t&&(t={}),t.temporary||t.noCount||t.avoidStore||this.set('changesCount',this.get('changesCount')+1)},o.prototype.getComponent=function(){return this.get('component')},o.prototype.getStyles=function(){return this.get('styles')},o.prototype.disable=function(){this.trigger('disable')},o.prototype.remove=function(){var t;null===(t=this.view)||void 0===t||t.remove(),this.view=void 0;var e=this.collection;return e&&e.remove(this)},o.prototype.getHead=function(){return K([],this.head,!0)},o.prototype.setHead=function(t){return this.set('head',K([],t,!0))},o.prototype.addHeadItem=function(t){this.head.push(t)},o.prototype.getHeadByAttr=function(t,e,n){return this.head.filter((function(o){return o.attributes&&o.attributes[t]==e&&(!n||n===o.tag)}))[0]},o.prototype.removeHeadByAttr=function(t,e,n){var o=this.getHeadByAttr(t,e,n),i=this.head.indexOf(o);i>=0&&this.head.splice(i,1)},o.prototype.addLink=function(t){var e='link';!this.getHeadByAttr('href',t,e)&&this.addHeadItem({tag:e,attributes:{href:t,rel:'stylesheet'}})},o.prototype.removeLink=function(t){this.removeHeadByAttr('href',t,'link')},o.prototype.addScript=function(t){var e='script';!this.getHeadByAttr('src',t,e)&&this.addHeadItem({tag:e,attributes:{src:t}})},o.prototype.removeScript=function(t){this.removeHeadByAttr('src',t,'script')},o.prototype.getPage=function(){var t;return null===(t=this.collection)||void 0===t?void 0:t.page},o.prototype._emitUpdated=function(t){void 0===t&&(t={}),this.em.trigger('frame:updated',H({frame:this},t))},o.prototype.hasAutoHeight=function(){return!('auto'!==this.attributes.height&&!this.config.infiniteCanvas)},o.prototype.toJSON=function(e){void 0===e&&(e={});var n=_.Z.prototype.toJSON.call(this,e),o=(0,t.result)(this,'defaults');return e.fromUndo&&delete n.component,delete n.styles,delete n.changesCount,n[J]&&delete n.width,n[tt]&&delete n.height,n.refFrame&&(n.refFrame=n.refFrame.id,delete n.component),(0,t.forEach)(n,(function(t,e){0===e.indexOf('_')&&delete n[e]})),(0,t.forEach)(o,(function(t,e){n[e]===t&&delete n[e]})),(0,t.forEach)(['attributes','head'],(function(e){(0,t.isEmpty)(n[e])&&delete n[e]})),n},o}(_.Z);const ot=nt;var it=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const rt=function(e){function n(n,o){void 0===o&&(o=[]);var i=e.call(this,n,o,ot)||this;return i.loadedItems=0,i.itemsToLoad=0,(0,t.bindAll)(i,'itemLoaded'),i.on('add',i.onAdd),i.on('reset',i.onReset),i.on('remove',i.onRemove),i.forEach((function(t){return i.onAdd(t)})),i}return it(n,e),n.prototype.onAdd=function(t){this.module.framesById[t.id]=t},n.prototype.onReset=function(t,e){var n=this;((null==e?void 0:e.previousModels)||[]).map((function(t){return n.onRemove(t)}))},n.prototype.onRemove=function(t){t.onRemove(),delete this.module.framesById[t.id]},n.prototype.initRefs=function(){this.forEach((function(t){return t.initRefs()}))},n.prototype.itemLoaded=function(){this.loadedItems++,this.loadedItems>=this.itemsToLoad&&(this.trigger('loaded:all'),this.listenToLoadItems(!1))},n.prototype.listenToLoad=function(){this.loadedItems=0,this.itemsToLoad=this.length,this.listenToLoadItems(!0)},n.prototype.listenToLoadItems=function(t){var e=this;this.forEach((function(n){return n[t?'on':'off']('loaded',e.itemLoaded)}))},n}(F);var st=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),at=function(t){function e(e){var n=this,o=e.em,i=e.config,r=i.scripts,s=i.styles;return(n=t.call(this,e,{scripts:r,styles:s})||this).set('frames',new rt(e)),n.on('change:zoom',n.onZoomChange),n.on('change:x change:y',n.onCoordsChange),n.on('change:pointer change:pointerScreen',n.onPointerChange),n.listenTo(o,"change:device ".concat(Z),n.updateDevice),n.listenTo(o,q.select,n._pageUpdated),n}return st(e,t),e.prototype.defaults=function(){return{frame:'',frames:[],rulers:!1,zoom:100,x:0,y:0,scripts:[],styles:[],pointer:l.pH,pointerScreen:l.pH}},Object.defineProperty(e.prototype,"frames",{get:function(){return this.get('frames')},enumerable:!1,configurable:!0}),e.prototype.init=function(){var t=this.em.Pages.getMain();this.set('frames',t.getFrames()),this.updateDevice({frame:t.getMainFrame()})},e.prototype._pageUpdated=function(t,e){var n=this.em;n.setSelected(),n.get('readyCanvas')&&n.stopDefault(),null==e||e.getFrames().map((function(t){return t.disable()})),this.set('frames',t.getFrames()),this.updateDevice({frame:t.getMainFrame()})},e.prototype.updateDevice=function(t){void 0===t&&(t={});var e=this.em,n=e.getDeviceModel(),o=t.frame||e.getCurrentFrameModel();if(o&&n){var i=n.attributes,r=i.width,s=i.height;o.set({width:r,height:s},{noUndo:1})}},e.prototype.onZoomChange=function(){var t=this.em,e=this.module;this.get('zoom')<1&&this.set('zoom',1),t.trigger(e.events.zoom)},e.prototype.onCoordsChange=function(){var t=this.em,e=this.module;t.trigger(e.events.coords)},e.prototype.onPointerChange=function(){var t=this.em,e=this.module;t.trigger(e.events.pointer)},e.prototype.getPointerCoords=function(t){void 0===t&&(t=l.vA.World);var e=this.attributes,n=e.pointer,o=e.pointerScreen;return t===l.vA.World?n:o},e}(_.Z);const lt=at;var ct=__webpack_require__(2201),ut=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),pt=function(e){function n(n,o){void 0===o&&(o=[]);var i=e.call(this,n,o,ct.Z)||this;i.on('add',i.onAdd),i.on('change',i.onChange),i.on('remove',i.onRemove);var r=i.em;i.refreshDbn=(0,t.debounce)((function(){return i.refresh()}),0);return i.listenTo(r,'component:resize styleable:change component:input component:update frame:updated undo redo',(function(){return i.refreshDbn()})),i}return ut(n,e),Object.defineProperty(n.prototype,"em",{get:function(){return this.module.em},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"events",{get:function(){return this.module.events},enumerable:!1,configurable:!0}),n.prototype.refresh=function(){var t=this.em,e=this.events;t.trigger(e.spot)},n.prototype.onAdd=function(t){this.__trgEvent(this.events.spotAdd,{spot:t})},n.prototype.onChange=function(t){this.__trgEvent(this.events.spotUpdate,{spot:t})},n.prototype.onRemove=function(t){this.__trgEvent(this.events.spotRemove,{spot:t})},n.prototype.__trgEvent=function(t,e){this.module.em.trigger(t,e),this.refreshDbn()},n}(F);const ht=pt;var dt;!function(t){t["dragEnter"]="canvas:dragenter",t["dragOver"]="canvas:dragover",t["dragEnd"]="canvas:dragend",t["dragData"]="canvas:dragdata",t["drop"]="canvas:drop",t["spot"]="canvas:spot",t["spotAdd"]="canvas:spot:add",t["spotUpdate"]="canvas:spot:update",t["spotRemove"]="canvas:spot:remove",t["coords"]="canvas:coords",t["zoom"]="canvas:zoom",t["pointer"]="canvas:pointer",t["frameLoad"]="canvas:frame:load",t["frameLoadHead"]="canvas:frame:load:head",t["frameLoadBody"]="canvas:frame:load:body"}(dt||(dt={}));const ft=dt;var gt=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),mt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return gt(e,t),Object.defineProperty(e.prototype,"pfx",{get:function(){return this.ppfx+this.config.stylePrefix||''},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ppfx",{get:function(){return this.em.config.stylePrefix||''},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"module",{get:function(){var t,e;return null!==(e=null===(t=this.model)||void 0===t?void 0:t.module)&&void 0!==e?e:this.collection.module},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"em",{get:function(){return this.module.em},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"config",{get:function(){return this.module.config},enumerable:!1,configurable:!0}),e.prototype.preinitialize=function(t){this.className=''},e}(l.G7);const vt=mt;var yt=__webpack_require__(4968),_t=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Ot=function(t){function e(e,n){void 0===e&&(e={}),void 0===n&&(n=!1);var o=t.call(this,e)||this;return o.itemsView='',o.itemType='type',o.reuseView=!1,o.viewCollection=[],n&&o.listenTo(o.collection,'add',o.addTo),o}return _t(e,t),e.prototype.addTo=function(t){this.add(t)},e.prototype.itemViewNotFound=function(t){},e.prototype.add=function(t,e){var n,o=this.reuseView,i=this.viewCollection,r=e||null,s=t.get(this.itemType);n=t.view&&o?t.view:this.renderView(t,s),i.push(n);var a=n.render().el;r?r.appendChild(a):this.$el.append(a)},e.prototype.render=function(){var t=this,e=document.createDocumentFragment();return this.clearItems(),this.$el.empty(),this.collection.length&&this.collection.each((function(n){return t.add(n,e)})),this.$el.append(e),this.onRender(),this},e.prototype.onRender=function(){},e.prototype.onRemoveBefore=function(t,e){},e.prototype.onRemove=function(t,e){},e.prototype.remove=function(t){void 0===t&&(t={});var e=this.viewCollection;return this.onRemoveBefore(e,t),this.clearItems(),l.G7.prototype.remove.apply(this,t),this.onRemove(e,t),this},e.prototype.clearItems=function(){this.viewCollection},e}(vt);var bt=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const wt=function(t){function e(e){void 0===e&&(e={});var n=t.call(this,e)||this;n.config=e.config||{};var o=n.model;return n.listenTo(o,'change',n.render),n.listenTo(o,'destroy remove',n.remove),n.listenTo(o.get('selectors'),'change',n.render),n}return bt(e,t),e.prototype.tagName=function(){return'style'},e.prototype.render=function(){var t=this.model,e=this.el,n=t.get('important');return e.innerHTML=t.toCSS({important:n}),this},e}(l.G7);var xt=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const St=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return xt(e,t),e.prototype._createElement=function(){return document.createTextNode('')},e.prototype.render=function(){var t=this.model,e=t.get('important');return this.el.textContent=t.getDeclaration({important:e}),this},e}(wt);var kt=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Pt=function(t,e){return"".concat(t).concat(e?"-".concat(parseFloat(e)):'')},Ct=function(e){function n(n){var o=e.call(this,n)||this;(0,t.bindAll)(o,'sortRules');var i=n.config||{};o.atRules={},o.config=i,o.em=i.em,o.pfx=i.stylePrefix||'',o.className=o.pfx+'rules';var r=o.collection;return o.listenTo(r,'add',o.addTo),o.listenTo(r,'reset',o.render),o}return kt(n,e),n.prototype.addTo=function(t){this.addToCollection(t)},n.prototype.addToCollection=function(t,e){if(this.renderStarted){var n,o,i=e||null,r={model:t,config:this.config};if('keyframes'===t.get('atRuleType')){var s=t.getAtRule(),a=this.atRules[s];if(!a){var l=document.createElement('style');a=document.createTextNode(''),l.appendChild(document.createTextNode("".concat(s,"{"))),l.appendChild(a),l.appendChild(document.createTextNode('}')),this.atRules[s]=a,n=l}o=new St(r),a.appendData(o.render().el.textContent)}else n=(o=new wt(r)).render().el;var c=this.className,u=t.get('mediaText'),p=Pt(c),h=p;if(u&&(h=Pt(c,this.getMediaWidth(u))),n){var d=i||this.el,f=void 0;try{f=d.querySelector("#".concat(h))}catch(t){}f||(f=d.querySelector("#".concat(p))),null==f||f.appendChild(n)}return n}},n.prototype.getMediaWidth=function(t){return t&&t.replace("(".concat(this.em.getConfig().mediaCondition,": "),'').replace(')','')},n.prototype.sortRules=function(t,e){var n=-1!==(this.em.getConfig().mediaCondition||'').indexOf('min-width');return n?(n?t:e)-(n?e:t):0},n.prototype.render=function(){var t=this;this.renderStarted=!0,this.atRules={};var e=this,n=e.em,o=e.$el,i=e.collection,r=this.className,s=document.createDocumentFragment();o.empty();var a=n.Devices.getAll().pluck('priority').sort(this.sortRules);return a.every((function(t){return t}))&&a.unshift(0),a.forEach((function(t){return s.appendChild((0,yt.ut)('div',{id:Pt(r,t)}))})),i.each((function(e){return t.addToCollection(e,s)})),o.append(s),o.attr('class',r),this},n}(l.G7);const Tt=Ct;var Et=void 0&&(void 0).__assign||function(){return Et=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Et.apply(this,arguments)},At=function(){function e(e,n){var o=this;this.em=e,this.canvas=e.Canvas;var i=n||this.canvas.getFrames().map((function(t){return t.getComponent().getEl()})),r=Array.isArray(i)?i:[i];this.el=r[0],this.counter=0,(0,t.bindAll)(this,'handleDragEnter','handleDragOver','handleDrop','handleDragLeave'),r.forEach((function(t){return o.toggleEffects(t,!0)}))}return e.prototype.toggleEffects=function(t,e){var n={on:yt.on,off:yt.S1},o=e?'on':'off';n[o](t,'dragenter',this.handleDragEnter),n[o](t,'dragover',this.handleDragOver),n[o](t,'drop',this.handleDrop),n[o](t,'dragleave',this.handleDragLeave)},e.prototype.__customTglEff=function(t){var e,n=t?yt.on:yt.S1,o=this.el.ownerDocument,i=null===(e=o.defaultView)||void 0===e?void 0:e.frameElement;this.sortOpts=t?{onStart:function(t){var e=t.sorter;(0,yt.on)(i,'pointermove',e.onMove)},onEnd:function(t){var e=t.sorter;(0,yt.S1)(i,'pointermove',e.onMove)},customTarget:function(t){var e=t.event;return o.elementFromPoint(e.clientX,e.clientY)}}:null,n(i,'pointerenter',this.handleDragEnter),n(i,'pointermove',this.handleDragOver),n(document,'pointerup',this.handleDrop),n(i,'pointerout',this.handleDragLeave)},e.prototype.startCustom=function(){this.__customTglEff(!0)},e.prototype.endCustom=function(t){this.over?this.endDrop(t):this.__customTglEff(!1)},e.prototype.endDrop=function(t,e){var n=this.em,o=this.dragStop;this.counter=0,o&&o(t||!this.over),this.__customTglEff(!1),n.trigger('canvas:dragend',e)},e.prototype.handleDragLeave=function(t){this.updateCounter(-1,t)},e.prototype.updateCounter=function(t,e){this.counter+=t,0===this.counter&&this.endDrop(!0,e)},e.prototype.handleDragEnter=function(t){var e=this,n=this.em,o=this.canvas,i=t.dataTransfer,r=n.get('dragContent');if((r||o.getConfig().allowExternalDrop)&&(this.updateCounter(1,t),!this.over)){this.over=!0;var s,a,l=n.Utils,c=r||'<br>';if(n.stopDefault(),n.inAbsoluteMode()){var u=n.Components.getWrapper(),p=u.append({})[0],h=n.Commands.run('core:component-drag',{event:t,guidesInfo:1,center:1,target:p,onEnd:function(t,n,r){var s;if(!r.cancelled){s=u.append(c)[0];var a=o.getOffset(),l=p.getStyle(),h=l.top,d=l.left,f=l.position,g=(0,yt.GX)(t.target),m=parseInt("".concat(parseFloat(d)+g.x-a.left),10),v=parseInt("".concat(parseFloat(h)+g.y-a.top),10);s.addStyle({left:m+'px',top:v+'px',position:f})}e.handleDragEnd(s,i),p.remove()}});s=function(e){return h.stop(t,{cancel:e})},a=function(t){return c=t}}else{var d=new l.Sorter(Et({em:n,wmargin:1,nested:1,canvasRelative:1,direction:'a',container:this.el,placer:o.getPlacerEl(),containerSel:'*',itemSel:'*',pfx:'gjs-',onEndMove:function(t){return e.handleDragEnd(t,i)},document:this.el.ownerDocument},this.sortOpts||{}));d.setDropContent(c),d.startSort(),this.sorter=d,s=function(t){t&&(d.moved=!1),d.endMove()},a=function(t){return d.setDropContent(t)}}this.dragStop=s,this.dragContent=a,n.trigger('canvas:dragenter',i,c)}},e.prototype.handleDragEnd=function(t,e){var n=this.em;this.over=!1,t&&(n.set('dragResult',t),n.trigger('canvas:drop',e,t)),n.runDefault({preserveSelected:1})},e.prototype.handleDragOver=function(t){t.preventDefault(),this.em.trigger('canvas:dragover',t)},e.prototype.handleDrop=function(t){t.preventDefault();var e=this.dragContent,n=t.dataTransfer,o=this.getContentByData(n).content;t.target.style.border='',o&&e&&e(o),this.endDrop(!o,t)},e.prototype.getContentByData=function(e){var n=this.em,o=e&&e.types,i=e&&e.files||[],r=n.get('dragContent'),s=e&&e.getData('text');if(i.length){s=[];for(var a=0;a<i.length;a++){var l=i[a],c=l.type.split('/')[0];'image'==c&&s.push({type:c,file:l,attributes:{alt:l.name}})}}else if(r)s=r;else if((0,t.indexOf)(o,'text/html')>=0)s=e&&e.getData('text/html').replace(/<\/?meta[^>]*>/g,'');else if((0,t.indexOf)(o,'text/uri-list')>=0)s={type:'link',attributes:{href:s},content:s};else if((0,t.indexOf)(o,'text/json')>=0){var u=e&&e.getData('text/json');u&&(s=JSON.parse(u))}else 1===o.length&&'text/plain'===o[0]&&(s="<div>".concat(s,"</div>"));var p={content:s};return n.trigger('canvas:dragdata',e,p),p},e}();const Qt=At;var $t=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),jt=void 0&&(void 0).__assign||function(){return jt=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},jt.apply(this,arguments)},Rt=void 0&&(void 0).__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))},Mt=function(n){function o(o,i){var r=n.call(this,{model:o})||this;r.dragging=!1,r.loaded=!1,r.lastMaxHeight=0,r.tools={},(0,t.bindAll)(r,'updateClientY','stopAutoscroll','autoscroll','_emitUpdate');var s=r.el;r.module._config=jt(jt({},r.config||{}),{frameView:r}),r.frameWrapView=i,r.showGlobalTools=(0,t.debounce)(r.showGlobalTools.bind(r),50);var a=r.getCanvasModel();return r.listenTo(o,'change:head',r.updateHead),r.listenTo(a,'change:styles',r.renderStyles),o.view=r,(0,e.setViewEl)(s,r),r}return $t(o,n),Object.defineProperty(o.prototype,"tagName",{get:function(){return'iframe'},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"attributes",{get:function(){return{allowfullscreen:'allowfullscreen'}},enumerable:!1,configurable:!0}),o.prototype.getBoxRect=function(){var t=this.el,e=this.module,n=e.getCanvasView(),o=e.getCoords(),i=t.getBoundingClientRect(),r=n.getCanvasOffset(),s=n.getViewportDelta(),a=e.getZoomMultiplier();return{x:(i.x-r.left-s.x-o.x)*a,y:(i.y-r.top-s.y-o.y)*a,width:i.width*a,height:i.height*a}},o.prototype.updateHead=function(){var t=this.model,e=this.getHead(),n=[],o=[],i=t.head,r=t.previous('head'),s=function(t){return void 0===t&&(t={}),Object.keys(t).sort().map((function(e){return"[".concat(e,"=\"").concat(t[e],"\"]")})).join('')},a=function(t,e,n){t.forEach((function(t){var o=t.tag,i=t.attributes;!e.some((function(t){return t.tag===o&&s(t.attributes)===s(i)}))&&n.push(t)}))};a(i,r,o),a(r,i,n),n.forEach((function(t){var n,o=e.querySelector("".concat(t.tag).concat(s(t.attributes)));null===(n=null==o?void 0:o.parentNode)||void 0===n||n.removeChild(o)})),(0,yt.SJ)(e,o)},o.prototype.getEl=function(){return this.el},o.prototype.getCanvasModel=function(){return this.em.Canvas.getModel()},o.prototype.getWindow=function(){return this.getEl().contentWindow},o.prototype.getDoc=function(){return this.getEl().contentDocument},o.prototype.getHead=function(){return this.getDoc().querySelector('head')},o.prototype.getBody=function(){return this.getDoc().querySelector('body')},o.prototype.getWrapper=function(){return this.getBody().querySelector('[data-gjs-type=wrapper]')},o.prototype.getJsContainer=function(){return this.jsContainer||(this.jsContainer=(0,yt.ut)('div',{class:"".concat(this.ppfx,"js-cont")})),this.jsContainer},o.prototype.getToolsEl=function(){var t;return null===(t=this.frameWrapView)||void 0===t?void 0:t.elTools},o.prototype.getGlobalToolsEl=function(){return this.em.Canvas.getGlobalToolsEl()},o.prototype.getHighlighter=function(){return this._getTool('[data-hl]')},o.prototype.getBadgeEl=function(){return this._getTool('[data-badge]')},o.prototype.getOffsetViewerEl=function(){return this._getTool('[data-offset]')},o.prototype.getRect=function(){return this.rect||(this.rect=this.el.getBoundingClientRect()),this.rect},o.prototype.getOffsetRect=function(){var t=this.el,e=this.getBody(),n=e.scrollTop,o=e.scrollLeft,i=t.offsetHeight,r=t.offsetWidth;return{top:t.offsetTop,left:t.offsetLeft,height:i,width:r,scrollTop:n,scrollLeft:o,scrollBottom:n+i,scrollRight:o+r}},o.prototype._getTool=function(t){var e=this.tools,n=this.getToolsEl();return e[t]||(e[t]=n.querySelector(t)),e[t]},o.prototype.remove=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this._toggleEffects(!1),this.tools={},null===(t=this.wrapper)||void 0===t||t.remove(),vt.prototype.remove.apply(this,e),this},o.prototype.startAutoscroll=function(){var t=this;this.lastMaxHeight=this.getWrapper().offsetHeight-this.el.offsetHeight,setTimeout((function(){t._toggleAutoscrollFx(!0),requestAnimationFrame(t.autoscroll)}),0)},o.prototype.autoscroll=function(){if(this.dragging){var e=this.lastClientY,n=this.em.Canvas,o=this.getWindow(),i=o.pageYOffset,r=e||0,s=n.getConfig().autoscrollLimit,a=this.getRect().height-s,l=i;if(r<s&&(l-=s-r),r>a&&(l+=r-a),!(0,t.isUndefined)(e)&&l!==i&&l>0&&l<this.lastMaxHeight)this.getGlobalToolsEl().style.opacity='0',this.showGlobalTools(),o.scrollTo(0,l),n.spots.refreshDbn();requestAnimationFrame(this.autoscroll)}},o.prototype.updateClientY=function(t){t.preventDefault(),this.lastClientY=(0,yt.VB)(t).clientY*this.em.getZoomDecimal()},o.prototype.showGlobalTools=function(){this.getGlobalToolsEl().style.opacity=''},o.prototype.stopAutoscroll=function(){this.dragging&&this._toggleAutoscrollFx(!1)},o.prototype._toggleAutoscrollFx=function(t){this.dragging=t;var e=this.getWindow(),n=t?'on':'off',o={on:yt.on,off:yt.S1};o[n](e,'mousemove dragover',this.updateClientY),o[n](e,'mouseup',this.stopAutoscroll)},o.prototype.render=function(){var t=this,e=t.$el,n=t.ppfx,o=t.em;return e.attr({class:"".concat(n,"frame")}),this.renderScripts(),o.trigger('frame:render',this),this},o.prototype.renderScripts=function(){var e=this,n=this,o=n.el,i=n.model,r=n.em,s='frame:load',a={el:o,model:i,view:this},l=this.getCanvasModel(),c=function(n){var i;if(n.length>0){var l=n.shift(),u=(0,yt.ut)('script',jt({type:'text/javascript'},(0,t.isString)(l)?{src:l}:l));null===(i=o.contentDocument)||void 0===i||i.head.appendChild(u),u.hasAttribute('nomodule')&&'noModule'in HTMLScriptElement.prototype?c(n):u.onerror=u.onload=c.bind(null,n)}else null==r||r.trigger(ft.frameLoadHead,a),e.renderBody(),null==r||r.trigger(ft.frameLoadBody,a),null==r||r.trigger(s,a)};o.onload=function(){var t=e.config.frameContent;if(t){var n=e.getDoc();n.open(),n.write(t),n.close()}a.window=e.getWindow(),null==r||r.trigger("".concat(s,":before"),a),null==r||r.trigger(ft.frameLoad,a),c(Rt([],l.get('scripts'),!0))}},o.prototype.renderStyles=function(e){void 0===e&&(e={});var n=this.getHead(),o=this.getCanvasModel(),i=function(e){return e.map((function(e){return{tag:'link',attributes:jt({rel:'stylesheet'},(0,t.isString)(e)?{href:e}:e)}}))},r=i(e.prev||o.previous('styles')),s=i(o.get('styles')),a=[],l=[],c=function(t,e,n){t.forEach((function(t){var o=t.attributes.href;!e.some((function(t){return t.attributes.href===o}))&&n.push(t)}))};c(s,r,l),c(r,s,a),a.forEach((function(t){var e,o=n.querySelector("link[href=\"".concat(t.attributes.href,"\"]"));null===(e=null==o?void 0:o.parentNode)||void 0===e||e.removeChild(o)})),(0,yt.SJ)(n,l)},o.prototype.renderBody=function(){var t,n,o=this,i=this,r=i.config,s=i.em,a=i.model,l=i.ppfx,c=this.getDoc(),u=this.getBody(),p=this.getWindow(),h=a.hasAutoHeight(),d=s.config;p._isEditor=!0,this.renderStyles({prev:[]});(0,yt.R3)(u,"<style>\n      ".concat(d.baseCss||r.frameStyle||'',"\n\n      ").concat(h?'body { overflow: hidden }':'',"\n\n      [data-gjs-type=\"wrapper\"] {\n        ").concat(h?'':'min-height: 100vh;',"\n        padding-top: 0.001em;\n      }\n\n      .").concat(l,"dashed *[data-gjs-highlightable] {\n        outline: 1px dashed rgba(170,170,170,0.7);\n        outline-offset: -2px;\n      }\n\n      .").concat(l,"selected {\n        outline: 2px solid #3b97e3 !important;\n        outline-offset: -2px;\n      }\n\n      .").concat(l,"selected-parent {\n        outline: 2px solid ").concat('#ffca6f'," !important\n      }\n\n      .").concat(l,"no-select {\n        user-select: none;\n        -webkit-user-select:none;\n        -moz-user-select: none;\n      }\n\n      .").concat(l,"freezed {\n        opacity: 0.5;\n        pointer-events: none;\n      }\n\n      .").concat(l,"no-pointer {\n        pointer-events: none;\n      }\n\n      .").concat(l,"pointer-init {\n        pointer-events: initial;\n      }\n\n      .").concat(l,"plh-image {\n        background: #f5f5f5;\n        border: none;\n        height: 100px;\n        width: 100px;\n        display: block;\n        outline: 3px solid #ffca6f;\n        cursor: pointer;\n        outline-offset: -2px\n      }\n\n      .").concat(l,"grabbing {\n        cursor: grabbing;\n        cursor: -webkit-grabbing;\n      }\n\n      .").concat(l,"is__grabbing {\n        overflow-x: hidden;\n      }\n\n      .").concat(l,"is__grabbing,\n      .").concat(l,"is__grabbing * {\n        cursor: grabbing !important;\n      }\n\n      ").concat(d.canvasCss||'',"\n      ").concat(d.protectedCss||'',"\n    </style>"));var f=a.root,g=s.Components.getType('wrapper').view;this.wrapper=new g({model:f,config:jt(jt({},f.config),{em:s,frameView:this})}).render(),(0,yt.R3)(u,null===(t=this.wrapper)||void 0===t?void 0:t.el),(0,yt.R3)(u,new Tt({collection:a.getStyles(),config:jt(jt({},s.Css.getConfig()),{frameView:this})}).render().el),(0,yt.R3)(u,this.getJsContainer()),(0,yt.on)(u,'click',(function(t){var e;return t&&'A'==(null===(e=t.target)||void 0===e?void 0:e.tagName)&&t.preventDefault()})),(0,yt.on)(u,'submit',(function(t){return t&&t.preventDefault()})),[{event:'keydown keyup keypress',class:'KeyboardEvent'},{event:'mousedown mousemove mouseup',class:'MouseEvent'},{event:'pointerdown pointermove pointerup',class:'PointerEvent'},{event:'wheel',class:'WheelEvent',opts:{passive:!r.infiniteCanvas}}].forEach((function(t){return t.event.split(' ').forEach((function(e){c.addEventListener(e,(function(e){return o.el.dispatchEvent((0,yt.t3)(e,t.class))}),t.opts)}))})),this._toggleEffects(!0),(0,e.hasDnd)(s)&&(this.droppable=new Qt(s,null===(n=this.wrapper)||void 0===n?void 0:n.el)),this.loaded=!0,a.trigger('loaded')},o.prototype._toggleEffects=function(t){var e=t?yt.on:yt.S1,n=this.getWindow();n&&e(n,"".concat(yt.G1," resize"),this._emitUpdate)},o.prototype._emitUpdate=function(){this.model._emitUpdated()},o}(vt);const Vt=Mt;var Zt=__webpack_require__(1250),Dt=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),It=void 0&&(void 0).__assign||function(){return It=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},It.apply(this,arguments)},Nt=function(e){function n(n,o){var i=e.call(this,{model:n})||this;(0,t.bindAll)(i,'onScroll','frameLoaded','updateOffset','remove','startDrag');It(It({},n.config),{frameWrapView:i});return i.cv=o,i.frame=new Vt(n,i),i.classAnim="".concat(i.ppfx,"frame-wrapper--anim"),i.updateOffset=(0,t.debounce)(i.updateOffset.bind(i),0),i.updateSize=(0,t.debounce)(i.updateSize.bind(i),0),i.listenTo(n,'loaded',i.frameLoaded),i.listenTo(n,'change:x change:y',i.updatePos),i.listenTo(n,'change:width change:height',i.updateSize),i.listenTo(n,'destroy remove',i.remove),i.updatePos(),i.setupDragger(),i}return Dt(n,e),n.prototype.events=function(){return{'click [data-action-remove]':'remove','mousedown [data-action-move]':'startDrag'}},n.prototype.setupDragger=function(){var t,e,n,o=this,i=this.module,r=this.model,s=function(t){i.toggleFramesEvents(t)};this.dragger=new Zt.Z({onStart:function(){var i=r.attributes,a=i.x,l=i.y;n=o.em.getZoomMultiplier(),t=a,e=l,s(!1)},onEnd:function(){return s(!0)},setPosition:function(o){r.set({x:t+o.x*n,y:e+o.y*n})}})},n.prototype.startDrag=function(t){var e;t&&(null===(e=this.dragger)||void 0===e||e.start(t))},n.prototype.__clear=function(t){var e=this.frame;e&&e.remove(t),(0,yt.L_)(this.elTools)},n.prototype.remove=function(t){var e=this;return this.__clear(t),vt.prototype.remove.apply(this,t),['frame','dragger','cv','elTools'].forEach((function(t){return e[t]=0})),this},n.prototype.updateOffset=function(){var t,e=this,n=e.em,o=e.$el,i=e.frame;n&&!n.destroyed&&(n.runDefault({preserveSelected:1}),o.removeClass(this.classAnim),null===(t=null==i?void 0:i.model)||void 0===t||t._emitUpdated())},n.prototype.updatePos=function(t){var e=this.model,n=this.el,o=e.attributes,i=o.x,r=o.y,s=n.style;this.frame.rect=void 0,s.left=isNaN(i)?i:"".concat(i,"px"),s.top=isNaN(r)?r:"".concat(r,"px"),t&&this.updateOffset()},n.prototype.updateSize=function(){this.updateDim()},n.prototype.updateDim=function(){var e=this,n=e.em,o=e.el,i=e.$el,r=e.model,s=e.classAnim,a=e.frame;if(a){a.rect=void 0,i.addClass(s);var l=this.__handleSize(),c=l.noChanges,u=l.width,p=l.height;((0,t.isNull)(u)||(0,t.isNull)(p))&&r.set(It(It({},u?{}:{width:o.offsetWidth}),p?{}:{height:o.offsetHeight}),{silent:1}),n.stopDefault({preserveSelected:1}),c?this.updateOffset():setTimeout(this.updateOffset,350)}},n.prototype.onScroll=function(){var t=this.frame;this.em.trigger('frame:scroll',{frame:t,body:t.getBody(),target:t.getWindow()})},n.prototype.frameLoaded=function(){var t=this.frame;this.config;t.getWindow().onscroll=this.onScroll,this.updateDim()},n.prototype.__handleSize=function(){var e,n,o='px',i=this.model,r=this.el.style,s=i.attributes,a=s.width,l=s.height,c=r.width||'',u=r.height||'',p=a||'',h=l||'',d=c==p&&u==h,f=(0,t.isNumber)(p)?"".concat(p).concat(o):p,g=(0,t.isNumber)(h)?"".concat(h).concat(o):h;if(r.width=f,i.hasAutoHeight()){var m=this.frame.el;if(m.contentDocument){var v=m.contentDocument,y=new ResizeObserver((function(){r.height="".concat(v.body.scrollHeight,"px")}));y.observe(v.body),null===(e=this.sizeObserver)||void 0===e||e.disconnect(),this.sizeObserver=y}}else r.height=g,null===(n=this.sizeObserver)||void 0===n||n.disconnect(),delete this.sizeObserver;return{noChanges:d,width:a,height:l,newW:p,newH:h}},n.prototype.render=function(){var t=this,e=t.frame,n=t.$el,o=t.ppfx,i=t.cv,r=t.model,s=t.el,a=r.attributes.onRender;this.__clear(),this.__handleSize(),e.render(),n.empty().attr({class:"".concat(o,"frame-wrapper")}).append("\n      <div class=\"".concat(o,"frame-wrapper__top gjs-two-color\" data-frame-top>\n        <div class=\"").concat(o,"frame-wrapper__name\" data-action-move>\n          ").concat(r.get('name')||'',"\n        </div>\n        <div class=\"").concat(o,"frame-wrapper__top-r\">\n          <div class=\"").concat(o,"frame-wrapper__icon\" data-action-remove style=\"display: none\">\n            <svg viewBox=\"0 0 24 24\"><path d=\"M19 4h-3.5l-1-1h-5l-1 1H5v2h14M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12z\"></path></svg>\n          </div>\n        </div>\n      </div>\n      <div class=\"").concat(o,"frame-wrapper__right\" data-frame-right></div>\n      <div class=\"").concat(o,"frame-wrapper__left\" data-frame-left></div>\n      <div class=\"").concat(o,"frame-wrapper__bottom\" data-frame-bottom></div>\n      ")).append(e.el);var l=(0,yt.ut)('div',{class:"".concat(o,"tools"),style:'pointer-events:none; display: none'},"\n      <div class=\"".concat(o,"highlighter\" data-hl></div>\n      <div class=\"").concat(o,"badge\" data-badge></div>\n      <div class=\"").concat(o,"placeholder\">\n        <div class=\"").concat(o,"placeholder-int\"></div>\n      </div>\n      <div class=\"").concat(o,"ghost\"></div>\n      <div class=\"").concat(o,"toolbar\" style=\"pointer-events:all\"></div>\n      <div class=\"").concat(o,"resizer\"></div>\n      <div class=\"").concat(o,"offset-v\" data-offset>\n        <div class=\"gjs-marginName\" data-offset-m>\n          <div class=\"gjs-margin-v-el gjs-margin-v-top\" data-offset-m-t></div>\n          <div class=\"gjs-margin-v-el gjs-margin-v-bottom\" data-offset-m-b></div>\n          <div class=\"gjs-margin-v-el gjs-margin-v-left\" data-offset-m-l></div>\n          <div class=\"gjs-margin-v-el gjs-margin-v-right\" data-offset-m-r></div>\n        </div>\n        <div class=\"gjs-paddingName\" data-offset-m>\n          <div class=\"gjs-padding-v-el gjs-padding-v-top\" data-offset-p-t></div>\n          <div class=\"gjs-padding-v-el gjs-padding-v-bottom\" data-offset-p-b></div>\n          <div class=\"gjs-padding-v-el gjs-padding-v-left\" data-offset-p-l></div>\n          <div class=\"gjs-padding-v-el gjs-padding-v-right\" data-offset-p-r></div>\n        </div>\n      </div>\n      <div class=\"").concat(o,"offset-fixed-v\"></div>\n    "));this.elTools=l;var c=null==i?void 0:i.toolsWrapper;return c&&c.appendChild(l),a&&a({el:s,elTop:s.querySelector('[data-frame-top]'),elRight:s.querySelector('[data-frame-right]'),elBottom:s.querySelector('[data-frame-bottom]'),elLeft:s.querySelector('[data-frame-left]'),frame:r,frameWrapperView:this,remove:this.remove,startDrag:this.startDrag}),this},n}(vt);const Wt=Nt;var Xt=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Lt=function(t){function e(e,n){void 0===e&&(e={});var o=t.call(this,e,!0)||this;return o.listenTo(o.collection,'reset',o.render),o.canvasView=n.canvasView,o._module=n.module,o}return Xt(e,t),e.prototype.onRemoveBefore=function(t,e){void 0===e&&(e={}),t.forEach((function(t){return t.remove(e)}))},e.prototype.onRender=function(){var t=this.$el,e=this.ppfx;t.attr({class:"".concat(e,"frames")})},e.prototype.clearItems=function(){(this.viewCollection||[]).forEach((function(t){return t.remove()})),this.viewCollection=[]},e.prototype.renderView=function(t,e){return new Wt(t,this.canvasView)},e}(Ot);const zt=Lt;var Ut=__webpack_require__(3213),qt=__webpack_require__(5430),Yt=__webpack_require__(3052),Bt=function(){function t(t,e){this.script=t,this.name=e.name,this.renderValue=e.render,"url"==e.type&&(this.renderValue=Yt.Z.renderJs),"state-ref"==e.type&&(this.renderValue=qt.Z.renderJs)}return t.prototype.register=function(t){this.model=t,this.model.on("change:".concat(this.name),this.propChange,this)},t.prototype.deregister=function(){var t;null===(t=this.model)||void 0===t||t.off("change:".concat(this.name),this.propChange,this),this.model=void 0},t.prototype.propChange=function(){this.script.onChange()},t.linkToComponent=function(e,n){return new t(e,{name:n,type:'link'})},Object.defineProperty(t.prototype,"value",{get:function(){var t=this.model.get(this.name);return this.renderValue?this.renderValue(t):t},enumerable:!1,configurable:!0}),t.prototype.renderValueWithFunction=function(t){var e=[];return JSON.stringify(t,(function(t,n){return'function'==typeof n||n&&n.constructor===RegExp?(e.push(n.toString()),"{func_".concat(e.length-1,"}")):n})).replace(/"\{func_(\d+)\}"/g,(function(t,n){return e[n]}))},t.prototype.render=function(){return void 0===this.value?void 0:this.renderValue?"get ".concat(this.name,"(){return ").concat(this.value,"}"):"".concat(this.name,": ").concat(this.renderValueWithFunction(this.value))},t}();const Ft=Bt;var Gt=__webpack_require__(2611),Ht=__webpack_require__(4455),Kt=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Jt=void 0&&(void 0).__assign||function(){return Jt=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Jt.apply(this,arguments)},te=void 0&&(void 0).__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))},ee=function(t){return t.replace(/[|\\{}()[\]^$+*?.]/g,'\\$&')};function ne(t){var e;return 0===((null===(e=t.toString().match(/\{([\s\S]*)\}/m))||void 0===e?void 0:e[1])||'').replace(/^\s*\/\/.*$/gm,'').trim().length}var oe=function(t){return function(e){var n=e.data;console.log("Test out states",n,t),Object.keys(null!=n?n:{}).forEach((function(e){t.vars[e]=n[e],t.el.dispatchEvent(new MessageEvent("state:change:".concat(e),{data:n[e]})),console.log("Test out states","state:change:".concat(e),n[e])})),t.el.dispatchEvent(new MessageEvent("state:change",{data:n})),t.slots['refresh']&&t.slots['refresh']()}},ie=function(e){function n(t,n){var o,i=e.call(this,Jt({component:t},t.scriptSubComp))||this;i.set(n),i.addSlot("updateState",{script:oe,params:Object.fromEntries(Object.entries(i.states).map((function(t){var e,n=t[0],o=t[1];return[n,null!==(e=null==o?void 0:o.meta)&&void 0!==e?e:'undefined']})))}),i.listenTo(i,'change:states',(function(t,e){i.addSlot("updateState",{script:oe,params:Object.fromEntries(Object.entries(i.states).map((function(t){var e,n=t[0],o=t[1];return[n,null!==(e=null==o?void 0:o.meta)&&void 0!==e?e:'undefined']})))})})),Object.entries(i.states).forEach((function(t){var e=t[0],n=t[1];return'query'==n.type&&i.addSlot("query-".concat(e),Ht.Z.getSlot(n,e))}));var r=i.component.traits.filter((function(t){return'state-ref'==t.type})).map((function(t){return{name:t.name,type:'state-ref'}}));return i.setProps(null!==(o=te(te([],n.props,!0),r,!0))&&void 0!==o?o:[]),i.initScriptProps(),i.listenTo(i,'change:main',i.scriptUpdated),i.listenTo(i,'change',i.__scriptPropsChange),i.listenTo(i,'change',(function(t,e){return console.log("Test out states",t,e)})),i.register(),i}return Kt(n,e),n.prototype.defaults=function(){return{main:'',props:[],variables:{},signals:{},slots:{},states:{},stateRefs:{},scriptUpdated:!1,statefull:!1}},Object.defineProperty(n.prototype,"component",{get:function(){return this.get('component')},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"em",{get:function(){return this.component.em},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"props",{get:function(){return this.get('props')},enumerable:!1,configurable:!0}),n.prototype.setProps=function(e){var n=this;console.log(e),console.log("asdfasdfasdfasdfasdfsadfasdf",e);var o=e.map((function(e){return(0,t.isObject)(e)?new Ft(n,Jt({type:'link'},e)):new Ft(n,{name:e,type:'link'})}));this.set('props',o)},Object.defineProperty(n.prototype,"dataId",{get:function(){return this.component.getId()},enumerable:!1,configurable:!0}),n.prototype.initScriptProps=function(){var t=this.component,e='props',n=["change:".concat(e),this.initScriptProps,this];this.off.apply(this,n);var o=this.previous(e)||[],i=this.get(e)||[];o.forEach((function(t){return t.deregister&&t.deregister()})),i.forEach((function(e){return e.register(t)})),this.on.apply(this,n)},n.prototype.onChange=function(){this.component.trigger('rerender')},n.prototype.__scriptPropsChange=function(t,e,n){void 0===n&&(n={}),n.avoidStore||(console.log('scriptPropsCHange'),this.onChange())},n.prototype.scriptUpdated=function(){this.set('scriptUpdated',!0)},n.prototype.__getScriptProps=function(){return console.log("really imposrta asdstaff",this.props,"{".concat(this.props.flatMap((function(t){var e;return null!==(e=t.render())&&void 0!==e?e:[]})).join(','),"}")),"{".concat(this.props.flatMap((function(t){var e;return null!==(e=t.render())&&void 0!==e?e:[]})).join(','),"}")},n.prototype.register=function(){var t=this.component.get('attributes'),e=this.component.getId();if(this.component.set('attributes',Jt(Jt({},t),{id:e}),{silent:!0}),this.component.on('change:script-props',this.setProps,this),!this.component.traits.find((function(t){return"states"==t.name}))){var n=Gt.Z.build(this,{type:"unique-list",name:"states",traits:{type:'state'}});this.component.traits.push(n)}if(!this.component.traits.find((function(t){return"signals"==t.name}))){n=Gt.Z.build(this,{type:"unique-list",name:"signals",traits:{type:'signal'},editable:!1});this.component.traits.push(n)}},n.prototype.deregister=function(){this.component.off('change:script-props',this.setProps,this);var t=this.component.traits.findIndex((function(t){return"states"==t.name}));t&&this.component.traits.splice(t,1);var e=this.component.traits.findIndex((function(t){return"signals"==t.name}));e&&this.component.traits.splice(e,1)},n.prototype.getScriptString=function(e){var n=this,o=this.component,i=e||this.get('main')||'';if(!i)return i;if(this.props)i=i.toString().trim();else{if((0,t.isFunction)(i)){var r=i.toString().trim();i=(r=r.slice(r.indexOf('{')+1,r.lastIndexOf('}'))).trim()}var s=o.em.getConfig(),a=ee(s.tagVarStart||'{[ '),l=ee(s.tagVarEnd||' ]}'),c=new RegExp("".concat(a,"([\\w\\d-]*)").concat(l),'g');i=i.replace(c,(function(e,i){n.scriptUpdated();var r=o.attributes[i]||'';return(0,t.isArray)(r)||'object'==typeof r?JSON.stringify(r):r}))}return i},n.renderComponentSignal=function(t,e){var n=t.componentId,o=t.slot,i=t.variables;return"(() => window.globalScriptParams['".concat(n,"'].el?.dispatchEvent(new MessageEvent('").concat(o,"', {data: ").concat(JSON.stringify(i),"})))")},n.renderComponentSignals=function(t){var e=t.signals;return"{".concat(Object.keys(e).map((function(n){var o,i;return"'".concat(n,"': \n           ").concat(e[n]&&e[n].componentId&&e[n].slot?e[n].componentId==t.dataId?"(d) => window.globalScriptParams['".concat(e[n].componentId,"'].el?.dispatchEvent(new MessageEvent('").concat(e[n].slot,"', {data: {").concat(Object.entries(null!==(o=e[n].variables)&&void 0!==o?o:{}).map((function(t){var e=t[0],n=t[1];return"'".concat(e,"': ").concat(Ut.Z.renderJs(n,'d'),",")})).join('')," ...d}}))"):"(d) => window.globalScriptParams['".concat(e[n].componentId,"'].slots['").concat(e[n].slot,"']({data: {").concat(Object.entries(null!==(i=e[n].variables)&&void 0!==i?i:{}).map((function(t){var e=t[0],n=t[1];return"'".concat(e,"': ").concat(Ut.Z.renderJs(n,'d'),",")})).join('')," ...d}})"):'(() => {})')})).join(','),"}")},n.renderSlots=function(t){return"\n    window.globalScriptParams = {...window.globalScriptParams, ".concat(t.map((function(t){return"'".concat(t.dataId,"': {el: document.getElementById('").concat(t.dataId,"'), signals: ").concat(n.renderComponentSignals(t),", props: ").concat(t.__getScriptProps(),",vars: {").concat(Object.keys(t.variables).map((function(e){return"'".concat(e,"': (").concat(t.variables[e],")()")})).concat(Object.keys(t.states).map((function(e){return"'".concat(e,"': ").concat(Ht.Z.renderValueJs(t.states[e],"window.globalScriptParams['".concat(t.dataId,"'].slots['query-").concat(e,"']()")))}))).join(','),"},\n\n          }")})).join(','),"\n    }\n    ").concat(t.map((function(t){return"".concat(Object.values(t.stateRefs).map((function(e){return"window.globalScriptParams['".concat(t.dataId,"'].el.addEventListener('state:change:").concat(e.subscription.name,"', (event) => {\n          const slot = window.globalScriptParams['").concat(e.subscription.componentId,"'].slots['refresh'];\n          if (slot){\n            slot(event);\n          }\n          console.log(\"Test out states\",event);\n        });\n")})))+"window.globalScriptParams['".concat(t.dataId,"'].slots = \n      {").concat(Object.keys(t.slots).map((function(e){return"'".concat(e,"':  (").concat(t.slots[e].script,")(window.globalScriptParams['").concat(t.dataId,"'])")})).join(','),"};")})).join('\n'),"\n    ").concat(t.map((function(t){t.component.em.Components.allById();var e=Object.entries(t.slots).map((function(e){var n=e[0];return{subscription:e[1].subscription,event:"window.globalScriptParams['".concat(t.component.getId(),"'].slots['").concat(n,"']")}})),n=te(te([],[],!0),e,!0);return n.length>0?n.map((function(t){var e,n,o;return"".concat(null!==(o=(null===(e=t.subscription)||void 0===e?void 0:e.componentId)&&(null===(n=t.subscription)||void 0===n?void 0:n.name)&&"window.globalScriptParams['".concat(t.subscription.componentId,"'].el?.addEventListener('").concat(t.subscription.name,"', ").concat(t.event,");"))&&void 0!==o?o:'')})).join(''):''})).join(''),"\n      ").concat(t.map((function(t){var e=Object.entries(t.states).filter((function(t){t[0];return'query'==t[1].type}));return console.log("fj;alwisejf;aghbvau4hrfgppaoids",e),e.map((function(e){var n=e[0];e[1];return"window.globalScriptParams['".concat(t.dataId,"'].slots['query-").concat(n,"']();")})).join('')})).join(''),"\n")},n.renderRefreshJs=function(t,e){var n=/return\W+(function|\(.*\)\W*=>)/.test(t.code);return"".concat(e,".slots['refresh'] = ").concat(n?'':'() => ',"(").concat(t.code,".bind(").concat(e,".el)(").concat(e,"));\n    ").concat("".concat(t.includes.map((function(t){return"if (typeof ".concat(t.globalName,"=='undefined'){\n      ").concat(t.files.map((function(t){switch(t.type){case'js':return"{const script = document.createElement('script');\n            script.onload = ".concat(e,".slots['refresh'];\n            script.src = '").concat(t.src,"';\n            ").concat(t.integrity?"script.integrity = '".concat(t.integrity,"';"):'',"\n            script.crossOrigin = \"anonymous\"\n            document.body.appendChild(script);}");case'style':return"{const style = document.createElement('link');\n            style.type=\"text/css\" \n            style.rel=\"stylesheet\"\n            style.href = '".concat(t.href,"';\n            ").concat(t.integrity?"style.integrity = '".concat(t.integrity,"';"):'',"\n            style.crossOrigin = \"anonymous\"\n            document.head.appendChild(style);}")}})).join(""),"\n    } else {  setTimeout(").concat(e,".slots['refresh'](),1);};")})).join(''),";"),"\n    ").concat(null==t.includes.find((function(t){return t.files.find((function(t){return'js'==t.type}))}))?"setTimeout(".concat(e,".slots['refresh'](),1);"):'')},n.renderJs=function(e){var o=(0,t.isArray)(e)?e:[e],i=n.mapScripts(o),r=n.renderSlots(o);for(var s in i){var a=i[s];if(a.code)if(1==i[s].ids.length)r+="const param = window.globalScriptParams['".concat(i[s].ids[0],"'];\n        ").concat(this.renderRefreshJs(a,"param"));else{if(ne(a.code))continue;r+="\n            var ids = ".concat(JSON.stringify(i[s].ids),";\n            var params = ids.map(id => window.globalScriptParams[id])\n            for (var i = 0, len = params.length; i < len; i++) {\n              ").concat(this.renderRefreshJs(a,"params[i]"),";\n            }")}}return r},n.mapScripts=function(t){var e={};return t.forEach((function(t){var n=t.component.get('type'),o=t.component.getId(),i=t.getScriptString(),r=t.props,s=t.includes;if(t.get('scriptUpdated')&&!r)e[n+'-'+o]={ids:[o],code:i,includes:s};else{var a=e[n];if(a)a.ids.push(o);else{var l={ids:[o],code:i,includes:s};e[n]=l}}})),e},Object.defineProperty(n.prototype,"variables",{get:function(){return this.get('variables')},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"signals",{get:function(){return this.get('signals')},enumerable:!1,configurable:!0}),n.prototype.removeSlot=function(t){delete this.slots[t]},n.prototype.addSlot=function(t,e){var n;this.set('slots',Jt(Jt({},this.slots),((n={})[t]=e,n)))},Object.defineProperty(n.prototype,"slots",{get:function(){return this.get('slots')},enumerable:!1,configurable:!0}),n.prototype.getStateMeta=function(e){if((0,t.isString)(e)){var n=e.split('?.'),o=n[0],i=n.slice(1);return function t(e,n){return 0==n.length?e:'object'==e.type?t(e.params[n[0]],n.slice(1)):{type:'unkown'}}(this.states[o].meta,i)}return{type:'unkown'}},Object.defineProperty(n.prototype,"states",{get:function(){return this.get('states')},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"stateRefs",{get:function(){return this.get('stateRefs')},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"includes",{get:function(){var t;return null!==(t=this.get('includes'))&&void 0!==t?t:[]},enumerable:!1,configurable:!0}),n.prototype.addStateRef=function(t,e){var n,o=e.componentId,i=e.stateName;if(console.log("Test out states Fontos",this.component),o&&i){var r=i.split('?.')[0],s=Jt(Jt({},this.stateRefs),((n={})[t]={subscription:{componentId:o,name:r}},n));this.em.Components.getById(o).on('change:'+r,this.onChange,this),this.set("stateRefs",s),console.log("Test out states Fontos",this.stateRefs,s)}},n.prototype.removeStateRef=function(t){var e,n=null===(e=this.stateRefs[t])||void 0===e?void 0:e.subscription;(null==n?void 0:n.componentId)&&(this.em.Components.getById(n.componentId).off('change:'+t,this.onChange,this),delete this.stateRefs[t])},n.prototype.getId=function(){return this.component.getId()},n}(l.Hn);const re=ie;var se=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ae=void 0&&(void 0).__assign||function(){return ae=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},ae.apply(this,arguments)},le=function(n){function o(e){var o=n.call(this,{model:e})||this;o.ready=!1,o.updatingScriptTimout={},(0,t.bindAll)(o,'clearOff','onKeyPress','onWheel','onPointer');var i=o,r=i.em,s=i.pfx,a=i.ppfx,l=o.module.events;return o.className="".concat(s,"canvas ").concat(a,"no-touch-actions").concat(r.config.customUI?'':" ".concat(s,"canvas-bg")),o.clsUnscale="".concat(s,"unscale"),o._initFrames(),o.listenTo(r,'change:canvasOffset',o.clearOff),o.listenTo(r,'component:selected',o.checkSelected),o.listenTo(r,"".concat(l.coords," ").concat(l.zoom),o.updateFrames),o.listenTo(e,'change:frames',o._onFramesUpdate),o.toggleListeners(!0),o}return se(o,n),o.prototype.template=function(){var t=this.pfx;return"\n      <div class=\"".concat(t,"canvas__frames\" data-frames>\n        <div class=\"").concat(t,"canvas__spots\" data-spots></div>\n      </div>\n      <div id=\"").concat(t,"tools\" class=\"").concat(t,"canvas__tools\" data-tools></div>\n      <style data-canvas-style></style>\n    ")},o.prototype._onFramesUpdate=function(){this._initFrames(),this._renderFrames()},o.prototype._initFrames=function(){var t=this,e=t.frames,n=t.model,o=t.config,i=t.em,r=n.frames;i.set('readyCanvas',0),r.once('loaded:all',(function(){return i.set('readyCanvas',1)})),null==e||e.remove(),this.frames=new zt({collection:r},ae(ae({},o),{canvasView:this}))},o.prototype.checkSelected=function(t,e){var n;void 0===e&&(e={});var o=e.scroll,i=this.em.getCurrentFrame();o&&(null===(n=t.views)||void 0===n||n.forEach((function(t){t.frameView===i&&t.scrollIntoView(o)})))},o.prototype.remove=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return null===(t=this.frames)||void 0===t||t.remove(),this.frames=void 0,vt.prototype.remove.apply(this,e),this.toggleListeners(!1),this},o.prototype.preventDefault=function(t){var e;t&&(t.preventDefault(),null===(e=t._parentEvent)||void 0===e||e.preventDefault())},o.prototype.toggleListeners=function(t){var e=this.el,n=this.config,o=t?yt.on:yt.S1;o(document,'keypress',this.onKeyPress),o(window,'scroll resize',this.clearOff),o(e,'wheel',this.onWheel,{passive:!n.infiniteCanvas}),o(e,'pointermove',this.onPointer)},o.prototype.screenToWorld=function(t,e){var n=this.module,o=n.getCoords(),i=n.getZoomMultiplier(),r=this.getViewportDelta();return{x:(t-o.x-r.x)*i,y:(e-o.y-r.y)*i}},o.prototype.onPointer=function(t){if(this.config.infiniteCanvas){var e=this.getCanvasOffset(),n=(0,yt.GX)(),o={x:t.clientX-e.left+n.x,y:t.clientY-e.top+n.y};if(t._parentEvent){var i=t.target.getBoundingClientRect(),r=this.module.getZoomDecimal();o.x=i.left-e.left+n.x+t.clientX*r,o.y=i.top-e.top+n.y+t.clientY*r}this.model.set({pointerScreen:o,pointer:this.screenToWorld(o.x,o.y)})}},o.prototype.onKeyPress=function(t){var e=this.em;' '!==(0,yt.sN)(t)||1===e.getZoomDecimal()||e.Canvas.isInputFocused()||(this.preventDefault(t),e.Editor.runCommand('core:canvas-move'))},o.prototype.onWheel=function(t){var e=this.module;if(this.config.infiniteCanvas){this.preventDefault(t);var n=t.deltaX,o=t.deltaY,i=e.getZoomDecimal(),r=(0,yt.Vb)(t),s=e.getCoords();if(r){var a=i-o*i*.01;e.setZoom(100*a);var c=this.model.getPointerCoords(l.vA.Screen),u=this.getCanvasOffset(),p=c.x-u.width/2,h=c.y-u.height/2,d=a/i,f=p-(p-s.x)*d,g=h-(h-s.y)*d;e.setCoords(f,g)}else this.onPointer(t),e.setCoords(s.x-n,s.y-o)}},o.prototype.updateFrames=function(t){var e=this.em,n=this.toolsWrapper,o={preserveSelected:1};this.updateFramesArea(),this.clearOff(),n.style.display='none',e.trigger('canvas:update',t),this.timerZoom&&clearTimeout(this.timerZoom),this.timerZoom=setTimeout((function(){e.stopDefault(o),e.runDefault(o),n.style.display=''}),300)},o.prototype.updateFramesArea=function(){var t=this,e=t.framesArea,n=t.model,o=t.module,i=t.cvStyle,r=t.clsUnscale,s=o.getZoomMultiplier();if(e){var a=n.attributes,l=a.x,c=a.y,u=o.getZoomDecimal();e.style.transform="scale(".concat(u,") translate(").concat(l*s,"px, ").concat(c*s,"px)")}i&&(i.innerHTML="\n        .".concat(r," { scale: ").concat(s," }\n      "))},o.prototype.fitViewport=function(n){var o,i;void 0===n&&(n={});var r=this,s=r.em,a=r.module,l=r.model,c=this.getCanvasOffset(),u=n.el,p=u&&(null===(o=(0,e.getComponentView)(u))||void 0===o?void 0:o.frameView),h=p?p.model:n.frame||s.getCurrentFrameModel()||l.frames.at(0),d=h.attributes,f=d.x,g=d.y,m={x:null!=f?f:0,y:null!=g?g:0,width:h.width,height:h.height};if(u){var v=this.getElBoxRect(u);m.x=m.x+v.x,m.y=m.y+v.y,m.width=v.width,m.height=v.height}var y=n.ignoreHeight,_=null!==(i=n.gap)&&void 0!==i?i:0,O=(0,t.isNumber)(_),b=O?_:_.x,w=O?_:_.y,x=m.width+2*b,S=m.height+2*w,k=c.width,P=c.height,C=k/x,T=P/S,E=y?C:Math.min(C,T),A=100*E;a.setZoom(A);var Q={x:(-m.x+(h.width>=k?k/2-x/2:-b)+b)*E,y:(-m.y+P/2-S/2+w)*E};if(y){var $=a.getZoomMultiplier(),j=(P*$-P)/2;Q.y=(-m.y+w)*E-j/$}a.setCoords(Q.x,Q.y)},o.prototype.isElInViewport=function(t){var n=(0,e.getElement)(t),o=(0,yt.Ut)(n),i=this.getFrameOffset(n),r=o.top,s=o.left;return r>=0&&s>=0&&r<=i.height&&s<=i.width},o.prototype.offset=function(t,e){void 0===e&&(e={});var n=e.noScroll,o=(0,yt.Ut)(t),i=n?{x:0,y:0}:(0,yt.GX)(t);return{top:o.top+i.y,left:o.left+i.x,width:o.width,height:o.height}},o.prototype.getRectToScreen=function(t){var e,n,o,i,r=this.module.getZoomDecimal(),s=this.module.getCoords(),a=this.getViewportDelta();return{x:(null!==(e=t.x)&&void 0!==e?e:0)*r+s.x+a.x||0,y:(null!==(n=t.y)&&void 0!==n?n:0)*r+s.y+a.y||0,width:(null!==(o=t.width)&&void 0!==o?o:0)*r,height:(null!==(i=t.height)&&void 0!==i?i:0)*r}},o.prototype.getElBoxRect=function(t,n){var o,i,r;void 0===n&&(n={});var s=this.module,a=(0,yt.Ut)(t),l=a.width,c=a.height,u=a.left,p=a.top,h=null===(o=(0,e.getComponentView)(t))||void 0===o?void 0:o.frameView,d=null==h?void 0:h.getBoxRect(),f=s.getZoomMultiplier(),g=null!==(i=null==d?void 0:d.x)&&void 0!==i?i:0,m=null!==(r=null==d?void 0:d.y)&&void 0!==r?r:0,v=this.el,y=(0,yt.GX)(),_={x:u+g+(v.scrollLeft+y.x)*f,y:p+m+(v.scrollTop+y.y)*f,width:l,height:c};return n.local&&(_.x=u,_.y=p),n.toScreen?this.getRectToScreen(_):_},o.prototype.getViewportRect=function(t){void 0===t&&(t={});var e=this.getCanvasOffset(),n=e.top,o=e.left,i=e.width,r=e.height,s=this.module;if(t.toWorld){var a=s.getZoomMultiplier(),l=s.getCoords(),c=this.getViewportDelta();return{x:(-l.x-c.x||0)*a,y:(-l.y-c.y||0)*a,width:i*a,height:r*a}}return{x:o,y:n,width:i,height:r}},o.prototype.getViewportDelta=function(t){void 0===t&&(t={});var e=this.module.getZoomMultiplier(),n=this.getCanvasOffset(),o=n.width,i=n.height;return{x:(o*e-o)/2/e,y:(i*e-i)/2/e}},o.prototype.clearOff=function(){this.frmOff=void 0,this.cvsOff=void 0},o.prototype.getFrameOffset=function(t){var e;if(!this.frmOff||t){var n=null===(e=this.frame)||void 0===e?void 0:e.el,o=null==t?void 0:t.ownerDocument.defaultView,i=o?o.frameElement:n;this.frmOff=this.offset(i||n)}return this.frmOff},o.prototype.getCanvasOffset=function(){return this.cvsOff||(this.cvsOff=this.offset(this.el)),this.cvsOff},o.prototype.getElementPos=function(t,e){void 0===e&&(e={});var n=this.module.getZoomDecimal(),o=this.getFrameOffset(t),i=this.el,r=this.getCanvasOffset(),s=this.offset(t,e),a=e.avoidFrameOffset?0:o.top,l=e.avoidFrameOffset?0:o.left,c=e.avoidFrameZoom?s.top:s.top*n,u=e.avoidFrameZoom?s.left:s.left*n;return{top:e.avoidFrameOffset?c:c+a-r.top+i.scrollTop,left:e.avoidFrameOffset?u:u+l-r.left+i.scrollLeft,height:e.avoidFrameZoom?s.height:s.height*n,width:e.avoidFrameZoom?s.width:s.width*n,zoom:n,rect:s}},o.prototype.getElementOffsets=function(t){if(!t||(0,yt.BM)(t))return{};var e={},n=window.getComputedStyle(t),o=this.module.getZoomDecimal();return['marginTop','marginRight','marginBottom','marginLeft','paddingTop','paddingRight','paddingBottom','paddingLeft','borderTopWidth','borderRightWidth','borderBottomWidth','borderLeftWidth'].forEach((function(t){e[t]=parseFloat(n[t])*o})),e},o.prototype.getPosition=function(t){var e;void 0===t&&(t={});var n=null===(e=this.frame)||void 0===e?void 0:e.el.contentDocument;if(!n)return{top:0,left:0,width:0,height:0};var o=n.body,i=this.module.getZoomDecimal(),r=this.getFrameOffset(),s=this.getCanvasOffset(),a=t.noScroll;return{top:r.top+(a?0:o.scrollTop)*i-s.top,left:r.left+(a?0:o.scrollLeft)*i-s.left,width:s.width,height:s.height}},o.prototype.updateScript=function(t){var e,n,o,i=t.model,r=i.getId();if(console.log('//////////////////////////////////////////////////////////////////\n/////////////// updateScript////////////////'),!t.scriptContainer){t.scriptContainer=(0,yt.ut)('div',{'data-id':r});var s=this.getJsContainer();null==s||s.appendChild(t.scriptContainer)}var a=i.scriptSubComp;if(a){t.el.id=r,t.scriptContainer.innerHTML='';var l=document.createElement('script');console.log(re.renderJs(a)),l.innerHTML="\n        setTimeout(function() {\n        ".concat(re.renderJs(a),"\n        }, 1);"),console.log("eventcancel",window.globalScriptParams&&(null===(e=null===window||void 0===window?void 0:window.globalScriptParams[a.dataId])||void 0===e?void 0:e.abortController)),window.globalScriptParams&&(null===(o=null===(n=window.globalScriptParams[a.dataId])||void 0===n?void 0:n.abortController)||void 0===o||o.abort()),this.updatingScriptTimout[r]&&clearTimeout(this.updatingScriptTimout[r]),console.log("fromSiteRenderScript",r,a),this.updatingScriptTimout[r]=setTimeout((function(){var e=t.scriptContainer,n=t.em.Canvas.getWindow().globalScriptParams;n&&(console.log(n),Object.entries(a.previous('slots')).forEach((function(t){var e,o,i,s,l,c,u,p,h=t[0],d=t[1];console.log("fromSiteRenderScriptSlots",r,null===(e=d.subscription)||void 0===e?void 0:e.componentId,null===(o=d.subscription)||void 0===o?void 0:o.name),(null===(i=d.subscription)||void 0===i?void 0:i.componentId)&&(null===(s=d.subscription)||void 0===s?void 0:s.name)&&(null===(u=null===(c=n[null===(l=d.subscription)||void 0===l?void 0:l.componentId])||void 0===c?void 0:c.el)||void 0===u||u.removeEventListener(d.subscription.name,null===(p=n[a.dataId])||void 0===p?void 0:p.slots[h]))})),Object.entries(a.get('slots')).forEach((function(t){var e,o,i,s,l,c,u,p,h=t[0],d=t[1];console.log("fromSiteRenderScriptSlots",r,null===(e=d.subscription)||void 0===e?void 0:e.componentId,null===(o=d.subscription)||void 0===o?void 0:o.name),(null===(i=d.subscription)||void 0===i?void 0:i.componentId)&&(null===(s=d.subscription)||void 0===s?void 0:s.name)&&(null===(u=null===(c=n[null===(l=d.subscription)||void 0===l?void 0:l.componentId])||void 0===c?void 0:c.el)||void 0===u||u.removeEventListener(d.subscription.name,null===(p=n[a.dataId])||void 0===p?void 0:p.slots[h]))}))),null==e||e.replaceChildren(l),a.component.trigger('script:updated')}),0)}},o.prototype.getJsContainer=function(t){var e=this.getFrameView(t);return null==e?void 0:e.getJsContainer()},o.prototype.getFrameView=function(t){return(null==t?void 0:t.frameView)||this.em.getCurrentFrame()},o.prototype._renderFrames=function(){if(this.ready){var t=this,e=t.model,n=t.frames,o=t.em,i=t.framesArea,r=e.frames;r.listenToLoad(),n.render();var s=r.at(0),a=null==s?void 0:s.view;o.setCurrentFrame(a),null==i||i.appendChild(n.el),this.frame=a,this.updateFramesArea()}},o.prototype.renderFrames=function(){this._renderFrames()},o.prototype.render=function(){var t=this,n=t.el,o=t.$el,i=t.ppfx,r=t.config,s=t.em;o.html(this.template());var a=o.find('[data-frames]');this.framesArea=a.get(0);var l=o.find('[data-tools]');return this.toolsWrapper=l.get(0),l.append("\n      <div class=\"".concat(i,"tools ").concat(i,"tools-gl\" style=\"pointer-events:none\">\n        <div class=\"").concat(i,"placeholder\">\n          <div class=\"").concat(i,"placeholder-int\"></div>\n        </div>\n      </div>\n      <div id=\"").concat(i,"tools\" style=\"pointer-events:none\">\n        ").concat(r.extHl?"<div class=\"".concat(i,"highlighter-sel\"></div>"):'',"\n        <div class=\"").concat(i,"badge\"></div>\n        <div class=\"").concat(i,"ghost\"></div>\n        <div class=\"").concat(i,"toolbar\" style=\"pointer-events:all\"></div>\n        <div class=\"").concat(i,"resizer\"></div>\n        <div class=\"").concat(i,"offset-v\"></div>\n        <div class=\"").concat(i,"offset-fixed-v\"></div>\n      </div>\n    ")),this.toolsEl=n.querySelector("#".concat(i,"tools")),this.hlEl=n.querySelector(".".concat(i,"highlighter")),this.badgeEl=n.querySelector(".".concat(i,"badge")),this.placerEl=n.querySelector(".".concat(i,"placeholder")),this.ghostEl=n.querySelector(".".concat(i,"ghost")),this.toolbarEl=n.querySelector(".".concat(i,"toolbar")),this.resizerEl=n.querySelector(".".concat(i,"resizer")),this.offsetEl=n.querySelector(".".concat(i,"offset-v")),this.fixedOffsetEl=n.querySelector(".".concat(i,"offset-fixed-v")),this.toolsGlobEl=n.querySelector(".".concat(i,"tools-gl")),this.spotsEl=n.querySelector('[data-spots]'),this.cvStyle=n.querySelector('[data-canvas-style]'),this.el.className=(0,e.getUiClass)(s,this.className),this.ready=!0,this._renderFrames(),this},o}(vt);const ce=le;var ue=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),pe=void 0&&(void 0).__assign||function(){return pe=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},pe.apply(this,arguments)},he=void 0&&(void 0).__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))},de=function(n){function o(t){var e=n.call(this,t,'Canvas',y)||this;return e.events=dt,e.framesById={},e.canvas=new lt(e),e.spots=new ht(e),e.model=e.canvas,e.startAutoscroll=e.startAutoscroll.bind(e),e.stopAutoscroll=e.stopAutoscroll.bind(e),e}return ue(o,n),o.prototype.getCanvasView=function(){return this.canvasView},o.prototype.postLoad=function(){this.model.init()},o.prototype.getModel=function(){return this.canvas},o.prototype.getElement=function(){return this.getCanvasView().el},o.prototype.getFrame=function(t){return this.getFrames()[t||0]},o.prototype.getFrameEl=function(){var t=(this.canvasView||{}).frame;return null==t?void 0:t.el},o.prototype.getFramesEl=function(){var t;return null===(t=this.canvasView)||void 0===t?void 0:t.framesArea},o.prototype.getWindow=function(){var t=(this.canvasView||{}).frame;return null==t?void 0:t.getWindow()},o.prototype.getDocument=function(){var t=this.getFrameEl();return null==t?void 0:t.contentDocument},o.prototype.getBody=function(){var t=this.getDocument();return null==t?void 0:t.body},o.prototype._getLocalEl=function(t,e,n){var o=t,i=null==e?void 0:e.frameView;return o=i?i[n]():o},o.prototype.getGlobalToolsEl=function(){var t;return null===(t=this.canvasView)||void 0===t?void 0:t.toolsGlobEl},o.prototype.getToolsEl=function(t){return this._getLocalEl(this.getCanvasView().toolsEl,t,'getToolsEl')},o.prototype.getHighlighter=function(t){return this._getLocalEl(this.getCanvasView().hlEl,t,'getHighlighter')},o.prototype.getBadgeEl=function(t){return this._getLocalEl(this.getCanvasView().badgeEl,t,'getBadgeEl')},o.prototype.getPlacerEl=function(){return this.getCanvasView().placerEl},o.prototype.getGhostEl=function(){return this.getCanvasView().ghostEl},o.prototype.getToolbarEl=function(){return this.getCanvasView().toolbarEl},o.prototype.getResizerEl=function(){return this.getCanvasView().resizerEl},o.prototype.getOffsetViewerEl=function(t){return this._getLocalEl(this.getCanvasView().offsetEl,t,'getOffsetViewerEl')},o.prototype.getFixedOffsetViewerEl=function(){return this.getCanvasView().fixedOffsetEl},o.prototype.getSpotsEl=function(){var t;return null===(t=this.canvasView)||void 0===t?void 0:t.spotsEl},o.prototype.render=function(){var t;return null===(t=this.canvasView)||void 0===t||t.remove(),this.canvasView=new ce(this.canvas),this.canvasView.render().el},o.prototype.getOffset=function(){var t=this.offset(this.getFrameEl()),e=this.offset(this.getElement());return{top:t.top-e.top,left:t.left-e.left}},o.prototype.offset=function(t){return this.getCanvasView().offset(t)},o.prototype.setCustomBadgeLabel=function(t){this.config.customBadgeLabel=t},o.prototype.getElementPos=function(t,e){return this.getCanvasView().getElementPos(t,e)},o.prototype.getElementOffsets=function(t){return this.getCanvasView().getElementOffsets(t)},o.prototype.getRect=function(){var t,e=null!==(t=this.getCanvasView().getPosition())&&void 0!==t?t:{},n=e.top,o=void 0===n?0:n,i=e.left,r=void 0===i?0:i;return pe(pe({},this.getCanvasView().getCanvasOffset()),{topScroll:o,leftScroll:r})},o.prototype.getTargetToElementDim=function(t,e,n){void 0===n&&(n={});var o=n||{},i=this.getCanvasView().getPosition();if(i){var r=o.elPos||this.getCanvasView().getElementPos(e),s=n.toRight||0,a=o.targetHeight||t.offsetHeight,l=o.targetWidth||t.offsetWidth,c=o.event||null,u=r.top-a,p=r.left;p+=s?r.width:0;var h=(p=s?p-l:p)<i.left?i.left:p,d=u<i.top?i.top:u,f={top:d=d>r.top+r.height?r.top+r.height:d,left:h,elementTop:r.top,elementLeft:r.left,elementWidth:r.width,elementHeight:r.height,targetWidth:t.offsetWidth,targetHeight:t.offsetHeight,canvasTop:i.top,canvasLeft:i.left,canvasWidth:i.width,canvasHeight:i.height};return c&&this.em&&this.em.trigger(c,f),f}},o.prototype.canvasRectOffset=function(t,e,n){var o=this;void 0===n&&(n={});var i=function(t,e,i){void 0===e&&(e=1);var r=o.em.getZoomDecimal(),s=e?'top':'left',a=t.ownerDocument,l=n.offset?function(t){var e=t.defaultView;return null==e?void 0:e.frameElement}(a):{},c=l.offsetTop,u=void 0===c?0:c,p=l.offsetLeft,h=void 0===p?0:p,d=a.body||{},f=d.scrollTop,g=void 0===f?0:f,m=d.scrollLeft,v=e?g:void 0===m?0:m,y=e?u:h;return i[s]-(v-y)*r};return{top:i(t,1,e),left:i(t,0,e)}},o.prototype.getTargetToElementFixed=function(e,n,o){void 0===o&&(o={});var i=o.pos||this.getElementPos(e,{noScroll:!0}),r=o.canvasOff||this.canvasRectOffset(e,i),s=n.offsetHeight||0,a=n.offsetWidth||0,l=i.left+i.width,c=this.getCanvasView(),u=c.getPosition(),p=c.getFrameOffset(e),h=o.event,d=-s,f=(0,t.isUndefined)(o.left)?i.width-a:o.left;if(f=i.left<-f?-i.left:f,f=l>u.width?f-(l-u.width):f,r.top<s){var g=i.height+s;g<p.height?d+=g:d=-r.top<i.height?-r.top:i.height}var m={top:d,left:f,canvasOffsetTop:r.top,canvasOffsetLeft:r.left,elRect:i,canvasOffset:r,canvasRect:u,targetWidth:a,targetHeight:s};return h&&this.em.trigger(h,m),m},o.prototype.getMouseRelativePos=function(t,e){void 0===e&&(e={});var n=e.subWinOffset,o=t.target.ownerDocument,i=o.defaultView||o.parentWindow,r=i.frameElement,s=n?i.pageYOffset:0,a=n?i.pageXOffset:0,l=this.getZoomMultiplier(),c=0,u=0;if(r){var p=r.getBoundingClientRect();c=p.top||0,u=p.left||0}return{y:(t.clientY+c-s)*l,x:(t.clientX+u-a)*l}},o.prototype.getMouseRelativeCanvas=function(t,e){var n,o=this.getZoomDecimal(),i=null!==(n=this.getCanvasView().getPosition(e))&&void 0!==n?n:{},r=i.top,s=void 0===r?0:r,a=i.left,l=void 0===a?0:a;return{y:t.clientY*o+s,x:t.clientX*o+l}},o.prototype.hasFocus=function(){return this.getDocument().hasFocus()},o.prototype.isInputFocused=function(){var t=this.getDocument(),e=this.getFrameEl(),n=he(['body'],this.config.notTextable,!0),o=e&&document.activeElement===e?t&&t.activeElement:document.activeElement;return o&&!n.some((function(t){return o.matches(t)}))},o.prototype.scrollTo=function(t,n){void 0===n&&(n={});var o=(0,e.getElement)(t),i=o&&(0,e.getViewEl)(o);i&&i.scrollIntoView(n)},o.prototype.startAutoscroll=function(t){var e=t&&t.view||this.em.getCurrentFrame();e&&e.startAutoscroll()},o.prototype.stopAutoscroll=function(t){var e=t&&t.view||this.em.getCurrentFrame();e&&e.stopAutoscroll()},o.prototype.setZoom=function(t){return this.canvas.set('zoom','string'==typeof t?parseFloat(t):t),this},o.prototype.getZoom=function(){return parseFloat(this.canvas.get('zoom'))},o.prototype.setCoords=function(t,e,n){var o;void 0===n&&(n={});var i=t||0===t,r=e||0===e,s={x:this.canvas.get('x'),y:this.canvas.get('y')};if(i&&(s.x=parseFloat("".concat(t))),r&&(s.y=parseFloat("".concat(e))),n.toWorld){var a=null===(o=this.canvasView)||void 0===o?void 0:o.getViewportDelta();a&&(i&&(s.x=s.x-a.x),r&&(s.y=s.y-a.y))}return this.canvas.set(s),this},o.prototype.getCoords=function(){var t=this.canvas.attributes;return{x:t.x,y:t.y}},o.prototype.getPointer=function(t){var e=this.canvas.attributes,n=e.pointer,o=e.pointerScreen;return t?o:n},o.prototype.getZoomDecimal=function(){return this.getZoom()/100},o.prototype.getZoomMultiplier=function(){var t=this.getZoomDecimal();return t?1/t:1},o.prototype.fitViewport=function(t){var e;null===(e=this.canvasView)||void 0===e||e.fitViewport(t)},o.prototype.toggleFramesEvents=function(t){this.getFramesEl().style.pointerEvents=t?'':'none'},o.prototype.getFrames=function(){return this.canvas.frames.map((function(t){return t}))},o.prototype.addFrame=function(t,e){return void 0===t&&(t={}),void 0===e&&(e={}),this.canvas.frames.add(new ot(this,pe({},t)),e)},o.prototype.getLastDragResult=function(){return this.em.get('dragResult')},o.prototype.addSpot=function(t,e){var n;void 0===e&&(e={});var o=t,i=this.getSpots(o);if(i.length){var r=i[0];return r.set(o),r}var s=o.componentView||(null===(n=o.component)||void 0===n?void 0:n.view),a=new ct.Z(this,pe(pe({},o),{id:o.id||"cs_".concat(o.type,"_").concat(null==s?void 0:s.cid),type:o.type||''}));return this.spots.add(a,e),a},o.prototype.getSpots=function(t){return void 0===t&&(t={}),this.spots.where(t.id?{id:t.id}:t)},o.prototype.removeSpots=function(e){void 0===e&&(e={});var n=(0,t.isArray)(e)?e:this.getSpots(e);return this.spots.remove(n)},o.prototype.hasCustomSpot=function(t){var e=this.config.customSpots;return!!(!0===e||e&&t&&e[t])},o.prototype.getWorldRectToScreen=function(t){var e;return null===(e=this.canvasView)||void 0===e?void 0:e.getRectToScreen(t)},o.prototype.refreshSpots=function(){this.spots.refresh()},o.prototype.destroy=function(){var t,e=this;this.canvas.stopListening(),null===(t=this.canvasView)||void 0===t||t.remove(),['model','droppable'].forEach((function(t){return e[t]={}}))},o}(m);const fe=de,ge={stylePrefix:'comp-',components:[],draggableComponents:!0,disableTextInnerChilds:!1,processor:void 0,useFrameDoc:!1,voidElements:['area','base','br','col','embed','hr','img','input','keygen','link','menuitem','meta','param','source','track','wbr']};var me='text/html',ve=me;var ye=void 0&&(void 0).__assign||function(){return ye=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},ye.apply(this,arguments)},_e='data-gjs-',Oe='parse:html';const be=function(e,n){return void 0===n&&(n={}),{compTypes:'',modelAttrStart:_e,getPropAttribute:function(t,e){var n=t.replace(this.modelAttrStart,''),o=(null==e?void 0:e.length)||0,i=null==e?void 0:e.substring(0,1),r=null==e?void 0:e.substring(o-1),s='true'===e||'false'!==e&&e;try{s='{'==i&&'}'==r||'['==i&&']'==r?JSON.parse(s):s}catch(t){}return{name:n,value:s}},splitPropsFromAttr:function(e){var n=this;void 0===e&&(e={});var o={},i={};return(0,t.each)(e,(function(t,e){if(0===e.indexOf(n.modelAttrStart)){var r=n.getPropAttribute(e,t);o[r.name]=r.value}else i[e]=t})),{props:o,attrs:i}},parseStyle:function(e){for(var n={};e.indexOf('/*')>=0;){var o=e.indexOf('/*'),i=e.indexOf('*/')+2;e=e.replace(e.slice(o,i),'')}for(var r=e.split(';'),s=0,a=r.length;s<a;s++){var l=r[s].trim();if(l){var c=l.split(':'),u=c[0].trim(),p=c.slice(1).join(':').trim();n[u]?((0,t.isArray)(n[u])||(n[u]=[n[u]]),n[u].push(p)):n[u]=p}}return n},parseClass:function(t){for(var e=[],n=t.split(' '),o=0,i=n.length;o<i;o++){var r=n[o].trim();r&&e.push(r)}return e},parseNode:function(e,o){void 0===o&&(o={});for(var i=[],r=e.childNodes,s=0,a=r.length;s<a;s++){var l=r[s],c=l.attributes||[],u=c.length,p=i[i.length-1],h=l.childNodes.length,d=this.compTypes,f={};if(d){var g='',m=l.getAttribute&&l.getAttribute("".concat(this.modelAttrStart,"type"));if(m)f={type:m};else{for(var v=0;v<d.length;v++){var y=d[v];if(g=y.model.isComponent(l,o)){'object'!=typeof g&&(g={type:y.id});break}}f=g}}if(!f.tagName){var _=l.tagName||'',O=l.namespaceURI||'';f.tagName=_&&'http://www.w3.org/1999/xhtml'===O?_.toLowerCase():_}u&&(f.attributes={});for(var b=0;b<u;b++){var w=c[b].nodeName,x=c[b].nodeValue;if('style'==w)f.style=this.parseStyle(x);else if('class'==w)f.classes=this.parseClass(x);else{if('contenteditable'==w)continue;if(0===w.indexOf(this.modelAttrStart)){var S=this.getPropAttribute(w,x);f[S.name]=S.value}else''===x&&!0===l[w]&&(x=!0),f.attributes[w]=x}}if(h&&!f.components){var k=l.childNodes[0];1===h&&3===k.nodeType?(!f.type&&(f.type='text'),f.components={type:'textnode',content:k.nodeValue}):f.components=this.parseNode(l,ye(ye({},o),{inSvg:o.inSvg||'svg'===f.type}))}if('textnode'==f.type){if(p&&'textnode'==p.type){p.content+=f.content;continue}if(!o.keepEmptyTextNodes){var P=l.nodeValue;if(' '!=P&&!P.trim())continue}}h||'/>'!=="".concat(l.outerHTML).slice(-2)||(f.void=!0);var C=f.components;if(!f.type&&C){for(var T=n.textTypes,E=void 0===T?[]:T,A=n.textTags,Q=void 0===A?[]:A,$=1,j=0,R=0;R<C.length;R++){var M=C[R],V=M.type;if(!E.includes(V)&&!Q.includes(M.tagName)){$=0;break}'textnode'===V&&(j=1)}$&&j&&(f.type='text')}!f.tagName&&(0,t.isUndefined)(f.content)||i.push(f)}return i},parse:function(o,i,r){var s;void 0===r&&(r={});var a=(null==e?void 0:e.get('Config'))||{},l={html:[]},c=ye(ye({},n),r),u=ye(ye(ye({},n.optionsHtml),{htmlType:(null===(s=n.optionsHtml)||void 0===s?void 0:s.htmlType)||n.htmlType}),r),p=(0,t.isFunction)(c.parserHtml)?c.parserHtml(o,u):function(e,n){void 0===n&&(n={});var o,i=new DOMParser,r=n.htmlType||ve,s=r===me,a=s?e:"<div>".concat(e,"</div>"),l=i.parseFromString(a,r);if(s){var c=l.head,u=l.body,p=c.querySelectorAll('script');(0,t.each)(p,(function(t){return u.appendChild(t)}));var h=[];(0,t.each)(c.children,(function(t){return h.push(t)})),(0,t.each)(h,(function(t,e){return u.insertBefore(t,u.children[e])})),o=u}else o=l.firstChild;return o}(o,u),h=p.querySelectorAll('script'),d=h.length;if(!((0,t.isUndefined)(a.allowScripts)?u.allowScripts:a.allowScripts))for(;d--;)h[d].parentNode.removeChild(h[d]);if(u.allowUnsafeAttr||this.__clearUnsafeAttr(p),i){for(var f=p.querySelectorAll('style'),g=f.length,m='';g--;)m=f[g].innerHTML+m,f[g].parentNode.removeChild(f[g]);m&&(l.css=i.parse(m))}e&&e.trigger("".concat(Oe,":root"),{input:o,root:p});var v=this.parseNode(p,c),y=1!==v.length||c.returnArray?v:v[0];return l.html=y,e&&e.trigger(Oe,{input:o,output:l}),l},__clearUnsafeAttr:function(e){var n=this,o=e.attributes||[],i=e.childNodes||[],r=[];(0,t.each)(o,(function(t){var e=t.nodeName||'';0===e.indexOf('on')&&r.push(e)})),r.map((function(t){return e.removeAttribute(t)})),(0,t.each)(i,(function(t){return n.__clearUnsafeAttr(t)}))}}};var we=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),xe=void 0&&(void 0).__assign||function(){return xe=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},xe.apply(this,arguments)},Se=be(),ke=function(e){return(0,t.isArray)(e)?e[e.length-1]:e},Pe=function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return we(o,n),o.prototype.parseStyle=function(t){return Se.parseStyle(t)},o.prototype.extendStyle=function(t){return xe(xe({},this.getStyle()),t)},o.prototype.getStyle=function(e){var n=this.get('style')||{},o=xe({},n);return e&&(0,t.isString)(e)?o[e]:o},o.prototype.setStyle=function(n,o){var i=this;void 0===n&&(n={}),void 0===o&&(o={}),(0,t.isString)(n)&&(n=this.parseStyle(n));var r=this.getStyle(o);o.partial||o.avoidStore?(o.avoidStore=!0,n.__p=!0):delete n.__p;var s=xe({},n),a=xe({},s);(0,t.keys)(a).forEach((function(t){''===a[t]&&delete a[t]})),this.set('style',a,o);var l=(0,e.shallowDiff)(r,s);return delete l.__p,(0,t.keys)(l).forEach((function(t){var e=i.em;o.noEvent||(i.trigger("change:style:".concat(t)),e&&(e.trigger('styleable:change',i,t,o),e.trigger("styleable:change:".concat(t),i,t,o)))})),s},o.prototype.addStyle=function(t,e,n){var o;void 0===e&&(e=''),void 0===n&&(n={}),'string'==typeof t?((o={})[t]=e,t=o):n=e||{},n.addStyle=t,t=this.extendStyle(t),this.setStyle(t,n)},o.prototype.removeStyle=function(t){var e=this.getStyle();delete e[t],this.setStyle(e)},o.prototype.styleToString=function(e){void 0===e&&(e={});var n=[],o=this.getStyle(e),i=e.important,r=function(e){var r=(0,t.isArray)(i)?i.indexOf(e)>=0:i;if('__'===e.substring(0,2))return"continue";var s=o[e];((0,t.isArray)(s)?s:[s]).forEach((function(t){var o="".concat(t).concat(r?' !important':'');o&&n.push("".concat(e,":").concat(o,";"))}))};for(var s in o)r(s);return n.join('')},o.prototype.getSelectors=function(){return this.get('selectors')||this.get('classes')},o.prototype.getSelectorsString=function(t){return this.selectorsToString?this.selectorsToString(t):this.getSelectors().getFullString()},o}(l.Hn);const Ce=Pe;var Te=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ee=void 0&&(void 0).__assign||function(){return Ee=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Ee.apply(this,arguments)},Ae=void 0&&(void 0).__rest||function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(t);i<o.length;i++)e.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(t,o[i])&&(n[o[i]]=t[o[i]])}return n},Qe=void 0&&(void 0).__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))},$e=function(e,n){return void 0===n&&(n=[]),e?(((0,t.isArray)(e)||(0,t.isFunction)(e.map)?e:[e]).map((function(t){n.push(t.getId()),$e(t.components().models,n)})),n):[]},je=function(e,n,o){void 0===n&&(n={}),void 0===o&&(o={}),o.visitedCmps=o.visitedCmps||{};var i=o.visitedCmps;return((0,t.isArray)(e)?e:[e]).map((function(e){var r=e.attributes,s=void 0===r?{}:r,a=e.components,l=e.tagName,c=e.style,u=s.id,p=(s.draggable,Ae(s,["id","draggable"])),h=e;if(u)if(i[u])i[u].push(h),u=zn.getNewId(n),h.attributes.id=u;else if(i[u]=[],n[u]){var d=h=n[u];l&&d.set({tagName:l},Ee(Ee({},o),{silent:!0})),(0,t.keys)(p).length&&d.addAttributes(p,Ee({},o)),(0,t.keys)(c).length&&d.addStyle(c,o)}if(a){var f=je(a,n);if((0,t.isFunction)(h.components)){var g=h.components();g.length>0&&g.reset(f,o)}else h.components=f}return h}))},Re=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return Te(n,e),n.prototype.initialize=function(t,e){void 0===e&&(e={}),this.opt=e,this.listenTo(this,'add',this.onAdd),this.listenTo(this,'remove',this.removeChildren),this.listenTo(this,'reset',this.resetChildren);var n=e.em,o=e.config;this.config=o,this.em=n,this.domc=e.domc||(null==n?void 0:n.Components)},n.prototype.resetChildren=function(t,e){var n=this;void 0===e&&(e={});var o=this,i=e.previousModels||[],r=i.filter((function(e){return!t.get(e.cid)})),s=$e(t),a=$e(i).filter((function(t){return s.indexOf(t)>=0}));e.keepIds=(e.keepIds||[]).concat(a),r.forEach((function(t){return n.removeChildren(t,o,e)})),t.each((function(t){return n.onAdd(t)}))},n.prototype.resetFromString=function(t,e){var n,o;void 0===t&&(t=''),void 0===e&&(e={}),e.keepIds=$e(this);var i=this,r=i.domc,s=i.em,a=i.parent,l=null==s?void 0:s.Css,c=(null==r?void 0:r.allById())||{},u=this.parseString(t,e),p=je(u,c,e),h=e.visitedCmps,d=void 0===h?{}:h;Object.keys(d).forEach((function(t){var e=d[t];if(e.length){var n=(null==l?void 0:l.getRules("#".concat(t)))||[];n.length&&e.forEach((function(t){n.forEach((function(e){var n=e.clone();n.set('selectors',["#".concat(t.attributes.id)]),l.getAll().add(n)}))}))}})),this.reset(p,e),null==s||s.trigger('component:content',a,e,t),null===(o=(n=a).__checkInnerChilds)||void 0===o||o.call(n)},n.prototype.removeChildren=function(t,e,n){var o=this;if(void 0===n&&(n={}),t){var i=this.domc,r=this.em,s=n.temporary||n.fromUndo;if(t.prevColl=this,!s){var a=t.getId(),l=r.Selectors.getAll(),c=r.Css.getAll(),u=(n.keepIds||[]).indexOf(a)<0;delete(i?i.allById():{})[a];var p=u?c.remove(c.filter((function(t){return t.getSelectors().getFullString()==="#".concat(a)})),n):[];l.remove(p.map((function(t){return t.getSelectors().at(0)}))),t.opt.temporary||(r.Commands.run('core:component-style-clear',{target:t}),t.removed(),t.trigger('removed'),r.trigger('component:remove',t)),t.components().forEach((function(t){return o.removeChildren(t,e,n)}))}var h=t.components();r.stopListening(h),r.stopListening(t),r.stopListening(t.get('classes')),t.__postRemove()}},n.prototype.model=function(t,e){var n,o=e.collection.opt,i=o.em,r=i.Components.componentTypes;e.em=i,e.config=o.config,e.componentTypes=r,e.domc=o.domc;for(var s=0;s<r.length;s++){if(r[s].id==t.type){n=r[s].model;break}}return n||(n=r[r.length-1].model,i&&t.type&&i.logWarning("Component type '".concat(t.type,"' not found"),{attrs:t,options:e})),new n(t,e)},n.prototype.parseString=function(t,e){void 0===e&&(e={});var n=this.em,o=this.domc,i=n.Css,r=n.Parser.parseHtml(t);if(zn.checkId(r.html,r.css,o.componentsById,e),r.css&&i&&!e.temporary){e.at;var s=Ae(e,["at"]);i.addCollection(r.css,Ee(Ee({},s),{extend:1}))}return r.html},n.prototype.add=function(e,n){var o=this;void 0===n&&(n={}),n.keepIds=Qe(Qe([],n.keepIds||[],!0),$e(n.previousModels),!0),(0,t.isString)(e)?e=this.parseString(e,n):(0,t.isArray)(e)&&(e=Qe([],e,!0)).forEach((function(i,r){if((0,t.isString)(i)){var s=o.parseString(i,n);e[r]=(0,t.isArray)(s)&&!s.length?null:s}}));var i=(0,t.isArray)(e);e=(i?e:[e]).filter(Boolean).map((function(t){return o.processDef(t)})),e=i?(0,t.flatten)(e,1):e[0];var r=l.FE.prototype.add.apply(this,[e,n]);return this.__firstAdd=r,r},n.prototype.processDef=function(e){if(e.cid&&e.ccid)return e;var n=this.em,o=this.config,i=(void 0===o?{}:o).processor,r=e;if(i){var s=i(r=Ee({},r));s&&((0,t.each)(r,(function(t,e){return delete r[e]})),(0,t.extend)(r,s))}if(r.$$typeof&&'object'==typeof r.props){(r=Ee({},r)).props=Ee({},r.props);var a=n.Components,l=n.Parser.parserHtml;(0,t.each)(r,(function(e,n){(0,t.includes)(['props','type'],n)||delete r[n]}));var c=r.props,u=c.children;delete c.children,delete r.props;var p=l.splitPropsFromAttr(c);r.attributes=p.attrs,u&&(r.components=u),r.type?a.getType(r.type)||(r.tagName=r.type,delete r.type):r.type='textnode',(0,t.extend)(r,p.props)}return r},n.prototype.onAdd=function(e,n,o){void 0===o&&(o={});var i=this.domc,r=this.em,s=e.getStyle(),a=r&&r.getConfig().avoidInlineStyle;if(i&&i.Component.ensureInList(e),!(0,t.isEmpty)(s)&&!a&&r&&r.get&&r.getConfig().forceClass&&!o.temporary){var l=e.cid;r.Css.setClassRule(l,s),e.setStyle({}),e.addClass(l)}e.__postAdd({recursive:!0})},n}(l.FE);const Me=Re;var Ve=__webpack_require__(5440),Ze=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),De=function(t,e){return t.reduce((function(n,o,i){return n.concat(De(t.slice(i+1),"".concat(e).concat(o)))}),[e])},Ie=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return Ze(n,e),n.prototype.modelId=function(t){return"".concat(t.name,"_").concat(t.type||Ve.Z.TYPE_CLASS)},n.prototype.getStyleable=function(){return(0,t.filter)(this.models,(function(t){return t.getActive()&&!t.get('private')}))},n.prototype.getValid=function(e){var n=(void 0===e?{}:e).noDisabled;return(0,t.filter)(this.models,(function(t){return!t.get('private')})).filter((function(t){return n?t.get('active'):1}))},n.prototype.getFullString=function(t,e){void 0===e&&(e={});var n=[];return(t||this).forEach((function(t){return n.push(t.getFullName(e))})),e.sort&&n.sort(),n.join('').trim()},n.prototype.getFullName=function(t){void 0===t&&(t={});var e=t.combination,n=t.array,o=[],i=this.map((function(e){return e.getFullName(t)})).sort();return e?i.forEach((function(t,e){o=o.concat(De(i.slice(e+1),t))})):o=i,n?o:e?o.join(','):o.join('')},n}(l.FE);const Ne=Ie;Ie.prototype.model=Ve.Z;var We=__webpack_require__(8217),Xe=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Le=function(e){function n(t,n){var o=e.call(this,t,n)||this;return o.type='button',o.command=n.command,o.text=n.text,o.full=n.full,o}return Xe(n,e),n.prototype.events=function(){return{'click button':this.handleClick}},n.prototype.templateInput=function(){return''},Object.defineProperty(n.prototype,"inputValue",{get:function(){},set:function(t){this.handleClick()},enumerable:!1,configurable:!0}),n.prototype.handleClick=function(){var e=this,n=e.target,o=e.command,i=e.em;o&&((0,t.isString)(o)?i.Commands.run(o):o(i.Editor,n.model))},n.prototype.getInputEl=function(){var t=this,e=t.ppfx,n=t.text,o=t.full,i="".concat(e,"btn");return(0,s["default"])("<button type=\"button\" class=\"".concat(i,"-prim").concat(o?" ".concat(i,"--full"):'',"\">").concat(n,"</button>")).get(0)},n}(We.Z);const ze=Le;var Ue=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),qe=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.type='checkbox',o.appendInput=!1,o}return Ue(e,t),e.prototype.templateInput=function(){var t=this.ppfx,e=this.clsField;return"<label class=\"".concat(e,"\" data-input>\n    <i class=\"").concat(t,"chk-icon\"></i>\n  </label>")},e.prototype.getInputElem=function(){var t=this.input,e=this.$input;return t||e&&e.get&&e.get(0)||this.getElInput()},Object.defineProperty(e.prototype,"inputValue",{get:function(){var t,e=this.getInputElem();return null!==(t=null==e?void 0:e.checked)&&void 0!==t?t:this.target.value},set:function(t){console.log('Text input value '+t);var e=this.getInputElem();e&&(e.checked=!!t)},enumerable:!1,configurable:!0}),e}(We.Z);const Ye=qe;function Be(t,n){if((0,e.hasWin)()){var o={beforeShow:C,move:C,change:C,show:C,hide:C,color:!1,flat:!1,showInput:!1,allowEmpty:!1,showButtons:!0,clickoutFiresChange:!0,showInitial:!1,showPalette:!1,showPaletteOnly:!1,hideAfterPaletteSelect:!1,togglePaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:'body',maxSelectionSize:7,cancelText:'cancel',chooseText:'choose',togglePaletteMoreText:'more',togglePaletteLessText:'less',clearText:'Clear Color Selection',noColorSelectedText:'No Color Selected',preferredFormat:!1,className:'',containerClassName:'',replacerClassName:'',showAlpha:!1,theme:'sp-light',palette:[['#ffffff','#000000','#ff0000','#ff8000','#ffff00','#008000','#0000ff','#4b0082','#9400d3']],selectionPalette:[],disabled:!1,offset:null},i=[],r=!!/msie/i.exec(window.navigator.userAgent),s=function(){function t(t,e){return!!~(''+t).indexOf(e)}var e=document.createElement('div').style;return e.cssText='background-color:rgba(0,0,0,.5)',t(e.backgroundColor,'rgba')||t(e.backgroundColor,'hsla')}(),a=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>",'</div>'].join(''),l=function(){var t='';if(r)for(var e=1;e<=6;e++)t+="<div class='sp-"+e+"'></div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-button-container sp-cf'>","<button type='button' class='sp-palette-toggle'></button>",'</div>','</div>',"<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>",'</div>','</div>','</div>',"<div class='sp-clear sp-clear-display'>",'</div>',"<div class='sp-hue'>","<div class='sp-slider'></div>",t,'</div>','</div>',"<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>",'</div>',"<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />",'</div>',"<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>",'</div>','</div>','</div>'].join('')}(),c='spectrum.id';t.fn.spectrum=function(e,n){if('string'==typeof e){var o=this,r=Array.prototype.slice.call(arguments,1);return this.each((function(){var n=i[t(this).data(c)];if(n){var s=n[e];if(!s)throw new Error("Spectrum: no such method: '"+e+"'");'get'==e?o=n.get():'container'==e?o=n.container:'option'==e?o=n.option.apply(n,r):'destroy'==e?(n.destroy(),t(this).removeData(c)):s.apply(n,r)}})),o}return this.spectrum('destroy').each((function(){var n=P(this,t.extend({},e,t(this).data()));t(this).data(c,n.id)}))},t.fn.spectrum.load=!0,t.fn.spectrum.loadOpts={},t.fn.spectrum.draggable=A,t.fn.spectrum.defaults=o,t.fn.spectrum.inputTypeColorSupport=function e(){if(void 0===e._cachedResult){var n=t("<input type='color'/>")[0];e._cachedResult='color'===n.type&&''!==n.value}return e._cachedResult},t.spectrum={},t.spectrum.localization={},t.spectrum.palettes={},t.fn.spectrum.processNativeColorInputs=function(){var e=t('input[type=color]');e.length&&!Q()&&e.spectrum({preferredFormat:'hex6'})};var u=/^[\s,#]+/,p=/\s+$/,h=0,d=Math,f=d.round,g=d.min,m=d.max,v=d.random,y=function(t,e){if(e=e||{},(t=t||'')instanceof y)return t;if(!(this instanceof y))return new y(t,e);var n=function(t){var e={r:0,g:0,b:0},n=1,o=!1,i=!1;'string'==typeof t&&(t=function(t){t=t.replace(u,'').replace(p,'').toLowerCase();var e,n=!1;if(w[t])t=w[t],n=!0;else if('transparent'==t)return{r:0,g:0,b:0,a:0,format:'name'};if(e=S.rgb.exec(t))return{r:e[1],g:e[2],b:e[3]};if(e=S.rgba.exec(t))return{r:e[1],g:e[2],b:e[3],a:e[4]};if(e=S.hsl.exec(t))return{h:e[1],s:e[2],l:e[3]};if(e=S.hsla.exec(t))return{h:e[1],s:e[2],l:e[3],a:e[4]};if(e=S.hsv.exec(t))return{h:e[1],s:e[2],v:e[3]};if(e=S.hsva.exec(t))return{h:e[1],s:e[2],v:e[3],a:e[4]};if(e=S.hex8.exec(t))return{a:et(e[1]),r:K(e[2]),g:K(e[3]),b:K(e[4]),format:n?'name':'hex8'};if(e=S.hex6.exec(t))return{r:K(e[1]),g:K(e[2]),b:K(e[3]),format:n?'name':'hex'};if(e=S.hex3.exec(t))return{r:K(e[1]+''+e[1]),g:K(e[2]+''+e[2]),b:K(e[3]+''+e[3]),format:n?'name':'hex'};return!1}(t));'object'==typeof t&&(t.hasOwnProperty('r')&&t.hasOwnProperty('g')&&t.hasOwnProperty('b')?(r=t.r,s=t.g,a=t.b,e={r:255*G(r,255),g:255*G(s,255),b:255*G(a,255)},o=!0,i='%'===String(t.r).substr(-1)?'prgb':'rgb'):t.hasOwnProperty('h')&&t.hasOwnProperty('s')&&t.hasOwnProperty('v')?(t.s=tt(t.s),t.v=tt(t.v),e=function(t,e,n){t=6*G(t,360),e=G(e,100),n=G(n,100);var o=d.floor(t),i=t-o,r=n*(1-e),s=n*(1-i*e),a=n*(1-(1-i)*e),l=o%6,c=[n,s,r,r,a,n][l],u=[a,n,n,s,r,r][l],p=[r,r,a,n,n,s][l];return{r:255*c,g:255*u,b:255*p}}(t.h,t.s,t.v),o=!0,i='hsv'):t.hasOwnProperty('h')&&t.hasOwnProperty('s')&&t.hasOwnProperty('l')&&(t.s=tt(t.s),t.l=tt(t.l),e=function(t,e,n){var o,i,r;function s(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}if(t=G(t,360),e=G(e,100),n=G(n,100),0===e)o=i=r=n;else{var a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;o=s(l,a,t+1/3),i=s(l,a,t),r=s(l,a,t-1/3)}return{r:255*o,g:255*i,b:255*r}}(t.h,t.s,t.l),o=!0,i='hsl'),t.hasOwnProperty('a')&&(n=t.a));var r,s,a;return n=F(n),{ok:o,format:t.format||i,r:g(255,m(e.r,0)),g:g(255,m(e.g,0)),b:g(255,m(e.b,0)),a:n}}(t);this._originalInput=t,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=f(100*this._a)/100,this._format=e.format||n.format,this._gradientType=e.gradientType,this._r<1&&(this._r=f(this._r)),this._g<1&&(this._g=f(this._g)),this._b<1&&(this._b=f(this._b)),this._ok=n.ok,this._tc_id=h++};y.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},setAlpha:function(t){return this._a=F(t),this._roundA=f(100*this._a)/100,this},toHsv:function(){var t=j(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=j(this._r,this._g,this._b),e=f(360*t.h),n=f(100*t.s),o=f(100*t.v);return 1==this._a?'hsv('+e+', '+n+'%, '+o+'%)':'hsva('+e+', '+n+'%, '+o+'%, '+this._roundA+')'},toHsl:function(){var t=$(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=$(this._r,this._g,this._b),e=f(360*t.h),n=f(100*t.s),o=f(100*t.l);return 1==this._a?'hsl('+e+', '+n+'%, '+o+'%)':'hsla('+e+', '+n+'%, '+o+'%, '+this._roundA+')'},toHex:function(t){return R(this._r,this._g,this._b,t)},toHexString:function(t){return'#'+this.toHex(t)},toHex8:function(){return M(this._r,this._g,this._b,this._a)},toHex8String:function(){return'#'+this.toHex8()},toRgb:function(){return{r:f(this._r),g:f(this._g),b:f(this._b),a:this._a}},toRgbString:function(){return 1==this._a?'rgb('+f(this._r)+', '+f(this._g)+', '+f(this._b)+')':'rgba('+f(this._r)+', '+f(this._g)+', '+f(this._b)+', '+this._roundA+')'},toPercentageRgb:function(){return{r:f(100*G(this._r,255))+'%',g:f(100*G(this._g,255))+'%',b:f(100*G(this._b,255))+'%',a:this._a}},toPercentageRgbString:function(){return 1==this._a?'rgb('+f(100*G(this._r,255))+'%, '+f(100*G(this._g,255))+'%, '+f(100*G(this._b,255))+'%)':'rgba('+f(100*G(this._r,255))+'%, '+f(100*G(this._g,255))+'%, '+f(100*G(this._b,255))+'%, '+this._roundA+')'},toName:function(){return 0===this._a?'transparent':!(this._a<1)&&(x[R(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e='#'+M(this._r,this._g,this._b,this._a),n=e,o=this._gradientType?'GradientType = 1, ':'';t&&(n=y(t).toHex8String());return'progid:DXImageTransform.Microsoft.gradient('+o+'startColorstr='+e+',endColorstr='+n+')'},toString:function(t){var e=!!t;t=t||this._format;var n=!1,o=this._a<1&&this._a>=0;return e||!o||'hex'!==t&&'hex6'!==t&&'hex3'!==t&&'name'!==t?('rgb'===t&&(n=this.toRgbString()),'prgb'===t&&(n=this.toPercentageRgbString()),'hex'!==t&&'hex6'!==t||(n=this.toHexString()),'hex3'===t&&(n=this.toHexString(!0)),'hex8'===t&&(n=this.toHex8String()),'name'===t&&(n=this.toName()),'hsl'===t&&(n=this.toHslString()),'hsv'===t&&(n=this.toHsvString()),n||this.toHexString()):'name'===t&&0===this._a?this.toName():this.toRgbString()},_applyModification:function(t,e){var n=t.apply(null,[this].concat([].slice.call(e)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(I,arguments)},brighten:function(){return this._applyModification(N,arguments)},darken:function(){return this._applyModification(W,arguments)},desaturate:function(){return this._applyModification(V,arguments)},saturate:function(){return this._applyModification(Z,arguments)},greyscale:function(){return this._applyModification(D,arguments)},spin:function(){return this._applyModification(X,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(Y,arguments)},complement:function(){return this._applyCombination(L,arguments)},monochromatic:function(){return this._applyCombination(B,arguments)},splitcomplement:function(){return this._applyCombination(q,arguments)},triad:function(){return this._applyCombination(z,arguments)},tetrad:function(){return this._applyCombination(U,arguments)}},y.fromRatio=function(t,e){if('object'==typeof t){var n={};for(var o in t)t.hasOwnProperty(o)&&(n[o]='a'===o?t[o]:tt(t[o]));t=n}return y(t,e)},y.equals=function(t,e){return!(!t||!e)&&y(t).toRgbString()==y(e).toRgbString()},y.random=function(){return y.fromRatio({r:v(),g:v(),b:v()})},y.mix=function(t,e,n){n=0===n?0:n||50;var o,i=y(t).toRgb(),r=y(e).toRgb(),s=n/100,a=2*s-1,l=r.a-i.a,c=1-(o=((o=a*l==-1?a:(a+l)/(1+a*l))+1)/2),u={r:r.r*o+i.r*c,g:r.g*o+i.g*c,b:r.b*o+i.b*c,a:r.a*s+i.a*(1-s)};return y(u)},y.readability=function(t,e){var n=y(t),o=y(e),i=n.toRgb(),r=o.toRgb(),s=n.getBrightness(),a=o.getBrightness(),l=Math.max(i.r,r.r)-Math.min(i.r,r.r)+Math.max(i.g,r.g)-Math.min(i.g,r.g)+Math.max(i.b,r.b)-Math.min(i.b,r.b);return{brightness:Math.abs(s-a),color:l}},y.isReadable=function(t,e){var n=y.readability(t,e);return n.brightness>125&&n.color>500},y.mostReadable=function(t,e){for(var n=null,o=0,i=!1,r=0;r<e.length;r++){var s=y.readability(t,e[r]),a=s.brightness>125&&s.color>500,l=3*(s.brightness/125)+s.color/500;(a&&!i||a&&i&&l>o||!a&&!i&&l>o)&&(i=a,o=l,n=y(e[r]))}return n};var _,O,b,w=y.names={aliceblue:'f0f8ff',antiquewhite:'faebd7',aqua:'0ff',aquamarine:'7fffd4',azure:'f0ffff',beige:'f5f5dc',bisque:'ffe4c4',black:'000',blanchedalmond:'ffebcd',blue:'00f',blueviolet:'8a2be2',brown:'a52a2a',burlywood:'deb887',burntsienna:'ea7e5d',cadetblue:'5f9ea0',chartreuse:'7fff00',chocolate:'d2691e',coral:'ff7f50',cornflowerblue:'6495ed',cornsilk:'fff8dc',crimson:'dc143c',cyan:'0ff',darkblue:'00008b',darkcyan:'008b8b',darkgoldenrod:'b8860b',darkgray:'a9a9a9',darkgreen:'006400',darkgrey:'a9a9a9',darkkhaki:'bdb76b',darkmagenta:'8b008b',darkolivegreen:'556b2f',darkorange:'ff8c00',darkorchid:'9932cc',darkred:'8b0000',darksalmon:'e9967a',darkseagreen:'8fbc8f',darkslateblue:'483d8b',darkslategray:'2f4f4f',darkslategrey:'2f4f4f',darkturquoise:'00ced1',darkviolet:'9400d3',deeppink:'ff1493',deepskyblue:'00bfff',dimgray:'696969',dimgrey:'696969',dodgerblue:'1e90ff',firebrick:'b22222',floralwhite:'fffaf0',forestgreen:'228b22',fuchsia:'f0f',gainsboro:'dcdcdc',ghostwhite:'f8f8ff',gold:'ffd700',goldenrod:'daa520',gray:'808080',green:'008000',greenyellow:'adff2f',grey:'808080',honeydew:'f0fff0',hotpink:'ff69b4',indianred:'cd5c5c',indigo:'4b0082',ivory:'fffff0',khaki:'f0e68c',lavender:'e6e6fa',lavenderblush:'fff0f5',lawngreen:'7cfc00',lemonchiffon:'fffacd',lightblue:'add8e6',lightcoral:'f08080',lightcyan:'e0ffff',lightgoldenrodyellow:'fafad2',lightgray:'d3d3d3',lightgreen:'90ee90',lightgrey:'d3d3d3',lightpink:'ffb6c1',lightsalmon:'ffa07a',lightseagreen:'20b2aa',lightskyblue:'87cefa',lightslategray:'789',lightslategrey:'789',lightsteelblue:'b0c4de',lightyellow:'ffffe0',lime:'0f0',limegreen:'32cd32',linen:'faf0e6',magenta:'f0f',maroon:'800000',mediumaquamarine:'66cdaa',mediumblue:'0000cd',mediumorchid:'ba55d3',mediumpurple:'9370db',mediumseagreen:'3cb371',mediumslateblue:'7b68ee',mediumspringgreen:'00fa9a',mediumturquoise:'48d1cc',mediumvioletred:'c71585',midnightblue:'191970',mintcream:'f5fffa',mistyrose:'ffe4e1',moccasin:'ffe4b5',navajowhite:'ffdead',navy:'000080',oldlace:'fdf5e6',olive:'808000',olivedrab:'6b8e23',orange:'ffa500',orangered:'ff4500',orchid:'da70d6',palegoldenrod:'eee8aa',palegreen:'98fb98',paleturquoise:'afeeee',palevioletred:'db7093',papayawhip:'ffefd5',peachpuff:'ffdab9',peru:'cd853f',pink:'ffc0cb',plum:'dda0dd',powderblue:'b0e0e6',purple:'800080',rebeccapurple:'663399',red:'f00',rosybrown:'bc8f8f',royalblue:'4169e1',saddlebrown:'8b4513',salmon:'fa8072',sandybrown:'f4a460',seagreen:'2e8b57',seashell:'fff5ee',sienna:'a0522d',silver:'c0c0c0',skyblue:'87ceeb',slateblue:'6a5acd',slategray:'708090',slategrey:'708090',snow:'fffafa',springgreen:'00ff7f',steelblue:'4682b4',tan:'d2b48c',teal:'008080',thistle:'d8bfd8',tomato:'ff6347',turquoise:'40e0d0',violet:'ee82ee',wheat:'f5deb3',white:'fff',whitesmoke:'f5f5f5',yellow:'ff0',yellowgreen:'9acd32'},x=y.hexNames=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}(w),S=(O='[\\s|\\(]+('+(_='(?:'+'[-\\+]?\\d*\\.\\d+%?'+')|(?:'+'[-\\+]?\\d+%?'+')')+')[,|\\s]+('+_+')[,|\\s]+('+_+')\\s*\\)?',b='[\\s|\\(]+('+_+')[,|\\s]+('+_+')[,|\\s]+('+_+')[,|\\s]+('+_+')\\s*\\)?',{rgb:new RegExp('rgb'+O),rgba:new RegExp('rgba'+b),hsl:new RegExp('hsl'+O),hsla:new RegExp('hsla'+b),hsv:new RegExp('hsv'+O),hsva:new RegExp('hsva'+b),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});window.tinycolor=y,t((function(){t.fn.spectrum.load&&t.fn.spectrum.processNativeColorInputs()}))}function k(e,n,o,i){for(var r=[],a=0;a<e.length;a++){var l=e[a];if(l){var c=y(l),u=c.toHsl().l<.5?'sp-thumb-el sp-thumb-dark':'sp-thumb-el sp-thumb-light';u+=y.equals(n,l)?' sp-thumb-active':'';var p=c.toString(i.preferredFormat||'rgb'),h=s?'background-color:'+c.toRgbString():'filter:'+c.toFilter();r.push('<span title="'+p+'" data-color="'+c.toRgbString()+'" class="'+u+'"><span class="sp-thumb-inner" style="'+h+';"></span></span>')}else{r.push(t('<div />').append(t('<span data-color="" style="background-color:transparent;" class="'+'sp-clear-display'+'"></span>').attr('title',i.noColorSelectedText)).html())}}return"<div class='sp-cf "+o+"'>"+r.join('')+'</div>'}function P(e,c){var u,p,h,d,f=function(e,n){var i=t.extend({},o,e);return i.callbacks={move:E(i.move,n),change:E(i.change,n),show:E(i.show,n),hide:E(i.hide,n),beforeShow:E(i.beforeShow,n)},i}(c,e),g=f.flat,m=f.showSelectionPalette,v=f.localStorageKey,_=f.theme,O=f.callbacks,b=(u=Ut,p=10,function(){var t=this,e=arguments,n=function(){d=null,u.apply(t,e)};h&&clearTimeout(d),!h&&d||(d=setTimeout(n,p))}),w=!1,x=!1,S=!0,P=0,C=0,$=0,j=0,R=0,M=0,V=0,Z=0,D=0,I=0,N=1,W=[],X=[],L={},z=f.selectionPalette.slice(0),U=f.maxSelectionSize,q='sp-dragging',Y=null,B=e.ownerDocument,F=(B.body,t(e)),G=!1,H=t(l,B).addClass(_),K=H.find('.sp-picker-container'),J=H.find('.sp-color'),tt=H.find('.sp-dragger'),et=H.find('.sp-hue'),nt=H.find('.sp-slider'),ot=H.find('.sp-alpha-inner'),it=H.find('.sp-alpha'),rt=H.find('.sp-alpha-handle'),st=H.find('.sp-input'),at=H.find('.sp-palette'),lt=H.find('.sp-initial'),ct=H.find('.sp-cancel'),ut=H.find('.sp-clear'),pt=H.find('.sp-choose'),ht=H.find('.sp-palette-toggle'),dt=F.is('input'),ft=dt&&'color'===F.attr('type')&&Q(),gt=dt&&!g,mt=gt?t(a).addClass(_).addClass(f.className).addClass(f.replacerClassName):t([]),vt=gt?mt:F,yt=mt.find('.sp-preview-inner'),_t=f.color||dt&&F.val(),Ot=!1,bt=f.preferredFormat,wt=!f.showButtons||f.clickoutFiresChange,xt=!_t,St=f.allowEmpty&&!ft;function kt(){if(f.showPaletteOnly&&(f.showPalette=!0),ht.text(f.showPaletteOnly?f.togglePaletteMoreText:f.togglePaletteLessText),f.palette){W=f.palette.slice(0),X=t.isArray(W[0])?W:[W],L={};for(var e=0;e<X.length;e++)for(var n=0;n<X[e].length;n++){var o=y(X[e][n]).toRgbString();L[o]=!0}}H.toggleClass('sp-flat',g),H.toggleClass('sp-input-disabled',!f.showInput),H.toggleClass('sp-alpha-enabled',f.showAlpha),H.toggleClass('sp-clear-enabled',St),H.toggleClass('sp-buttons-disabled',!f.showButtons),H.toggleClass('sp-palette-buttons-disabled',!f.togglePaletteOnly),H.toggleClass('sp-palette-disabled',!f.showPalette),H.toggleClass('sp-palette-only',f.showPaletteOnly),H.toggleClass('sp-initial-disabled',!f.showInitial),H.addClass(f.className).addClass(f.containerClassName),Ut()}function Pt(){if(v&&window.localStorage){try{var e=window.localStorage[v].split(',#');e.length>1&&(delete window.localStorage[v],t.each(e,(function(t,e){Ct(e)})))}catch(t){}try{z=window.localStorage[v].split(';')}catch(t){}}}function Ct(e){if(m){var n=y(e).toRgbString();if(!L[n]&&-1===t.inArray(n,z))for(z.push(n);z.length>U;)z.shift();if(v&&window.localStorage)try{window.localStorage[v]=z.join(';')}catch(t){}}}function Tt(){var e=Nt(),n=t.map(X,(function(t,n){return k(t,e,'sp-palette-row sp-palette-row-'+n,f)}));Pt(),z&&n.push(k(function(){var t=[];if(f.showPalette)for(var e=0;e<z.length;e++){var n=y(z[e]).toRgbString();L[n]||t.push(z[e])}return t.reverse().slice(0,f.maxSelectionSize)}(),e,'sp-palette-row sp-palette-row-selection',f)),at.html(n.join(''))}function Et(){if(f.showInitial){var t=Ot,e=Nt();lt.html(k([t,e],e,'sp-palette-row-initial',f))}}function At(){(C<=0||P<=0||j<=0)&&Ut(),x=!0,H.addClass(q),Y=null,F.trigger('dragstart.spectrum',[Nt()])}function Qt(){x=!1,H.removeClass(q),F.trigger('dragstop.spectrum',[Nt()])}function $t(){var t=st.val();if(null!==t&&''!==t||!St){var e=y(t);e.isValid()?(It(e),zt(!0)):st.addClass('sp-validation-error')}else It(null),zt(!0)}function jt(){w?Zt():Rt()}function Rt(){var e=t.Event('beforeShow.spectrum');if(w)Ut();else if(F.trigger('beforeShow.spectrum',[Nt()]),!1!==O.beforeShow(Nt())&&!e.isDefaultPrevented()){!function(){for(var t=0;t<i.length;t++)i[t]&&i[t].hide()}(),w=!0;var n=t(B);n.bind('keydown.spectrum',Mt),n.bind('click.spectrum',Vt),t(window).bind('resize.spectrum',b),mt.addClass('sp-active'),H.removeClass('sp-hidden'),Ut(),Xt(),Ot=Nt(),Et(),O.show(Ot),F.trigger('show.spectrum',[Ot])}}function Mt(t){27===t.keyCode&&Zt()}function Vt(t){2!=t.button&&(x||(wt?zt(!0):Dt(),Zt()))}function Zt(){w&&!g&&(w=!1,t(B).unbind('keydown.spectrum',Mt),t(B).unbind('click.spectrum',Vt),t(window).unbind('resize.spectrum',b),mt.removeClass('sp-active'),H.addClass('sp-hidden'),O.hide(Nt()),F.trigger('hide.spectrum',[Nt()]))}function Dt(){It(Ot,!0)}function It(t,e){var n,o;y.equals(t,Nt())?Xt():(!t&&St?xt=!0:(xt=!1,S=!t,o=(n=y(t)).toHsv(),Z=o.h%360/360,D=o.s,I=o.v,N=o.a),Xt(),n&&n.isValid()&&!e&&(bt=f.preferredFormat||n.getFormat()))}function Nt(t){return t=t||{},St&&xt?null:y.fromRatio({h:Z,s:D,v:I,a:Math.round(100*N)/100},{format:t.format||bt})}function Wt(){Xt(),O.move(Nt()),F.trigger('move.spectrum',[Nt()])}function Xt(){st.removeClass('sp-validation-error'),Lt();var t=y.fromRatio({h:Z,s:1,v:1});J.css('background-color',t.toHexString());var e=bt;N<1&&(0!==N||'name'!==e)&&('hex'!==e&&'hex3'!==e&&'hex6'!==e&&'name'!==e||(e='rgb'));var n=Nt({format:e}),o='';if(yt.removeClass('sp-clear-display'),yt.css('background-color','transparent'),!n&&St)yt.addClass('sp-clear-display');else{var i=n.toHexString(),a=n.toRgbString();if(s||1===n.alpha?yt.css('background-color',a):(yt.css('background-color','transparent'),yt.css('filter',n.toFilter())),f.showAlpha){var l=n.toRgb();l.a=0;var c=y(l).toRgbString(),u='linear-gradient(left, '+c+', '+i+')';r?ot.css('filter',y(c).toFilter({gradientType:1},i)):(ot.css('background','-webkit-'+u),ot.css('background','-moz-'+u),ot.css('background','-ms-'+u),ot.css('background','linear-gradient(to right, '+c+', '+i+')'))}o=n.toString(e)}f.showInput&&st.val(o),f.showPalette&&Tt(),Et()}function Lt(){var t=D,e=I;if(St&&xt)rt.hide(),nt.hide(),tt.hide();else{rt.show(),nt.show(),tt.show();var n=t*P,o=C-e*C;n=Math.max(-$,Math.min(P-$,n-$)),o=Math.max(-$,Math.min(C-$,o-$)),tt.css({top:o+'px',left:n+'px'});var i=N*R;rt.css({left:i-M/2+'px'});var r=Z*j;nt.css({top:r-V+'px'})}}function zt(t){var e=Nt(),n='',o=!!S||!y.equals(e,Ot);e&&(n=e.toString(bt),!w&&Ct(e)),dt&&F.val(n),t&&o&&(O.change(e),F.trigger('change',[e]))}function Ut(){w&&(P=J.width(),C=J.height(),$=tt.height(),et.width(),j=et.height(),V=nt.height(),R=it.width(),M=rt.width(),g||(H.css('position','absolute'),f.offset?H.offset(f.offset):H.offset(function(e,n){var o=0,i=e.outerWidth(),r=e.outerHeight(),s=n.outerHeight(),a=e[0].ownerDocument,l=a.documentElement,c=l.clientWidth,u=l.clientHeight,p=t(a).scrollLeft(),h=t(a).scrollTop(),d=c+p,f=u+h,g=n.offset();return g.top+=s,g.left-=Math.min(g.left,g.left+i>d&&d>i?Math.abs(g.left+i-d):0),g.top-=Math.min(g.top,g.top+r>f&&f>r?Math.abs(r+s-o):o),g}(H,vt))),Lt(),f.showPalette&&Tt(),F.trigger('reflow.spectrum'))}function qt(){Zt(),G=!0,F.attr('disabled',!0),vt.addClass('sp-disabled')}!function(){if(r&&H.find('*:not(input)').attr('unselectable','on'),kt(),gt&&F.after(mt).hide(),St||ut.hide(),g)F.after(H).hide();else{var e='parent'===f.appendTo?F.parent():t(f.appendTo);1!==e.length&&(e=t('body')),e.append(H)}function n(e){return e.data&&e.data.ignore?(It(t(e.target).closest('.sp-thumb-el').data('color')),Wt()):(It(t(e.target).closest('.sp-thumb-el').data('color')),Wt(),f.hideAfterPaletteSelect&&(zt(!0),Zt())),!1}Pt(),vt.bind('click.spectrum touchstart.spectrum',(function(e){G||jt(),e.stopPropagation(),t(e.target).is('input')||e.preventDefault()})),(F.is(':disabled')||!0===f.disabled)&&qt(),H.click(T),st.change($t),st.bind('paste',(function(){setTimeout($t,1)})),st.keydown((function(t){13==t.keyCode&&$t()})),ct.text(f.cancelText),ct.bind('click.spectrum',(function(t){t.stopPropagation(),t.preventDefault(),Dt(),Zt()})),ut.attr('title',f.clearText),ut.bind('click.spectrum',(function(t){t.stopPropagation(),t.preventDefault(),xt=!0,Wt(),g&&zt(!0)})),pt.text(f.chooseText),pt.bind('click.spectrum',(function(t){t.stopPropagation(),t.preventDefault(),r&&st.is(':focus')&&st.trigger('change'),st.hasClass('sp-validation-error')||(zt(!0),Zt())})),ht.text(f.showPaletteOnly?f.togglePaletteMoreText:f.togglePaletteLessText),ht.bind('click.spectrum',(function(t){t.stopPropagation(),t.preventDefault(),f.showPaletteOnly=!f.showPaletteOnly,f.showPaletteOnly||g||H.css('left','-='+(K.outerWidth(!0)+5)),kt()})),A(it,(function(t,e,n){N=t/R,xt=!1,n.shiftKey&&(N=Math.round(10*N)/10),Wt()}),At,Qt),A(et,(function(t,e){Z=parseFloat(e/j),xt=!1,f.showAlpha||(N=1),Wt()}),At,Qt),A(J,(function(t,e,n){if(n.shiftKey){if(!Y){var o=D*P,i=C-I*C,r=Math.abs(t-o)>Math.abs(e-i);Y=r?'x':'y'}}else Y=null;var s=!Y||'y'===Y;(!Y||'x'===Y)&&(D=parseFloat(t/P)),s&&(I=parseFloat((C-e)/C)),xt=!1,f.showAlpha||(N=1),Wt()}),At,Qt),_t?(It(_t),Xt(),bt=f.preferredFormat||y(_t).getFormat(),Ct(_t)):Xt(),g&&Rt();var o=r?'mousedown.spectrum':'click.spectrum touchstart.spectrum';at.delegate('.sp-thumb-el',o,n),lt.delegate('.sp-thumb-el:nth-child(1)',o,{ignore:!0},n)}();var Yt={show:Rt,hide:Zt,toggle:jt,reflow:Ut,option:function(e,o){return e===n?t.extend({},f):o===n?f[e]:(f[e]=o,'preferredFormat'===e&&(bt=f.preferredFormat),void kt())},enable:function(){G=!1,F.attr('disabled',!1),vt.removeClass('sp-disabled')},disable:qt,offset:function(t){f.offset=t,Ut()},set:function(t){It(t),zt()},get:Nt,destroy:function(){F.show(),vt.unbind('click.spectrum touchstart.spectrum'),H.remove(),mt.remove(),i[Yt.id]=null},container:H};return Yt.id=i.push(Yt)-1,Yt}function C(){}function T(t){t.stopPropagation()}function E(t,e){var n=Array.prototype.slice,o=n.call(arguments,2);return function(){return t.apply(e,o.concat(n.call(arguments)))}}function A(e,n,o,i){n=n||function(){},o=o||function(){},i=i||function(){};var s=document,a=!1,l={},c=0,u=0,p='ontouchstart'in window,h={};function d(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.returnValue=!1}function f(t){if(a){if(r&&s.documentMode<9&&!t.button)return g();var o=t&&t.touches&&t.touches[0],i=o&&o.pageX||t.pageX,h=o&&o.pageY||t.pageY,f=Math.max(0,Math.min(i-l.left,u)),m=Math.max(0,Math.min(h-l.top,c));p&&d(t),n.apply(e,[f,m,t])}}function g(){a&&(t(s).unbind(h),t(s.body).removeClass('sp-dragging'),setTimeout((function(){i.apply(e,arguments)}),0)),a=!1}h['selectstart']=d,h['dragstart']=d,h['touchmove mousemove']=f,h['touchend mouseup']=g,t(e).bind('touchstart mousedown',(function(n){(n.which?3==n.which:2==n.button)||a||!1!==o.apply(e,arguments)&&(a=!0,c=t(e).height(),u=t(e).width(),l=t(e).offset(),t(s).bind(h),t(s.body).addClass('sp-dragging'),f(n),d(n))}))}function Q(){return t.fn.spectrum.inputTypeColorSupport()}function $(t,e,n){t=G(t,255),e=G(e,255),n=G(n,255);var o,i,r=m(t,e,n),s=g(t,e,n),a=(r+s)/2;if(r==s)o=i=0;else{var l=r-s;switch(i=a>.5?l/(2-r-s):l/(r+s),r){case t:o=(e-n)/l+(e<n?6:0);break;case e:o=(n-t)/l+2;break;case n:o=(t-e)/l+4}o/=6}return{h:o,s:i,l:a}}function j(t,e,n){t=G(t,255),e=G(e,255),n=G(n,255);var o,i,r=m(t,e,n),s=g(t,e,n),a=r,l=r-s;if(i=0===r?0:l/r,r==s)o=0;else{switch(r){case t:o=(e-n)/l+(e<n?6:0);break;case e:o=(n-t)/l+2;break;case n:o=(t-e)/l+4}o/=6}return{h:o,s:i,v:a}}function R(t,e,n,o){var i=[J(f(t).toString(16)),J(f(e).toString(16)),J(f(n).toString(16))];return o&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join('')}function M(t,e,n,o){var i;return[J((i=o,Math.round(255*parseFloat(i)).toString(16))),J(f(t).toString(16)),J(f(e).toString(16)),J(f(n).toString(16))].join('')}function V(t,e){e=0===e?0:e||10;var n=y(t).toHsl();return n.s-=e/100,n.s=H(n.s),y(n)}function Z(t,e){e=0===e?0:e||10;var n=y(t).toHsl();return n.s+=e/100,n.s=H(n.s),y(n)}function D(t){return y(t).desaturate(100)}function I(t,e){e=0===e?0:e||10;var n=y(t).toHsl();return n.l+=e/100,n.l=H(n.l),y(n)}function N(t,e){e=0===e?0:e||10;var n=y(t).toRgb();return n.r=m(0,g(255,n.r-f(255*(-e/100)))),n.g=m(0,g(255,n.g-f(255*(-e/100)))),n.b=m(0,g(255,n.b-f(255*(-e/100)))),y(n)}function W(t,e){e=0===e?0:e||10;var n=y(t).toHsl();return n.l-=e/100,n.l=H(n.l),y(n)}function X(t,e){var n=y(t).toHsl(),o=(f(n.h)+e)%360;return n.h=o<0?360+o:o,y(n)}function L(t){var e=y(t).toHsl();return e.h=(e.h+180)%360,y(e)}function z(t){var e=y(t).toHsl(),n=e.h;return[y(t),y({h:(n+120)%360,s:e.s,l:e.l}),y({h:(n+240)%360,s:e.s,l:e.l})]}function U(t){var e=y(t).toHsl(),n=e.h;return[y(t),y({h:(n+90)%360,s:e.s,l:e.l}),y({h:(n+180)%360,s:e.s,l:e.l}),y({h:(n+270)%360,s:e.s,l:e.l})]}function q(t){var e=y(t).toHsl(),n=e.h;return[y(t),y({h:(n+72)%360,s:e.s,l:e.l}),y({h:(n+216)%360,s:e.s,l:e.l})]}function Y(t,e,n){e=e||6,n=n||30;var o=y(t).toHsl(),i=360/n,r=[y(t)];for(o.h=(o.h-(i*e>>1)+720)%360;--e;)o.h=(o.h+i)%360,r.push(y(o));return r}function B(t,e){e=e||6;for(var n=y(t).toHsv(),o=n.h,i=n.s,r=n.v,s=[],a=1/e;e--;)s.push(y({h:o,s:i,v:r})),r=(r+a)%1;return s}function F(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function G(t,e){(function(t){return'string'==typeof t&&-1!=t.indexOf('.')&&1===parseFloat(t)})(t)&&(t='100%');var n=function(t){return'string'==typeof t&&-1!=t.indexOf('%')}(t);return t=g(e,m(0,parseFloat(t))),n&&(t=parseInt(t*e,10)/100),d.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function H(t){return g(1,m(0,t))}function K(t){return parseInt(t,16)}function J(t){return 1==t.length?'0'+t:''+t}function tt(t){return t<=1&&(t=100*t+'%'),t}function et(t){return K(t)/255}}var Fe=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ge=void 0&&(void 0).__assign||function(){return Ge=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Ge.apply(this,arguments)};s["default"]&&Be(s["default"]);var He=function(t){var e='name'===t.getFormat()&&t.toName(),n=1==t.getAlpha()?t.toHexString():t.toRgbString();return e||n.replace(/ /g,'')},Ke=function(e){function n(t,n){var o=e.call(this,t,n)||this;return o.type='text',o}return Fe(n,e),n.prototype.templateInput=function(){return''},Object.defineProperty(n.prototype,"inputValue",{get:function(){var t,e=null===(t=this.$input)||void 0===t?void 0:t.get(0);return(null==e?void 0:e.value)?e.value:this.target.value},set:function(t){var e,n=this.getColorEl();if(n){var o='none'!=t?t:'';n.spectrum('set',o);var i=n.spectrum('get'),r=o&&He(i);n.get(0).style.backgroundColor=o,this.noneColor='none'==t,this.movedColor=o;var s=null===(e=this.$input)||void 0===e?void 0:e.get(0);s&&(s.value=r)}},enumerable:!1,configurable:!0}),n.prototype.getInputEl=function(){if(!this.input){var t=this.target.value,e=this,n=(e.ppfx,e.target),o=e.type,i=e.paceholder;console.log(this.$el.get(0));var r=(0,s["default"])(document.createElement('div'));r.addClass(this.inputClass()),r.html(this.template());var a=i||n.value,l=(0,s["default"])("<input type=\"".concat(o,"\" placeholder=\"").concat(a,"\">"));r.find(".".concat(this.holderClass())).append(l);var c=this.getColorEl();return r.find('[data-colorp-c]').append(c),l.val(t),this.$input=l,r.get(0)}return this.input},n.prototype.template=function(){var t=this.ppfx;return"\n      <div class=\"".concat(this.holderClass(),"\"></div>\n      <div class=\"").concat(t,"field-colorp\">\n        <div class=\"").concat(t,"field-colorp-c\" data-colorp-c>\n          <div class=\"").concat(t,"checker-bg\"></div>\n        </div>\n      </div>\n    ")},n.prototype.inputClass=function(){var t=this.ppfx;return"".concat(t,"field ").concat(t,"field-color")},n.prototype.holderClass=function(){return"".concat(this.ppfx,"input-holder")},n.prototype.remove=function(){return e.prototype.remove.call(this),this.colorEl.spectrum('destroy'),this},n.prototype.setValue=function(e,n){void 0===n&&(n={});var o=this.model,i=(0,t.isUndefined)(n.def)?o.get('defaults'):n.def,r=(0,t.isUndefined)(e)?(0,t.isUndefined)(i)?'':i:e,s=this.getInputEl(),a=this.getColorEl(),l='none'!=r?r:'';s.value=r,a.get(0).style.backgroundColor=l,(n.fromTarget||n.fromInput&&!n.avoidStore)&&(a.spectrum('set',l),this.noneColor='none'==r,this.movedColor=l)},n.prototype.getColorEl=function(){var t=this;if(!this.colorEl){var e=this.em,n=this.colorPicker,o=this.ppfx,i=(0,s["default"])("<div class=\"".concat(this.ppfx,"field-color-picker\"></div>")),r=i.get(0).style,a=e&&e.config?e.config.el:'',l=e&&e.getConfig&&e.getConfig().colorPicker||{};this.movedColor='';var c,u=!1,p=function(e){t.inputValue=e};i.spectrum(Ge(Ge(Ge({color:this.target.value||!1,containerClassName:"".concat(o,"one-bg ").concat(o,"two-color"),appendTo:a||'body',maxSelectionSize:8,showPalette:!0,showAlpha:!0,chooseText:'Ok',cancelText:'⨯',palette:[]},l),n||{}),{move:function(e){var n=He(e);t.movedColor=n,r.backgroundColor=n,p(n)},change:function(e){u=!0;var n=He(e);r.backgroundColor=n,p(n),t.noneColor=!1},show:function(e){u=!1,t.movedColor='',c=He(e)},hide:function(){!u&&c&&(t.noneColor&&(c=''),r.backgroundColor=c,i.spectrum('set',c),p(c))}})),this.colorEl=i}return this.colorEl},n}(We.Z);const Je=Ke;var tn=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),en=function(e){function n(n,o){var i,r,s=e.call(this,n,o)||this;return s.type='number',(0,t.bindAll)(s,'moveIncrement','upIncrement'),s.step=null!==(i=null==o?void 0:o.step)&&void 0!==i?i:1,s.min=null==o?void 0:o.min,s.max=null==o?void 0:o.max,s.fixedValues=null!==(r=null==o?void 0:o.fixedValues)&&void 0!==r?r:[],s}return tn(n,e),n.prototype.events=function(){return{'change input':'handleChange','change select':'handleUnitChange','click [data-arrow-up]':'upArrowClick','click [data-arrow-down]':'downArrowClick','mousedown [data-arrows]':'downIncrement',keydown:'handleKeyDown'}},Object.defineProperty(n.prototype,"inputNumberValue",{get:function(){var t,e=null===(t=this.$input)||void 0===t?void 0:t.get(0);return(null==e?void 0:e.value)?parseFloat(e.value):this.target.value},set:function(t){var e,n=null===(e=this.$input)||void 0===e?void 0:e.get(0);n&&(n.value=t)},enumerable:!1,configurable:!0}),n.prototype.getInputEl=function(){var t=this,e=(t.ppfx,t.target),n=t.type,o=t.paceholder,i=this.target.value;console.log(this.$el.get(0));var r=(0,s["default"])(document.createElement('div'));r.addClass(this.inputClass()),r.html(this.template());var a=o||e.value,l=(0,s["default"])("<input type=\"".concat(n,"\" placeholder=\"").concat(a,"\">"));return r.find(".".concat("".concat(this.ppfx,"input-holder"))).append(l),console.log(r.get(0)),l.val(i),console.log(this.$el.get(0)),this.$input=l,r.get(0)},n.prototype.template=function(){var t=this.ppfx;return"\n        <span class=\"".concat(t,"input-holder\"></span>\n        <span class=\"").concat(t,"field-units\"></span>\n        <div class=\"").concat(t,"field-arrows\" data-arrows>\n          <div class=\"").concat(t,"field-arrow-u\" data-arrow-up></div>\n          <div class=\"").concat(t,"field-arrow-d\" data-arrow-down></div>\n        </div>\n      ")},n.prototype.inputClass=function(){var t=this.ppfx;return"".concat(t,"field-int")||0},n.prototype.setValue=function(t){var e=this.validateInputValue(t,{deepCheck:1});this.inputNumberValue=e,console.log('SetValue'+this.inputValue),this.target.value=this.inputValue},n.prototype.handleChange=function(t){t.stopPropagation(),this.setValue(this.inputNumberValue)},n.prototype.handleKeyDown=function(t){'ArrowUp'===t.key&&(t.preventDefault(),this.upArrowClick()),'ArrowDown'===t.key&&(t.preventDefault(),this.downArrowClick())},n.prototype.upArrowClick=function(){var t=this.step,e=this.inputNumberValue;this.setValue(this.normalizeValue(e+t))},n.prototype.downArrowClick=function(){var t=this.step,e=this.inputNumberValue;this.setValue(this.normalizeValue(e-t))},n.prototype.downIncrement=function(t){t.preventDefault(),console.log('downIncrement'),this.moved=!1,this.inputNumberValue=this.inputNumberValue||0;var e=this.normalizeValue(this.inputNumberValue);this.setValue(e),this.current={y:t.pageY,val:e},(0,yt.on)(document,'mousemove',this.moveIncrement),(0,yt.on)(document,'mouseup',this.upIncrement)},n.prototype.moveIncrement=function(t){this.moved=!0,console.log('moveIncrement');var e=this.step,n=this.current,o=this.normalizeValue(n.val+(n.y-t.pageY)*e),i=this.validateInputValue(o);return this.prValue=i,this.inputNumberValue=i,!1},n.prototype.upIncrement=function(){if(console.log('upIncrement'),(0,yt.S1)(document,'mouseup',this.upIncrement),(0,yt.S1)(document,'mousemove',this.moveIncrement),this.prValue&&this.moved){var t=this.prValue;this.setValue(t)}},n.prototype.normalizeValue=function(t,e){void 0===e&&(e=0);var n=this.step,o=0;if(isNaN(t))return e;if(t=parseFloat(t),Math.floor(t)!==t){var i=n.toString().split('.')[1];o=i?i.length:0}return o?parseFloat(t.toFixed(o)):t},n.prototype.validateInputValue=function(e,n){void 0===n&&(n={});var o=this,i=o.min,r=o.max,s=o.fixedValues,a=n||{},l='',c=(0,t.isUndefined)(e)?l:e;if(a.deepCheck&&c){var u=new RegExp('^'+s.join('|'),'g');s.length&&u.test(c)?c=c.match(u)[0]:(c+='',c=parseFloat(c.replace(',','.')),c=isNaN(c)?l:c)}return(0,t.isUndefined)(r)||(c=c>r?r:c),(0,t.isUndefined)(i)||(c=c<i?i:c),c},n}(We.Z),nn=function(t){function e(e,n){return t.call(this,e,n)||this}return tn(e,t),Object.defineProperty(e.prototype,"inputValue",{get:function(){return this.inputNumberValue},set:function(t){this.inputNumberValue=t},enumerable:!1,configurable:!0}),e}(en),on=function(e){function n(t,n){var o=e.call(this,t,n)||this;return o.units=n.units,o}return tn(n,e),Object.defineProperty(n.prototype,"inputValue",{get:function(){var t=this.inputUnitValue;return''===this.inputNumberValue&&(t=''),this.inputNumberValue+t},set:function(t){var e=t+'',n=e.match(/^\d*\.?\d*/),o=n?n[0]:'';this.inputNumberValue=parseFloat(o);var i=e.slice(o.length);this.inputUnitValue=i},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"inputUnitValue",{get:function(){var t,e=this.units,n=this.unitEl;return null!==(t=null==n?void 0:n.value)&&void 0!==t?t:e.length&&e[0]||''},set:function(e){var n=this.unitEl,o=this.units,i='';(0,t.indexOf)(o,e)>=0&&(i=e),n&&(n.value=i)},enumerable:!1,configurable:!0}),n.prototype.getInputEl=function(){var t=e.prototype.getInputEl.call(this);this.unitEl=void 0;var n=this.getUnitEl();return n&&(0,s["default"])(t).find(".".concat(this.ppfx,"field-units")).get(0).appendChild(n),t},n.prototype.handleUnitChange=function(t){t.stopPropagation(),console.log('Unit changed'),this.target.value=this.inputValue},n.prototype.getUnitEl=function(){var t=this;if(!this.unitEl){var e=this.units;if(e.length){var n=['<option value="" disabled hidden>-</option>'];e.forEach((function(e){var o=e==t.inputUnitValue?'selected':'';n.push("<option ".concat(o,">").concat(e,"</option>"))}));var o=document.createElement('div');o.innerHTML="<select class=\"".concat(this.ppfx,"input-unit\">").concat(n.join(''),"</select>"),this.unitEl=o.firstChild}}return this.unitEl},n}(en),rn=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),sn=function(e){function n(t,n){var o=e.call(this,t,n)||this;return o.type='select',o.options=n.options,o}return rn(n,e),n.prototype.getInputElem=function(){var t=this.input,e=this.$input;return t||e&&e.get&&e.get(0)||this.getElInput()},Object.defineProperty(n.prototype,"inputValue",{get:function(){var t,e=this.getInputElem();return console.log('Text input value '+(null==e?void 0:e.value)),null!==(t=null==e?void 0:e.value)&&void 0!==t?t:this.target.value},set:function(t){console.log('Text input value '+t);var e=this.getInputElem();e&&(e.value=t)},enumerable:!1,configurable:!0}),n.prototype.templateInput=function(){var t=this.ppfx,e=this.clsField;return"<div class=\"".concat(e,"\">\n      <div data-input></div>\n      <div class=\"").concat(t,"sel-arrow\">\n        <div class=\"").concat(t,"d-s-arrow\"></div>\n      </div>\n    </div>")},n.prototype.getInputEl=function(){var e=this;if(!this.$input){var n=this,o=(n.name,n.options),i=n.em,r=[],a='<select>',l=(0,t.isFunction)(o)?o(i):o;console.log('setValueValOptions',l),l.forEach((function(n){var o,s,l,c='';(0,t.isString)(n)?(o=n,s=n):(o=n.name||n.value,s="".concat((0,t.isUndefined)(n.value)?n.name:n.value).replace(/"/g,'&quot;'),c+=(l=n.style?n.style.replace(/"/g,'&quot;'):'')?" style=\"".concat(l,"\""):'');var u=i.t("traitManager.traits.options.".concat(o,".").concat(s))||o;console.log("Try fix select",s,e.target,e.target.value),a+="<option value=\"".concat(s,"\"").concat(c,">").concat(u,"</option>"),r.push(s)})),a+='</select>',this.$input=(0,s["default"])(a);var c=this.target.value,u=r.indexOf(c)>=0?c:'';!(0,t.isUndefined)(u)&&this.$input.val(u)}return this.$input.get(0)},n}(We.Z);const an=sn;var ln=__webpack_require__(6489),cn=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),un=void 0&&(void 0).__assign||function(){return un=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},un.apply(this,arguments)},pn=function(t){function e(e,n){var o=t.call(this,e,un({},n))||this;return o.type='list',o.templates=n.traits,console.log("Tryed to select Object",o.templates),o}return cn(e,t),Object.defineProperty(e.prototype,"items",{get:function(){var t;return null!==(t=this._items)&&void 0!==t?t:[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"children",{get:function(){return this.target.children},enumerable:!1,configurable:!0}),e.prototype.onUpdateEvent=function(t,e){console.log('aaa','onUpdateEvent'),console.log('aaa',this.target.children),e&&(this._items=void 0,this.render())},e.prototype.onItemRender=function(t){console.log('setValueFromModellsadkfj;lkasdj;flk',t),this.render()},e.prototype.renderItems=function(t){var e;this._items||(console.log('important',t,this.target,null===(e=this.target)||void 0===e?void 0:e.children),this._items=(null!=t?t:this.children).map((function(t){return console.log('///TraitView/////',t),Qn.buildView(t,t.em,un({},t.opts)).render()})))},e.prototype.render=function(e){return this.renderItems(e),console.log('important',this.items,e),this.renderTraits(this.items),t.prototype.render.call(this),this},e}(ln.Z);const hn=pn;var dn=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),fn=void 0&&(void 0).__assign||function(){return fn=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},fn.apply(this,arguments)},gn=function(t){function e(e,n){var o=t.call(this,e,fn({},n))||this;return o.type='object',o.className="".concat(o.pfx,"traits"),o}return dn(e,t),e.prototype.renderTraits=function(t){var e,n,o=this,i=o.ppfx,r=o.className,s=(o.getLabelText,document.createDocumentFragment()),a=0;return t.forEach((function(t){var e,o,i,r=null!==(e=t.target.opts.width&&parseInt(t.target.opts.width))&&void 0!==e?e:100;if(a+=r,r<100){var l=document.createElement('div');l.style.width="".concat(r,"%"),l.style.display='inline-block',l.append(t.$el.get(0)),i=l}else i=t.$el.get(0);a>100?(n&&s.appendChild(n),100==r?(s.appendChild(i),n=void 0,a=0):(a=r,(n=document.createElement('div')).append(i))):100==a?(s.appendChild(null!==(o=(null==n?void 0:n.append(i))||n)&&void 0!==o?o:i),a=0):a<100&&(n||(n=document.createElement('div')),n.append(i))})),n&&s.append(n),console.log('setValueFromModel5',s.childElementCount),this.$el.empty().append(s),this.$el.addClass("".concat(r," ").concat(i,"one-bg ").concat(i,"two-color")),console.log('setValueinitChildren',this.target),console.log('setValueFromModel5',this.$el.get(0)),console.log('setValueFromModel5',this.el,t,null===(e=this.target)||void 0===e?void 0:e.children),this},e}(hn);const mn=gn;var vn=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),yn=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.type='text',o}return vn(e,t),e.prototype.getInputElem=function(){var t=this.input,e=this.$input;return t||e&&e.get&&e.get(0)||this.getElInput()},Object.defineProperty(e.prototype,"inputValue",{get:function(){var t,e=this.getInputElem();return null!==(t=null==e?void 0:e.value)&&void 0!==t?t:this.target.value},set:function(t){var e=this.getInputElem();e&&(e.value=t)},enumerable:!1,configurable:!0}),e}(We.Z);const _n=yn;var On=__webpack_require__(1962),bn=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),wn=void 0&&(void 0).__assign||function(){return wn=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},wn.apply(this,arguments)},xn=function(e){function n(t,n){var o=e.call(this,t,wn({},n))||this;return o.type='list',o.templates=n.traits,o.title=n.title,o}return bn(n,e),n.prototype.events=function(){return{'click [addButton]':this.addItem,'click [removeButton]':this.removeItem,'click [data-item-title]':this.select}},n.prototype.select=function(e){var n,o,i;null==e||e.stopPropagation(),null==e||e.preventDefault();this.model;var r=this.ppfx;if(null===(n=this.itemsEl)||void 0===n||n.children().each((function(t,e){var n;null===(n=(0,s["default"])(e).find('.data-item'))||void 0===n||n.css({display:'none'})})),!(0,t.isUndefined)(e)){var a=(0,s["default"])(e.target).closest(".".concat(r,"item-title")).parent();console.log("aaaa",a.index()),this.selectedIndex=a.index()}if(console.log("aaaaIndex",this.selectedIndex),!(0,t.isUndefined)(this.selectedIndex)){var l=null===(o=this.itemsEl)||void 0===o?void 0:o.children()[this.selectedIndex];console.log("aaaaEl",l),null===(i=(0,s["default"])(l).find('.data-item'))||void 0===i||i.css({display:''})}},Object.defineProperty(n.prototype,"children",{get:function(){return this.target.children},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"editable",{get:function(){var t;return null===(t=this.target.opts.editable)||void 0===t||t},enumerable:!1,configurable:!0}),n.prototype.onUpdateEvent=function(t,e){console.log('aaa','onUpdateEvent'),console.log('aaa',this.target.children),e&&this.render()},n.prototype.addItem=function(t){null==t||t.stopPropagation(),t.preventDefault(),this.selectedIndex=this.target.children.length,this.target.add()},n.prototype.removeItem=function(t){null==t||t.stopPropagation(),t.preventDefault(),this.selectedIndex&&this.target.remove(this.selectedIndex),this.selectedIndex=void 0},n.prototype.renderToolbar=function(){if(!this.toolbarEl){document.createElement('div').append(document.createElement('button'));this.toolbarEl=(0,s["default"])("<div class=\"\">\n      <button addButton> Add </button>\n      <button removeButton> Remove </button>\n    </div>").get(0)}return this.toolbarEl},n.prototype.onItemRender=function(t){},n.prototype.renderItem=function(t){var e=this,n=e.em,o=e.ppfx,i=e.title,r=null==n?void 0:n.getConfig().icons,a=(null==r?void 0:r.caret)||'',l=Qn.buildView(t,n,wn(wn({},t.opts),{noLabel:!0})).render();l.on('all',this.onItemRender,this);var c=document.createElement('div');console.log(t);var u=i?t.value[i]:t.name;c.innerHTML="\n    <div class=\"".concat(o,"item-title\" data-item-title>\n        <div class=\"").concat(o,"caret\">").concat(a,"</div>\n        <div class=\"").concat(o,"label\">").concat(u,"</div>\n    </div>\n    "),console.log(c);var p=document.createElement('div');return p.className='data-item',p.setAttribute('item-id',t.name),p.append(l.el),console.log(c),c.append(p),(0,s["default"])(c)},n.prototype.renderItems=function(){var t=this,e=this.ppfx,n=this.type,o=document.createElement('div');return this.children.forEach((function(e){return o.appendChild(t.renderItem(e).get(0))})),console.log(this.itemsEl),o.className="".concat(e,"field-").concat(n,"-items"),(0,s["default"])(o)},n.prototype.render=function(){var t=this,e=(t.$el,t.pfx),n=t.ppfx,o=(t.name,t.type),i=(t.className,this.hasLabel()),r="".concat(e,"trait");console.log('aaa','render'),this.$el.empty(),this.itemsEl=this.renderItems();var s="<div class=\"".concat(r," ").concat(r,"--").concat(o,"\">\n    ").concat(i?"<div class=\"".concat(n,"label\" data-label></div>"):'',"\n    <div class=\"").concat(n,"field-wrp ").concat(n,"field-wrp--").concat(o," gjs-trt-trait--full\" data-input>\n\n    </div>\n  </div>");this.$el.html(s);var a=this.$el.find('[data-input]');return this.editable&&a.append(this.renderToolbar()),a.append(this.itemsEl.get(0)),this.select(),this},n}(ln.Z);const Sn=xn;var kn=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Pn=void 0&&(void 0).__assign||function(){return Pn=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Pn.apply(this,arguments)},Cn=function(e){function n(t,n){var o=e.call(this,t,Pn({},n))||this;return o.templates=n.traits,o}return kn(n,e),n.prototype.events=function(){return{'click [addButton]':this.addItem,'click [removeButton]':this.removeItem,'click [data-item-title]':this.select}},n.prototype.select=function(e){var n;null==e||e.stopPropagation(),null==e||e.preventDefault();var o=this,i=(o.model,o.ppfx),r=o.selectedEl;if(null===(n=this.itemsEl)||void 0===n||n.forEach((function(t){t.find('.data-item').get(0).style.display='none'})),console.log("Tryed to select",e,r),(0,t.isUndefined)(e))(0,t.isUndefined)(r)||(r.get(0).style.display='');else{var a=(0,s["default"])(e.target).closest(".".concat(i,"item-title")).parent().find('.data-item');console.log("Tryed to select",a),this.selectedEl=a,a.get(0).style.display='',console.log("Tryed to select",a.get(0).style)}},Object.defineProperty(n.prototype,"editable",{get:function(){var t;return null===(t=this.target.opts.editable)||void 0===t||t},enumerable:!1,configurable:!0}),n.prototype.addItem=function(t){null==t||t.stopPropagation(),t.preventDefault();var e=this.$el.find('[variableName]').val();this.target.add(e)},n.prototype.removeItem=function(t){var e;null==t||t.stopPropagation(),t.preventDefault();this.target.value;var n=null===(e=this.selectedEl)||void 0===e?void 0:e.attr('item-id');this.target.remove(n)},n.prototype.renderToolbar=function(){if(!this.toolbarEl){document.createElement('div').append(document.createElement('button'));this.toolbarEl=(0,s["default"])("<div class=\"\">\n      <input type=\"$text\" variableName/>\n      <button addButton> Add </button>\n      <button removeButton> Remove </button>\n    </div>").get(0)}return this.toolbarEl},n.prototype.renderItem=function(t){var e=this.em,n=this.ppfx,o=null==e?void 0:e.getConfig().icons,i=(null==o?void 0:o.caret)||'',r=document.createElement('div'),a=t.target.name;r.innerHTML="\n    <div class=\"".concat(n,"item-title\" data-item-title>\n        <div class=\"").concat(n,"caret\">").concat(i,"</div>\n        <div class=\"").concat(n,"label\">").concat(a,"</div>\n    </div>\n    "),console.log(r);var l=document.createElement('div');l.className='data-item',l.setAttribute('item-id',t.target.name),(0,s["default"])(l).append(t.el),console.log("Tryed to selectView",t),console.log(r);var c=(0,s["default"])(r);return c.append(l),c},n.prototype.renderTraits=function(t){var e,n=this,o=this,i=(o.$el,o.pfx),r=o.ppfx,s=(o.name,o.type),a=(o.className,this.hasLabel()),l="".concat(i,"trait"),c=document.createDocumentFragment();console.log('Tryed to selectaaa',t),this.$el.empty(),this.itemsEl=t.map((function(t){return n.renderItem(t)})),null===(e=this.itemsEl)||void 0===e||e.forEach((function(t){return c.appendChild(t.get(0))})),console.log(this.itemsEl);var u=document.createElement('div');u.className="".concat(r,"field-").concat(s,"-items"),u.append(c);var p="<div class=\"".concat(l," ").concat(l,"--").concat(s,"\">\n    ").concat(a?"<div class=\"".concat(r,"label\" data-label></div>"):'',"\n    <div class=\"").concat(r,"field-wrp ").concat(r,"field-wrp--").concat(s," gjs-trt-trait--full\" data-input>\n\n    </div>\n  </div>");this.$el.empty().append(p);var h=this.$el.find('[data-input]');this.editable&&h.append(this.renderToolbar()),h.append(u),this.select()},n}(hn);const Tn=Cn;var En=void 0&&(void 0).__assign||function(){return En=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},En.apply(this,arguments)},An=(void 0&&(void 0).__spreadArray,function(){function t(){}return t.build=function(t,e){return Gt.Z.build(t,e)},t.buildView=function(t,e,n){var o,i,r=En({},n);return i=null!==(o=t.viewType)&&void 0!==o?o:null==n?void 0:n.type,r=n,new(this.getView(i,r))(e,n).setTarget(t)},t.getView=function(t,e){switch(t){case'text':default:return _n;case'number':return e.units?on:nn;case'select':return an;case'checkbox':return Ye;case'color':return Je;case'button':return ze;case'object':return mn;case'list':return Sn;case'unique-list':return Tn;case'function':return On.Z}},t}());const Qn=An;var $n=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),jn=void 0&&(void 0).__assign||function(){return jn=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},jn.apply(this,arguments)},Rn=void 0&&(void 0).__rest||function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(t);i<o.length;i++)e.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(t,o[i])&&(n[o[i]]=t[o[i]])}return n},Mn=void 0&&(void 0).__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))},Vn=function(t){return!!(null==t?void 0:t.getConfig().avoidInlineStyle)},Zn='component:drag',Dn='__symbols',In='__symbol',Nn='__symbol_ovrd',Wn='component:update',Xn="".concat(Wn,"-inside"),Ln=function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return $n(o,n),Object.defineProperty(o.prototype,"defaults",{get:function(){var t;return(t={tagName:'div',type:'',name:'',removable:!0,draggable:!0,droppable:!0,badgable:!0,stylable:!0,'stylable-require':'','style-signature':'',unstylable:'',highlightable:!0,copyable:!0,resizable:!1,editable:!1,layerable:!0,selectable:!0,hoverable:!0,void:!1,state:'',status:'',content:'',icon:'',style:'',styles:'',classes:'',script:{main:function(t){t.signals.onload({test:"azta",data:"easy"}),console.log("asdfasdfasdfasdfasdfsadfasdf",t.props.testRef)},signals:{onload:{optType:{type:'list'},params:{object:{type:'string'}}},onloadObject:{optType:{type:'object'},params:{object:{type:'string'}}}},slots:{testList:{script:function(t){return console.log(t),function(t){console.log(t),alert(JSON.stringify(t.data))}},params:{list:{type:'string'}}},testObject:{script:function(t){return console.log(t),function(t){console.log(t),alert(JSON.stringify(t.data))}},params:{object:{type:'string'}}}}},'script-props':[],'script-events':[],'script-global':[],'script-export':'',usersAjax:function(){},list:[{},{}],attributes:{},traits:['id','title'],propagate:'',dmode:'',toolbar:null,delegate:null})[In]=0,t[Dn]=0,t[Nn]=0,t._undo=!0,t._undoexc=['status','open'],t},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"classes",{get:function(){return this.get('classes')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"traits",{get:function(){var t;return null!==(t=this.get('traits'))&&void 0!==t?t:[]},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"slots",{get:function(){var t,e;return null!==(e=null===(t=this.scriptSubComp)||void 0===t?void 0:t.slots)&&void 0!==e?e:{}},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"content",{get:function(){var t;return null!==(t=this.get('content'))&&void 0!==t?t:''},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"toolbar",{get:function(){return this.get('toolbar')||[]},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"resizable",{get:function(){return this.get('resizable')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"delegate",{get:function(){return this.get('delegate')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"locked",{get:function(){return this.get('locked')},enumerable:!1,configurable:!0}),o.prototype.init=function(){},o.prototype.updated=function(t,e,n){},o.prototype.removed=function(){},o.prototype.initialize=function(e,n){var i=this;void 0===e&&(e={}),void 0===n&&(n={}),(0,t.bindAll)(this,'__upSymbProps','__upSymbCls','__upSymbComps');var r=n.em,s=this.parent(),a=null==s?void 0:s.attributes,l=this.get('propagate');if(l&&this.set('propagate',(0,t.isArray)(l)?l:[l]),a&&a.propagate&&!l){var c={},u=a.propagate;u.forEach((function(t){return c[t]=s.get(t)})),c.propagate=u,this.set(jn(jn({},c),e))}if(n&&n.config&&n.config.voidElements.indexOf(this.get('tagName'))>=0&&this.set('void',!0),n.em=r,this.opt=n,this.em=r,this.frame=n.frame,this.config=n.config||{},this.set('attributes',jn(jn({},(0,t.result)(this,'defaults').attributes||{}),this.get('attributes')||{})),this.ccid=o.createId(this,n),this.initClasses(),this.initComponents(),this.initTraits(),this.initToolbar(),this.initScript(),this.listenTo(this,'change:script',this.initScript),this.listenTo(this,'change:tagName',this.tagUpdated),this.listenTo(this,'change:attributes',this.attrUpdated),this.listenTo(this,'change:attributes:id',this._idUpdated),this.on('change:toolbar',this.__emitUpdateTlb),this.on('change',this.__onChange),this.on(Xn,this.__propToParent),this.set('status',''),this.views=[],['classes','components'].forEach((function(t){var e="add remove ".concat('components'!==t?'change':'');i.listenTo(i.get(t),e.trim(),(function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return i.emitUpdate.apply(i,Mn([t],e,!1))}))})),!n.temporary){var p=r&&r.Css,h=this.attributes,d=h.styles,f=h.type;d&&p&&p.addCollection(d,{avoidUpdateStyle:!0},{group:"cmp:".concat(f)}),this.__postAdd(),this.init(),this.__isSymbolOrInst()&&this.__initSymb(),r&&r.trigger('component:create',this)}},o.prototype.__postAdd=function(t){void 0===t&&(t={});var e=this.em,n=null==e?void 0:e.UndoManager,o=this.components();n&&!this.__hasUm&&(n.add(o),n.add(this.getSelectors()),this.__hasUm=!0),t.recursive&&o.map((function(e){return e.__postAdd(t)}))},o.prototype.__postRemove=function(){var t=this.em,e=null==t?void 0:t.get('UndoManager');e&&(e.remove(this.components()),e.remove(this.getSelectors()),delete this.__hasUm)},o.prototype.__onChange=function(n,o){var i=this,r=this.changedAttributes()||{};(0,t.keys)(r).forEach((function(t){return i.emitUpdate(t)})),['status','open','toolbar','traits'].forEach((function(t){return delete r[t]})),(0,e.isEmptyObj)(r)||(this.__changesUp(o),this.__propSelfToParent({component:this,changed:r,options:o}))},o.prototype.__onStyleChange=function(e){var n=this,o=this.em;if(o){var i='component:styleUpdate',r=(0,t.keys)(e),s={style:e};o.trigger(i,this,s),r.forEach((function(t){return o.trigger("".concat(i,":").concat(t),n,s)}))}},o.prototype.__changesUp=function(t){var e=this.em;[this.frame,e].forEach((function(e){return e&&e.changesUp(t)}))},o.prototype.__propSelfToParent=function(t){this.trigger(Wn,t),this.__propToParent(t)},o.prototype.__propToParent=function(t){var e=this.parent();e&&e.trigger(Xn,t)},o.prototype.__emitUpdateTlb=function(){this.emitUpdate('toolbar')},o.prototype.is=function(t){return!(this.get('type')!=t)},o.prototype.props=function(){return this.attributes},o.prototype.index=function(){var t=this.collection;return t?t.indexOf(this):0},o.prototype.setDragMode=function(t){return this.set('dmode',t)},o.prototype.getDragMode=function(){return this.get('dmode')||''},o.prototype.find=function(t){var e,n=[],o=null===(e=this.view)||void 0===e?void 0:e.$el.find(t);return null==o||o.each((function(t){var e=o.eq(t).data('model');e&&n.push(e)})),n},o.prototype.findType=function(t){var e=[],n=function(o){return o.forEach((function(o){o.is(t)&&e.push(o),n(o.components())}))};return n(this.components()),e},o.prototype.closest=function(t){var e,n=null===(e=this.view)||void 0===e?void 0:e.$el.closest(t);return(null==n?void 0:n.length)?n.data('model'):void 0},o.prototype.closestType=function(t){for(var e=this.parent();e&&!e.is(t);)e=e.parent();return e},o.prototype.contains=function(t){var e=!1;if(!t)return e;var n=function(o){!e&&o.forEach((function(o){o===t&&(e=!0),!e&&n(o.components())}))};return n(this.components()),e},o.prototype.tagUpdated=function(){this.trigger('rerender')},o.prototype.replaceWith=function(e,n){void 0===n&&(n={});var o=this.collection,i=o.indexOf(this);o.remove(this);var r=o.add(e,jn(jn({},n),{at:i}));return(0,t.isArray)(r)?r:[r]},o.prototype.attrUpdated=function(n,o,i){var r=this;void 0===i&&(i={});var s=this.get('attributes'),a=s.class;a&&this.setClass(a),delete s.class;var l=s.style;l&&this.setStyle(l),delete s.style;var c=jn({},this.previous('attributes')),u=(0,e.shallowDiff)(c,this.get('attributes'));(0,t.keys)(u).forEach((function(t){return r.trigger("change:attributes:".concat(t),r,u[t],i)}))},o.prototype.setAttributes=function(t,e){return void 0===e&&(e={}),this.set('attributes',jn({},t),e),this},o.prototype.addAttributes=function(t,e){return void 0===e&&(e={}),this.setAttributes(jn(jn({},this.getAttributes({noClass:!0})),t),e)},o.prototype.removeAttributes=function(t,e){void 0===t&&(t=[]),void 0===e&&(e={});var n=Array.isArray(t)?t:[t],o=this.getAttributes();return n.map((function(t){return delete o[t]})),this.setAttributes(o,e)},o.prototype.getStyle=function(e,o){void 0===e&&(e={}),void 0===o&&(o={});var i=this.em,r=(0,t.isString)(e)?e:'',s=r?o:e;if(Vn(i)&&!s.inline){var a=i.get('state'),l=i.Css.getIdRule(this.getId(),jn({state:a},s));if(this.rule=l,l)return l.getStyle(r)}return n.prototype.getStyle.call(this,r)},o.prototype.setStyle=function(o,i){var r=this;void 0===o&&(o={}),void 0===i&&(i={});var s=this.opt,a=this.em;if(!Vn(a)||s.temporary||i.inline)o=n.prototype.setStyle.apply(this,arguments);else{var l=this.get('style')||{};o=(0,t.isString)(o)?this.parseStyle(o):o,o=jn(jn({},o),l);var c=a.get('state'),u=a.Css,p=this.getStyle(i);this.rule=u.setIdRule(this.getId(),o,jn({state:c},i));var h=(0,e.shallowDiff)(p,o);this.set('style','',{silent:!0}),(0,t.keys)(h).forEach((function(t){return r.trigger("change:style:".concat(t))}))}return s.temporary||this.__onStyleChange(i.addStyle||o),o},o.prototype.getAttributes=function(n){void 0===n&&(n={});var o=this.em,i=[],r=jn({},this.get('attributes')),s=null==o?void 0:o.Selectors,a=this.getId();if(n.noClass?delete r.class:(this.classes.forEach((function(e){return i.push((0,t.isString)(e)?e:e.getName())})),i.length&&(r.class=i.join(' '))),!n.noStyle){var l=this.get('style');(0,e.isObject)(l)&&!(0,e.isEmptyObj)(l)&&(r.style=this.styleToString({inline:1}))}if(!(0,t.has)(r,'id')){var c=!1;!Vn(o)&&(0,t.isEmpty)(this.getStyle())||(c=!!(null==s?void 0:s.get(a,s.Selector.TYPE_ID))),(this.__getSymbol()||this.__getSymbols()||this.scriptSubComp)&&(c=!0),c&&(r.id=a)}return r},o.prototype.addClass=function(t){var e=this.em.Selectors.addClass(t);return this.classes.add(e)},o.prototype.setClass=function(t){return this.classes.reset(),this.addClass(t)},o.prototype.removeClass=function(e){var n=[];e=(0,t.isArray)(e)?e:[e];var o=this.classes,i=Ve.Z.TYPE_CLASS;return e.forEach((function(t){t.split(' ').forEach((function(t){var e=o.where({name:t,type:i})[0];e&&n.push(o.remove(e))}))})),n},o.prototype.getClasses=function(){var t=this.getAttributes().class;return t?t.split(' '):[]},o.prototype.__logSymbol=function(t,e,n){void 0===n&&(n={});var o=this.__getSymbol(),i=this.__getSymbols();(o||i)&&this.em.log(t,{model:this,toUp:e,context:'symbols',opts:n})},o.prototype.__initSymb=function(){this.__symbReady||(this.on('change',this.__upSymbProps),this.__symbReady=!0)},o.prototype.__isSymbol=function(){return(0,t.isArray)(this.get(Dn))},o.prototype.__isSymbolOrInst=function(){return!(!this.__isSymbol()&&!this.get(In))},o.prototype.__isSymbolTop=function(){var t=this.parent();return this.__isSymbolOrInst()&&(!t||t&&!t.__isSymbol()&&!t.__getSymbol())},o.prototype.__isSymbolNested=function(){if(!this.__isSymbolOrInst()||this.__isSymbolTop())return!1;var t=(this.__isSymbol()?this:this.__getSymbol()).__getSymbTop(),e=this.__getSymbTop();return(e.__isSymbol()?e:e.__getSymbol())!==t},o.prototype.__getAllById=function(){var t=this.em;return t?t.Components.allById():{}},o.prototype.__getSymbol=function(){var e=this.get(In);if(e&&(0,t.isString)(e)){var n=this.__getAllById()[e];n?(e=n,this.set(In,n)):e=0}return e},o.prototype.__getSymbols=function(){var e=this,n=this.get(Dn);return n&&(0,t.isArray)(n)&&(n.forEach((function(o,i){o&&(0,t.isString)(o)&&(n[i]=e.__getAllById()[o])})),n=n.filter((function(e){return e&&!(0,t.isString)(e)}))),n},o.prototype.__isSymbOvrd=function(e){void 0===e&&(e='');var n=this.get(Nn),o=e.split(':')[0],i=e!==o?[e,o]:[e];return!0===n||(0,t.isArray)(n)&&i.some((function(t){return n.indexOf(t)>=0}))},o.prototype.__getSymbToUp=function(t){var e=this;void 0===t&&(t={});var n=[],o=t.changed;if(t.fromInstance||t.noPropagate||t.fromUndo||o&&this.__isSymbOvrd(o))return n;var i=this.__getSymbols()||[],r=this.__getSymbol();return n=(r?Mn([r],r.__getSymbols()||[],!0):i).filter((function(t){return t!==e})).filter((function(t){return!(o&&t.__isSymbOvrd(o))}))},o.prototype.__getSymbTop=function(t){for(var e=this,n=this.parent(t);n&&(n.__isSymbol()||n.__getSymbol());)e=n,n=n.parent(t);return e},o.prototype.__upSymbProps=function(n,o){var i=this;void 0===o&&(o={});var r=this.changedAttributes()||{},s=r.attributes||{};if(delete r.status,delete r.open,delete r[Dn],delete r[In],delete r[Nn],delete r.attributes,delete s.id,(0,e.isEmptyObj)(s)||(r.attributes=s),!(0,e.isEmptyObj)(r)){var a=this.__getSymbToUp(o);(0,t.keys)(r).map((function(t){i.__isSymbOvrd(t)&&delete r[t]})),this.__logSymbol('props',a,{opts:o,changed:r}),a.forEach((function(e){var n=jn({},r);(0,t.keys)(n).map((function(t){e.__isSymbOvrd(t)&&delete n[t]})),e.set(n,jn({fromInstance:i},o))}))}},o.prototype.__upSymbCls=function(t,e,n){var o=this;void 0===n&&(n={});var i=this.__getSymbToUp(n);this.__logSymbol('classes',i,{opts:n}),i.forEach((function(t){t.set('classes',o.get('classes'),{fromInstance:o})})),this.__changesUp(n)},o.prototype.__upSymbComps=function(t,e,n){var o=this,i=n||e||{},r={fromInstance:i.fromInstance,fromUndo:i.fromUndo},s=t.opt.temporary;if(n)if(n.add){var a=[],l=!!this.__getSymbols();if((v=this.__getSymbToUp(jn(jn({},r),{changed:'components:add'}))).length){var c=t.__getSymbol();a=(c?c.__getSymbols():t.__getSymbols())||[],(a=Mn([],a,!0)).push(c||t)}!s&&this.__logSymbol('add',v,{opts:n,addedInstances:a.map((function(t){return t.cid})),added:t.cid}),v.forEach((function(e){var i=e.__getSymbTop(),r=a.filter((function(t){var e=t.__getSymbTop({prev:1});return i&&e&&e===i}))[0]||t.clone({symbol:!0,symbolInv:l});e.append(r,jn({fromInstance:o},n))}))}else{var u=t.__getSymbol();if(u&&!n.temporary&&u.set(Dn,u.__getSymbols().filter((function(e){return e!==t}))),!t.__isSymbolTop()){var p='components:remove',h=n.index,d=t.parent(),f=jn({fromInstance:t},n),g=t.__isSymbolNested(),m=function(t){var e=t.parent();e&&!e.__isSymbOvrd(p)&&t.remove(f)};v=(null==d?void 0:d.__isSymbOvrd(p))?[]:t.__getSymbToUp(r);g&&(v=null==d?void 0:d.__getSymbToUp(jn(jn({},r),{changed:p})),m=function(t){var e=t.components().at(h);e&&e.remove(jn({fromInstance:d},f))}),!s&&this.__logSymbol('remove',v,{opts:n,removed:t.cid,isSymbNested:g}),v.forEach(m)}}else{var v=this.__getSymbToUp(jn(jn({},r),{changed:'components:reset'})),y=t.models;this.__logSymbol('reset',v,{components:y}),v.forEach((function(t){var n=y.map((function(t){return t.clone({symbol:!0})}));t.components().reset(n,jn({fromInstance:o},e))}))}this.__changesUp(i)},o.prototype.initClasses=function(e,n,o){void 0===o&&(o={});var i=this.get('attributes')||{},r=i.class,s=Rn(i,["class"]),a=[this,'change:classes',this.initClasses],l=this.get('classes')||r||[],c=(0,t.isString)(l)?l.split(' '):l;this.stopListening.apply(this,a);var u=this.normalizeClasses(c),p=new Ne([]);return this.set('classes',p,o),p.add(u),p.on('add remove reset',this.__upSymbCls),r&&u.length&&this.set('attributes',s),this.listenTo.apply(this,a),this},o.prototype.initComponents=function(){var e=[this,'change:components',this.initComponents];this.stopListening.apply(this,e);var n=new Me([],this.opt);n.parent=this;var o=this.get('components'),i=!this.opt.avoidChildren;return this.set('components',n),i&&o&&n.add((0,t.isFunction)(o)?o(this):o,this.opt),n.on('add remove reset',this.__upSymbComps),this.listenTo.apply(this,e),this},o.prototype.initTraits=function(t){var e=this.em,n='change:traits';return this.off(n,this.initTraits),this.__loadTraits(),this.on(n,this.initTraits),t&&e&&e.trigger('component:toggled'),this},o.prototype.initScript=function(){var e,n,o;if(!this.opt.temporary&&!this.scriptSubComp){var i=this.get('script-export')||this.get('script');i&&(((0,t.isString)(i)||(0,t.isFunction)(i))&&(i={main:i,props:null!==(e=this.get('script-props'))&&void 0!==e?e:[],signals:{},slots:{},variables:{}}),i.props=null!==(o=null!==(n=i.props)&&void 0!==n?n:this.get('script-props'))&&void 0!==o?o:[],this.scriptSubComp=new re(this,i))}},o.prototype.append=function(e,n){void 0===n&&(n={});var o=((0,t.isArray)(e)?Mn([],e,!0):[e]).map((function(e){return(0,t.isString)(e)||e.collection&&e.collection.remove(e,{temporary:!0}),e})),i=this.components().add(o,n);return(0,t.isArray)(i)?i:[i]},o.prototype.components=function(e,n){void 0===n&&(n={});var o=this.get('components');return(0,t.isUndefined)(e)?o:(o.reset(void 0,n),e?this.append(e,n):[])},o.prototype.getChildAt=function(t){return this.components().at(t||0)||void 0},o.prototype.getLastChild=function(){var t=this.components();return t.at(t.length-1)||null},o.prototype.empty=function(t){return void 0===t&&(t={}),this.components().reset(void 0,t),this},o.prototype.parent=function(t){void 0===t&&(t={});var e=this.collection||t.prev&&this.prevColl;return e?e.parent:void 0},o.prototype.parents=function(){var t=this.parent();return t?[t].concat(t.parents()):[]},o.prototype.initToolbar=function(){var t=this.em,e=this,n=t&&t.getConfig().stylePrefix||'';if(!e.get('toolbar')&&t){var o=[];e.collection&&o.push({label:t.getIcon('arrowUp'),command:function(t){return t.runCommand('core:component-exit',{force:1})}}),e.get('draggable')&&o.push({attributes:{class:"".concat(n,"no-touch-actions"),draggable:!0},label:t.getIcon('move'),command:'tlb-move'}),e.get('copyable')&&o.push({label:t.getIcon('copy'),command:'tlb-clone'}),e.get('removable')&&o.push({label:t.getIcon('delete'),command:'tlb-delete'}),e.set('toolbar',o)}},o.prototype.__loadTraits=function(t){var e=this,n=t||this.traits;this.set('traits',n.map((function(t){return Qn.build(e,t)})));var o=jn({},this.get('attributes'));return this.traits.forEach((function(t){if(!t.changeProp){var e=t.name,n=t.value;e&&n&&(o[e]=n)}})),n.length&&this.set('attributes',o),this},o.prototype.getTraits=function(){return this.traits},o.prototype.setTraits=function(e){var n=(0,t.isArray)(e)?e:[e];return this.__loadTraits(n),this.getTraits()},o.prototype.getTrait=function(t){return this.traits.find((function(e){return e.name===t}))||null},o.prototype.updateTrait=function(t,e){var n,o=this.getTrait(t);return null==o||o.updateOpts(e),null===(n=this.em)||void 0===n||n.trigger('component:toggled'),this},o.prototype.getTraitIndex=function(t){var e=this.getTrait(t);return e?this.traits.indexOf(e):-1},o.prototype.removeTrait=function(e){var n,o=this,i=((0,t.isArray)(e)?e:[e]).map((function(t){var e=o.getTraitIndex(t);if(-1!=e)return o.traits.splice(e,1)[0]}));return null===(n=this.em)||void 0===n||n.trigger('component:toggled'),(0,t.isArray)(i)?i:[i]},o.prototype.addTrait=function(e,n){var o,i=this;void 0===n&&(n={});var r=((0,t.isArray)(e)?e:[e]).map((function(t){var e=Qn.build(i,t);return i.traits.push(e),e}));return null===(o=this.em)||void 0===o||o.trigger('component:toggled'),r},o.prototype.normalizeClasses=function(t){var e=[],n=this.em,o=null==n?void 0:n.Selectors;return o?t.models?Mn([],t.models,!0):(t.forEach((function(t){return e.push(o.add(t))})),e):[]},o.prototype.clone=function(t){void 0===t&&(t={});var e=this.em,n=jn({},this.attributes),o=jn({},this.opt),i=this.getId(),r=null==e?void 0:e.Css;n.attributes=jn({},n.attributes),delete n.attributes.id,n.components=[],n.classes=[],n.traits=[],this.__isSymbolTop()&&(t.symbol=!0),this.get('components').each((function(e,o){n.components[o]=e.clone(jn(jn({},t),{_inner:1}))})),this.traits.forEach((function(t,e){n.traits[e]=jn(jn({},t.opts),{name:t.name})})),this.get('classes').each((function(t,e){n.classes[e]=t.get('name')})),n.status='',o.collection=null;var s=new this.constructor(n,o),a="#".concat(s.getId());(r?r.getRules("#".concat(i)):[]).forEach((function(t){var e=t.clone();e.set('selectors',[a]),r.getAll().add(e)})),s.set(Dn,0);var l=this.__getSymbol(),c=this.__getSymbols();t.symbol||!l&&!c?l?(l.set(Dn,Mn(Mn([],l.__getSymbols(),!0),[s],!1)),s.__initSymb()):t.symbol&&(this.__isSymbol()?(this.set(Dn,Mn(Mn([],c,!0),[s],!1)),s.set(In,this),s.__initSymb()):t.symbolInv?(this.set(Dn,[s]),s.set(In,this),[this,s].map((function(t){return t.__initSymb()}))):(s.set(Dn,[this]),[this,s].map((function(t){return t.__initSymb()})),this.set(In,s))):(s.set(In,0),s.set(Dn,0));var u='component:clone';return e&&e.trigger(u,s),this.trigger(u,s),s},o.prototype.getName=function(t){void 0===t&&(t={});var n=this.em,o=this.attributes,i=o.type,r=o.tagName,s=o.name,a=i||r,l=i?'':r,c='domComponents.names.',u=s&&(null==n?void 0:n.t("".concat(c).concat(s))),p=l&&(null==n?void 0:n.t("".concat(c).concat(l))),h=n&&(n.t("".concat(c).concat(i))||n.t("".concat(c).concat(r))),d=this.get('custom-name');return(t.noCustom?'':d)||u||s||p||(0,e.capitalize)(l)||h||(0,e.capitalize)(a)},o.prototype.getIcon=function(){var t=this.get('icon');return t?t+' ':''},o.prototype.toHTML=function(n){void 0===n&&(n={});var o=this,i=[],r=n.tag||o.get('tagName'),s=o.get('void'),a=n.attributes,l=this.getAttrToHTML();if(delete n.tag,a&&((0,t.isFunction)(a)?l=a(o,l)||{}:(0,e.isObject)(a)&&(l=a)),n.withProps){var c=this.toJSON();(0,t.forEach)(c,(function(n,o){'_'!==o[0]&&['classes','attributes','components'].indexOf(o)<0&&(l["data-gjs-".concat(o)]=(0,t.isArray)(n)||(0,e.isObject)(n)?JSON.stringify(n):n)}))}for(var u in l){var p=l[u];if(!(0,t.isUndefined)(p)&&null!==p)if((0,t.isBoolean)(p))p&&i.push(u);else{var h='';if(n.altQuoteAttr&&(0,t.isString)(p)&&p.indexOf('"')>=0)h="'".concat(p.replace(/'/g,'&apos;'),"'");else{var d=(0,t.isString)(p)?p.replace(/"/g,'&quot;'):p;h="\"".concat(d,"\"")}i.push("".concat(u,"=").concat(h))}}var f=i.length?" ".concat(i.join(' ')):'',g=o.getInnerHTML(n),m="<".concat(r).concat(f).concat(s?'/':'',">").concat(g);return!s&&(m+="</".concat(r,">")),m},o.prototype.getInnerHTML=function(t){return this.__innerHTML(t)},o.prototype.__innerHTML=function(t){void 0===t&&(t={});var e=this.components();return e.length?e.map((function(e){return e.toHTML(t)})).join(''):this.content},o.prototype.getAttrToHTML=function(){var t=this.getAttributes();return Vn(this.em)&&delete t.style,t},o.prototype.toJSON=function(e){void 0===e&&(e={});var n=i.Model.prototype.toJSON.call(this,e);if(n.attributes=this.getAttributes(),delete n.attributes.class,delete n.toolbar,delete n.traits,delete n.status,delete n.open,delete n._undoexc,delete n.delegate,!e.fromUndo){var o=n[In],r=n[Dn];r&&(0,t.isArray)(r)&&(n[Dn]=r.filter((function(t){return t})).map((function(t){return t.getId?t.getId():t}))),o&&!(0,t.isString)(o)&&(n[In]=o.getId())}return this.em.getConfig().avoidDefaults&&this.getChangedProps(n),n},o.prototype.getChangedProps=function(e){var n=e||i.Model.prototype.toJSON.apply(this),o=(0,t.result)(this,'defaults');return(0,t.forEach)(o,(function(t,e){-1===['type'].indexOf(e)&&n[e]===t&&delete n[e]})),(0,t.isEmpty)(n.type)&&delete n.type,(0,t.forEach)(['attributes','style'],(function(e){(0,t.isEmpty)(o[e])&&(0,t.isEmpty)(n[e])&&delete n[e]})),(0,t.forEach)(['classes','components'],(function(e){(!n[e]||(0,t.isEmpty)(o[e])&&!n[e].length)&&delete n[e]})),n},o.prototype.getId=function(){return(this.get('attributes')||{}).id||this.ccid||this.cid},o.prototype.setId=function(t,e){var n=jn({},this.get('attributes'));return n.id=t,this.set('attributes',n,e),this},o.prototype.getEl=function(t){var e=this.getView(t);return e&&e.el},o.prototype.getView=function(t){var e=this,n=e.view,o=e.views,i=e.em,r=t||(null==i?void 0:i.getCurrentFrameModel());return r&&(n=o.filter((function(t){return t.frameView===r.view}))[0]),n},o.prototype.getCurrentView=function(){var t=this.em.getCurrentFrame(),e=null==t?void 0:t.model;return this.getView(e)},o.prototype.emitUpdate=function(t){for(var e,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];var i=this.em,r=Wn+(t?":".concat(t):''),s=t&&this.get(t);t&&this.updated.apply(this,Mn([t,s,t&&this.previous(t)],n,!1)),this.trigger.apply(this,Mn([r],n,!1)),i&&i.trigger.apply(i,Mn([r,this],n,!1)),['components','classes'].indexOf(t)>=0&&this.__propSelfToParent({component:this,changed:(e={},e[t]=s,e),options:n[2]||n[1]||{}})},o.prototype.onAll=function(e){return(0,t.isFunction)(e)&&(e(this),this.components().forEach((function(t){return t.onAll(e)}))),this},o.prototype.forEachChild=function(e){(0,t.isFunction)(e)&&this.components().forEach((function(t){e(t),t.forEachChild(e)}))},o.prototype.remove=function(t){var e=this;void 0===t&&(t={});var n=this.em,o=this.collection,i=function(){o&&o.remove(e,jn(jn({},t),{action:'remove-component'})),o||(e.components('',t),e.components().removeChildren(e,void 0,t))},r=jn({},t);return[this,n].map((function(t){return t.trigger('component:remove:before',e,i,r)})),!r.abort&&i(),this},o.prototype.move=function(t,e){if(void 0===e&&(e={}),t){var n=e.at,o=this.index(),i=t===this.parent();i&&(o===n||o===n-1)||(i&&n&&n>o&&(e.at=n-1),this.remove({temporary:1}),t.append(this,e),this.emitUpdate())}return this},o.prototype.isInstanceOf=function(t){var e,n,o=null===(n=null===(e=this.em)||void 0===e?void 0:e.Components.getType(t))||void 0===n?void 0:n.model;return!!o&&this instanceof o},o.prototype.isChildOf=function(e){for(var n=(0,t.isString)(e),o=this.parent();o;){if(n){if(o.isInstanceOf(e))return!0}else if(o===e)return!0;o=o.parent()}return!1},o.prototype.resetId=function(t){void 0===t&&(t={});var e=this.em,n=this.getId();if(!n)return this;var i=o.createId(this);this.setId(i);var r=null==e?void 0:e.Css.getIdRule(n),s=null==r?void 0:r.get('selectors').at(0);return null==s||s.set('name',i),this},o.prototype._getStyleRule=function(t){var e=(void 0===t?{}:t).id,n=this.em,o=e||this.getId();return null==n?void 0:n.Css.getIdRule(o)},o.prototype._getStyleSelector=function(t){var e=this._getStyleRule(t);return null==e?void 0:e.get('selectors').at(0)},o.prototype._idUpdated=function(t,e,n){if(void 0===n&&(n={}),!n.idUpdate){var i=this.ccid,r=(this.get('attributes')||{}).id,s=(this.previous('attributes')||{}).id||i,a=o.getList(this);if(a[r]||!r&&s)return this.setId(s,{idUpdate:!0});delete a[s],a[r]=this,this.ccid=r;var l=this._getStyleSelector({id:s});l&&l.set({name:r,label:r})}},o.getDefaults=function(){return(0,t.result)(this.prototype,'defaults')},o.isComponent=function(t){return{tagName:(0,e.toLowerCase)(t.tagName)}},o.ensureInList=function(t){var e=o.getList(t),n=t.getId(),i=e[n];if(i){if(i!==t){var r=o.getIncrementId(n,e);t.setId(r),e[r]=t}}else e[n]=t;t.components().forEach((function(t){return o.ensureInList(t)}))},o.createId=function(t,e){void 0===e&&(e={});var n,i=o.getList(t),r=e.idMap,s=void 0===r?{}:r,a=t.get('attributes').id;return a?(n=o.getIncrementId(a,i,e),t.setId(n),a!==n&&(s[a]=n)):n=o.getNewId(i),i[n]=t,n},o.getNewId=function(t){for(var e=Object.keys(t).length.toString().length+2,n=(Math.random()+1.1).toString(36).slice(-e),i="i".concat(n);t[i];)i=o.getNewId(t);return i},o.getIncrementId=function(t,e,n){void 0===n&&(n={});var o=n.keepIds,i=1,r=t;if((void 0===o?[]:o).indexOf(t)<0)for(;e[r];)i++,r="".concat(t,"-").concat(i);return r},o.getList=function(t){var e=t.opt,n=void 0===e?{}:e,o=n.domc,i=n.em,r=o||(null==i?void 0:i.Components);return r?r.componentsById:{}},o.checkId=function(e,n,i,r){void 0===n&&(n=[]),void 0===i&&(i={}),void 0===r&&(r={});var s=(0,t.isArray)(e)?e:[e],a=r.keepIds,l=void 0===a?[]:a,c=r.idMap,u=void 0===c?{}:c;s.forEach((function(e){e.attributes;var s=e.attributes,a=void 0===s?{}:s,c=e.components,p=a.id;if(p&&i[p]&&l.indexOf(p)<0){var h=o.getIncrementId(p,i);u[p]=h,a.id=h,(0,t.isArray)(n)&&n.forEach((function(t){var e=t.selectors;e.forEach((function(t,n){t==="#".concat(p)&&(e[n]="#".concat(h))}))}))}c&&o.checkId(c,n,i,r)}))},o}(Ce);const zn=Ln;var Un=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),qn=void 0&&(void 0).__assign||function(){return qn=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},qn.apply(this,arguments)},Yn=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Un(n,t),Object.defineProperty(n.prototype,"defaults",{get:function(){return qn(qn({},t.prototype.defaults),{tagName:'',droppable:!1,layerable:!1,selectable:!1,editable:!0})},enumerable:!1,configurable:!0}),n.prototype.toHTML=function(){var t=this.content,e=this.parent();return(null==e?void 0:e.is('script'))?t:this.__escapeContent(t)},n.prototype.__escapeContent=function(t){return(0,e.escapeNodeContent)(t)},n.isComponent=function(t){var e;if(3===t.nodeType)return{type:'textnode',content:null!==(e=t.textContent)&&void 0!==e?e:''}},n}(zn);const Bn=Yn;var Fn=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Gn=void 0&&(void 0).__assign||function(){return Gn=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Gn.apply(this,arguments)},Hn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Fn(e,t),Object.defineProperty(e.prototype,"defaults",{get:function(){return Gn({},t.prototype.defaults)},enumerable:!1,configurable:!0}),e.prototype.toHTML=function(){return"\x3c!--".concat(this.content,"--\x3e")},e.isComponent=function(t){var e;if(8==t.nodeType)return{type:'comment',content:null!==(e=t.textContent)&&void 0!==e?e:''}},e}(Bn);const Kn=Hn;var Jn=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),to=void 0&&(void 0).__assign||function(){return to=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},to.apply(this,arguments)},eo='iframe';const no=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Jn(n,t),Object.defineProperty(n.prototype,"defaults",{get:function(){return to(to({},t.prototype.defaults),{type:eo,tagName:eo,droppable:!1,resizable:!0,traits:['id','title','src'],attributes:{frameborder:'0'}})},enumerable:!1,configurable:!0}),n.isComponent=function(t){return(0,e.toLowerCase)(t.tagName)===eo},n}(zn);var oo=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),io=void 0&&(void 0).__assign||function(){return io=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},io.apply(this,arguments)},ro='xmlns="http://www.w3.org/2000/svg" width="100" viewBox="0 0 24 24" style="fill: rgba(0,0,0,0.15); transform: scale(0.75)"',so=function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return oo(o,n),Object.defineProperty(o.prototype,"defaults",{get:function(){return io(io({},n.prototype.defaults),{type:'image',tagName:'img',void:!0,droppable:0,editable:1,highlightable:0,resizable:{ratioDefault:1},traits:['alt'],src:"<svg ".concat(ro,">\n        <path d=\"M8.5 13.5l2.5 3 3.5-4.5 4.5 6H5m16 1V5a2 2 0 0 0-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2z\"></path>\n      </svg>"),fallback:"<svg ".concat(ro,">\n        <path d=\"M2.28 3L1 4.27l2 2V19c0 1.1.9 2 2 2h12.73l2 2L21 21.72 2.28 3m2.55 0L21 19.17V5a2 2 0 0 0-2-2H4.83M8.5 13.5l2.5 3 1-1.25L14.73 18H5l3.5-4.5z\"></path>\n      </svg>"),file:''})},enumerable:!1,configurable:!0}),o.prototype.initialize=function(o,i){n.prototype.initialize.call(this,o,i);var r=this.get('attributes').src;r&&(0,e.buildBase64UrlFromSvg)((0,t.result)(this,'defaults').src)!==r&&this.set('src',r,{silent:!0})},o.prototype.initToolbar=function(){n.prototype.initToolbar.call(this);var t=this.em;if(t){var e='image-editor';if(t.Commands.has(e)){for(var o=!1,i=this.get('toolbar'),r=0;r<i.length;r++)if('image-editor'===i[r].command){o=!0;break}o||(i.push({attributes:{class:'fa fa-pencil'},command:e}),this.set('toolbar',i))}}},o.prototype.getAttrToHTML=function(){var t=n.prototype.getAttrToHTML.call(this),e=this.getSrcResult();return e&&(t.src=e),t},o.prototype.getSrcResult=function(t){void 0===t&&(t={});var n=this.get(t.fallback?'fallback':'src')||'',o=n;return n&&'<svg'===n.substr(0,4)&&(o=(0,e.buildBase64UrlFromSvg)(n)),o},o.prototype.isDefaultSrc=function(){var n=this.get('src'),o=(0,t.result)(this,'defaults').src;return n===o||n===(0,e.buildBase64UrlFromSvg)(o)},o.prototype.toJSON=function(t){var e=n.prototype.toJSON.call(this,t),o=e.attributes;return o&&e.src===o.src&&delete e.src,e},o.prototype.parseUri=function(t){var n={};if((0,e.hasWin)())(n=document.createElement('a')).href=t;else if('undefined'!=typeof URL)try{n=new URL(t)}catch(t){}return{hostname:n.hostname||'',pathname:n.pathname||'',protocol:n.protocol||'',search:n.search||'',hash:n.hash||'',port:n.port||'',query:function(t){void 0===t&&(t='');for(var e={},n=t.substring(1).split('&'),o=0;o<n.length;o++){var i=n[o].split('='),r=decodeURIComponent(i[0]);r&&(e[r]=decodeURIComponent(i[1]||''))}return e}(n.search)}},o.isComponent=function(t){return'img'===(0,e.toLowerCase)(t.tagName)},o}(zn);const ao=so;var lo=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),co=void 0&&(void 0).__assign||function(){return co=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},co.apply(this,arguments)};const uo=function(e){function n(t,n){void 0===t&&(t={});var o=e.call(this,t,n)||this;return o.__checkInnerChilds(),o}return lo(n,e),Object.defineProperty(n.prototype,"defaults",{get:function(){return co(co({},e.prototype.defaults),{type:'text',droppable:!1,editable:!0})},enumerable:!1,configurable:!0}),n.prototype.__checkInnerChilds=function(){var e=this.em.Components.config.disableTextInnerChilds;if(e){var n=function(t){t.isInstanceOf('textnode')||t.set({locked:!0,layerable:!1})};(0,t.isFunction)(e)?this.forEachChild((function(t){e(t)&&n(t)})):this.forEachChild(n)}},n}(zn);var po=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ho=void 0&&(void 0).__assign||function(){return ho=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},ho.apply(this,arguments)},fo='label';const go=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return po(n,t),Object.defineProperty(n.prototype,"defaults",{get:function(){return ho(ho({},t.prototype.defaults),{type:fo,tagName:fo,traits:['id','title','for']})},enumerable:!1,configurable:!0}),n.isComponent=function(t){return(0,e.toLowerCase)(t.tagName)===fo},n}(uo);var mo=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),vo=void 0&&(void 0).__assign||function(){return vo=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},vo.apply(this,arguments)},yo='link',_o=function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return mo(o,n),Object.defineProperty(o.prototype,"defaults",{get:function(){return vo(vo({},n.prototype.defaults),{type:yo,tagName:'a',traits:['title','href','target']})},enumerable:!1,configurable:!0}),o.isComponent=function(n,o){var i;if(void 0===o&&(o={}),'a'===(0,e.toLowerCase)(n.tagName)){var r=o.textTags||[];i={type:yo,editable:!1};var s=n.childNodes;s.length||delete i.editable,(0,t.forEach)(s,(function(t){var n=t.tagName;(3==t.nodeType&&''!==t.textContent.trim()||n&&r.indexOf((0,e.toLowerCase)(n))>=0)&&delete i.editable}))}return i},o}(uo);const Oo=_o;var bo=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),wo=void 0&&(void 0).__assign||function(){return wo=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},wo.apply(this,arguments)},xo=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return bo(n,t),Object.defineProperty(n.prototype,"defaults",{get:function(){var e=t.prototype.defaults;return wo(wo({},e),{type:'map',src:'',void:!1,mapUrl:'https://maps.google.com/maps',tagName:'iframe',mapType:'q',address:'',zoom:'1',attributes:{frameborder:0},toolbar:e.toolbar,traits:[{label:'Address',name:'address',placeholder:'eg. London, UK',changeProp:!0},{type:'select',label:'Map type',name:'mapType',changeProp:!0,options:[{id:'q',label:'Roadmap'},{id:'w',label:'Satellite'}]},{label:'Zoom',name:'zoom',type:'range',min:1,max:20,changeProp:!0}]})},enumerable:!1,configurable:!0}),n.prototype.initialize=function(e,n){this.get('src')?this.parseFromSrc():this.updateSrc(),t.prototype.initialize.call(this,e,n),this.listenTo(this,'change:address change:zoom change:mapType',this.updateSrc)},n.prototype.updateSrc=function(){this.set('src',this.getMapUrl())},n.prototype.getMapUrl=function(){var t=this.get('address'),e=this.get('zoom'),n=this.get('mapType');t=t?'&q='+t:'',e=e?'&z='+e:'',n=n?'&t='+n:'';var o=this.get('mapUrl')+'?'+t+e+n;return o+='&output=embed'},n.prototype.parseFromSrc=function(){var t=this.parseUri(this.get('src')).query;t.q&&this.set('address',t.q),t.z&&this.set('zoom',t.z),t.t&&this.set('mapType',t.t)},n.isComponent=function(t){if('iframe'==(0,e.toLowerCase)(t.tagName)&&/maps\.google\.com/.test(t.src))return{type:'map',src:t.src}},n}(ao);const So=xo;var ko=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Po=void 0&&(void 0).__assign||function(){return Po=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Po.apply(this,arguments)},Co='script';const To=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return ko(n,t),Object.defineProperty(n.prototype,"defaults",{get:function(){return Po(Po({},t.prototype.defaults),{type:Co,tagName:Co,droppable:!1,draggable:!1,layerable:!1,highlightable:!1})},enumerable:!1,configurable:!0}),n.isComponent=function(t){return(0,e.toLowerCase)(t.tagName)===Co},n}(zn);var Eo=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ao=void 0&&(void 0).__assign||function(){return Ao=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Ao.apply(this,arguments)},Qo='svg';const $o=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Eo(n,t),Object.defineProperty(n.prototype,"defaults",{get:function(){return Ao(Ao({},t.prototype.defaults),{type:Qo,tagName:Qo,highlightable:!1,resizable:{ratioDefault:!0}})},enumerable:!1,configurable:!0}),n.prototype.getName=function(){var t=this.get('tagName'),e=this.get('custom-name');return t=t.charAt(0).toUpperCase()+t.slice(1),e||t},n.isComponent=function(t){return(0,e.toLowerCase)(t.tagName)===Qo},n}(zn);var jo=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ro=void 0&&(void 0).__assign||function(){return Ro=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Ro.apply(this,arguments)};const Mo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return jo(e,t),Object.defineProperty(e.prototype,"defaults",{get:function(){return Ro(Ro({},t.prototype.defaults),{selectable:!1,hoverable:!1,layerable:!1})},enumerable:!1,configurable:!0}),e.isComponent=function(t,e){return void 0===e&&(e={}),!!e.inSvg},e}($o);var Vo=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Zo=void 0&&(void 0).__assign||function(){return Zo=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Zo.apply(this,arguments)},Do='table';const Io=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Vo(n,t),Object.defineProperty(n.prototype,"defaults",{get:function(){return Zo(Zo({},t.prototype.defaults),{type:Do,tagName:Do,droppable:['tbody','thead','tfoot']})},enumerable:!1,configurable:!0}),n.prototype.initialize=function(e,n){t.prototype.initialize.call(this,e,n);var o=this.get('components');!o.length&&o.add({type:'tbody'})},n.isComponent=function(t){return(0,e.toLowerCase)(t.tagName)===Do},n}(zn);var No=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Wo=void 0&&(void 0).__assign||function(){return Wo=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Wo.apply(this,arguments)},Xo='tbody';const Lo=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return No(n,t),Object.defineProperty(n.prototype,"defaults",{get:function(){return Wo(Wo({},t.prototype.defaults),{type:Xo,tagName:Xo,draggable:['table'],droppable:['tr'],columns:1,rows:1})},enumerable:!1,configurable:!0}),n.prototype.initialize=function(e,n){t.prototype.initialize.call(this,e,n);var o=this.get('components'),i=this.get('columns'),r=this.get('rows');if(!o.length){for(var s=[];r--;){for(var a=[],l=i;l--;)a.push({type:'cell',classes:['cell']});s.push({type:'row',classes:['row'],components:a})}o.add(s)}},n.isComponent=function(t){return(0,e.toLowerCase)(t.tagName)===Xo},n}(zn);var zo=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Uo=void 0&&(void 0).__assign||function(){return Uo=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Uo.apply(this,arguments)};const qo=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return zo(n,t),Object.defineProperty(n.prototype,"defaults",{get:function(){return Uo(Uo({},t.prototype.defaults),{type:'cell',tagName:'td',draggable:['tr']})},enumerable:!1,configurable:!0}),n.isComponent=function(t){return['td','th'].indexOf((0,e.toLowerCase)(t.tagName))>=0},n}(zn);var Yo=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Bo=void 0&&(void 0).__assign||function(){return Bo=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Bo.apply(this,arguments)},Fo='tfoot';const Go=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Yo(n,t),Object.defineProperty(n.prototype,"defaults",{get:function(){return Bo(Bo({},t.prototype.defaults),{type:Fo,tagName:Fo})},enumerable:!1,configurable:!0}),n.isComponent=function(t){return(0,e.toLowerCase)(t.tagName)===Fo},n}(Lo);var Ho=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ko=void 0&&(void 0).__assign||function(){return Ko=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Ko.apply(this,arguments)},Jo='thead';const ti=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Ho(n,t),Object.defineProperty(n.prototype,"defaults",{get:function(){return Ko(Ko({},t.prototype.defaults),{type:Jo,tagName:Jo})},enumerable:!1,configurable:!0}),n.isComponent=function(t){return(0,e.toLowerCase)(t.tagName)===Jo},n}(Lo);var ei=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ni=void 0&&(void 0).__assign||function(){return ni=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},ni.apply(this,arguments)},oi='tr';const ii=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return ei(n,t),Object.defineProperty(n.prototype,"defaults",{get:function(){return ni(ni({},t.prototype.defaults),{tagName:oi,draggable:['thead','tbody','tfoot'],droppable:['th','td']})},enumerable:!1,configurable:!0}),n.isComponent=function(t){return(0,e.toLowerCase)(t.tagName)===oi},n}(zn);var ri=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),si=void 0&&(void 0).__assign||function(){return si=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},si.apply(this,arguments)},ai='video',li='yt',ci='vi',ui='ytnc',pi='so',hi=function(t){return t&&'0'!==t},di=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return ri(n,t),Object.defineProperty(n.prototype,"defaults",{get:function(){return si(si({},t.prototype.defaults),{type:ai,tagName:ai,videoId:'',void:!1,provider:pi,ytUrl:'https://www.youtube.com/embed/',ytncUrl:'https://www.youtube-nocookie.com/embed/',viUrl:'https://player.vimeo.com/video/',loop:!1,poster:'',muted:0,autoplay:!1,controls:!0,color:'',list:'',src:'',rel:1,modestbranding:0,sources:[],attributes:{allowfullscreen:'allowfullscreen'}})},enumerable:!1,configurable:!0}),n.prototype.initialize=function(e,n){this.em=n.em,this.get('src')&&this.parseFromSrc(),this.updatePropsFromAttr(),this.updateTraits(),this.on('change:provider',this.updateTraits),this.on('change:videoId change:provider',this.updateSrc),t.prototype.initialize.call(this,e,n)},n.prototype.updatePropsFromAttr=function(){if(this.get('provider')===pi){var t=this.get('attributes'),n=t.controls,o=t.autoplay,i=t.loop,r={};(0,e.isDef)(n)&&(r.controls=!!n),(0,e.isDef)(o)&&(r.autoplay=!!o),(0,e.isDef)(i)&&(r.loop=!!i),(0,e.isEmptyObj)(r)||this.set(r)}},n.prototype.updateTraits=function(){var t,e=this.em,n='iframe';switch(this.get('provider')){case li:case ui:t=this.getYoutubeTraits();break;case ci:t=this.getVimeoTraits();break;default:n='video',t=this.getSourceTraits()}this.set({tagName:n},{silent:!0}),this.set({traits:t}),e.get('ready')&&e.trigger('component:toggled')},n.prototype.parseFromSrc=function(){var t=this.get('provider'),e=this.parseUri(this.get('src')),n=e.query;switch(t){case li:case ui:case ci:this.set('videoId',e.pathname.split('/').pop()),n.list&&this.set('list',n.list),hi(n.autoplay)&&this.set('autoplay',!0),hi(n.loop)&&this.set('loop',!0),0===parseInt(n.controls)&&this.set('controls',!1),hi(n.color)&&this.set('color',n.color),'0'===n.rel&&this.set('rel',0),'1'===n.modestbranding&&this.set('modestbranding',1)}},n.prototype.updateSrc=function(){var t='';switch(this.get('provider')){case li:t=this.getYoutubeSrc();break;case ui:t=this.getYoutubeNoCookieSrc();break;case ci:t=this.getVimeoSrc()}this.set({src:t})},n.prototype.getAttrToHTML=function(){var e=t.prototype.getAttrToHTML.call(this);switch(this.get('provider')){case li:case ui:case ci:break;default:e.loop=!!this.get('loop'),e.autoplay=!!this.get('autoplay'),e.controls=!!this.get('controls')}return e},n.prototype.getProviderTrait=function(){return{type:'select',label:'Provider',name:'provider',changeProp:!0,options:[{value:'so',name:'HTML5 Source'},{value:li,name:'Youtube'},{value:ui,name:'Youtube (no cookie)'},{value:ci,name:'Vimeo'}]}},n.prototype.getSourceTraits=function(){return[this.getProviderTrait(),{label:'Source',name:'src',placeholder:'eg. ./media/video.mp4',changeProp:!0},{label:'Poster',name:'poster',placeholder:'eg. ./media/image.jpg'},this.getAutoplayTrait(),this.getLoopTrait(),this.getControlsTrait()]},n.prototype.getYoutubeTraits=function(){return[this.getProviderTrait(),{label:'Video ID',name:'videoId',placeholder:'eg. jNQXAC9IVRw',changeProp:!0},this.getAutoplayTrait(),this.getLoopTrait(),this.getControlsTrait(),{type:'checkbox',label:'Related',name:'rel',changeProp:!0},{type:'checkbox',label:'Modest',name:'modestbranding',changeProp:!0}]},n.prototype.getVimeoTraits=function(){return[this.getProviderTrait(),{label:'Video ID',name:'videoId',placeholder:'eg. 123456789',changeProp:!0},{label:'Color',name:'color',placeholder:'eg. FF0000',changeProp:!0},this.getAutoplayTrait(),this.getLoopTrait()]},n.prototype.getAutoplayTrait=function(){return{type:'checkbox',label:'Autoplay',name:'autoplay',changeProp:!0}},n.prototype.getLoopTrait=function(){return{type:'checkbox',label:'Loop',name:'loop',changeProp:!0}},n.prototype.getControlsTrait=function(){return{type:'checkbox',label:'Controls',name:'controls',changeProp:!0}},n.prototype.getYoutubeSrc=function(){var t=this.get('videoId'),e=this.get('ytUrl'),n=this.get('list');return e+=t+(t.indexOf('?')<0?'?':''),e+=n?"&list=".concat(n):'',e+=this.get('autoplay')?'&autoplay=1&mute=1':'',e+=this.get('controls')?'':'&controls=0&showinfo=0',e+=this.get('loop')?"&loop=1&playlist=".concat(t):'',e+=this.get('rel')?'':'&rel=0',e+=this.get('modestbranding')?'&modestbranding=1':''},n.prototype.getYoutubeNoCookieSrc=function(){var t=this.getYoutubeSrc();return t=t.replace(this.get('ytUrl'),this.get('ytncUrl'))},n.prototype.getVimeoSrc=function(){var t=this.get('viUrl');return t+=this.get('videoId')+'?',t+=this.get('autoplay')?'&autoplay=1&muted=1':'',t+=this.get('loop')?'&loop=1':'',t+=this.get('controls')?'':'&title=0&portrait=0&badge=0',t+=this.get('color')?'&color='+this.get('color'):''},n.isComponent=function(t){var n=t.tagName,o=t.src,i=/youtube\.com\/embed/.test(o),r=/youtube-nocookie\.com\/embed/.test(o),s=/player\.vimeo\.com\/video/.test(o),a=i||r||s;if((0,e.toLowerCase)(n)==ai||'iframe'==(0,e.toLowerCase)(n)&&a){var l={type:'video'};return o&&(l.src=o),a&&(i?l.provider=li:r?l.provider=ui:s&&(l.provider=ci)),l}},n}(ao);const fi=di;function gi(e){return(0,t.isArray)(e)?{type:'list',itemType:e.length>0?gi(e[0]):{type:'unkown'}}:(0,t.isObject)(e)?{type:'object',params:Object.fromEntries(Object.keys(e).map((function(t){return[t,gi(e[t])]})))}:{type:'string'}}var mi=function(){function t(t,e,n){void 0===n&&(n={}),this.optType={type:'unkown'},this.componentId=t,this.slot=e,this.params=n}return t.prototype.asyncMetaData=function(t){var e=this;return t.then((function(t){return e.optType=t})),this},t}();const vi=mi;var yi=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),_i=void 0&&(void 0).__assign||function(){return _i=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},_i.apply(this,arguments)},Oi=void 0&&(void 0).__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function s(t){try{l(o.next(t))}catch(t){r(t)}}function a(t){try{l(o["throw"](t))}catch(t){r(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((o=o.apply(t,e||[])).next())}))},bi=void 0&&(void 0).__generator||function(t,e){var n,o,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,a[0]&&(s=0)),s;)try{if(n=1,o&&(i=2&a[0]?o["return"]:a[0]?o["throw"]||((i=o["return"])&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,o=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},wi=function(e){function n(t,n){void 0===t&&(t={}),void 0===n&&(n={});var o=e.call(this,t,n)||this;return o.dataIds={},o.states={users:{type:'query',url:{url:"https://reqres.in/api/users?page=<page>",variables:{page:{variableType:"fixed",selectType:{type:'string'},params:{},data:{default:"1"}}}},dataSrc:'data',meta:{type:"object",params:{data:{type:"list",itemType:{type:"object",params:{id:{type:"string"},email:{type:"string"},first_name:{type:"string"},last_name:{type:"string"},avatar:{type:"string"}}}}}}},user:{type:'query',url:{url:"https://reqres.in/api/users/<id>",variables:{id:{variableType:"fixed",selectType:{type:'string'},params:{},data:{default:"1"}}}},dataSrc:'data',meta:{type:"object",params:{data:{type:"object",params:{id:{type:"string"},email:{type:"string"},first_name:{type:"string"},last_name:{type:"string"},avatar:{type:"string"}}}}}}},console.log("fromSiteComponentReset"),o.renderAjaxScripts(),o.on('change:ajax change:variables',(function(){console.log('fromSiteurlTestTriggerChange',o),o.renderAjaxScripts(),o.dataIds={}}),o),o}return yi(n,e),Object.defineProperty(n.prototype,"defaults",{get:function(){return _i(_i({},e.prototype.defaults),{tagName:'body',removable:!1,copyable:!1,draggable:!1,components:[],script:'','script-props':['ajax'],'script-global':[{id:'ajax',type:'data-list'}],'script-events':[{id:'ajax',params:{type:'object',inner:{data:{type:'single'}}}}],ajax:{},stylable:['background','background-color','background-image','background-repeat','background-attachment','background-position','background-size']})},enumerable:!1,configurable:!0}),n.prototype.renderAjaxScripts=function(){var e=this,n=this.ajax,o=this.states,i=Object.fromEntries(Object.entries(n).map((function(t){var e,n,o=t[0],i=t[1];return[o,{script:"(opts)=>{\n            var cachedInput;\n            var cachedData;\n            const loadedSignal = opts.signals['".concat(o,"']\n            return (i, done)=>{\n      ").concat(i.url?"const url = ".concat(Yt.Z.renderJs(i.url,'i.data'),";\n          if (cachedInput != i.data || typeof cachedData == 'undefined'){\n            url && $.get(url).done(data => {\n              console.log(\"fromSite\", data)\n              loadedSignal(").concat(i.url['dataSrc']?"data[\"".concat(i.url['dataSrc'],"\"]"):'data',", data)\n              cachedData = data;\n              opts.slots['updateState'](data);\n              cachedInput = i.data;\n            });\n          }\n          else {\n            loadedSignal(").concat(i.url['dataSrc']?"cachedData[\"".concat(i.url['dataSrc'],"\"]"):'cachedData',", cachedData)\n          }\n            "):'',"\n          }\n        }"),params:Object.fromEntries(Object.entries(null!==(n=null===(e=null==i?void 0:i.url)||void 0===e?void 0:e.variables)&&void 0!==n?n:{}).filter((function(t){t[0];var e=t[1];return'parameter'==(null==e?void 0:e.variableType)})).map((function(t){var e=t[0];t[1];return[e,{type:'string'}]})))}]}))),r=this.em.Canvas.getWindow(),s=Object.fromEntries(Object.keys(n).map((function(n){return["".concat(n),new vi(e.getId(),n,{}).asyncMetaData(Oi(e,void 0,void 0,(function(){var e;return bi(this,(function(o){switch(o.label){case 0:return e=Yt.Z.renderJs(this.ajax[n].url),[4,null===$||void 0===$?void 0:$.get((0,t.isString)(e)&&r.eval(e))];case 1:return[2,gi(o.sent().data)]}}))})))]}))),a="((opts) =>{\n     ".concat(Object.keys(n).map((function(t){return"opts.slots['".concat(t,"']({});")})).join(''),"})");this.set('script',{main:a,props:[],signals:s,slots:i,variables:[],states:o})},n.prototype.ajaxFunctionTemplate=function(t){return"function(){\n      let savedOpts = {url: \"".concat(t.url,"\"};\n      let result;\n      return function(opts){\n        if (typeof data === \"undefined\" || JSON.stringify({...opts, url: \"").concat(t.url,"\"}) != JSON.stringify(savedOpts)){\n          savedOpts = opts;\n          result = $.get(\"").concat(t.url,"\")\n        }\n        return result;\n      }\n    }()")},n.prototype.renderJsDataUsage=function(t){var e=this.ajax,n=this.ccid;if(void 0!==this.ajax[t]){console.log(e[t]);var o=e[t]['dataSrc']?"data[\"".concat(e[t]['dataSrc'],"\"]"):'data',i="(function(callback){window.".concat(n,"ScopedVariables['").concat(t,"']().done((data)=>callback(").concat(o,"))})");return{dataIds:this.dataIds[t],jsString:i}}console.error('Selected data variable is missing')},Object.defineProperty(n.prototype,"ajax",{get:function(){return this.get('ajax')},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"variables",{get:function(){return this.get('variables')},enumerable:!1,configurable:!0}),n.prototype.__postAdd=function(){var t,n=null===(t=this.em)||void 0===t?void 0:t.UndoManager;return!this.__hasUm&&(null==n||n.add(this)),e.prototype.__postAdd.call(this)},n.prototype.__postRemove=function(){var t,n=null===(t=this.em)||void 0===t?void 0:t.UndoManager;return null==n||n.remove(this),e.prototype.__postRemove.call(this)},n.isComponent=function(){return!1},n}(zn);const xi=wi;var Si=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ki=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.compView=Ai,t}return Si(n,e),n.prototype.initialize=function(t){this.opts=t||{},this.config=t.config||{},this.em=this.config.em;var e=this.collection;this.listenTo(e,'add',this.addTo),this.listenTo(e,'reset',this.resetChildren),this.listenTo(e,'remove',this.removeChildren)},n.prototype.removeChildren=function(t,e,n){var o=this;void 0===n&&(n={}),t.views.forEach((function(t){if(t){var e=t.childrenView,n=t.scriptContainer;e&&e.stopListening(),(0,yt.L_)(n),t.remove.apply(t)}})),t.components().forEach((function(t){return o.removeChildren(t,e,n)}))},n.prototype.addTo=function(t,e,n){void 0===e&&(e={}),void 0===n&&(n={});var o=this.em,i=this.collection.indexOf(t);if(this.addToCollection(t,null,i),o&&!n.temporary){var r=function(t){o.trigger('component:add',t),t.components().forEach((function(t){return r(t)}))};r(t)}},n.prototype.addToCollection=function(e,n,o){for(var i=this,r=i.config,s=i.opts,a=i.em,l=n||null,c=r.frameView,u=(null==c?void 0:c.model)&&e.getView(c.model),p=s.componentTypes||(null==a?void 0:a.Components.getTypes()),h=e.get('type')||'default',d=this.compView,f=0;f<p.length;f++)if(p[f].id==h){d=p[f].view;break}var g,m=u||new d({model:e,config:r,componentTypes:p});try{g=m.render().el}catch(t){g=document.createTextNode(''),a.logError(t)}if(l)l.appendChild(g);else{var v=this.parentEl,y=v.childNodes;if((0,t.isUndefined)(o))v.appendChild(g);else{var _=y.length==o;_&&o--,_||!y.length?v.appendChild(g):v.insertBefore(g,y[o])}}return e.opt.temporary||null==a||a.trigger('component:mount',e),g},n.prototype.resetChildren=function(t,e){var n=this,o=(void 0===e?{}:e).previousModels,i=void 0===o?[]:o;this.parentEl.innerHTML='',i.forEach((function(t){return n.removeChildren(t,n.collection)})),t.each((function(t){return n.addToCollection(t)}))},n.prototype.render=function(t){var e=this,n=this.el,o=document.createDocumentFragment();return this.parentEl=t||this.el,this.collection.each((function(t){return e.addToCollection(t,o)})),n.innerHTML='',n.appendChild(o),this},n}(l.G7);const Pi=ki;var Ci=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ti=void 0&&(void 0).__assign||function(){return Ti=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Ti.apply(this,arguments)},Ei=function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return Ci(o,n),o.prototype.className=function(){return this.getClasses()},o.prototype.tagName=function(){return this.model.get('tagName')},o.prototype.preinitialize=function(t){void 0===t&&(t={}),this.opts=t},o.prototype.initialize=function(t){void 0===t&&(t={});var n=this.model,o=t.config||{},i=o.em,r=n.opt||{},s=this.$el,a=this.el;this.opts=t,this.modelOpt=r,this.config=o,this.em=i,this.pfx=o.stylePrefix||'',this.ppfx=o.pStylePrefix||'',this.attr=n.get('attributes'),this.classe=this.attr.class||[],this.listenTo(n,'change:style',this.updateStyle),this.listenTo(n,'change:attributes',this.renderAttributes),this.listenTo(n,'change:highlightable',this.updateHighlight),this.listenTo(n,'change:status change:locked',this.updateStatus),this.listenTo(n,'change:script rerender',this.reset),this.listenTo(n,'change:content',this.updateContent),this.listenTo(n,'change',this.handleChange),this.listenTo(n,'active',this.onActive),this.listenTo(n,'disable',this.onDisable),s.data('model',n),(0,e.setViewEl)(a,this),n.view=this,this.frameView&&n.views.push(this),this.initClasses(),this.initComponents({avoidRender:!0}),this.events=Ti(Ti({},this.constructor.getEvents()),{dragstart:'handleDragStart'}),this.delegateEvents(),!r.temporary&&this.init(this._clbObj())},Object.defineProperty(o.prototype,"__cmpStyleOpts",{get:function(){return{state:'',mediaText:''}},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"frameView",{get:function(){return this.opts.config.frameView},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"createDoc",{get:function(){var t,e,n=(null===(t=this.frameView)||void 0===t?void 0:t.getDoc())||document;return(null===(e=this.opts.config)||void 0===e?void 0:e.useFrameDoc)?n:document},enumerable:!1,configurable:!0}),o.prototype.__isDraggable=function(){var t=this.model,e=this.config,n=t.attributes.draggable;return e.draggableComponents&&n},o.prototype._clbObj=function(){var t=this,e=t.em,n=t.model,o=t.el;return{editor:null==e?void 0:e.getEditor(),model:n,el:o}},o.prototype.init=function(t){},o.prototype.removed=function(t){},o.prototype.onRender=function(t){},o.prototype.onActive=function(t){},o.prototype.onDisable=function(t){},o.prototype.remove=function(){var t;n.prototype.remove.call(this);var e=this.model,o=this.$el,i=e.views,r=this.frameView||{};return e.components().forEach((function(t){var e=t.getView(r.model);null==e||e.remove()})),null===(t=this.childrenView)||void 0===t||t.remove(),i.splice(i.indexOf(this),1),this.removed(this._clbObj()),o.data({model:'',collection:'',view:''}),this},o.prototype.handleDragStart=function(t){if(!this.__isDraggable())return!1;t.stopPropagation(),t.preventDefault(),this.em.Commands.run('tlb-move',{target:this.model,event:t})},o.prototype.initClasses=function(){var t=this.model,e=t.classes,n='change:classes';e instanceof Ne&&(this.stopListening(t,n,this.initClasses),this.listenTo(t,n,this.initClasses),this.listenTo(e,'add remove change reset',this.updateClasses),e.length&&this.importClasses())},o.prototype.initComponents=function(t){void 0===t&&(t={});var e=this,n=e.model,o=e.$el,i=e.childrenView,r=n.get('components'),s=[n,'change:components',this.initComponents];r instanceof Me&&(o.data('collection',r),i&&i.remove(),this.stopListening.apply(this,s),!t.avoidRender&&this.renderChildren(),this.listenTo.apply(this,s))},o.prototype.handleChange=function(){var e=this.model,n=(0,t.keys)(e.changed);if(1!==n.length||'status'!==n[0])for(var o in e.emitUpdate(),e.changed)e.emitUpdate(o)},o.prototype.importClasses=function(){var t=this.em,e=this.model,n=t.Selectors;n&&e.classes.forEach((function(t){return n.add(t.getName())}))},o.prototype.updateStatus=function(e){void 0===e&&(e={});var n=this,o=n.em,i=n.el,r=n.ppfx,s=n.model,a=null==o?void 0:o.Canvas,l=null==a?void 0:a.config.extHl,c=s.get('status'),u="".concat(r,"selected"),p="".concat(u,"-parent"),h="".concat(r,"freezed"),d="".concat(r,"hovered"),f="".concat(r,"no-pointer"),g="".concat(r,"pointer-init"),m=[u,p,h,d,f],v=l&&!e.noExtHl?'':u;this.$el.removeClass(m.join(' '));var y=[i.getAttribute('class')||''],_=!(null==a?void 0:a.hasCustomSpot(ct.q.Select)),O=!(null==a?void 0:a.hasCustomSpot(ct.q.Target));switch(c){case'selected':_&&y.push(v);break;case'selected-parent':O&&y.push(p);break;case'freezed':y.push(h);break;case'freezed-selected':y.push(h),_&&y.push(v);break;case'hovered':!e.avoidHover&&y.push(d)}(0,t.isBoolean)(s.locked)&&y.push(s.locked?f:g);var b=y.filter(Boolean).join(' ');b&&i.setAttribute('class',b)},o.prototype.updateHighlight=function(){var t=this.model,e=t.get('textable'),n=t.get('highlightable')&&(e||!t.isChildOf('text'));this.setAttribute('data-gjs-highlightable',!!n||'')},o.prototype.updateStyle=function(e,n,o){void 0===o&&(o={});var i=this.model,r=this.em;if(Vn(r)&&!o.inline){var s=this.__cmpStyleOpts,a=i.getStyle(s);!(0,t.isEmpty)(a)&&i.setStyle(a,s)}else this.setAttribute('style',i.styleToString(o))},o.prototype.updateClasses=function(){var t=this.model.classes.pluck('name').join(' ');this.setAttribute('class',t),this.updateStatus(),this.onAttrUpdate()},o.prototype.setAttribute=function(t,e){var n=this.$el;e?n.attr(t,e):n.removeAttr(t)},o.prototype.getClasses=function(){return this.model.getClasses().join(' ')},o.prototype.updateAttributes=function(){var e=[],n=this,o=n.model,i=n.$el,r=n.el,s=o.attributes,a=s.textable,l=s.type,c=Ti(Ti({id:o.getId(),'data-gjs-type':l||'default'},this.__isDraggable()&&{draggable:!0}),a&&{contenteditable:'false'});(0,t.each)(r.attributes,(function(t){return e.push(t.nodeName)})),e.forEach((function(t){return i.removeAttr(t)})),this.updateStyle(),this.updateHighlight();var u=Ti(Ti({},c),o.getAttributes());(0,t.keys)(u).forEach((function(t){return!1===u[t]&&delete u[t]})),i.attr(u)},o.prototype.updateContent=function(){var t=this.model.content,e=this.model.components().length;this.getChildrenContainer().innerHTML=e?'':t},o.prototype.prevDef=function(t){t.preventDefault()},o.prototype.updateScript=function(){var t=this.model,e=this.em;t.scriptSubComp&&(null==e||e.Canvas.getCanvasView().updateScript(this))},o.prototype.getChildrenContainer=function(){var t=this.el;return'function'==typeof this.getChildrenSelector?t=this.el.querySelector(this.getChildrenSelector()):this.getTemplate,t},o.prototype.getOffsetRect=function(){var t={top:0,left:0,bottom:0,right:0},e=this.el,n=0,o=0,i=function(r){var s=r.offsetParent;s?(n+=s.offsetTop,o+=s.offsetLeft,i(s)):(t.top=e.offsetTop+n,t.left=e.offsetLeft+o,t.bottom=t.top+e.offsetHeight,t.right=t.left+e.offsetWidth)};return i(e),t},o.prototype.isInViewport=function(){var t=this,e=t.el,n=t.em,o=t.frameView,i=n.Canvas.getCanvasView().getElBoxRect(e,{local:!0}),r=o.el,s=r.clientHeight,a=r.clientWidth,l=i.y,c=i.x,u=l+i.height,p=c+i.width;return(l>=0&&l<s||u>0&&u<s)&&(p>=0&&p<a||c>0&&c<=a)},o.prototype.scrollIntoView=function(t){var e;if(void 0===t&&(t={}),!this.isInViewport()||t.force){var n=this.el;if('smooth'!==t.behavior){var o=this.getOffsetRect();null===(e=n.ownerDocument.defaultView)||void 0===e||e.scrollTo(0,o.top)}else n.scrollIntoView(Ti({behavior:'smooth',block:'nearest'},t))}},o.prototype.reset=function(){var t=this.el;this.$el.empty(),this._ensureElement(),this._setData(),(0,yt.dL)(t,this.el),this.render()},o.prototype._setData=function(){var t=this.model,e=t.components();this.$el.data({model:t,collection:e,view:this})},o.prototype._createElement=function(t){return this.createDoc.createElement(t)},o.prototype.renderChildren=function(){this.updateContent();var t=this.getChildrenContainer(),e=this.childrenView||new Pi({collection:this.model.get('components'),config:this.config,componentTypes:this.opts.componentTypes});e.render(t),this.childrenView=e;for(var n=Array.prototype.slice.call(e.el.childNodes),o=0,i=n.length;o<i;o++)t.appendChild(n.shift())},o.prototype.renderAttributes=function(){this.updateAttributes(),this.updateClasses()},o.prototype.onAttrUpdate=function(){},o.prototype.render=function(){return this.renderAttributes(),this.modelOpt.temporary||(this.updateScript(),this.renderChildren(),(0,e.setViewEl)(this.el,this),this.postRender()),this},o.prototype.postRender=function(){this.modelOpt.temporary||this.onRender(this._clbObj())},o.getEvents=function(){return(0,t.result)(this.prototype,'events')},o}(l.G7);const Ai=Ei;var Qi=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const $i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Qi(e,t),e.prototype._setAttributes=function(){},e.prototype.renderAttributes=function(){},e.prototype.updateStatus=function(){},e.prototype.updateClasses=function(){},e.prototype.setAttribute=function(){},e.prototype.updateAttributes=function(){},e.prototype.initClasses=function(){},e.prototype.initComponents=function(){},e.prototype.delegateEvents=function(){return this},e.prototype._createElement=function(){return document.createTextNode('')},e.prototype.render=function(){var t=this.model,e=this.el;return t.opt.temporary||(e.textContent=t.content),this},e}(Ai);var ji=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Ri=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ji(e,t),e.prototype._createElement=function(){return document.createComment(this.model.content)},e}($i);var Mi=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Vi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Mi(e,t),e.prototype.tagName=function(){return'div'},e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),this.listenTo(this.model,'change:attributes:src',this.updateSrc)},e.prototype.updateSrc=function(){var t=(0,yt.sE)(this.el,'iframe')[0];t&&(0,yt.FW)(t,{src:this.__getSrc()})},e.prototype.render=function(){t.prototype.render.call(this);var e=(0,yt.ut)('iframe',{class:"".concat(this.ppfx,"no-pointer"),style:'width: 100%; height: 100%; border: none',src:this.__getSrc()});return this.el.appendChild(e),this},e.prototype.__getSrc=function(){return this.model.getAttributes().src||''},e}(Ai);var Zi=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Di=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return Zi(n,e),n.prototype.tagName=function(){return'img'},n.prototype.events=function(){return{dblclick:'onActive',click:'initResize',error:'onError',load:'onLoad',dragstart:'noDrag'}},n.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.listenTo(this.model,'change:src',this.updateSrc),this.classEmpty="".concat(this.ppfx,"plh-image"),this.fetchFile()},n.prototype.fetchFile=function(){if(!this.modelOpt.temporary){var e=this.model,n=this.em,o=e.get('file');if(o&&n){var i=n.Assets.FileUploader();null==i||i.uploadFile({dataTransfer:{files:[o]}},(function(n){var o=n&&n.data&&n.data[0],i=o&&((0,t.isString)(o)?o:o.src);i&&e.set({src:i})})),e.set('file','')}}},n.prototype.updateSrc=function(){var t=this.model;t.addAttributes({src:t.getSrcResult()}),this.updateClasses()},n.prototype.updateClasses=function(){e.prototype.updateClasses.call(this);var t=this,n=t.el,o=t.classEmpty,i=t.model,r=i.getSrcResult()&&!i.isDefaultSrc()?'remove':'add';n.classList[r](o)},n.prototype.onActive=function(t){null==t||t.stopPropagation();var e=this.em,n=this.model,o=null==e?void 0:e.Assets;o&&n.get('editable')&&o.open({select:function(t,e){n.set({src:t.getSrc()}),e&&o.close()},target:n,types:['image'],accept:'image/*'})},n.prototype.onError=function(){var t=this.model.getSrcResult({fallback:!0});t&&(this.el.src=t)},n.prototype.onLoad=function(){this.em.trigger('change:canvasOffset')},n.prototype.noDrag=function(t){return t.preventDefault(),!1},n.prototype.render=function(){if(this.renderAttributes(),this.modelOpt.temporary)return this;this.updateSrc();var t=this.$el,e=this.model,n=t.attr('class')||'';return!e.get('src')&&t.attr('class',"".concat(n," ").concat(this.classEmpty).trim()),this.postRender(),this},n}(Ai);const Ii=Di;var Ni=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Wi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ni(e,t),e}(Ai);var Xi=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Li=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Xi(e,t),e.prototype.render=function(){return t.prototype.render.call(this),this.el.addEventListener('click',this.prevDef,!0),this},e}(Ai);var zi=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Ui=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zi(e,t),e.prototype.tagName=function(){return'div'},e.prototype.events=function(){return{}},e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),this.classEmpty=this.ppfx+'plh-map'},e.prototype.updateSrc=function(){this.getIframe().src=this.model.get('src')},e.prototype.getIframe=function(){if(!this.iframe){var t=document.createElement('iframe');t.src=this.model.get('src'),t.frameBorder='0',t.style.height='100%',t.style.width='100%',t.className=this.ppfx+'no-pointer',this.iframe=t}return this.iframe},e.prototype.render=function(){return t.prototype.render.call(this),this.updateClasses(),this.el.appendChild(this.getIframe()),this},e}(Ii);var qi=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Yi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return qi(e,t),e.prototype.tagName=function(){return'script'},e.prototype.events=function(){return{}},e}(Ai);var Bi=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Fi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Bi(e,t),e.prototype._createElement=function(t){return document.createElementNS('http://www.w3.org/2000/svg',t)},e}(Ai);const Gi=Fi;var Hi=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Ki=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Hi(e,t),e}(Ai);var Ji=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const tr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ji(e,t),e}(Ai);var er=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const nr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return er(e,t),e}(Ai);var or=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const ir=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return or(e,t),e}(Ai);var rr=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const sr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return rr(e,t),e}(Ai);var ar=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const lr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ar(e,t),e.prototype.events=function(){return{}},e}(Ai);var cr=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ur=void 0&&(void 0).__assign||function(){return ur=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},ur.apply(this,arguments)},pr=void 0&&(void 0).__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function s(t){try{l(o.next(t))}catch(t){r(t)}}function a(t){try{l(o["throw"](t))}catch(t){r(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((o=o.apply(t,e||[])).next())}))},hr=void 0&&(void 0).__generator||function(t,e){var n,o,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,a[0]&&(s=0)),s;)try{if(n=1,o&&(i=2&a[0]?o["return"]:a[0]?o["throw"]||((i=o["return"])&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,o=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},dr=function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return cr(o,n),o.prototype.events=function(){return{dblclick:'onActive',input:'onInput'}},o.prototype.initialize=function(e){n.prototype.initialize.call(this,e),(0,t.bindAll)(this,'disableEditing','onDisable');var o=this.model,i=this.em;this.listenTo(o,'focus',this.onActive),this.listenTo(o,'change:content',this.updateContentText),this.listenTo(o,'sync:content',this.syncContent),this.rte=null==i?void 0:i.RichTextEditor},o.prototype.updateContentText=function(t,e,n){void 0===n&&(n={}),!n.fromDisable&&this.disableEditing()},o.prototype.canActivate=function(){var t,e=this,n=e.model,o=e.rteEnabled,i=e.em,r=(null==i?void 0:i.getEditing())===n,s=!0,a=!1;if((o||!n.get('editable')||r||(a=n.isChildOf('text')))&&(s=!1,a&&!n.get('textable'))){for(var l=n.parent();l&&!l.isInstanceOf('text');)l=l.parent();l&&l.get('editable')?t=l:s=!0}return{result:s,delegate:t}},o.prototype.onActive=function(t){var e,n;return pr(this,void 0,void 0,(function(){var o,i,r,s,a,l,c,u,p;return hr(this,(function(h){switch(h.label){case 0:return i=(o=this).rte,r=o.em,s=this.canActivate(),a=s.result,l=s.delegate,a?(null===(n=null==t?void 0:t.stopPropagation)||void 0===n||n.call(t),c=this,[4,this.getContent()]):(l&&(null===(e=null==t?void 0:t.stopPropagation)||void 0===e||e.call(t),r.setSelected(l),l.trigger('active',t)),[2]);case 1:if(c.lastContent=h.sent(),!i)return[3,5];h.label=2;case 2:return h.trys.push([2,4,,5]),u=this,[4,i.enable(this,this.activeRte,{event:t})];case 3:return u.activeRte=h.sent(),[3,5];case 4:return p=h.sent(),r.logError(p),[3,5];case 5:return this.toggleEvents(!0),[2]}}))}))},o.prototype.onDisable=function(t){this.disableEditing(t)},o.prototype.disableEditing=function(t){return void 0===t&&(t={}),pr(this,void 0,void 0,(function(){var e,n,o,i,r,s,a,l;return hr(this,(function(c){switch(c.label){case 0:if(n=(e=this).model,o=e.rte,i=e.activeRte,r=e.em,s=n&&n.get('editable'),!o)return[3,8];c.label=1;case 1:return c.trys.push([1,3,,4]),[4,o.disable(this,i,t)];case 2:return c.sent(),[3,4];case 3:return a=c.sent(),r.logError(a),[3,4];case 4:return(l=s)?[4,this.getContent()]:[3,6];case 5:l=c.sent()!==this.lastContent,c.label=6;case 6:return l?[4,this.syncContent(t)]:[3,8];case 7:c.sent(),this.lastContent='',c.label=8;case 8:return this.toggleEvents(),[2]}}))}))},o.prototype.getContent=function(){return pr(this,void 0,void 0,(function(){var t,e,n,o;return hr(this,(function(i){switch(i.label){case 0:return e=(t=this).rte,n=t.activeRte,o='',e?[4,e.getContent(this,n)]:[3,2];case 1:o=i.sent(),i.label=2;case 2:return[2,o]}}))}))},o.prototype.syncContent=function(t){return void 0===t&&(t={}),pr(this,void 0,void 0,(function(){var e,n,o,i,r,s;return hr(this,(function(a){switch(a.label){case 0:return n=(e=this).model,o=e.rte,e.rteEnabled||t.force?[4,this.getContent()]:[2];case 1:return i=a.sent(),r=n.components(),s=ur({fromDisable:1},t),n.set('content','',s),(null==o?void 0:o.customRte)&&!o.customRte.parseContent?(r.length&&r.reset(void 0,ur(ur({},t),{keepIds:$e(r)})),n.set('content',i,s)):r.resetFromString(i,t),[2]}}))}))},o.prototype.insertComponent=function(t,n){var o;void 0===n&&(n={});var i=this.model,r=this.el.ownerDocument.getSelection();if(null==r?void 0:r.rangeCount){var s=r.getRangeAt(0),a=s.startContainer,l=s.startOffset,c=(0,e.getComponentModel)(a),u=[];if(c&&(null===(o=c.is)||void 0===o?void 0:o.call(c,'textnode'))){var p=c.collection;p.forEach((function(e){if(e===c){var o='textnode',i=n.useDomContent?a.textContent||'':e.content;u.push({type:o,content:i.slice(0,l)}),u.push(t),u.push({type:o,content:i.slice(l)})}else u.push(e)}));var h=u.filter(Boolean),d=h.indexOf(t);return p.reset(h,n),p.at(d)}}return i.append(t,n)},o.prototype.onInput=function(){var t=this.em,e='component',n=["".concat(e,":update"),"".concat(e,":input")].join(' ');t&&t.trigger(n,this.model)},o.prototype.disablePropagation=function(t){t.stopPropagation()},o.prototype.toggleEvents=function(t){var e=this,n=e.em,o=e.model,i=e.$el,r={on:yt.on,off:yt.S1},s=t?'on':'off';n.setEditing(!!t&&this),this.rteEnabled=!!t;var a=[this.el.ownerDocument,document];if(r.off(a,'mousedown',this.onDisable),r[s](a,'mousedown',this.onDisable),n[s]('toolbar:run:before',this.onDisable),o&&(o[s]('removed',this.onDisable),o.trigger("rte:".concat(t?'enable':'disable'))),null==i||i.off('mousedown',this.disablePropagation),i&&i[s]('mousedown',this.disablePropagation),this.config.draggableComponents)for(var l=this.el;l;)l.draggable=!t,(l=l.parentNode)&&'BODY'==l.tagName&&(l=0)},o}(Ai);const fr=dr;var gr=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),mr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return gr(e,t),e.prototype.tagName=function(){return'div'},e.prototype.events=function(){return{}},e.prototype.initialize=function(){Ai.prototype.initialize.apply(this,arguments);var t=this.model,e=['loop','autoplay','controls','color','rel','modestbranding','poster'].map((function(t){return"change:".concat(t)})).join(' ');this.listenTo(t,'change:provider',this.updateProvider),this.listenTo(t,'change:src',this.updateSrc),this.listenTo(t,e,this.updateVideo)},e.prototype.updateProvider=function(){var t=this.model.get('provider');this.el.innerHTML='',this.el.appendChild(this.renderByProvider(t))},e.prototype.updateSrc=function(){var t=this.model,e=this.videoEl;if(e){var n=t.get('provider'),o=t.get('src');switch(n){case'yt':o=t.getYoutubeSrc();break;case'ytnc':o=t.getYoutubeNoCookieSrc();break;case'vi':o=t.getVimeoSrc()}e.src=o}},e.prototype.updateVideo=function(){var t=this.model,e=this.videoEl;switch(t.get('provider')){case'yt':case'ytnc':case'vi':t.trigger('change:videoId');break;default:if(e){var n=e;n.loop=t.get('loop'),n.autoplay=t.get('autoplay'),n.controls=t.get('controls'),n.poster=t.get('poster')}}},e.prototype.renderByProvider=function(t){var e;switch(t){case'yt':e=this.renderYoutube();break;case'ytnc':e=this.renderYoutubeNoCookie();break;case'vi':e=this.renderVimeo();break;default:e=this.renderSource()}return this.videoEl=e,e},e.prototype.renderSource=function(){var t=document.createElement('video');return t.src=this.model.get('src'),this.initVideoEl(t),t},e.prototype.renderYoutube=function(){var t=document.createElement('iframe');return t.src=this.model.getYoutubeSrc(),t.frameBorder='0',t.setAttribute('allowfullscreen','true'),this.initVideoEl(t),t},e.prototype.renderYoutubeNoCookie=function(){var t=document.createElement('iframe');return t.src=this.model.getYoutubeNoCookieSrc(),t.frameBorder='0',t.setAttribute('allowfullscreen','true'),this.initVideoEl(t),t},e.prototype.renderVimeo=function(){var t=document.createElement('iframe');return t.src=this.model.getVimeoSrc(),t.frameBorder='0',t.setAttribute('allowfullscreen','true'),this.initVideoEl(t),t},e.prototype.initVideoEl=function(t){t.className=this.ppfx+'no-pointer',t.style.height='100%',t.style.width='100%'},e.prototype.render=function(){Ai.prototype.render.apply(this),this.updateClasses();var t=this.model.get('provider');return this.el.appendChild(this.renderByProvider(t)),this.updateVideo(),this},e}(Ii);const vr=mr;var yr=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const _r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return yr(e,t),e.prototype.tagName=function(){return'div'},e}(Ai);var Or,br=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),wr=void 0&&(void 0).__assign||function(){return wr=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},wr.apply(this,arguments)},xr=void 0&&(void 0).__rest||function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(t);i<o.length;i++)e.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(t,o[i])&&(n[o[i]]=t[o[i]])}return n};!function(t){t[t["InvalidSource"]=0]="InvalidSource",t[t["SourceReject"]=1]="SourceReject",t[t["TargetReject"]=2]="TargetReject"}(Or||(Or={}));var Sr=function(n){function o(t){var e=n.call(this,t,'DomComponents',new Me(void 0,{em:t}))||this;for(var o in e.componentTypes=[{id:'cell',model:qo,view:tr},{id:'row',model:ii,view:sr},{id:'table',model:Io,view:lr},{id:'thead',model:ti,view:ir},{id:'tbody',model:Lo,view:Ki},{id:'tfoot',model:Go,view:nr},{id:'map',model:So,view:Ui},{id:'link',model:Oo,view:Li},{id:'label',model:go,view:Wi},{id:'video',model:fi,view:vr},{id:'image',model:ao,view:Ii},{id:'script',model:To,view:Yi},{id:'svg-in',model:Mo,view:Gi},{id:'svg',model:$o,view:Gi},{id:'iframe',model:no,view:Vi},{id:'comment',model:Kn,view:Ri},{id:'textnode',model:Bn,view:$i},{id:'text',model:uo,view:fr},{id:'wrapper',model:xi,view:_r},{id:'default',model:zn,view:Ai}],e.componentsById={},e.Component=zn,e.Components=Me,e.ComponentView=Ai,e.ComponentsView=Pi,e.storageKey='components',t&&(e.config.components=t.config.components||e.config.components),ge)o in e.config||(e.config[o]=ge[o]);var i=e.config.pStylePrefix;if(i&&(e.config.stylePrefix=i+e.config.stylePrefix),t){t.get('Parser').compTypes=e.componentTypes,t.on('change:componentHovered',e.componentHovered,e);var r=t.get('selected');t.listenTo(r,'add',(function(t,n,o){return e.selectAdd(r.getComponent(t),o)})),t.listenTo(r,'remove',(function(t,n,o){return e.selectRemove(r.getComponent(t),o)}))}return e}return br(o,n),o.prototype.load=function(e){var n=this;return this.loadProjectData(e,{onResult:function(e){var o=n.getWrapper();if(o||(n.em.Pages.add({},{select:!0}),o=n.getWrapper()),(0,t.isArray)(e))e.length&&o.components(e);else{var i=e.components,r=void 0===i?[]:i,s=xr(e,["components"]);o.set(s),o.components(r)}}})},o.prototype.store=function(){return{}},o.prototype.getComponent=function(){var t=this.em.Pages.getSelected(),e=null==t?void 0:t.getMainFrame();return null==e?void 0:e.getComponent()},o.prototype.getWrapper=function(){return this.getComponent()},o.prototype.getComponents=function(){var t=this.getWrapper();return null==t?void 0:t.components()},o.prototype.addComponent=function(t,e){return void 0===e&&(e={}),this.getComponents().add(t,e)},o.prototype.render=function(){var t;return null===(t=this.componentView)||void 0===t?void 0:t.render().el},o.prototype.clear=function(t){void 0===t&&(t={});var e=this.getComponents();return null==e||e.filter(Boolean).forEach((function(e){return e.remove(t)})),this},o.prototype.setComponents=function(t,e){void 0===e&&(e={}),this.clear(e).addComponent(t,e)},o.prototype.addType=function(e,n){var o=this.em,i=n.model,r=void 0===i?{}:i,s=n.view,a=void 0===s?{}:s,l=n.isComponent,c=n.extend,u=n.extendView,p=n.extendFn,h=void 0===p?[]:p,d=n.extendFnView,f=void 0===d?[]:d,g=this.getType(e),m=this.getType(c),v=this.getType(u),y=m||(g||this.getType('default')),_=y.model,O=v?v.view:y.view,b=function(t,e,n){return t.reduce((function(t,o){var i=e[o],r=n.prototype[o];return i&&r&&(t[o]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];r.bind(this).apply(void 0,t),i.bind(this).apply(void 0,t)}),t}),{})};if('object'==typeof r){var w={defaults:r.defaults};delete r.defaults,n.model=_.extend(wr(wr({},r),b(h,r,_)),{isComponent:!g||m||l?l||function(){return 0}:_.isComponent}),Object.defineProperty(n.model.prototype,'defaults',{get:function(){return wr(wr({},(0,t.result)(_.prototype,'defaults')||{}),(0,t.result)(w,'defaults')||{})}})}'object'==typeof a&&(n.view=O.extend(wr(wr({},a),b(f,a,O)))),g?(g.model=n.model,g.view=n.view):(n.id=e,this.componentTypes.unshift(n));var x="component:type:".concat(g?'update':'add');return null==o||o.trigger(x,g||n),this},o.prototype.getType=function(t){for(var e=this.componentTypes,n=0;n<e.length;n++){if(e[n].id==t)return e[n]}},o.prototype.removeType=function(t){var e=this.componentTypes,n=this.getType(t);if(n){var o=e.indexOf(n);return e.splice(o,1),n}},o.prototype.getTypes=function(){return this.componentTypes},o.prototype.selectAdd=function(t,e){var n=this;void 0===e&&(e={}),t&&(t.set({status:'selected'}),['component:selected','component:toggled'].forEach((function(o){return n.em.trigger(o,t,e)})))},o.prototype.selectRemove=function(t,e){var n=this;if(void 0===e&&(e={}),t){this.em;t.set({status:'',state:''}),['component:deselected','component:toggled'].forEach((function(o){return n.em.trigger(o,t,e)}))}},o.prototype.componentHovered=function(){var e=this.em,n=e.get('componentHovered'),o=e.previous('componentHovered'),i='hovered';o&&o.get('status')==i&&o.set({status:'',state:''}),n&&(0,t.isEmpty)(n.get('status'))&&n.set('status',i)},o.prototype.getShallowWrapper=function(){var e=this.shallow,n=this.em;if(!e&&n){var o=n.shallow;if(!o)return;var i=o.Components;if(i.componentTypes=this.componentTypes,e=i.getWrapper()){var r=[Wn,Xn].join(' ');e.on(r,(0,t.debounce)((function(){return null==e?void 0:e.components('')}),100))}this.shallow=e}return e},o.prototype.isComponent=function(t){return(0,e.isComponent)(t)},o.prototype.canMove=function(n,o,i){var r={result:!1,reason:Or.InvalidSource,target:n,source:null};if(!o||!n)return r;var s=(0,e.isComponent)(o)?o:null;if(!s){var a=this.getShallowWrapper();s=(null==a?void 0:a.append(o)[0])||null}if(r.source=s,!s)return r;var l=s.get('draggable');if((0,t.isFunction)(l))l=!!l(s,n,i);else{var c=n.getEl();l=(0,t.isArray)(l)?l.join(','):l,l=(0,t.isString)(l)?null==c?void 0:c.matches(l):l}if(!l)return wr(wr({},r),{reason:Or.SourceReject});var u=n.get('droppable');if((0,t.isFunction)(u))u=!!u(s,n,i);else if(!1===u&&n.isInstanceOf('text')&&s.get('textable'))u=!0;else{c=s.getEl();u=(0,t.isArray)(u)?u.join(','):u,u=(0,t.isString)(u)?null==c?void 0:c.matches(u):u}var p=[n].concat(n.parents()).indexOf(s)>-1;return wr(wr({},r),!u||p?{reason:Or.TargetReject}:{result:!0})},o.prototype.allById=function(){return this.componentsById},o.prototype.getById=function(t){return this.componentsById[t]||null},o.prototype.destroy=function(){var t,e=this.allById();Object.keys(e).forEach((function(t){return e[t]&&e[t].remove()})),null===(t=this.componentView)||void 0===t||t.remove(),[this.em,this.componentsById,this.componentView].forEach((function(t){return{}}))},o}(v);const kr=Sr;const Pr={stylePrefix:'css-',rules:[]};var Cr=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Tr=Number.MAX_VALUE,Er=function(n){function o(){var e=n.call(this)||this;return(0,t.bindAll)(e,'sortRules'),e.compCls=[],e.ids=[],e}return Cr(o,n),o.prototype.buildFromModel=function(t,e){var n=this;void 0===e&&(e={});var o='',i=this.em,r=i&&i.getConfig().avoidInlineStyle,s=t.styleToString(),a=t.classes;return this.ids.push("#".concat(t.getId())),a.forEach((function(t){return n.compCls.push(t.getFullName())})),!r&&s&&(o="#".concat(t.getId(),"{").concat(s,"}")),t.components().forEach((function(t){return o+=n.buildFromModel(t,e)})),o},o.prototype.build=function(n,o){var i=this;void 0===o&&(o={});var r=o.json,s=o.em,a=o.cssc||(null==s?void 0:s.Css);this.em=s,this.compCls=[],this.ids=[],this.model=n;var l=[],c=n?this.buildFromModel(n,o):'',u=(0,t.isUndefined)(o.clearStyles)&&s?s.getConfig().clearStyles:o.clearStyles;if(a){var p=o.rules||a.getAll(),h={},d=[];o.onlyMatched&&n&&(0,e.hasWin)()&&(p=this.matchedRules(n,p)),p.forEach((function(t){var e=t.getAtRule();if(e){var n=h[e];n?n.push(t):h[e]=[t]}else{var s=i.buildFromRule(t,d,o);r?l.push(s):c+=s}})),this.sortMediaObject(h).forEach((function(t){var e='',n=t.key;t.value.forEach((function(t){var s=i.buildFromRule(t,d,o);t.get('singleAtRule')?c+="".concat(n,"{").concat(s,"}"):e+=s,r&&l.push(s)})),e&&(c+="".concat(n,"{").concat(e,"}"))})),s&&u&&p.remove&&p.remove(d)}return r?l.filter((function(t){return t})):c},o.prototype.buildFromRule=function(t,e,n){var o,i=this;void 0===n&&(n={});var r,s='',a=this.model,l=t.selectorsToString({skipAdd:1}),c=t.get('selectorsAdd'),u=t.get('singleAtRule');if(null===(o=t.get('selectors'))||void 0===o||o.forEach((function(t){var e=t.getFullName();(i.compCls.indexOf(e)>=0||i.ids.indexOf(e)>=0||n.keepUnusedStyles)&&(r=1)})),l&&r||c||u||!a){var p=t.getDeclaration({body:1});p&&(n.json?s=t:s+=p)}else e.push(t);return s},o.prototype.matchedRules=function(t,e){var n=this,o=t.getEl(),i=[];return e.forEach((function(t){try{t.selectorsToString().split(',').some((function(t){return null==o?void 0:o.matches(n.__cleanSelector(t))}))&&i.push(t)}catch(t){}})),t.components().forEach((function(t){i=i.concat(n.matchedRules(t,e))})),i=i.filter((function(t,e){return i.indexOf(t)===e}))},o.prototype.getQueryLength=function(t){var e=/(-?\d*\.?\d+)\w{0,}/.exec(t);return e?parseFloat(e[1]):Tr},o.prototype.sortMediaObject=function(e){var n=this;void 0===e&&(e={});var o=[];return(0,t.each)(e,(function(t,e){return o.push({key:e,value:t})})),o.sort((function(t,e){var o=[t.key,e.key].every((function(t){return-1!==t.indexOf('min-width')})),i=o?t.key:e.key,r=o?e.key:t.key;return n.getQueryLength(i)-n.getQueryLength(r)}))},o.prototype.sortRules=function(t,e){var n=function(t){return t.get('mediaText')||''},o=[n(t),n(e)].every((function(t){return-1!==t.indexOf('min-width')})),i=n(o?t:e),r=n(o?e:t);return this.getQueryLength(i)-this.getQueryLength(r)},o.prototype.__cleanSelector=function(t){return t.split(' ').map((function(t){return t.split(':')[0]})).join(' ')},o}(l.Hn);const Ar=Er;var Qr=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),$r=void 0&&(void 0).__assign||function(){return $r=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},$r.apply(this,arguments)},jr=void 0&&(void 0).__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))},Rr=((0,e.hasWin)()?window:{}).CSS,Mr=function(n){function o(t,e){void 0===e&&(e={});var o=n.call(this,t)||this;return o.config=t||{},o.opt=e,o.em=e.em,o.ensureSelectors(null,null,{}),o.on('change',o.__onChange),o}return Qr(o,n),o.prototype.defaults=function(){return{selectors:[],selectorsAdd:'',style:{},mediaText:'',state:'',stylable:!0,atRuleType:'',singleAtRule:!1,important:!1,group:'',shallow:!1,_undo:!0}},o.prototype.__onChange=function(t,n){var o=this.em,i=this.changedAttributes();i&&!(0,e.isEmptyObj)(i)&&(null==o||o.changesUp(n))},o.prototype.clone=function(){var t=$r({},this.opt),e=$r({},this.attributes);return e.selectors=this.get('selectors').map((function(t){return t.clone()})),new this.constructor(e,t)},o.prototype.ensureSelectors=function(e,n,o){var i=this.em,r=null==i?void 0:i.get('SelectorManager'),s=[this,'change:selectors',this.ensureSelectors],a=this.getSelectors();if(this.stopListening.apply(this,s),a.models&&(a=jr([],a.models,!0)),a=(0,t.isString)(a)?[a]:a,Array.isArray(a)){var l=a.filter((function(t){return t})).map((function(t){return r?r.add(t):t}));a=new Ne(l)}this.set('selectors',a,o),this.listenTo.apply(this,s)},o.prototype.getAtRule=function(){var t=this.get('atRuleType'),e=this.get('mediaText'),n=t?"@".concat(t):e?'@media':'';return n+(e&&n?" ".concat(e):'')},o.prototype.selectorsToString=function(t){void 0===t&&(t={});var e=[],n=this.get('state'),o=this.get('selectorsAdd'),i={escape:function(t){return Rr&&Rr.escape?Rr.escape(t):t}},r=this.get('selectors').getFullString(0,i),s=n&&!t.skipState?":".concat(n):'';return r&&e.push("".concat(r).concat(s)),o&&!t.skipAdd&&e.push(o),e.join(', ')},o.prototype.getDeclaration=function(t){void 0===t&&(t={});var e='',n=this.attributes.important,o=this.selectorsToString(t),i=this.styleToString($r({important:n},t)),r=this.get('singleAtRule');return(o||r)&&(i||t.allowEmpty)&&(e=r?i:"".concat(o,"{").concat(i,"}")),e},o.prototype.getDevice=function(){var t=this.em,e=this.attributes,n=e.atRuleType,o=e.mediaText,i=(null==t?void 0:t.get('DeviceManager').getDevices())||[],r=i.filter((function(t){return''===t.getWidthMedia()}))[0];return'media'===n&&o?i.filter((function(t){return t.getWidthMedia()===((e=/(-?\d*\.?\d+)\w{0,}/.exec(o))?e[0]:'');var e}))[0]||null:r||null},o.prototype.getState=function(){var t=this.em,e=this.get('state');return((null==t?void 0:t.get('SelectorManager').getStates())||[]).filter((function(t){return t.getName()===e}))[0]||null},o.prototype.getComponent=function(){var t,e=this.getSelectors(),n=1==e.length&&e.at(0),o=n&&n.isId()&&n.get('name');return o&&(null===(t=this.em)||void 0===t?void 0:t.Components.getById(o))||null},o.prototype.toCSS=function(t){void 0===t&&(t={});var e='',n=this.getAtRule(),o=this.getDeclaration(t);return(o||t.allowEmpty)&&(e=o),n&&e&&(e="".concat(n,"{").concat(e,"}")),e},o.prototype.toJSON=function(){for(var e,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var i=l.Hn.prototype.toJSON.apply(this,n);if(null===(e=this.em)||void 0===e?void 0:e.getConfig().avoidDefaults){var r=this.defaults();(0,t.forEach)(r,(function(t,e){i[e]===t&&delete i[e]})),delete i.style.__p,(0,t.isEmpty)(i.selectors)&&delete i.selectors,(0,t.isEmpty)(i.style)&&delete i.style}return i},o.prototype.compare=function(e,n,o,i){var r;void 0===i&&(i={});var s=n||'',a=o||'',l=i.selectorsAdd||'',c=i.atRuleType||'';a&&!c&&(c='media');var u=((0,t.isArray)(e)||e.models?e.models||e:[e]).map((function(t){return t.getFullName()})),p=null===(r=this.get('selectors'))||void 0===r?void 0:r.map((function(t){return t.getFullName()})),h=u.slice().sort(),d=p.slice().sort();return!(u.length!==p.length||!h.every((function(t,e){return t===d[e]})))&&(this.get('state')===s&&this.get('mediaText')===a&&this.get('selectorsAdd')===l&&this.get('atRuleType')===c)},o}(Ce);const Vr=Mr;var Zr=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Dr=function(t){function e(e,n){var o=t.call(this,e)||this;return o.editor=null==n?void 0:n.em,setTimeout((function(){o.on('remove',o.onRemove),o.on('add',o.onAdd)})),o}return Zr(e,t),e.prototype.toJSON=function(t){return l.FE.prototype.toJSON.call(this,t).filter((function(t){return t.style&&!t.shallow}))},e.prototype.onAdd=function(t,e,n){t.ensureSelectors(t,e,n)},e.prototype.onRemove=function(t){var e=this.editor;e.stopListening(t),e.UndoManager.remove(t)},e.prototype.add=function(t,e){return void 0===e&&(e={}),'string'==typeof t&&(t=this.editor.get('Parser').parseCss(t)),e.em=this.editor,l.FE.prototype.add.apply(this,[t,e])},e}(l.FE);const Ir=Dr;Dr.prototype.model=Vr;var Nr=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Wr=void 0&&(void 0).__assign||function(){return Wr=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Wr.apply(this,arguments)},Xr=void 0&&(void 0).__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))},Lr=function(n){function o(t){var e=n.call(this,t,'CssComposer',null,{},Pr)||this;e.Selectors=Ne,e.storageKey='styles';var o=e.config,i=o.pStylePrefix;return i&&(o.stylePrefix=i+o.stylePrefix),o.rules=e.em.config.style||o.rules||'',e.rules=new Ir([],o),e}return Nr(o,n),o.prototype.onLoad=function(){this.rules.add(this.config.rules,{silent:!0})},o.prototype.postLoad=function(){var t,e=null===(t=this.em)||void 0===t?void 0:t.get('UndoManager');e&&e.add(this.getAll())},o.prototype.store=function(){return this.getProjectData()},o.prototype.load=function(t){return this.loadProjectData(t,{all:this.rules})},o.prototype.add=function(t,e,n,o,i){void 0===o&&(o={}),void 0===i&&(i={});var r=e||'',s=n||'',a=Wr({},o),l=this.get(t,r,s,a);return l&&l.config&&!l.config.singleAtRule||(a.state=r,a.mediaText=s,a.selectors=[],s&&!a.atRuleType&&(a.atRuleType='media'),(l=new Vr(a,this.config)).get('selectors').add(t,i),this.rules.add(l,i)),l},o.prototype.get=function(e,n,o,i){var r=e;if((0,t.isString)(e)){var s=this.em.Selectors,a=e.split(',')[0].trim(),l=this.em.Parser.parserCss.checkNode({selectors:a})[0];r=s.get(l.selectors)}return this.rules.find((function(t){return t.compare(r,n,o,i)}))||null},o.prototype.getAll=function(){return this.rules},o.prototype.addCollection=function(n,o,i){void 0===o&&(o={}),void 0===i&&(i={});var r=this.em,s=[];(0,t.isString)(n)&&(n=r.Parser.parseCss(n));for(var a=n instanceof Array?n:[n],l=0,c=a.length;l<c;l++){var u=a[l]||{};if(u.selectors){var p=null==r?void 0:r.Selectors;p||console.warn('Selector Manager not found');for(var h=u.selectors,d=h instanceof Array?h:[h],f=[],g=0,m=d.length;g<m;g++){var v=p.add(d[g]);f.push(v)}var y=this.get(f,u.state,u.mediaText,u),_=this.add(f,u.state,u.mediaText,u,o),O=!y||!o.avoidUpdateStyle,b=u.style||{};if((0,e.isObject)(i)&&_.set(i,o),O){var w=o.extend?Wr(Wr({},_.get('style')),b):b;_.set('style',w,o)}s.push(_)}}return s},o.prototype.addRules=function(t){return this.addCollection(t)},o.prototype.setRule=function(t,e,n){void 0===e&&(e={}),void 0===n&&(n={});var o=n.atRuleType,i=n.atRuleParams,r=this.em.Parser.parserCss.checkNode({selectors:t,style:e})[0],s=r.state,a=r.selectorsAdd,l=this.em.Selectors.add(r.selectors),c=this.add(l,s,i,{selectorsAdd:a,atRule:o});return n.addStyles?c.addStyle(e,n):c.setStyle(e,n),c},o.prototype.getRule=function(t,e){void 0===e&&(e={});var n=this.em,o=n.Selectors,i=n.Parser.parserCss.checkNode({selectors:t})[0],r=o.get(i.selectors),s=i.state,a=i.selectorsAdd,l=e.atRuleType,c=e.atRuleParams;return r?this.get(r,s,c,{selectorsAdd:a,atRuleType:l}):void 0},o.prototype.getRules=function(e){var n=this.getAll();if(!e)return Xr([],n.models,!0);var o={sort:!0},i=(0,t.isString)(e)?e.split(',').map((function(t){return t.trim()})):e;return n.filter((function(t){return i.indexOf(t.getSelectors().getFullString(null,o))>=0}))},o.prototype.setIdRule=function(e,n,o){void 0===n&&(n={}),void 0===o&&(o={});var i=o.addOpts,r=void 0===i?{}:i,s=o.mediaText,a=o.state||'',l=(0,t.isUndefined)(s)?this.em.getCurrentMedia():s,c=this.em.Selectors.add({name:e,type:Ve.Z.TYPE_ID},r),u=this.add(c,a,l,{},r);return u.setStyle(n,Wr(Wr({},o),r)),u},o.prototype.getIdRule=function(e,n){void 0===n&&(n={});var o=n.mediaText,i=n.state||'',r=(0,t.isUndefined)(o)?this.em.getCurrentMedia():o,s=this.em.Selectors.get(e,Ve.Z.TYPE_ID);return s&&this.get(s,i,r)},o.prototype.setClassRule=function(t,e,n){void 0===e&&(e={}),void 0===n&&(n={});var o=n.state||'',i=n.mediaText||this.em.getCurrentMedia(),r=this.em.Selectors.add({name:t,type:Ve.Z.TYPE_CLASS}),s=this.add(r,o,i);return s.setStyle(e,n),s},o.prototype.getClassRule=function(t,e){void 0===e&&(e={});var n=e.state||'',o=e.mediaText||this.em.getCurrentMedia(),i=this.em.Selectors.get(t,Ve.Z.TYPE_CLASS);return i&&this.get(i,n,o)},o.prototype.remove=function(e,n){var o=(0,t.isString)(e)?this.getRules(e):e,i=this.getAll().remove(o,n);return(0,t.isArray)(i)?i:[i]},o.prototype.clear=function(t){return void 0===t&&(t={}),this.getAll().reset([],t),this},o.prototype.getComponentRules=function(e,n){void 0===n&&(n={});var o=n.state,i=n.mediaText;n.current&&(o=this.em.get('state')||'',i=this.em.getCurrentMedia());var r=e.getId();return this.getAll().filter((function(e){return!(!(0,t.isUndefined)(o)&&e.get('state')!==o)&&(!(!(0,t.isUndefined)(i)&&e.get('mediaText')!==i)&&e.getSelectorsString()==="#".concat(r))}))},o.prototype.render=function(){var t;return null===(t=this.rulesView)||void 0===t||t.remove(),this.rulesView=new Tt({collection:this.rules,config:this.config}),this.rulesView.render().el},o.prototype.checkId=function(e,n){void 0===n&&(n={});var o=n.idMap,i=void 0===o?{}:o,r=[];return Object.keys(i).length?((Array.isArray(e)?e:[e]).forEach((function(e){var n=e.selectors;if(n&&1==n.length){var o=n[0];if((0,t.isString)(o)){if('#'===o[0]){var s=o.substring(1),a=i[s];s&&a&&(n[0]="#".concat(a),r.push(e))}}else if(o.name&&o.type===Ve.Z.TYPE_ID){(a=i[o.name])&&(o.name=a,r.push(e))}}})),r):r},o.prototype.destroy=function(){var t;this.rules.reset(),this.rules.stopListening(),null===(t=this.rulesView)||void 0===t||t.remove()},o}(v);const zr=Lr;const Ur={appendTo:'',blocks:[],appendOnClick:!1,custom:!1};var qr=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Yr=void 0&&(void 0).__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))};const Br=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return qr(e,t),e.prototype.defaults=function(){return{id:'',label:'',open:!0,attributes:{}}},e.prototype.getId=function(){return this.get('id')},e.prototype.getLabel=function(){return this.get('label')},e}(l.Hn);var Fr=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Gr=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return Fr(n,e),n.prototype.defaults=function(){return{label:'',content:'',media:'',category:'',activate:!1,select:void 0,resetId:!1,disable:!1,onClick:void 0,attributes:{}}},Object.defineProperty(n.prototype,"category",{get:function(){var t=this.get('category');return t instanceof Br?t:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"parent",{get:function(){return this.collection},enumerable:!1,configurable:!0}),n.prototype.getId=function(){return this.id},n.prototype.getLabel=function(){return this.get('label')},n.prototype.getMedia=function(){return this.get('media')},n.prototype.getContent=function(){return this.get('content')},n.prototype.getCategoryLabel=function(){var e=this.get('category');return(0,t.isFunction)(null==e?void 0:e.get)?e.get('label'):(null==e?void 0:e.label)?null==e?void 0:e.label:e},n}(l.Hn);var Hr=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Kr='category',Jr=function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return Hr(o,n),o.prototype.initCategory=function(n){var o=n.get(Kr),i=o instanceof Br;if(o&&!i){(0,t.isString)(o)?o={id:o,label:o}:(0,e.isObject)(o)&&!o.id&&(o.id=o.label);var r=this.getCategories().add(o);return n.set(Kr,r,{silent:!0}),r}if(i){r=o;return this.getCategories().add(r),r}},o}(l.FE),ts=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),es=function(t){function e(e,n){var o=t.call(this,e)||this;return o.em=n.em,o.on('add',o.handleAdd),o}return ts(e,t),e.prototype.getCategories=function(){return this.em.Blocks.getCategories()},e.prototype.handleAdd=function(t){this.initCategory(t)},e}(Jr);const ns=es;es.prototype.model=Gr;var os=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),is=function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return os(o,n),o.prototype.add=function(o,i){return((0,t.isArray)(o)?o:[o]).forEach((function(t){return t&&(t.id=(0,e.normalizeKey)("".concat(t.id)))})),n.prototype.add.call(this,o,i)},o.prototype.get=function(o){return n.prototype.get.call(this,(0,t.isString)(o)?(0,e.normalizeKey)(o):o)},o}(l.FE);const rs=is;var ss;is.prototype.model=Br,function(t){t["add"]="block:add",t["remove"]="block:remove",t["removeBefore"]="block:remove:before",t["update"]="block:update",t["dragStart"]="block:drag:start",t["drag"]="block:drag",t["dragEnd"]="block:drag:stop",t["custom"]="block:custom",t["all"]="block"}(ss||(ss={}));var as=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ls=function(n){function o(t,e){void 0===e&&(e={});var o=n.call(this,t)||this,i=o.model;return o.em=e.em,o.config=e,o.endDrag=o.endDrag.bind(o),o.ppfx=e.pStylePrefix||'',o.listenTo(i,'destroy remove',o.remove),o.listenTo(i,'change',o.render),o}return as(o,n),o.prototype.events=function(){return{click:'handleClick',mousedown:'startDrag',dragstart:'handleDragStart',drag:'handleDrag',dragend:'handleDragEnd'}},o.prototype.__getModule=function(){return this.em.Blocks},o.prototype.handleClick=function(e){var n=this,o=n.config,i=n.model,r=n.em,s=i.get('onClick')||o.appendOnClick;if(r.trigger('block:click',i,e),s){if((0,t.isFunction)(s))return s(i,null==r?void 0:r.getEditor(),{event:e});var a,l,c=o.getSorter(),u=i.get('content'),p=r.getSelected();if(c.setDropContent(u),p)if(c.validTarget(p.getEl(),u).valid)a=p;else{var h=p.parent();h&&c.validTarget(h.getEl(),u).valid&&(a=h,l=h.components().indexOf(p)+1)}if(!a){var d=r.getWrapper();c.validTarget(d.getEl(),u).valid&&(a=d)}var f=a&&a.append(u,{at:l})[0];f&&r.setSelected(f,{scroll:1})}},o.prototype.startDrag=function(t){var e=this,n=e.config,o=e.em,i=e.model,r=i.get('disable');if(0===t.button&&n.getSorter&&!this.el.draggable&&!r){o.refreshCanvas();var s=n.getSorter();s.__currentBlock=i,s.setDragHelper(this.el,t),s.setDropContent(this.model.get('content')),s.startSort(this.el),(0,yt.on)(document,'mouseup',this.endDrag)}},o.prototype.handleDragStart=function(t){this.__getModule().__startDrag(this.model,t)},o.prototype.handleDrag=function(t){this.__getModule().__drag(t)},o.prototype.handleDragEnd=function(){this.__getModule().__endDrag()},o.prototype.endDrag=function(){(0,yt.S1)(document,'mouseup',this.endDrag);var t=this.config.getSorter();t.moved=0,t.endMove()},o.prototype.render=function(){var t,n=this,o=n.em,i=n.el,r=n.$el,s=n.ppfx,a=n.model,l=a.get('disable'),c=a.get('attributes')||{},u=c.class||'',p="".concat(s,"block"),h=o&&o.t("blockManager.labels.".concat(a.id))||a.get('label'),d=a.get('render'),f=a.get('media'),g=l?"".concat(p,"--disable"):"".concat(s,"four-color-h");r.attr(c),i.className="".concat(u," ").concat(p," ").concat(s,"one-bg ").concat(g).trim(),i.innerHTML="\n      ".concat(f?"<div class=\"".concat(p,"__media\">").concat(f,"</div>"):'',"\n      <div class=\"").concat(p,"-label\">").concat(h,"</div>\n    "),i.title=c.title||(null===(t=i.textContent)||void 0===t?void 0:t.trim()),i.setAttribute('draggable',"".concat(!(!(0,e.hasDnd)(o)||l)));var m=d&&d({el:i,model:a,className:p,prefix:s});return m&&(i.innerHTML=m),this},o}(l.G7);const cs=ls;var us=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ps=void 0&&(void 0).__makeTemplateObject||function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},hs=function(t){function e(e,n,o){var i=t.call(this,e)||this;i.config=n;var r=n.pStylePrefix||'';return i.em=n.em,i.catName=o,i.pfx=r,i.caretR='fa fa-caret-right',i.caretD='fa fa-caret-down',i.iconClass="".concat(r,"caret-icon"),i.activeClass="".concat(r,"open"),i.className="".concat(r).concat(o,"-category"),i.listenTo(i.model,'change:open',i.updateVisibility),i.model.view=i,i}return us(e,t),e.prototype.events=function(){return{'click [data-title]':'toggle'}},e.prototype.template=function(t){var e=t.pfx,o=t.label,i=t.catName;return n(fs||(fs=ps(["\n      <div class=\"","title\" data-title>\n        <i class=\"","caret-icon\"></i>\n        ","\n      </div>\n      <div class=\"","","s-c\"></div>\n    "],["\n      <div class=\"","title\" data-title>\n        <i class=\"","caret-icon\"></i>\n        ","\n      </div>\n      <div class=\"","","s-c\"></div>\n    "])),e,e,o,e,i)},e.prototype.attributes=function(){return this.model.get('attributes')||{}},e.prototype.updateVisibility=function(){this.model.get('open')?this.open():this.close()},e.prototype.open=function(){this.$el.addClass(this.activeClass),this.getIconEl().className="".concat(this.iconClass," ").concat(this.caretD),this.getTypeEl().style.display=''},e.prototype.close=function(){this.$el.removeClass(this.activeClass),this.getIconEl().className="".concat(this.iconClass," ").concat(this.caretR),this.getTypeEl().style.display='none'},e.prototype.toggle=function(){var t=this.model;t.set('open',!t.get('open'))},e.prototype.getIconEl=function(){return this.iconEl||(this.iconEl=this.el.querySelector(".".concat(this.iconClass))),this.iconEl},e.prototype.getTypeEl=function(){return this.typeEl||(this.typeEl=this.el.querySelector(".".concat(this.pfx).concat(this.catName,"s-c"))),this.typeEl},e.prototype.append=function(t){this.getTypeEl().appendChild(t)},e.prototype.render=function(){var t=this,e=t.em,n=t.el,o=t.$el,i=t.model,r=t.pfx,s=t.catName,a=e.t("".concat(s,"Manager.categories.").concat(i.id))||i.get('label');return n.innerHTML=this.template({pfx:r,label:a,catName:s}),o.addClass(this.className),o.css({order:i.get('order')}),this.updateVisibility(),this},e}(l.G7);const ds=hs;var fs,gs=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ms=void 0&&(void 0).__assign||function(){return ms=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},ms.apply(this,arguments)},vs=function(e){function n(n,o){var i=e.call(this,n)||this;i.renderedCategories=new Map,(0,t.bindAll)(i,'getSorter','onDrag','onDrop','onMove'),i.config=o||{},i.categories=n.categories||'';var r=i.config.pStylePrefix||'';i.ppfx=r,i.noCatClass="".concat(r,"blocks-no-cat"),i.blockContClass="".concat(r,"blocks-c"),i.catsClass="".concat(r,"block-categories");var s=i.collection;return i.listenTo(s,'add',i.addTo),i.listenTo(s,'reset',i.render),i.em=i.config.em,i.em&&(i.config.getSorter=i.getSorter),i}return gs(n,e),n.prototype.__getModule=function(){return this.em.Blocks},n.prototype.updateConfig=function(t){void 0===t&&(t={}),this.config=ms(ms({},this.config),t)},n.prototype.getSorter=function(){var t=this.em;if(t){if(!this.sorter){var e=t.Utils,n=t.Canvas;this.sorter=new e.Sorter({container:n.getBody(),placer:n.getPlacerEl(),containerSel:'*',itemSel:'*',pfx:this.ppfx,onStart:this.onDrag,onEndMove:this.onDrop,onMove:this.onMove,document:n.getFrameEl().contentDocument,direction:'a',wmargin:1,nested:1,em:t,canvasRelative:1})}return this.sorter}},n.prototype.onDrag=function(t){this.em.stopDefault(),this.__getModule().__startDrag(this.sorter.__currentBlock,t)},n.prototype.onMove=function(t){this.__getModule().__drag(t)},n.prototype.onDrop=function(t){this.em.runDefault(),this.__getModule().__endDrag({component:t}),delete this.sorter.__currentBlock},n.prototype.addTo=function(t){this.add(t)},n.prototype.add=function(t,e){var n=this.config,o=this.renderedCategories,i=t.get('attributes'),r=new cs({model:t,attributes:i},n).render().el,s=t.parent.initCategory(t);if(s&&this.categories&&!n.ignoreCategories){var a=s.getId(),l=this.getCategoriesEl(),c=o.get(a);return!c&&l&&(c=new ds({model:s},n,'block').render(),o.set(a,c),l.appendChild(c.el)),void(null==c||c.append(r))}e?e.appendChild(r):this.append(r)},n.prototype.getCategoriesEl=function(){return this.catsEl||(this.catsEl=this.el.querySelector(".".concat(this.catsClass))),this.catsEl},n.prototype.getBlocksEl=function(){return this.blocksEl||(this.blocksEl=this.el.querySelector(".".concat(this.noCatClass," .").concat(this.blockContClass))),this.blocksEl},n.prototype.append=function(t){var e=this.getBlocksEl();e&&e.appendChild(t)},n.prototype.render=function(){var t=this,e=this.ppfx,n=document.createDocumentFragment();delete this.catsEl,delete this.blocksEl,this.renderedCategories=new Map,this.el.innerHTML="\n      <div class=\"".concat(this.catsClass,"\"></div>\n      <div class=\"").concat(this.noCatClass,"\">\n        <div class=\"").concat(this.blockContClass,"\"></div>\n      </div>\n    "),this.collection.each((function(e){return t.add(e,n)})),this.append(n);var o="".concat(this.blockContClass,"s ").concat(e,"one-bg ").concat(e,"two-color");return this.$el.addClass(o),this.rendered=!0,this},n}(l.G7);const ys=vs;var _s=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Os=void 0&&(void 0).__assign||function(){return Os=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Os.apply(this,arguments)},bs=function(e){function n(n){var o,i=e.call(this,n,'BlockManager',new ns((null===(o=n.config.blockManager)||void 0===o?void 0:o.blocks)||[],{em:n}),ss,Ur)||this;return i.events=ss,i.Block=Gr,i.Blocks=ns,i.Category=Br,i.Categories=rs,i.storageKey='',i.blocks=i.all,i.blocksVisible=new ns(i.blocks.models,{em:n}),i.categories=new rs,i.blocks.on('add',(function(t){return i.blocksVisible.add(t)})),i.blocks.on('remove',(function(t){return i.blocksVisible.remove(t)})),i.blocks.on('reset',(function(t){return i.blocksVisible.reset(t.models)})),i.__onAllEvent=(0,t.debounce)((function(){return i.__trgCustom()}),0),i}return _s(n,e),n.prototype.__trgCustom=function(){this.em.trigger(this.events.custom,this.__customData())},n.prototype.__customData=function(){var t=this,e=this.__getBehaviour();return{bm:this,blocks:this.getAll().models,container:e.container,dragStart:function(e,n){return t.startDrag(e,n)},drag:function(e){return t.__drag(e)},dragStop:function(e){return t.endDrag(e)}}},n.prototype.__startDrag=function(t,e){var n=this,o=n.em,i=n.events,r=n.blocks,s=t.getContent?t.getContent():t;this._dragBlock=t,o.set({dragResult:null,dragContent:s}),[o,r].map((function(n){return n.trigger(i.dragStart,t,e)}))},n.prototype.__drag=function(t){var e=this,n=e.em,o=e.events,i=e.blocks,r=this._dragBlock;[n,i].map((function(e){return e.trigger(o.drag,r,t)}))},n.prototype.__endDrag=function(e){void 0===e&&(e={});var n=this,o=n.em,i=n.events,r=n.blocks,s=this._dragBlock,a=e.component||o.get('dragResult');if(delete this._dragBlock,a&&s){var l='activeOnRender',c=a.get&&a.get(l),u=s.get('activate')||c,p=s.get('select'),h=(0,t.isArray)(a)?a[0]:a;(p||u&&!1!==p)&&o.setSelected(h),u&&(h.trigger('active'),c&&h.unset(l)),s.get('resetId')&&h.onAll((function(t){return t.resetId()}))}o.set({dragResult:null,dragContent:null}),s&&[o,r].map((function(t){return t.trigger(i.dragEnd,a,s)}))},n.prototype.__getFrameViews=function(){return this.em.Canvas.getFrames().map((function(t){return t.view})).filter(Boolean)},n.prototype.__behaviour=function(t){return void 0===t&&(t={}),this._bhv=Os(Os({},this._bhv||{}),t)},n.prototype.__getBehaviour=function(){return this._bhv||{}},n.prototype.startDrag=function(t,e){this.__startDrag(t,e),this.__getFrameViews().forEach((function(t){var e;return null===(e=t.droppable)||void 0===e?void 0:e.startCustom()}))},n.prototype.endDrag=function(t){this.__getFrameViews().forEach((function(e){var n;return null===(n=e.droppable)||void 0===n?void 0:n.endCustom(t)})),this.__endDrag()},n.prototype.postRender=function(){var t=this,e=t.categories,n=t.config,o=t.em,i=this.blocksVisible;this.blocksView=new ys({collection:i,categories:e},Os(Os({},n),{em:o})),this.__appendTo(i.models),this.__trgCustom()},n.prototype.add=function(t,e,n){void 0===n&&(n={});var o=e||{};return o.id=t,this.blocks.add(o,n)},n.prototype.get=function(t){return this.blocks.get(t)},n.prototype.getAll=function(){return this.blocks},n.prototype.getAllVisible=function(){return this.blocksVisible},n.prototype.remove=function(t,e){return void 0===e&&(e={}),this.__remove(t,e)},n.prototype.getCategories=function(){return this.categories},n.prototype.getContainer=function(){var t;return null===(t=this.blocksView)||void 0===t?void 0:t.el},n.prototype.getDragBlock=function(){return this._dragBlock},n.prototype.getBlocksByCategory=function(t){return function(t){var e=new Set,n=new Map,o={items:[]};t.forEach((function(t){var i=t.category;if(i){e.add(i);var r=n.get(i);r?r.push(t):n.set(i,[t])}else o.items.push(t)}));var i=Array.from(e).map((function(t){return{category:t,items:n.get(t)||[]}}));return Yr(Yr([],i,!0),[o],!1)}(t||this.getAll().models)},n.prototype.render=function(t,e){void 0===e&&(e={});var n=this,o=n.categories,i=n.config,r=n.em,s=t||this.getAll().models;if(e.external){var a=new ns(s,{em:r});return new ys({collection:a,categories:o},Os(Os({em:r},i),e)).render().el}return this.blocksView&&(this.blocksView.updateConfig(e),this.blocksView.collection.reset(s),this.blocksView.rendered||(this.blocksView.render(),this.blocksView.rendered=!0)),this.getContainer()},n.prototype.destroy=function(){var t,e=[this.blocks,this.blocksVisible,this.categories];e.map((function(t){return t.stopListening()})),e.map((function(t){return t.reset()})),null===(t=this.blocksView)||void 0===t||t.remove()},n}(v);const ws=bs;const xs={stylePrefix:'clm-',appendTo:'',selectors:[],states:[{name:'hover'},{name:'active'},{name:'nth-of-type(2n)'}],iconAdd:'<svg viewBox="0 0 24 24"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></path></svg>',iconSync:'<svg viewBox="0 0 24 24"><path d="M12 18c-3.31 0-6-2.69-6-6 0-1 .25-1.97.7-2.8L5.24 7.74A7.93 7.93 0 0 0 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4m0-11V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1-.25 1.97-.7 2.8l1.46 1.46A7.93 7.93 0 0 0 20 12c0-4.42-3.58-8-8-8z"></path></svg>',iconTagOn:'<svg viewBox="0 0 24 24"><path d="M19 19H5V5h10V3H5c-1.11 0-2 .89-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-8h-2m-11.09-.92L6.5 11.5 11 16 21 6l-1.41-1.42L11 13.17l-3.09-3.09z"></path></svg>',iconTagOff:'<svg viewBox="0 0 24 24"><path d="M19 3H5c-1.11 0-2 .89-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5a2 2 0 0 0-2-2m0 2v14H5V5h14z"></path></svg>',iconTagRemove:'<svg viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>',componentFirst:!1,custom:!1};var Ss=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ks=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ss(e,t),e.prototype.defaults=function(){return{name:'',label:''}},e.prototype.getName=function(){return this.get('name')},e.prototype.getLabel=function(){return this.get('label')||this.getName()},e}(l.Hn);const Ps=ks;ks.prototype.idAttribute='name';var Cs=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ts=void 0&&(void 0).__makeTemplateObject||function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},Es='contentEditable',As=function(t){function e(e){void 0===e&&(e={});var n=t.call(this,e)||this,o=e.config||{};return n.config=o,n.module=e.module,n.coll=e.coll||null,n.pfx=o.stylePrefix||'',n.ppfx=o.pStylePrefix||'',n.em=o.em,n.listenTo(n.model,'change:active',n.updateStatus),n}return Cs(e,t),e.prototype.template=function(){var t=this,e=t.pfx,o=t.model,i=t.config,r=o.get('label')||'';return n($s||($s=Ts(["\n      <span id=\"","checkbox\" class=\"","tag-status\" data-tag-status></span>\n      <span id=\"","tag-label\" data-tag-name>","</span>\n      <span id=\"","close\" class=\"","tag-close\" data-tag-remove> $"," </span>\n    "],["\n      <span id=\"","checkbox\" class=\"","tag-status\" data-tag-status></span>\n      <span id=\"","tag-label\" data-tag-name>","</span>\n      <span id=\"","close\" class=\"","tag-close\" data-tag-remove> $"," </span>\n    "])),e,e,e,r,e,e,i.iconTagRemove)},e.prototype.events=function(){return{'click [data-tag-remove]':'removeTag','click [data-tag-status]':'changeStatus','dblclick [data-tag-name]':'startEditTag','focusout [data-tag-name]':'endEditTag'}},e.prototype.getInputEl=function(){return this.inputEl||(this.inputEl=this.el.querySelector('[data-tag-name]')),this.inputEl},e.prototype.startEditTag=function(){var t=this.em,e=this.getInputEl();e[Es]='true',e.focus(),null==t||t.setEditing(!0)},e.prototype.endEditTag=function(){var t=this.model,e=this.em,n=this.getInputEl(),o=n.textContent||'',i=null==e?void 0:e.Selectors;n[Es]='false',null==e||e.setEditing(!1),i&&i.rename(t,o)!==t&&(n.innerText=t.getLabel())},e.prototype.changeStatus=function(){var t=this.model;t.set('active',!t.getActive())},e.prototype.removeTag=function(){this.module.removeSelected(this.model)},e.prototype.updateStatus=function(){var t=this,e=t.model,n=t.$el,o=t.config,i=o.iconTagOn,r=o.iconTagOff,s=n.find('[data-tag-status]');e.get('active')?(s.html(i),n.removeClass('opac50')):(s.html(r),n.addClass('opac50'))},e.prototype.render=function(){var t=this,e=t.pfx,n=t.ppfx,o=t.$el,i=t.model,r="".concat(e,"tag"),s=["".concat(r," ").concat(n,"three-bg")];return i.get('protected')&&s.push("".concat(r,"-protected")),o.html(this.template()),o.attr('class',s.join(' ')),this.updateStatus(),this},e}(l.G7);const Qs=As;var $s,js=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Rs=void 0&&(void 0).__makeTemplateObject||function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},Ms=function(e){function o(n){void 0===n&&(n={});var o=e.call(this,n)||this;o.config=n.config||{},o.pfx=o.config.stylePrefix||'',o.ppfx=o.config.pStylePrefix||'',o.className=o.pfx+'tags',o.stateInputId=o.pfx+'states',o.stateInputC=o.pfx+'input-c',o.states=o.config.states||[];var i=o.config.em,r=o.collection;o.target=i;var s=i.Selectors;o.module=s,o.em=i,o.componentChanged=(0,t.debounce)(o.componentChanged.bind(o),0),o.checkSync=(0,t.debounce)(o.checkSync.bind(o),0);return o.listenTo(i,'component:toggled component:update:classes',o.componentChanged),o.listenTo(i,'styleManager:update',o.componentChanged),o.listenTo(i,'component:update:classes change:state',o.__handleStateChange),o.listenTo(i,'styleable:change change:device',o.checkSync),o.listenTo(r,'add',o.addNew),o.listenTo(r,'reset',o.renderClasses),o.listenTo(r,'remove',o.tagRemoved),o.listenTo(s.getAll(),s.events.state,(0,t.debounce)((function(){return o.renderStates()}),0)),o.delegateEvents(),o}return js(o,e),o.prototype.template=function(t){var e=t.labelInfo,o=t.labelHead,i=t.iconSync,r=t.iconAdd,s=t.pfx,a=t.ppfx;return n(Zs||(Zs=Rs([" <div id=\"","up\" class=\"","header\">\n        <div id=\"","label\" class=\"","header-label\">","</div>\n        <div id=\"","status-c\" class=\"","header-status\">\n          <span id=\"","input-c\" data-states-c>\n            <div class=\"","field ","select\">\n              <span id=\"","input-holder\">\n                <select id=\"","states\" data-states></select>\n              </span>\n              <div class=\"","sel-arrow\">\n                <div class=\"","d-s-arrow\"></div>\n              </div>\n            </div>\n          </span>\n        </div>\n      </div>\n      <div id=\"","tags-field\" class=\"","field\">\n        <div id=\"","tags-c\" data-selectors></div>\n        <input id=\"","new\" data-input />\n        <span id=\"","add-tag\" class=\"","tags-btn ","tags-btn__add\" data-add> $"," </span>\n        <span class=\"","tags-btn ","tags-btn__sync\" style=\"display: none\" data-sync-style> $"," </span>\n      </div>\n      <div class=\"","sels-info\">\n        <div class=\"","label-sel\">",":</div>\n        <div class=\"","sels\" data-selected></div>\n      </div>"],[" <div id=\"","up\" class=\"","header\">\n        <div id=\"","label\" class=\"","header-label\">","</div>\n        <div id=\"","status-c\" class=\"","header-status\">\n          <span id=\"","input-c\" data-states-c>\n            <div class=\"","field ","select\">\n              <span id=\"","input-holder\">\n                <select id=\"","states\" data-states></select>\n              </span>\n              <div class=\"","sel-arrow\">\n                <div class=\"","d-s-arrow\"></div>\n              </div>\n            </div>\n          </span>\n        </div>\n      </div>\n      <div id=\"","tags-field\" class=\"","field\">\n        <div id=\"","tags-c\" data-selectors></div>\n        <input id=\"","new\" data-input />\n        <span id=\"","add-tag\" class=\"","tags-btn ","tags-btn__add\" data-add> $"," </span>\n        <span class=\"","tags-btn ","tags-btn__sync\" style=\"display: none\" data-sync-style> $"," </span>\n      </div>\n      <div class=\"","sels-info\">\n        <div class=\"","label-sel\">",":</div>\n        <div class=\"","sels\" data-selected></div>\n      </div>"])),s,s,s,s,o,s,s,s,a,a,a,s,a,a,s,a,s,s,s,s,s,r,s,s,i,s,s,e,s)},o.prototype.events=function(){return{'change [data-states]':'stateChanged','click [data-add]':'startNewTag','focusout [data-input]':'endNewTag','keyup [data-input]':'onInputKeyUp','click [data-sync-style]':'syncStyle'}},o.prototype.syncStyle=function(){var t,e=this.em,n=this.getTarget(),o=e.Css,i=this.getCommonSelectors({opts:{noDisabled:1}}),r=e.get('state'),s=e.getCurrentMedia(),a=[],l=o.get(i,r,s)||o.add(i,r,s);this.getTargets().forEach((function(e){var n=o.getIdRule(e.getId(),{state:r,mediaText:s});t=n.getStyle(),n.setStyle({}),a.push(n)})),t&&l.addStyle(t),e.trigger('component:toggled'),e.trigger('component:sync-style',{component:n,selectors:i,mediaText:s,rule:l,ruleComponents:a,state:r})},o.prototype.tagRemoved=function(t){this.updateStateVis()},o.prototype.addNew=function(t){this.addToClasses(t)},o.prototype.startNewTag=function(){var t,e;null===(t=this.$addBtn)||void 0===t||t.css({display:'none'}),null===(e=this.$input)||void 0===e||e.show().focus()},o.prototype.endNewTag=function(){var t,e;null===(t=this.$addBtn)||void 0===t||t.css({display:''}),null===(e=this.$input)||void 0===e||e.hide().val('')},o.prototype.onInputKeyUp=function(t){var e;13===t.keyCode?(t.preventDefault(),this.addNewTag(null===(e=this.$input)||void 0===e?void 0:e.val())):27===t.keyCode&&this.endNewTag()},o.prototype.checkStates=function(){var t=this.em.getState(),e=this.getStates();e&&e.val(t)},o.prototype.componentChanged=function(t){var e=(void 0===t?{}:t).targets;this.updateSelection(e)},o.prototype.updateSelection=function(e){var n=e||this.getTargets(),o=[];return(n=(0,t.isArray)(n)?n:[n])&&n.length&&(o=this.getCommonSelectors({targets:n}),this.checkSync({validSelectors:o})),this.collection.reset(o),this.updateStateVis(n),this.module.__trgCustom(),o},o.prototype.getCommonSelectors=function(t){var e=void 0===t?{}:t,n=e.targets,o=e.opts,i=void 0===o?{}:o,r=n||this.getTargets();return this.module.__getCommonSelectors(r,i)},o.prototype._commonSelectors=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this.module).__common.apply(t,e)},o.prototype.checkSync=function(){var e,n=this,o=n.$btnSyncEl,i=n.config,r=n.collection,s=this.getTarget();if(s&&i.componentFirst&&r.length){var a=s.getStyle();e=!(0,t.isEmpty)(a)}o&&o[e?'show':'hide']()},o.prototype.getTarget=function(){return this.target.getSelected()},o.prototype.getTargets=function(){return this.target.getSelectedAll()},o.prototype.updateStateVis=function(t){var e=this.em,n=e&&e.getConfig().avoidInlineStyle,o=this.collection.length||n?'':'none';this.getStatesC().css('display',o),this.updateSelector(t)},o.prototype.__handleStateChange=function(){this.updateSelector(this.getTargets())},o.prototype.updateSelector=function(e){var n=this,o=this.el.querySelector('[data-selected]'),i=[],r=e||this.getTargets();(r=(0,t.isArray)(r)?r:[r]).forEach((function(t){return i.push(n.__getName(t))})),o&&(o.innerHTML=i.join(', ')),this.checkStates()},o.prototype.__getName=function(e){var o,i=this,r=i.pfx,s=i.config,a=i.em,l=s.selectedName,c=s.componentFirst;if((0,t.isString)(e))o=n(Ds||(Ds=Rs(["<span class=\"","sel-gen\">","</span>"],["<span class=\"","sel-gen\">","</span>"])),r,e);else{var u=null==e?void 0:e.getSelectors();if(!u)return'';var p=u.getStyleable(),h=a.get('state'),d=e.getId?n(Is||(Is=Rs(["<span class=\"","sel-cmp\">","</span>\n            <span class=\"","sel-id\">#","</span>"],["<span class=\"","sel-cmp\">","</span>\n            <span class=\"","sel-id\">#","</span>"])),r,e.getName(),r,e.getId()):'';o=(o=this.collection.getFullString(p))?n(Ns||(Ns=Rs(["<span class=\"","sel-rule\">","</span>"],["<span class=\"","sel-rule\">","</span>"])),r,o):e.get('selectorsAdd')||d,o=c&&d?d:o,o+=h?n(Ws||(Ws=Rs(["<span class=\"","sel-state\">:","</span>"],["<span class=\"","sel-state\">:","</span>"])),r,h):'',o=l?l({result:o,state:h,target:e}):o}return o&&"<span class=\"".concat(r,"sel\">").concat(o,"</span>")},o.prototype.stateChanged=function(t){var e=this.em,n=t.target.value;e.set('state',n)},o.prototype.addNewTag=function(t){var e=t.trim();e&&(this.module.addSelected({label:e}),this.endNewTag())},o.prototype.addToClasses=function(t,e){var n=e,o=this.getClasses(),i=new Qs({model:t,config:this.config,coll:this.collection,module:this.module}).render().el;return n?n.appendChild(i):o.append(i),i},o.prototype.renderClasses=function(){var t=this,e=document.createDocumentFragment(),n=this.getClasses();n.empty(),this.collection.each((function(n){return t.addToClasses(n,e)})),n.append(e)},o.prototype.getClasses=function(){return this.$el.find('[data-selectors]')},o.prototype.getStates=function(){if(!this.$states){var t=this.$el.find('[data-states]');this.$states=t[0]&&t}return this.$states},o.prototype.getStatesC=function(){return this.$statesC||(this.$statesC=this.$el.find('#'+this.stateInputC)),this.$statesC},o.prototype.renderStates=function(){var t=this.module,e=this.em,n=e.t('selectorManager.emptyState'),o=t.getStates().map((function(t){var n=e.t("selectorManager.states.".concat(t.id))||t.getLabel()||t.id;return"<option value=\"".concat(t.id,"\">").concat(n,"</option>")})).join(''),i=this.getStates();i&&i.html("<option value=\"\">".concat(n,"</option>").concat(o)),this.checkStates()},o.prototype.render=function(){var t=this,e=t.em,n=t.pfx,o=t.ppfx,i=t.config,r=t.$el,s=t.el,a=i.render,l={iconSync:i.iconSync,iconAdd:i.iconAdd,labelHead:e.t('selectorManager.label'),labelInfo:e.t('selectorManager.selected'),ppfx:o,pfx:n,el:s};r.html(this.template(l));var c=a&&a(l);return c&&c!==s&&r.empty().append(c),this.$input=r.find('[data-input]'),this.$addBtn=r.find('[data-add]'),this.$classes=r.find('#'+n+'tags-c'),this.$btnSyncEl=r.find('[data-sync-style]'),this.$input.hide(),this.renderStates(),this.renderClasses(),r.attr('class',"".concat(this.className," ").concat(o,"one-bg ").concat(o,"two-color")),this},o}(l.G7);const Vs=Ms;var Zs,Ds,Is,Ns,Ws,Xs=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ls=void 0&&(void 0).__assign||function(){return Ls=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Ls.apply(this,arguments)},zs=void 0&&(void 0).__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))},Us=function(e){return(0,t.isString)(e)&&'#'==e[0]},qs=function(e){return(0,t.isString)(e)&&'.'==e[0]},Ys='selector',Bs="".concat(Ys,":"),Fs="".concat(Bs,"add"),Gs="".concat(Bs,"update"),Hs="".concat(Bs,"remove"),Ks="".concat(Hs,":before"),Js="".concat(Bs,"custom"),ta="".concat(Bs,"state"),ea={all:Ys,update:Gs,add:Fs,remove:Hs,removeBefore:Ks,state:ta,custom:Js},na=function(n){function o(e){var o=n.call(this,e,'SelectorManager',new Ne([]),ea,xs,{skipListen:!0})||this;o.Selector=Ve.Z,o.Selectors=Ne,o.storageKey='',(0,t.bindAll)(o,'__updateSelectedByComponents');var i=o.config,r=i.pStylePrefix;r&&(i.stylePrefix=r+i.stylePrefix),o.all=new Ne(i.selectors),o.selected=new Ne([],{em:e,config:i}),o.states=new l.FE(i.states.map((function(t){return new Ps(t)})),{model:Ps}),o.model=new l.Hn({cFirst:i.componentFirst,_undo:!0}),o.__update=(0,t.debounce)((function(){return o.__trgCustom()}),0),o.__initListen({collections:[o.states,o.selected],propagate:[{entity:o.states,event:o.events.state}]}),e.on('change:state',(function(t,n){return e.trigger(ta,n)})),o.model.on('change:cFirst',(function(t,n){return e.trigger('selector:type',n)})),e.on('component:toggled component:update:classes',o.__updateSelectedByComponents);return o.model.listenTo(e,'component:toggled component:update:classes change:device styleManager:update selector:state selector:type style:target',(function(){return o.__update()})),o}return Xs(o,n),o.prototype.__trgCustom=function(t){this.em.trigger(this.events.custom,this.__customData(t))},o.prototype.getAll=function(t){return void 0===t&&(t={}),this.all?t.array?zs([],this.all.models,!0):this.all:[]},o.prototype.__customData=function(t){return void 0===t&&(t={}),this.__ctn=this.__ctn||t.container,{states:this.getStates(),selected:this.getSelected(),container:this.__ctn}},o.prototype.postRender=function(){this.__appendTo(),this.__trgCustom()},o.prototype.select=function(t,n){void 0===n&&(n={});var o=Array.isArray(t)?t:[t],i=this.em.Styles.select(o,n);this.selected.reset(this.__getCommonSelectors(i));var r=this.selectorTags,s=i.filter((function(t){return t})).map((function(t){return(0,e.isComponent)(t)||(0,e.isRule)(t)&&!t.get('selectorsAdd')?t:t.getSelectorsString()}));return r&&r.componentChanged({targets:s}),this},o.prototype.addSelector=function(e,n,o){void 0===n&&(n={}),void 0===o&&(o={});var i=Ls({},n);(0,t.isObject)(e)?i=e:i.name=e,Us(i.name)?(i.name=i.name.substr(1),i.type=Ve.Z.TYPE_ID):qs(i.name)&&(i.name=i.name.substr(1)),i.label&&!i.name&&(i.name=this.escapeName(i.label));var r=i.name,s=this.getConfig(),a=this.all,l=this.em,c=r?this.get(r,i.type):a.where(i)[0];if(!c){var u=i instanceof Ve.Z?i:new Ve.Z(i,Ls(Ls({},o),{config:s,em:l}));return a.add(u,o)}return c},o.prototype.getSelector=function(t,e){return void 0===e&&(e=Ve.Z.TYPE_CLASS),Us(t)?(t=t.substr(1),e=Ve.Z.TYPE_ID):qs(t)&&(t=t.substr(1)),this.all.where({name:t,type:e})[0]},o.prototype.add=function(e,n){var o=this;void 0===n&&(n={});var i=(0,t.isString)(e)?{}:n;return(0,t.isArray)(e)?e.map((function(t){return o.addSelector(t,n,i)})):this.addSelector(e,n,i)},o.prototype.addClass=function(e){var n=this,o=[];return(0,t.isString)(e)&&(e=e.trim().split(' ')),e.forEach((function(t){return o.push(n.addSelector(t))})),o},o.prototype.get=function(e,n){var o=this;if((0,t.isArray)(e)){var i=[];return e.map((function(t){return o.getSelector(t)})).filter(Boolean).forEach((function(t){return i.indexOf(t)<0&&i.push(t)})),i}return this.getSelector(e,n)},o.prototype.remove=function(t,e){return this.__remove(t,e)},o.prototype.rename=function(t,e,n){var o=this.escapeName(e);return this.get(o)||t.set({name:o,label:e},n)},o.prototype.setState=function(t){return this.em.setState(t),this},o.prototype.getState=function(){return this.em.getState()},o.prototype.getStates=function(){return zs([],this.states.models,!0)},o.prototype.setStates=function(t,e){return this.states.reset(t.map((function(t){return new Ps(t)})),e)},o.prototype.getSelected=function(){return this.__getCommon()},o.prototype.getSelectedAll=function(){return zs([],this.selected.models,!0)},o.prototype.addSelected=function(t){var e=this.add(t);this.em.getSelectedAll().forEach((function(t){t.getSelectors().add(e)}))},o.prototype.removeSelected=function(t){this.em.getSelectedAll().forEach((function(e){!t.get('protected')&&e&&e.getSelectors().remove(t)}))},o.prototype.duplicateSelected=function(t,e){var n=this;void 0===e&&(e={});var o=this.em,i=this.getSelected();if(!(i.indexOf(t)<0)){var r=this.getState(),s=o.getCurrentMedia(),a=o.Css.get(i,r,s),l=null==a?void 0:a.getStyle();if(o.getSelectedAll().forEach((function(o){var i=o.getSelectors();if(i.includes(t)){var r=e.suffix||' copy',s=t.getLabel(),a=n.addSelector("".concat(s).concat(r)),l=i.indexOf(t);i.remove(t),i.add(a,{at:l})}})),l)o.Css.add(this.getSelected(),r,s).setStyle(l)}},o.prototype.getSelectedTargets=function(){return this.em.Styles.getSelectedAll()},o.prototype.setComponentFirst=function(t){this.getConfig().componentFirst=t,this.model.set({cFirst:t})},o.prototype.getComponentFirst=function(){return this.getConfig().componentFirst},o.prototype.escapeName=function(t){var e=this.getConfig().escapeName;return e?e(t):Ve.Z.escapeName(t)},o.prototype.render=function(t){var e=this.selectorTags,n=this.getConfig(),o=null==e?void 0:e.el;return this.selected.reset(t),this.selectorTags=new Vs({el:o,collection:this.selected,module:this,config:n}),this.selectorTags.render().el},o.prototype.destroy=function(){var t=this.selectorTags;this.model.stopListening(),this.__update.cancel(),this.__destroy(),null==t||t.remove(),this.selectorTags=void 0},o.prototype.__getCommon=function(){return this.__getCommonSelectors(this.em.getSelectedAll())},o.prototype.__getCommonSelectors=function(t,e){void 0===e&&(e={});var n=t.map((function(t){return t.getSelectors&&t.getSelectors().getValid(e)})).filter(Boolean);return this.__common.apply(this,n)},o.prototype.__common=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e.length?1===e.length?e[0]:2===e.length?e[0].filter((function(t){return e[1].indexOf(t)>=0})):e.slice(1).reduce((function(e,n){return t.__common(e,n)}),e[0]):[]},o.prototype.__updateSelectedByComponents=function(){this.selected.reset(this.__getCommon())},o}(v);const oa=na;const ia={textTags:['br','b','i','u','a','ul','ol'],textTypes:['text','textnode','comment'],parserCss:void 0,parserHtml:void 0,optionsHtml:{htmlType:'text/html',allowScripts:!1,allowUnsafeAttr:!1,keepEmptyTextNodes:!1}};var ra,sa=5,aa=6,la=7,ca=11,ua=12,pa=13,ha=14,da=15,fa=((ra={})[4]='media',ra[sa]='font-face',ra[aa]='page',ra[la]='keyframes',ra[ca]='counter-style',ra[ua]='supports',ra[pa]='document',ra[ha]='font-feature-values',ra[da]='viewport',ra),ga=(0,t.keys)(fa),ma=[sa,aa,ca,da],va=ga.filter((function(t){return ma.indexOf(Number(t))<0})).map((function(t){return fa[t]})).concat(['container','layer']),ya=ma.map((function(t){return fa[t]})),_a=function(t){void 0===t&&(t='');for(var e=[],n=[],o=t.split(','),i=0,r=o.length;i<r;i++){var s=o[i].trim();if(/^(\.{1}[\w\-]+)+(:{1,2}[\w\-()]+)?$/gi.test(s)||/^(#{1}[\w\-]+){1}(:{1,2}[\w\-()]+)?$/gi.test(s)){var a=s.split('.').filter(Boolean);n.push(a)}else e.push(s)}return{result:n,add:e}},Oa=function(t){for(var e=t.style,n={},o=0,i=e.length;o<i;o++){var r=e[o],s=e.getPropertyValue(r),a=e.getPropertyPriority(r);n[r]="".concat(s).concat(a?" !".concat(a):'')}return n},ba=function(t){return(t.conditionText||t.media&&t.media.mediaText||t.name||t.selectorText||'').trim()},wa=function(t,e,n){void 0===e&&(e={}),void 0===n&&(n={});var o={},i=t.length,r=t[i-1],s=r?r.split(/:(.+)/):[],a=s[1],l=n.atRule,c=n.selectorsAdd,u=n.mediaText;return ya.indexOf(l)>=0&&(o.singleAtRule=!0),l&&(o.atRuleType=l),c&&(o.selectorsAdd=c),u&&(o.mediaText=u),a&&(t[i-1]=s[0],o.state=a,s.splice(s.length-1,1)),o.selectors=t,o.style=e,o},xa=function(t){var e=t.cssText,n=void 0===e?'':e;return va.find((function(t){return 0===n.indexOf("@".concat(t))}))},Sa=function(t){for(var e=[],n=t.cssRules||[],o=0,i=n.length;o<i;o++){var r=n[o],s=r.type,a=!1,l='',c='',u=r.selectorText||r.keyText||'',p=ma.indexOf(s)>=0;if(p)a=!0,l=fa[s],c=ba(r);else if(ga.indexOf("".concat(s))>=0||!s&&xa(r)){var h=Sa(r),d=fa[s]||xa(r);c=ba(r);for(var f=0,g=h.length;f<g;f++){var m=h[f];c&&(m.mediaText=c),m.atRuleType=d}e=e.concat(h)}if(u||p){for(var v=Oa(r),y=_a(u),_=y.add,O=y.result,b=void 0,w=0,x=O.length;w<x;w++){var S=wa(O[w],v,{atRule:fa[s]});e.push(S),b=S}if(_.length){var k=_.join(', ');if(b)b.selectorsAdd=k;else{S={selectors:[],selectorsAdd:k,style:v};a&&(S.singleAtRule=a),l&&(S.atRuleType=l),c&&(S.mediaText=c),e.push(S)}}}}return e};const ka=function(e,n){return void 0===n&&(n={}),{parse:function(t){var o=this,i=[],r=n.parserCss,s=null==e?void 0:e.Editor,a=r?r(t,s):function(t){var e=document.createElement('style');e.innerHTML=t,document.head.appendChild(e);var n=e.sheet;return document.head.removeChild(e),n?Sa(n):[]}(t);return a.forEach((function(t){return i=i.concat(o.checkNode(t))})),null==e||e.trigger('parse:css',{input:t,output:i,nodes:a}),i},checkNode:function(e){var n=e.selectors,o=e.style,i=[e];if((0,t.isString)(n)){var r=[],s=e,a=_a(n),l=a.result,c=a.add.join(', '),u={atRule:s.atRule,mediaText:s.params};if(l.length?l.forEach((function(t){r.push(wa(t,o,u))})):r.push(wa([],o,u)),c)r[r.length-1].selectorsAdd=c;i=r}return i}}};var Pa=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ca=function(t){function e(e){var n=t.call(this,e,'Parser',ia)||this,o=n.config;return n.parserCss=ka(e,o),n.parserHtml=be(e,o),n}return Pa(e,t),e.prototype.parseHtml=function(t,e){void 0===e&&(e={});var n=this.em,o=this.parserHtml;return o.compTypes=n.Components.getTypes()||{},o.parse(t,this.parserCss,e)},e.prototype.parseCss=function(t){return this.parserCss.parse(t)},e.prototype.destroy=function(){},e}(m);const Ta=Ca;const Ea={id:'gjs-',type:'local',autosave:!0,autoload:!0,stepsBeforeSave:1,recovery:!1,onStore:function(t){return t},onLoad:function(t){return t},options:{local:{key:'gjsProject',checkLocal:!0},remote:{headers:{},urlStore:'',urlLoad:'',contentTypeJson:!0,fetchOptions:'',credentials:'include',onStore:function(t){return t},onLoad:function(t){return t}}}};var Aa=void 0&&(void 0).__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function s(t){try{l(o.next(t))}catch(t){r(t)}}function a(t){try{l(o["throw"](t))}catch(t){r(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((o=o.apply(t,e||[])).next())}))},Qa=void 0&&(void 0).__generator||function(t,e){var n,o,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,a[0]&&(s=0)),s;)try{if(n=1,o&&(i=2&a[0]?o["return"]:a[0]?o["throw"]||((i=o["return"])&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,o=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}};const $a=function(){function t(){}return t.prototype.store=function(t,e){return void 0===e&&(e={}),Aa(this,void 0,void 0,(function(){return Qa(this,(function(n){return this.hasLocal(e,!0)&&localStorage.setItem(e.key,JSON.stringify(t)),[2,t]}))}))},t.prototype.load=function(t){return void 0===t&&(t={}),Aa(this,void 0,void 0,(function(){var e;return Qa(this,(function(n){return e={},this.hasLocal(t,!0)&&(e=JSON.parse(localStorage.getItem(t.key)||'{}')),[2,e]}))}))},t.prototype.hasLocal=function(t,n){if(void 0===t&&(t={}),t.checkLocal&&(!(0,e.hasWin)()||!localStorage)){if(n)throw new Error('localStorage not available');return!1}return!0},t}();var ja=__webpack_require__(1002);const Ra=function(t){var e=this.constructor;return this.then((function(n){return e.resolve(t()).then((function(){return n}))}),(function(n){return e.resolve(t()).then((function(){return e.reject(n)}))}))};const Ma=function(t){return new this((function(e,n){if(!t||void 0===t.length)return n(new TypeError((0,ja.Z)(t)+' '+t+' is not iterable(cannot read property Symbol(Symbol.iterator))'));var o=Array.prototype.slice.call(t);if(0===o.length)return e([]);var i=o.length;function r(t,n){if(n&&('object'===(0,ja.Z)(n)||'function'==typeof n)){var s=n.then;if('function'==typeof s)return void s.call(n,(function(e){r(t,e)}),(function(n){o[t]={status:'rejected',reason:n},0==--i&&e(o)}))}o[t]={status:'fulfilled',value:n},0==--i&&e(o)}for(var s=0;s<o.length;s++)r(s,o[s])}))};function Va(t,e){this.name='AggregateError',this.errors=t,this.message=e||''}Va.prototype=Error.prototype;const Za=function(t){var e=this;return new e((function(n,o){if(!t||void 0===t.length)return o(new TypeError('Promise.any accepts an array'));var i=Array.prototype.slice.call(t);if(0===i.length)return o();for(var r=[],s=0;s<i.length;s++)try{e.resolve(i[s]).then(n).catch((function(t){r.push(t),r.length===i.length&&o(new Va(r,'All promises were rejected'))}))}catch(t){o(t)}}))};var Da=setTimeout;function Ia(t){return Boolean(t&&void 0!==t.length)}function Na(){}function Wa(t){if(!(this instanceof Wa))throw new TypeError('Promises must be constructed via new');if('function'!=typeof t)throw new TypeError('not a function');this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],Ya(t,this)}function Xa(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,Wa._immediateFn((function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var o;try{o=n(t._value)}catch(t){return void za(e.promise,t)}La(e.promise,o)}else(1===t._state?La:za)(e.promise,t._value)}))):t._deferreds.push(e)}function La(t,e){try{if(e===t)throw new TypeError('A promise cannot be resolved with itself.');if(e&&('object'===(0,ja.Z)(e)||'function'==typeof e)){var n=e.then;if(e instanceof Wa)return t._state=3,t._value=e,void Ua(t);if('function'==typeof n)return void Ya((o=n,i=e,function(){o.apply(i,arguments)}),t)}t._state=1,t._value=e,Ua(t)}catch(e){za(t,e)}var o,i}function za(t,e){t._state=2,t._value=e,Ua(t)}function Ua(t){2===t._state&&0===t._deferreds.length&&Wa._immediateFn((function(){t._handled||Wa._unhandledRejectionFn(t._value)}));for(var e=0,n=t._deferreds.length;e<n;e++)Xa(t,t._deferreds[e]);t._deferreds=null}function qa(t,e,n){this.onFulfilled='function'==typeof t?t:null,this.onRejected='function'==typeof e?e:null,this.promise=n}function Ya(t,e){var n=!1;try{t((function(t){n||(n=!0,La(e,t))}),(function(t){n||(n=!0,za(e,t))}))}catch(t){if(n)return;n=!0,za(e,t)}}Wa.prototype['catch']=function(t){return this.then(null,t)},Wa.prototype.then=function(t,e){var n=new this.constructor(Na);return Xa(this,new qa(t,e,n)),n},Wa.prototype['finally']=Ra,Wa.all=function(t){return new Wa((function(e,n){if(!Ia(t))return n(new TypeError('Promise.all accepts an array'));var o=Array.prototype.slice.call(t);if(0===o.length)return e([]);var i=o.length;function r(t,s){try{if(s&&('object'===(0,ja.Z)(s)||'function'==typeof s)){var a=s.then;if('function'==typeof a)return void a.call(s,(function(e){r(t,e)}),n)}o[t]=s,0==--i&&e(o)}catch(t){n(t)}}for(var s=0;s<o.length;s++)r(s,o[s])}))},Wa.any=Za,Wa.allSettled=Ma,Wa.resolve=function(t){return t&&'object'===(0,ja.Z)(t)&&t.constructor===Wa?t:new Wa((function(e){e(t)}))},Wa.reject=function(t){return new Wa((function(e,n){n(t)}))},Wa.race=function(t){return new Wa((function(e,n){if(!Ia(t))return n(new TypeError('Promise.race accepts an array'));for(var o=0,i=t.length;o<i;o++)Wa.resolve(t[o]).then(e,n)}))},Wa._immediateFn='function'==typeof setImmediate&&function(t){setImmediate(t)}||function(t){Da(t,0)},Wa._unhandledRejectionFn=function(t){'undefined'!=typeof console&&console&&console.warn('Possible Unhandled Promise Rejection:',t)};const Ba=Wa;(0,e.hasWin)()&&(window.Promise=window.Promise||Ba);const Fa='function'==typeof fetch?fetch.bind():function(t,e){return new Ba((function(n,o){var i=new XMLHttpRequest;for(var r in i.open(e.method||'get',t),i.withCredentials='include'==e.credentials,e.headers||{})i.setRequestHeader(r,e.headers[r]);i.onload=function(t){return n({status:i.status,statusText:i.statusText,text:function(){return Ba.resolve(i.responseText)}})},i.onerror=o,i.upload&&e.onProgress&&(i.upload.onprogress=e.onProgress),e.body?i.send(e.body):i.send()}))};var Ga=void 0&&(void 0).__assign||function(){return Ga=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Ga.apply(this,arguments)},Ha=void 0&&(void 0).__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function s(t){try{l(o.next(t))}catch(t){r(t)}}function a(t){try{l(o["throw"](t))}catch(t){r(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((o=o.apply(t,e||[])).next())}))},Ka=void 0&&(void 0).__generator||function(t,e){var n,o,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,a[0]&&(s=0)),s;)try{if(n=1,o&&(i=2&a[0]?o["return"]:a[0]?o["throw"]||((i=o["return"])&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,o=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},Ja=function(){function e(){}return e.prototype.store=function(t,e){return void 0===e&&(e={}),Ha(this,void 0,void 0,(function(){return Ka(this,(function(n){switch(n.label){case 0:return[4,this.request(e.urlStore,this.__props(e,t),e)];case 1:return[2,n.sent()]}}))}))},e.prototype.load=function(t){return void 0===t&&(t={}),Ha(this,void 0,void 0,(function(){return Ka(this,(function(e){switch(e.label){case 0:return[4,this.request(t.urlLoad,this.__props(t),t)];case 1:return[2,e.sent()]}}))}))},e.prototype.request=function(e,n,o){return void 0===n&&(n={}),void 0===o&&(o={}),Fa(e,n).then((function(t){var e=t.text();return 1==(t.status/200|0)?e:e.then(Promise.reject)})).then((function(e){var n=e&&(0,t.isString)(e);return o.contentTypeJson&&n?JSON.parse(e):e}))},e.prototype.__props=function(e,n){void 0===e&&(e={});var o,i=e.contentTypeJson,r=e.headers||{},s=e.fetchOptions||{},a='X-Requested-With',l='Content-Type';if((0,t.isUndefined)(r[a])&&(r[a]='XMLHttpRequest'),(0,t.isUndefined)(r[l])&&i&&(r[l]='application/json; charset=utf-8'),n)if(i)o=JSON.stringify(n);else for(var c in o=new FormData,n)o.append(c,n[c]);var u={method:o?'POST':'GET',credentials:e.credentials,headers:r,body:o};return Ga(Ga({},u),(0,t.isFunction)(s)?s(u):s)},e}();const tl=Ja;var el;!function(t){t["start"]="storage:start",t["startStore"]="storage:start:store",t["startLoad"]="storage:start:load",t["load"]="storage:load",t["store"]="storage:store",t["after"]="storage:after",t["afterStore"]="storage:after:store",t["afterLoad"]="storage:after:load",t["end"]="storage:end",t["endStore"]="storage:end:store",t["endLoad"]="storage:end:load",t["error"]="storage:error",t["errorStore"]="storage:error:store",t["errorLoad"]="storage:error:load"}(el||(el={}));const nl=el;var ol=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),il=void 0&&(void 0).__assign||function(){return il=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},il.apply(this,arguments)},rl=void 0&&(void 0).__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function s(t){try{l(o.next(t))}catch(t){r(t)}}function a(t){try{l(o["throw"](t))}catch(t){r(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((o=o.apply(t,e||[])).next())}))},sl=void 0&&(void 0).__generator||function(t,e){var n,o,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,a[0]&&(s=0)),s;)try{if(n=1,o&&(i=2&a[0]?o["return"]:a[0]?o["throw"]||((i=o["return"])&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,o=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},al='local',ll='remote',cl=function(e){function n(t){var n=e.call(this,t,'StorageManager',Ea)||this;n.storages={},n.events=nl;var o=n.config;return o._disable&&(o.type=void 0),n.storages={},n.add(al,new $a),n.add(ll,new tl),n.setCurrent(o.type),n}return ol(n,e),n.prototype.isAutosave=function(){return!!this.config.autosave},n.prototype.setAutosave=function(t){return this.config.autosave=!!t,this},n.prototype.getStepsBeforeSave=function(){return this.config.stepsBeforeSave},n.prototype.setStepsBeforeSave=function(t){return this.config.stepsBeforeSave=t,this},n.prototype.add=function(t,e){return this.storages[t]=e,this},n.prototype.get=function(t){return this.storages[t]},n.prototype.getStorages=function(){return this.storages},n.prototype.getCurrent=function(){return this.config.currentStorage},n.prototype.setCurrent=function(t){return this.getConfig().currentStorage=t,this},n.prototype.getCurrentStorage=function(){return this.get(this.getCurrent())},n.prototype.getStorageOptions=function(t){return this.getCurrentOptions(t)},n.prototype.store=function(t,e){return void 0===e&&(e={}),rl(this,void 0,void 0,(function(){var n,o,i,r,s;return sl(this,(function(a){switch(a.label){case 0:n=this.getCurrentStorage(),o=il(il({},this.getCurrentOptions()),e),i=this.getRecoveryStorage(),r=this.getCurrentOptions(al),a.label=1;case 1:return a.trys.push([1,5,,9]),[4,this.__exec(n,o,t)];case 2:return a.sent(),i?[4,this.__exec(i,r,{})]:[3,4];case 3:a.sent(),a.label=4;case 4:return[3,9];case 5:return s=a.sent(),i?[4,this.__exec(i,r,t)]:[3,7];case 6:return a.sent(),[3,8];case 7:throw s;case 8:return[3,9];case 9:return[2,t]}}))}))},n.prototype.load=function(e){return void 0===e&&(e={}),rl(this,void 0,void 0,(function(){var n,o,i,r,s;return sl(this,(function(a){switch(a.label){case 0:return n=this.getCurrentStorage(),o=il(il({},this.getCurrentOptions()),e),(i=this.getRecoveryStorage())?[4,this.__exec(i,this.getCurrentOptions(al))]:[3,5];case 1:if(s=a.sent(),(0,t.isEmpty)(s))return[3,5];a.label=2;case 2:return a.trys.push([2,4,,5]),[4,this.__askRecovery()];case 3:return a.sent(),r=s,[3,5];case 4:return a.sent(),[3,5];case 5:return r?[3,7]:[4,this.__exec(n,o)];case 6:r=a.sent(),a.label=7;case 7:return[2,r||{}]}}))}))},n.prototype.__askRecovery=function(){var e=this.em,n=this.getRecovery();return new Promise((function(o,i){(0,t.isFunction)(n)?n(o,i,null==e?void 0:e.getEditor()):confirm(null==e?void 0:e.t('storageManager.recover'))?o(null):i()}))},n.prototype.getRecovery=function(){return this.config.recovery},n.prototype.getRecoveryStorage=function(){return this.getRecovery()&&this.getCurrent()===ll&&this.get(al)},n.prototype.__exec=function(t,e,n){var o;return rl(this,void 0,void 0,(function(){var i,r,s,a,l,c,u,p,h,d,f,g,m;return sl(this,(function(v){switch(v.label){case 0:if(i=n?'store':'load',r=this.getConfig(),s=r.onStore,a=r.onLoad,this.onStart(i,n),!t)return[2,n||{}];v.label=1;case 1:return v.trys.push([1,14,,15]),c=null===(o=this.em)||void 0===o?void 0:o.getEditor(),u=void 0,n?(h=s)?[4,s(n,c)]:[3,3]:[3,7];case 2:h=v.sent(),v.label=3;case 3:return p=h||n,(d=e.onStore)?[4,e.onStore(p,c)]:[3,5];case 4:d=v.sent(),v.label=5;case 5:return p=d||p,[4,t.store(p,e)];case 6:return u=v.sent(),l=n,[3,13];case 7:return[4,t.load(e)];case 8:return u=v.sent(),l=this.__clearKeys(u),(f=e.onLoad)?[4,e.onLoad(l,c)]:[3,10];case 9:f=v.sent(),v.label=10;case 10:return l=f||l,(g=a)?[4,a(l,c)]:[3,12];case 11:g=v.sent(),v.label=12;case 12:l=g||l,v.label=13;case 13:return this.onAfter(i,l,u),this.onEnd(i,l,u),[3,15];case 14:throw m=v.sent(),this.onError(i,m),m;case 15:return[2,l]}}))}))},n.prototype.__clearKeys=function(t){void 0===t&&(t={});var e=this.getConfig(),n=new RegExp("^".concat(e.id)),o={};for(var i in t){o[i.replace(n,'')]=t[i]}return o},n.prototype.getCurrentOptions=function(t){var e=this.getConfig(),n=t||this.getCurrent();return e.options[n]||{}},n.prototype.onStart=function(t,e){var n=this.em;if(n){var o='load'===t?nl.startLoad:nl.startStore;n.trigger(nl.start,t,e),n.trigger(o,e)}},n.prototype.onAfter=function(t,e,n){var o=this.em;if(o){var i='load'===t?nl.afterLoad:nl.afterStore;o.trigger(nl.after),o.trigger(i,e,n);var r='load'===t?nl.load:nl.store;o.trigger(r,e,n)}},n.prototype.onEnd=function(t,e,n){var o=this.em;if(o){var i='load'===t?nl.endLoad:nl.endStore;o.trigger(nl.end,t,e,n),o.trigger(i,e,n)}},n.prototype.onError=function(t,e){var n=this.em;if(n){var o='load'===t?nl.errorLoad:nl.errorStore;n.trigger(nl.error,e,t),n.trigger(o,e),this.onEnd(t,e)}},n.prototype.canAutoload=function(){return!!this.getCurrentStorage()&&!!this.config.autoload},n.prototype.destroy=function(){this.storages={}},n}(m);const ul=cl;const pl={stylePrefix:'trt-',appendTo:'',optionsTarget:[{value:!1},{value:'_blank'}],custom:!1};var hl;!function(t){t["select"]="trait:select",t["value"]="trait:value",t["custom"]="trait:custom",t["all"]="trait"}(hl||(hl={}));const dl=hl;var fl=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),gl="".concat('trait',":"),ml=("".concat(gl,"custom"),function(e){function n(n){var o=e.call(this,n,'TraitManager',pl)||this;o.types={},o.TraitsView=mn,o.TraitFactory=Gt.Z,o.events=dl,o.state=new l.Hn({traits:[]});var i=o,r=i.state,s=(i.config,i.events);(0,t.bindAll)(o,'__onSelect');var a=(0,t.debounce)((function(){return o.__upSel()}),0),c=(0,t.debounce)((function(){return o.__onUp()}),0);return r.listenTo(n,'component:toggled',a),r.listenTo(n,s.value,c),r.on('change:traits',o.__onSelect,o),o.debounced=[a,c],o}return fl(n,e),n.prototype.select=function(t){var e=(null==t?void 0:t.getTraits())||[];this.state.set({component:t,traits:e}),this.render(),this.__trgCustom()},n.prototype.getTraits=function(){return this.getCurrent()},n.prototype.getComponent=function(){return this.state.attributes.component},n.prototype.addType=function(t,e){var n=this.getType('text');this.types[t]=n.extend(e)},n.prototype.getType=function(t){return this.getTypes()[t]},n.prototype.getTypes=function(){return this.types},n.prototype.getTraitsViewer=function(){return this.view},n.prototype.getCurrent=function(){return this.state.get('traits')||[]},n.prototype.render=function(){var t=this.view,e=this.em,n=null==t?void 0:t.el,o=this.getCurrent();return console.log(o),this.view=new mn(e,{el:n}).render(o),this.view.el},n.prototype.postRender=function(){this.__appendTo()},n.prototype.__onSelect=function(){var t=this,e=t.em,n=t.events,o=t.state.attributes,i=o.component,r=o.traits;e.trigger(n.select,{component:i,traits:r})},n.prototype.__trgCustom=function(t){void 0===t&&(t={});var e=this,n=e.em,o=e.events,i=e.__ctn;this.__ctn=i||t.container,n.trigger(o.custom,this.__customData())},n.prototype.__customData=function(){return{container:this.__ctn}},n.prototype.__upSel=function(){this.select(this.em.getSelected())},n.prototype.__onUp=function(){this.select(this.getComponent())},n}(m));const vl=ml;const yl={stylePrefix:'',appendTo:'',sortable:!0,hidable:!0,hideTextnode:!0,root:'',showWrapper:!0,showHover:!0,scrollCanvas:{behavior:'smooth',block:'nearest'},scrollLayers:{behavior:'auto',block:'nearest'},highlightHover:!0,custom:!1,onInit:function(){},onRender:function(){},extend:{}};var _l=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ol=function(t){function e(e){void 0===e&&(e={});var n=t.call(this,e)||this;n.items=[],n.opt=e;var o=e.config||{};n.config=o,n.parentView=e.parentView;var i=o.stylePrefix||'',r=o.pStylePrefix||'',s=n.collection;n.listenTo(s,'add',n.addTo),n.listenTo(s,'reset resetNavigator',n.render),n.listenTo(s,'remove',n.removeChildren),n.className="".concat(i,"layers");var a=o.em;if(o.sortable&&!n.opt.sorter){var l=a.Utils;n.opt.sorter=new l.Sorter({container:o.sortContainer||n.el,containerSel:".".concat(n.className),itemSel:".".concat(i,"layer"),ignoreViewChildren:1,avoidSelectOnEnd:1,nested:1,ppfx:r,pfx:i,em:a})}return n.$el.data('collection',s),e.parent&&n.$el.data('model',e.parent),n}return _l(e,t),e.prototype.removeChildren=function(t){var e=t.viewLayer;e&&(e.remove(),delete t.viewLayer)},e.prototype.addTo=function(t){var e=this.collection.indexOf(t);this.addToCollection(t,null,e)},e.prototype.addToCollection=function(t,e,n){var o=this,i=o.parentView,r=o.opt,s=o.config,a=r.ItemView,l=r.opened,c=r.module,u=e||null,p=new a({ItemView:a,level:r.level,model:t,parentView:i,config:s,sorter:r.sorter,opened:l,module:c}),h=p.render().el;if(u)u.appendChild(h);else if(void 0!==n){var d='before';this.$el.children().length==n&&(n--,d='after'),n<0?this.$el.append(h):this.$el.children().eq(n)[d](h)}else this.$el.append(h);return this.items.push(p),h},e.prototype.remove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return l.G7.prototype.remove.apply(this,t),this.items.map((function(t){return t.remove()})),this},e.prototype.render=function(){var t=this,e=document.createDocumentFragment(),n=this.el;return n.innerHTML='',this.collection.each((function(n){return t.addToCollection(n,e)})),n.appendChild(e),n.className=this.className,this},e}(l.G7);const bl=Ol;var wl=__webpack_require__(9458);const xl={stylePrefix:'com-',defaults:{},strict:!0};var Sl=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),kl=void 0&&(void 0).__assign||function(){return kl=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},kl.apply(this,arguments)},Pl=void 0&&(void 0).__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))},Cl=[['preview','Preview','preview'],['resize','Resize','resize'],['fullscreen','Fullscreen','fullscreen'],['copy','CopyComponent'],['paste','PasteComponent'],['canvas-move','CanvasMove'],['canvas-clear','CanvasClear'],['open-code','ExportTemplate','export-template'],['open-layers','OpenLayers','open-layers'],['open-styles','OpenStyleManager','open-sm'],['open-traits','OpenTraitManager','open-tm'],['open-blocks','OpenBlocks','open-blocks'],['open-assets','OpenAssets','open-assets'],['open-pages','OpenPages','open-pages'],['component-select','SelectComponent','select-comp'],['component-outline','SwitchVisibility','sw-visibility'],['component-offset','ShowOffset','show-offset'],['component-move','MoveComponent','move-comp'],['component-next','ComponentNext'],['component-prev','ComponentPrev'],['component-enter','ComponentEnter'],['component-exit','ComponentExit','select-parent'],['component-delete','ComponentDelete'],['component-style-clear','ComponentStyleClear'],['component-drag','ComponentDrag']],Tl={preserveSelected:1},El=function(t){return function(e){return t.trigger("".concat(Zn,":start"),e)}},Al=function(t){return function(e){return t.trigger(Zn,e)}},Ql=function(t,e,n){return void 0===n&&(n={}),function(o,i,r){e.forEach((function(t){return t.set('status',t.get('selectable')?'selected':'')})),t.setSelected(e),e[0].emitUpdate(),t.trigger("".concat(Zn,":end"),r),setTimeout((function(){return t.runDefault(Tl)})),(n.altMode||r.cancelled)&&t.set('_cmpDrag',1)}},$l=function(e){function n(n){var o=e.call(this,n,'Commands',xl)||this;o.CommandAbstract=wl["default"],o.defaultCommands={},o.commands={},o.active={};var i=o.config,r=i.pStylePrefix,s=o.defaultCommands;for(var a in r&&(i.stylePrefix=r+i.stylePrefix),Object.keys(i.defaults).forEach((function(t){var e=i.defaults[t];e.id&&o.add(e.id,e)})),s['tlb-delete']={run:function(t){return t.runCommand('core:component-delete')}},s['tlb-clone']={run:function(t){t.runCommand('core:copy'),t.runCommand('core:paste',{action:'clone-component'})}},s['tlb-move']={run:function(e,n,o){var i;void 0===o&&(o={});var r=e.getModel(),s=o.event,a=o.target,l=(a?[a]:Pl([],e.getSelectedAll(),!0)).map((function(t){var e,n;return(null===(n=null===(e=t.delegate)||void 0===e?void 0:e.move)||void 0===n?void 0:n.call(e,t))||t})).filter(Boolean),c=l[0],u='dragstart'===(null==s?void 0:s.type);if(!(null==c?void 0:c.get('draggable')))return r.logWarning('The element is not draggable');var p=c.get('dmode')||r.get('dmode'),h=function(){return r.stopDefault(Tl)},d=(0,t.includes)(['absolute','translate'],p);l.forEach((function(t){return t.trigger('disable',{fromMove:!0})})),u?setTimeout(h,0):h();var f=El(r),g=Al(r),m=Ql(r,l,{altMode:d});if(d)e.runCommand('core:component-drag',{guidesInfo:1,mode:p,target:c,onStart:f,onDrag:g,onEnd:m,event:s});else{u&&s.dataTransfer.setDragImage(null===(i=c.view)||void 0===i?void 0:i.el,0,0);var v=e.Commands.get('move-comp');v.onStart=f,v.onDrag=g,v.onEndMoveFromModel=m,v.initSorterFromModels(l)}l.filter((function(t){return t.get('selectable')})).forEach((function(t){return t.set('status','freezed-selected')}))}},s['core:undo']=function(t){return t.UndoManager.undo()},s['core:redo']=function(t){return t.UndoManager.redo()},Cl.forEach((function(t){var e=t[2],o=__webpack_require__(2828)("./".concat(t[1])).default,i="core:".concat(t[0]);s[i]=o,e&&(s[e]=o,['run','stop'].forEach((function(t){n.on("".concat(t,":").concat(e),(function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];return n.trigger.apply(n,Pl(["".concat(t,":").concat(i)],e,!1))}))})))})),i.model=n.Canvas,s)o.add(a,s[a]);return o}return Sl(n,e),n.prototype.add=function(e,n){var o=(0,t.isFunction)(n)?{run:n}:n;return o.stop||(o.noStop=!0),delete o.initialize,o.id=e,this.commands[e]=wl["default"].extend(o),this},n.prototype.get=function(e){var n=this.commands[e];return(0,t.isFunction)(n)?(n=new n(this.config),this.commands[e]=n):n||this.em.logWarning("'".concat(e,"' command not found")),n},n.prototype.extend=function(t,e){void 0===e&&(e={});var n=this.get(t);if(n){var o=kl(kl({},n.constructor.prototype),e);this.add(t,o);var i=Cl.filter((function(e){return"core:".concat(e[0])===t&&e[2]}))[0];i&&this.add(i[2],o)}return this},n.prototype.has=function(t){return!!this.commands[t]},n.prototype.getAll=function(){return this.commands},n.prototype.run=function(t,e){return void 0===e&&(e={}),this.runCommand(this.get(t),e)},n.prototype.stop=function(t,e){return void 0===e&&(e={}),this.stopCommand(this.get(t),e)},n.prototype.isActive=function(t){return this.getActive().hasOwnProperty(t)},n.prototype.getActive=function(){return this.active},n.prototype.runCommand=function(t,e){var n;if(void 0===e&&(e={}),t&&t.run){var o=this.em,i=this.config,r=t.id,s=o.Editor;this.isActive(r)&&!e.force&&i.strict||(n=s&&t.callRun(s,e),r&&t.stop&&!t.noStop&&!e.abort&&(this.active[r]=n))}return n},n.prototype.stopCommand=function(t,e){var n;if(void 0===e&&(e={}),t&&t.run){var o=this.em,i=this.config,r=t.id,s=o.Editor;(this.isActive(r)||e.force||!i.strict)&&(r&&delete this.active[r],n=t.callStop(s,e))}return n},n.prototype.create=function(t){return t.stop||(t.noStop=!0),new(wl["default"].extend(t))(this.config)},n.prototype.destroy=function(){this.defaultCommands={},this.commands={},this.active={}},n}(m);const jl=$l;var Rl=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ml='contentEditable',Vl=function(e){function n(n){var o=e.call(this,n)||this;(0,t.bindAll)(o,'__render'),o.opt=n,o.module=n.module,o.config=n.config||{},o.sorter=n.sorter||'',o.parentView=n.parentView;var i=o,r=i.model,s=i.pfx,a=i.ppfx,l=r.get('type')||'default';return o.className="".concat(s,"layer ").concat(s,"layer__t-").concat(l," no-select ").concat(a,"two-color"),o.inputNameCls="".concat(a,"layer-name"),o.clsTitleC="".concat(s,"layer-title-c"),o.clsTitle="".concat(s,"layer-title"),o.clsCaret="".concat(s,"layer-caret"),o.clsCount="".concat(s,"layer-count"),o.clsMove="".concat(s,"layer-move"),o.clsChildren="".concat(s,"layer-children"),o.clsNoChild="".concat(s,"layer-no-chld"),o.clsEdit="".concat(o.inputNameCls,"--edit"),o.clsNoEdit="".concat(o.inputNameCls,"--no-edit"),o.initComponent(),o}return Rl(n,e),n.prototype.events=function(){return{'mousedown [data-toggle-move]':'startSort','touchstart [data-toggle-move]':'startSort','click [data-toggle-visible]':'toggleVisibility','click [data-toggle-open]':'toggleOpening','click [data-toggle-select]':'handleSelect','mouseover [data-toggle-select]':'handleHover','mouseout [data-toggle-select]':'handleHoverOut','dblclick [data-name]':'handleEdit','keydown [data-name]':'handleEditKey','focusout [data-name]':'handleEditEnd'}},n.prototype.template=function(t){var e=this,n=e.pfx,o=e.ppfx,i=e.config,r=e.clsNoEdit,s=e.module,a=e.opt,l=e.em,c=i.hidable,u=s.getComponents(t).length,p=u?'':this.clsNoChild,h="".concat(this.clsTitle," ").concat(p),d="".concat(this.clsTitleC),f="".concat(this.inputNameCls," ").concat(r," ").concat(o,"no-app"),g=a.level||0,m="".concat(10*g,"px"),v=t.getName(),y=t.getIcon(),_="".concat(n,"layer"),O=(null==l?void 0:l.getConfig()).icons,b=O.move,w=O.eye,x=O.eyeOff,S=O.chevron;return"\n      <div class=\"".concat(n,"layer-item ").concat(o,"one-bg\" data-toggle-select>\n        <div class=\"").concat(n,"layer-item-left\">\n          ").concat(c?"<i class=\"".concat(n,"layer-vis\" data-toggle-visible>\n                <i class=\"").concat(n,"layer-vis-on\">").concat(w,"</i>\n                <i class=\"").concat(n,"layer-vis-off\">").concat(x,"</i>\n              </i>"):'',"\n          <div class=\"").concat(d,"\">\n            <div class=\"").concat(h,"\" style=\"padding-left: ").concat(m,"\">\n              <div class=\"").concat(n,"layer-title-inn\" title=\"").concat(v,"\">\n                <i class=\"").concat(this.clsCaret,"\" data-toggle-open>").concat(S,"</i>\n                  ").concat(y?"<span class=\"".concat(_,"__icon\">").concat(y,"</span>"):'',"\n                <span class=\"").concat(f,"\" data-name>").concat(v,"</span>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"").concat(n,"layer-item-right\">\n          <div class=\"").concat(this.clsCount,"\" data-count>").concat(u||'',"</div>\n          <div class=\"").concat(this.clsMove,"\" data-toggle-move>").concat(b||'',"</div>\n        </div>\n      </div>\n      <div class=\"").concat(this.clsChildren,"\"></div>\n    ")},Object.defineProperty(n.prototype,"em",{get:function(){return this.module.em},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"ppfx",{get:function(){return this.em.getConfig().stylePrefix},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"pfx",{get:function(){return this.config.stylePrefix},enumerable:!1,configurable:!0}),n.prototype.initComponent=function(){var t=this,e=this.model,n=this.config.onInit,o=e.components();this.listenTo(o,'remove add reset',this.checkChildren),[['change:status',this.updateStatus],['change:open',this.updateOpening],['change:layerable',this.updateLayerable],['change:style:display',this.updateVisibility],['rerender:layer',this.render],['change:name change:custom-name',this.updateName]].forEach((function(n){return t.listenTo(e,n[0],n[1])})),this.$el.data('model',e),this.$el.data('collection',o),e.viewLayer=this,n.bind(this)({component:e,render:this.__render,listenTo:this.listenTo})},n.prototype.updateName=function(){this.getInputName().innerText=this.model.getName()},n.prototype.getVisibilityEl=function(){return this.getItemContainer().find('[data-toggle-visible]')},n.prototype.updateVisibility=function(){var t=this,e=t.pfx,n=t.model,o=t.module,i="".concat(e,"layer-hidden"),r=!o.isVisible(n)?'addClass':'removeClass';this.$el[r](i),this.getVisibilityEl()[r]("".concat(e,"layer-off"))},n.prototype.toggleVisibility=function(t){null==t||t.stopImmediatePropagation();var e=this.module,n=this.model;e.setVisible(n,!e.isVisible(n))},n.prototype.handleEdit=function(t){null==t||t.stopPropagation();var e=this,n=e.em,o=e.$el,i=e.clsNoEdit,r=e.clsEdit,s=this.getInputName();s[Ml]='true',s.focus(),document.execCommand('selectAll',!1),n.setEditing(!0),o.find(".".concat(this.inputNameCls)).removeClass(i).addClass(r)},n.prototype.handleEditKey=function(t){t.stopPropagation(),((0,yt.kl)(t)||(0,yt.r$)(t))&&this.handleEditEnd(t)},n.prototype.handleEditEnd=function(t){null==t||t.stopPropagation();var e=this,n=e.em,o=e.$el,i=e.clsNoEdit,r=e.clsEdit,s=this.getInputName(),a=s.textContent;s.scrollLeft=0,s[Ml]='false',this.setName(a,{component:this.model,propName:'custom-name'}),n.setEditing(!1),o.find(".".concat(this.inputNameCls)).addClass(i).removeClass(r),this.updateName()},n.prototype.setName=function(t,e){var n=e.propName;this.model.set(n,t)},n.prototype.getInputName=function(){return this.inputName||(this.inputName=this.el.querySelector(".".concat(this.inputNameCls))),this.inputName},n.prototype.updateOpening=function(){var t=this,e=t.$el,n=t.model,o=t.pfx,i='open',r="".concat(o,"layer-open"),s=this.getCaret();this.module.isOpen(n)?(e.addClass(i),s.addClass(r)):(e.removeClass(i),s.removeClass(r))},n.prototype.toggleOpening=function(t){var e=this.model,n=this.module;null==t||t.stopImmediatePropagation(),e.get('components').length&&n.setOpen(e,!n.isOpen(e))},n.prototype.handleSelect=function(t){null==t||t.stopPropagation();var e=this.module,n=this.model;e.setLayerData(n,{selected:!0},{event:t})},n.prototype.handleHover=function(t){null==t||t.stopPropagation();var e=this.module,n=this.model;e.setLayerData(n,{hovered:!0})},n.prototype.handleHoverOut=function(t){null==t||t.stopPropagation();var e=this.module,n=this.model;e.setLayerData(n,{hovered:!1})},n.prototype.startSort=function(t){var e,n,o;t.stopPropagation();var i=this,r=i.em,s=i.sorter,a=i.model;if((!t.button||0===t.button)&&s){var l=(null===(n=null===(e=a.delegate)||void 0===e?void 0:e.move)||void 0===n?void 0:n.call(e,a))||a;s.onStart=El(r),s.onMoveClb=Al(r),s.onEndMove=Ql(r,[l]);var c=(null===(o=l.viewLayer)||void 0===o?void 0:o.el)||t.target;s.startSort(c)}},n.prototype.updateStatus=function(){Ai.prototype.updateStatus.apply(this,[{avoidHover:!this.config.highlightHover,noExtHl:!0}])},n.prototype.getItemContainer=function(){return this.$el.children('[data-toggle-select]')},n.prototype.checkChildren=function(){var t=this,e=t.model,n=t.clsNoChild,o=t.module,i=o.getComponents(e).length,r=this.getItemContainer(),s=r.find(".".concat(this.clsTitle)),a=r.find('[data-count]');s[i?'removeClass':'addClass'](n),a.html(i||''),!i&&o.setOpen(e,!1)},n.prototype.getCaret=function(){return this.caret&&this.caret.length||(this.caret=this.getItemContainer().find(".".concat(this.clsCaret))),this.caret},n.prototype.setRoot=function(e){var n,o=(0,t.isString)(e)?null===(n=this.em.getWrapper())||void 0===n?void 0:n.find(e)[0]:e;o&&(this.stopListening(),this.model=o,this.initComponent(),this._rendered&&this.render())},n.prototype.updateLayerable=function(){(this.parentView||this).render()},n.prototype.__clearItems=function(){var t;null===(t=this.items)||void 0===t||t.remove()},n.prototype.remove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return l.G7.prototype.remove.apply(this,t),this.__clearItems(),this},n.prototype.render=function(){var t=this,e=t.model,n=t.config,o=t.pfx,i=t.ppfx,r=t.opt,s=t.sorter;this.__clearItems();var a=r.opened,l=r.module,c=r.ItemView,u=!l.__isLayerable(e),p=this.$el.empty(),h=r.level+1;delete this.inputName,this.items=new bl({ItemView:c,collection:e.get('components'),config:n,sorter:s,opened:a,parentView:this,parent:e,level:h,module:l});var d=this.items.render().$el;return n.showWrapper||1!==h?(p.html(this.template(e)),p.find(".".concat(this.clsChildren)).append(d)):p.append(d),e.get('draggable')&&n.sortable||p.children(".".concat(this.clsMove)).remove(),!l.isVisible(e)&&(this.className+=" ".concat(o,"hide")),u&&(this.className+=" ".concat(i,"hidden")),p.attr('class',this.className),this.updateStatus(),this.updateOpening(),this.updateVisibility(),this.__render(),this._rendered=!0,this},n.prototype.__render=function(){var t=this,e=t.model,n=t.config,o={component:e,el:t.el};n.onRender.bind(this)(o),this.em.trigger('layer:render',o)},n}(l.G7);const Zl=Vl;var Dl=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Il=void 0&&(void 0).__assign||function(){return Il=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Il.apply(this,arguments)},Nl='layer',Wl="".concat(Nl,":"),Xl="".concat(Wl,"root"),Ll="".concat(Wl,"component"),zl="".concat(Wl,"custom"),Ul={all:Nl,root:Xl,component:Ll,custom:zl},ql={mediaText:''},Yl=['open','status','locked','custom-name','components','classes'].map((function(t){return"component:update:".concat(t)})).join(' '),Bl=function(n){function o(e){var o=n.call(this,e,'LayerManager',yl)||this;return o.events=Ul,(0,t.bindAll)(o,'componentChanged','__onRootChange','__onComponent'),o.model=new _.Z(o,{opened:{}}),o.config.stylePrefix=o.config.pStylePrefix,o}return Dl(o,n),o.prototype.onLoad=function(){var t=this,e=this,n=e.em,o=e.config,i=e.model;i.listenTo(n,'component:selected',this.componentChanged),i.on('change:root',this.__onRootChange),i.listenTo(n,Yl,this.__onComponent),this.componentChanged(),i.listenToOnce(n,'load',(function(){t.setRoot(o.root),t.__appendTo()}))},o.prototype.setRoot=function(n){var o=this.em.getWrapper(),i=(0,e.isComponent)(n)?n:o;return n&&(0,t.isString)(n)&&(0,e.hasWin)()&&(i=o.find(n)[0]||o),this.model.set('root',i),i},o.prototype.getRoot=function(){return this.model.get('root')},o.prototype.getComponents=function(t){var e=this;return t.components().filter((function(t){return e.__isLayerable(t)}))},o.prototype.setOpen=function(t,e){t.set('open',e)},o.prototype.isOpen=function(t){return!!t.get('open')},o.prototype.setVisible=function(t,e){var n='__prev-display',o=t.getStyle(ql),i=o.display;if(e){var r=t.get(n);delete o.display,r&&(o.display=r,t.unset(n))}else i&&t.set(n,i),o.display='none';t.setStyle(o,ql),this.updateLayer(t),this.em.trigger('component:toggled')},o.prototype.isVisible=function(t){return void 0===(e=t.getStyle(ql))&&(e={}),!(0===(e.display||'').trim().indexOf('none'));var e},o.prototype.setLocked=function(t,e){t.set('locked',e)},o.prototype.isLocked=function(t){return!!t.get('locked')},o.prototype.setName=function(t,e){t.set('custom-name',e)},o.prototype.getName=function(t){return t.getName()},o.prototype.getLayerData=function(t){var e=t.get('status');return{name:t.getName(),open:this.isOpen(t),selected:'selected'===e,hovered:'hovered'===e,visible:this.isVisible(t),locked:this.isLocked(t),components:this.getComponents(t)}},o.prototype.setLayerData=function(t,n,o){var i;void 0===o&&(o={});var r=this.em,s=this.config,a=n.open,l=n.selected,c=n.hovered,u=n.visible,p=n.locked,h=n.name,d=Il({fromLayers:!0},o);if((0,e.isDef)(a)&&this.setOpen(t,a),(0,e.isDef)(l))if(l){r.setSelected(t,d);var f=s.scrollCanvas;f&&(null===(i=t.views)||void 0===i||i.forEach((function(t){return t.scrollIntoView(f)})))}else r.removeSelected(t,d);(0,e.isDef)(c)&&s.showHover&&(c?r.setHovered(t,d):r.setHovered(null,d)),(0,e.isDef)(u)&&u!==this.isVisible(t)&&this.setVisible(t,u),(0,e.isDef)(p)&&this.setLocked(t,p),(0,e.isDef)(h)&&this.setName(t,h)},o.prototype.componentChanged=function(t,e){var n;if(void 0===e&&(e={}),!e.fromLayers){var o=this.em,i=this.config.scrollLayers,r=this.model.get('opened'),s=o.getSelected(),a=null==s?void 0:s.parent();for(var l in r)r[l].set('open',!1),delete r[l];for(;a;)a.set('open',!0),r[a.cid]=a,a=a.parent();if(s&&i){var c=null===(n=s.viewLayer)||void 0===n?void 0:n.el;null==c||c.scrollIntoView(i)}}},o.prototype.getAll=function(){return this.view},o.prototype.render=function(){var t,e,n=this.config,o=this.model,i=Zl.extend(n.extend);return this.view=new i({el:null===(t=this.view)||void 0===t?void 0:t.el,ItemView:i,level:0,config:n,opened:o.get('opened'),model:this.getRoot(),module:this}),null===(e=this.view)||void 0===e?void 0:e.render().el},o.prototype.destroy=function(){var t;null===(t=this.view)||void 0===t||t.remove()},o.prototype.__onRootChange=function(){var t,e=this.getRoot();null===(t=this.view)||void 0===t||t.setRoot(e),this.em.trigger(Xl,e),this.__trgCustom()},o.prototype.__onComponent=function(t){this.updateLayer(t)},o.prototype.__isLayerable=function(t){var e=t.get('tagName');return(!this.config.hideTextnode||!t.is('textnode')&&'br'!==e)&&t.get('layerable')},o.prototype.__trgCustom=function(t){var e=this,n=e.__ctn,o=e.em,i=e.events;this.__ctn=n||(null==t?void 0:t.container),o.trigger(i.custom,{container:this.__ctn,root:this.getRoot()})},o.prototype.updateLayer=function(t,e){this.em.trigger(Ll,t,e)},o}(m);const Fl=Bl;const Gl={assets:[],noAssets:'',stylePrefix:'am-',upload:'',uploadName:'files',headers:{},params:{},credentials:'include',multiUpload:!0,multiUploadSuffix:'[]',autoAdd:!0,customFetch:void 0,uploadFile:void 0,embedAsBase64:!0,handleAdd:void 0,beforeUpload:void 0,showUrlInput:!0,custom:!1,dropzone:!1,openAssetsOnDrop:!0,dropzoneContent:''};var Hl=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Kl=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return Hl(n,e),n.getDefaults=function(){return(0,t.result)(this.prototype,'defaults')},n.prototype.defaults=function(){return{type:'',src:''}},n.prototype.getType=function(){return this.get('type')},n.prototype.getSrc=function(){return this.get('src')},n.prototype.getFilename=function(){return this.get('src').split('/').pop().split('?').shift()},n.prototype.getExtension=function(){return this.getFilename().split('.').pop()},n}(l.Hn);const Jl=Kl;Kl.prototype.idAttribute='src';var tc=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ec=void 0&&(void 0).__assign||function(){return ec=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},ec.apply(this,arguments)};const nc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return tc(e,t),e.prototype.defaults=function(){return ec(ec({},Jl.getDefaults()),{type:'image',unitDim:'px',height:0,width:0})},e}(Jl);var oc=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ic=function(e){function n(t){var n=e.call(this,t)||this;n.options=t,n.collection=t.collection;var o=t.config||{};n.config=o,n.pfx=o.stylePrefix||'',n.ppfx=o.pStylePrefix||'',n.em=o.em,n.className=n.pfx+'asset',n.listenTo(n.model,'destroy remove',n.remove),n.model.view=n;var i=n.init&&n.init.bind(n);return i&&i(t),n}return oc(n,e),n.prototype.__getBhv=function(){var t=this.em,e=null==t?void 0:t.Assets;return(null==e?void 0:e.__getBehaviour())||{}},n.prototype.template=function(t,e){var n=this.pfx;return"\n      <div class=\"".concat(n,"preview-cont\">\n        ").concat(this.getPreview(),"\n      </div>\n      <div class=\"").concat(n,"meta\">\n        ").concat(this.getInfo(),"\n      </div>\n      <div class=\"").concat(n,"close\" data-toggle=\"asset-remove\">\n        &Cross;\n      </div>\n    ")},n.prototype.updateTarget=function(e){e&&e.set&&(e.set('attributes',(0,t.clone)(e.get('attributes'))),e.set('src',this.model.get('src')))},n.prototype.getPreview=function(){return''},n.prototype.getInfo=function(){return''},n.prototype.render=function(){var t=this.el;return t.innerHTML=this.template(this,this.model),t.className=this.className,this},n}(l.G7);const rc=ic;var sc=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ac=void 0&&(void 0).__makeTemplateObject||function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},lc=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return sc(o,e),o.prototype.getPreview=function(){var t=this,e=t.pfx,o=t.ppfx,i=t.model.get('src');return n(uc||(uc=ac(["\n      <div class=\"","preview\" style=\"background-image: url('","');\"></div>\n      <div class=\"","preview-bg ","checker-bg\"></div>\n    "],["\n      <div class=\"","preview\" style=\"background-image: url('","');\"></div>\n      <div class=\"","preview-bg ","checker-bg\"></div>\n    "])),e,i,e,o)},o.prototype.getInfo=function(){var t=this.pfx,e=this.model,o=e.get('name'),i=e.get('width'),r=e.get('height'),s=e.get('unitDim'),a=i&&r?"".concat(i,"x").concat(r).concat(s):'';return o=o||e.getFilename(),n(pc||(pc=ac(["\n      <div class=\"","name\">","</div>\n      <div class=\"","dimensions\">","</div>\n    "],["\n      <div class=\"","name\">","</div>\n      <div class=\"","dimensions\">","</div>\n    "])),t,o,t,a)},o.prototype.init=function(t){var e=this.pfx;this.className+=" ".concat(e,"asset-image")},o.prototype.onClick=function(){var e=this.model,n=this.pfx,o=this.__getBhv().select,i=this.config.onClick,r=this.collection;r.trigger('deselectAll'),this.$el.addClass(n+'highlight'),(0,t.isFunction)(o)?o(e,!1):(0,t.isFunction)(i)?i(e):this.updateTarget(r.target)},o.prototype.onDblClick=function(){var e=this.em,n=this.model,o=this.__getBhv().select,i=this.config.onDblClick,r=this.collection,s=r.target,a=r.onSelect;(0,t.isFunction)(o)?o(n,!0):(0,t.isFunction)(i)?i(n):(this.updateTarget(s),null==e||e.Modal.close()),(0,t.isFunction)(a)&&a(n)},o.prototype.onRemove=function(t){t.stopImmediatePropagation(),this.model.collection.remove(this.model)},o}(rc);const cc=lc;var uc,pc;lc.prototype.events={'click [data-toggle=asset-remove]':'onRemove',click:'onClick',dblclick:'onDblClick'};var hc=void 0&&(void 0).__assign||function(){return hc=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},hc.apply(this,arguments)},dc={types:[],initialize:function(t,e){var n=this;void 0===e&&(e={});var o=e.em;this.em=o,this.opts=e,this.model=function(t,e){var i,r,s;if(void 0===t&&(t={}),void 0===e&&(e={}),t&&t.type){var a=n.getBaseType();i=(s=n.getType(t.type))?s.model:a.model,r=s?s.view:a.view}else{var l=n.recognizeType(t);i=(s=l.type).model,r=s.view,t=l.attributes}var c=new i(t,hc(hc({},e),{em:o}));return c.typeView=r,c};var i=this.init&&this.init.bind(this);i&&i()},recognizeType:function(t){for(var e=this.getTypes(),n=0;n<e.length;n++){var o=e[n],i=o.isType(t);if(i='boolean'==typeof i&&i?{type:o.id}:i)return{type:o,attributes:i}}return{type:this.getBaseType(),attributes:t}},getBaseType:function(){var t=this.getTypes();return t[t.length-1]},getTypes:function(){return this.types},getType:function(t){for(var e=this.getTypes(),n=0;n<e.length;n++){var o=e[n];if(o.id===t)return o}},addType:function(e,n){var o=this.getType(e),i=this.getBaseType(),r=o?o.model:i.model,s=o?o.view:i.view,a=n.model,c=n.view,u=n.isType;a=a instanceof l.Hn||(0,t.isFunction)(a)?a:r.extend(a||{}),c=c instanceof l.G7||(0,t.isFunction)(c)?c:s.extend(c||{}),!this.extendViewApi||n.model||n.view||(c=c.extend(n)),o?(o.model=a,o.view=c,o.isType=u||o.isType):(n.id=e,n.model=a,n.view=c,n.isType=u||function(t){if(t&&t.type==e)return!0},this.getTypes().unshift(n))}};const fc=dc;var gc=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),mc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return gc(e,t),e}(l.FE.extend(fc));const vc=mc;mc.prototype.types=[{id:'image',model:nc,view:cc,isType:function(t){return'string'==typeof t?{type:'image',src:t}:t}}];var yc=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),_c=function(t){function e(e){void 0===e&&(e={});var n=t.call(this,e)||this;n.options=e,n.config=e.config,n.pfx=n.config.stylePrefix||'',n.ppfx=n.config.pStylePrefix||'',n.em=n.config.em;var o=n.collection;return n.listenTo(o,'reset',n.renderAssets),n.listenTo(o,'add',n.addToAsset),n.listenTo(o,'remove',n.removedAsset),n.listenTo(o,'deselectAll',n.deselectAll),n}return yc(e,t),e.prototype.template=function(t){var e=t.pfx,n=t.ppfx,o=t.em,i='';return this.config.showUrlInput&&(i="\n          <form class=\"".concat(e,"add-asset\">\n            <div class=\"").concat(n,"field ").concat(e,"add-field\">\n              <input placeholder=\"").concat(null==o?void 0:o.t('assetManager.inputPlh'),"\"/>\n            </div>\n            <button class=\"").concat(n,"btn-prim\">").concat(null==o?void 0:o.t('assetManager.addButton'),"</button>\n            <div style=\"clear:both\"></div>\n          </form>\n      ")),"\n    <div class=\"".concat(e,"assets-cont\">\n      <div class=\"").concat(e,"assets-header\">\n        ").concat(i,"\n      </div>\n      <div class=\"").concat(e,"assets\" data-el=\"assets\"></div>\n      <div style=\"clear:both\"></div>\n    </div>\n    ")},e.prototype.handleSubmit=function(t){t.preventDefault();var e=this.getAddInput(),n=e&&e.value.trim(),o=this.config.handleAdd;if(n){e.value='';var i=this.getAssetsEl();i&&(i.scrollTop=0),o?o.bind(this)(n):this.options.globalCollection.add(n,{at:0})}},e.prototype.getAssetsEl=function(){return this.el.querySelector(".".concat(this.pfx,"assets"))},e.prototype.getAddInput=function(){return this.inputUrl&&this.inputUrl.value||(this.inputUrl=this.el.querySelector(".".concat(this.pfx,"add-asset input"))),this.inputUrl},e.prototype.removedAsset=function(t){this.collection.length||this.toggleNoAssets()},e.prototype.addToAsset=function(t){1==this.collection.length&&this.toggleNoAssets(!0),this.addAsset(t)},e.prototype.addAsset=function(t,e){void 0===e&&(e=null);var n=e,o=this.collection,i=this.config,r=new t.typeView({model:t,collection:o,config:i}).render().el;if(n)n.appendChild(r);else{var s=this.getAssetsEl();s&&s.insertBefore(r,s.firstChild)}return r},e.prototype.toggleNoAssets=function(t){void 0===t&&(t=!1);var e=this.$el.find(".".concat(this.pfx,"assets"));if(t)e.empty();else{var n=this.config.noAssets;n&&e.append(n)}},e.prototype.deselectAll=function(){var t=this.pfx;this.$el.find(".".concat(t,"highlight")).removeClass("".concat(t,"highlight"))},e.prototype.renderAssets=function(){var t=this,e=document.createDocumentFragment(),n=this.$el.find(".".concat(this.pfx,"assets"));n.empty(),this.toggleNoAssets(!!this.collection.length),this.collection.each((function(n){return t.addAsset(n,e)})),n.append(e)},e.prototype.render=function(){var t=this.options.fu.render().el;return this.$el.empty(),this.$el.append(t).append(this.template(this)),this.el.className="".concat(this.ppfx,"asset-manager"),this.renderAssets(),this},e}(l.G7);const Oc=_c;_c.prototype.events={submit:'handleSubmit'};var bc=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),wc=void 0&&(void 0).__makeTemplateObject||function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},xc=function(t){function e(n){void 0===n&&(n={});var o=t.call(this,n)||this;o.options=n;var i=n.config||{};o.module=n.module,o.config=i,o.em=o.config.em,o.pfx=i.stylePrefix||'',o.ppfx=i.pStylePrefix||'',o.target=o.options.globalCollection||{},o.uploadId=o.pfx+'uploadFile',o.disabled=void 0!==i.disableUpload?i.disableUpload:!i.upload&&!i.embedAsBase64,o.multiUpload=void 0===i.multiUpload||i.multiUpload;var r=i.uploadFile;return r?o.uploadFile=r.bind(o):!i.upload&&i.embedAsBase64&&(o.uploadFile=e.embedAsBase64),o.delegateEvents(),o}return bc(e,t),e.prototype.template=function(t){var e=t.pfx,o=t.title,i=t.uploadId,r=t.disabled,s=t.multiUpload;return n(kc||(kc=wc(["\n      <form>\n        <div id=\"","title\">","</div>\n        <input\n          data-input\n          type=\"file\"\n          id=\"","\"\n          name=\"file\"\n          accept=\"*/*\"\n          ","\n          ","\n        />\n        <div style=\"clear:both;\"></div>\n      </form>\n    "],["\n      <form>\n        <div id=\"","title\">","</div>\n        <input\n          data-input\n          type=\"file\"\n          id=\"","\"\n          name=\"file\"\n          accept=\"*/*\"\n          ","\n          ","\n        />\n        <div style=\"clear:both;\"></div>\n      </form>\n    "])),e,o,i,r?'disabled':'',s?'multiple':'')},e.prototype.events=function(){return{'change [data-input]':'uploadFile'}},e.prototype.onUploadStart=function(){var t=this.module;t&&t.__propEv('asset:upload:start')},e.prototype.onUploadEnd=function(t){var e=this.$el,n=this.module;n&&n.__propEv('asset:upload:end',t);var o=e.find('input');o&&o.val('')},e.prototype.onUploadError=function(t){var e=this.module;console.error(t),this.onUploadEnd(t),e&&e.__propEv('asset:upload:error',t)},e.prototype.onUploadResponse=function(t,e){var n,o=this,i=o.module,r=o.config,s=o.target;try{n='string'==typeof t?JSON.parse(t):t}catch(e){n=t}i&&i.__propEv('asset:upload:response',n),r.autoAdd&&s&&s.add(n.data,{at:0}),this.onUploadEnd(t),null==e||e(n)},e.prototype.uploadFile=function(t,e){var n=this,o=t.dataTransfer?t.dataTransfer.files:t.target.files,i=this.config,r=i.beforeUpload;if(!1!==(r&&r(o))){var s=new FormData,a=i.params,l=i.customFetch,c=i.fetchOptions;for(var u in a)s.append(u,a[u]);if(this.multiUpload)for(var p=0;p<o.length;p++)s.append("".concat(i.uploadName).concat(i.multiUploadSuffix),o[p]);else o.length&&s.append(i.uploadName,o[0]);var h=i.upload,d=i.headers,f='X-Requested-With';if(void 0===d[f]&&(d[f]='XMLHttpRequest'),h){this.onUploadStart();var g={method:'post',credentials:i.credentials||'include',headers:d,body:s},m=(null==c?void 0:c(g))||g;return(l?l(h,m):Fa(h,m).then((function(t){return 1==(t.status/200|0)?t.text():t.text().then((function(t){return Promise.reject(t)}))}))).then((function(t){return n.onUploadResponse(t,e)})).catch((function(t){return n.onUploadError(t)}))}}},e.prototype.initDrop=function(){var t=this;if(!this.uploadForm){this.uploadForm=this.$el.find('form').get(0);var e=this.uploadForm;'draggable'in e&&(this.uploadForm.ondragover=function(){return e.className=t.pfx+'hover',!1},this.uploadForm.ondragleave=function(){return e.className='',!1},this.uploadForm.ondrop=function(n){e.className='',n.preventDefault(),t.uploadFile(n)})}},e.prototype.initDropzone=function(t){var e=this,n=0,o=this.config,i=t.model,r=t.el,s=i.Editor,a=i.Canvas.getBody(),l=this.ppfx,c="".concat(l,"dropzone-active"),u="".concat(l,"dropzone"),p=function(){r.className=r.className.replace(c,'').trim(),n=0},h=function(){return n||(r.className+=" ".concat(c),n=1),!1},d=function(){return p(),!1},f=function(t){if(p(),t.preventDefault(),t.stopPropagation(),e.uploadFile(t),o.openAssetsOnDrop&&s){var n=s.getSelected();s.runCommand('open-assets',{target:n,onSelect:function(){s.Modal.close(),s.AssetManager.setTarget(null)}})}return!1};t.$el.append("<div class=\"".concat(u,"\">").concat(o.dropzoneContent,"</div>")),p(),'draggable'in r&&[r,a].forEach((function(t){t.ondragover=h,t.ondragleave=d,t.ondrop=f}))},e.prototype.render=function(){var t=this,e=t.$el,n=t.pfx,o=t.em;return e.html(this.template({title:o&&o.t('assetManager.uploadTitle'),uploadId:this.uploadId,disabled:this.disabled,multiUpload:this.multiUpload,pfx:n})),this.initDrop(),e.attr('class',n+'file-uploader'),this},e.embedAsBase64=function(t,e){var n=this,o=t.dataTransfer?t.dataTransfer.files:t.target.files,i={data:[]};if(FileReader){for(var r=[],s=/^(.+)\/(.+)$/,a=function(t){var e=new Promise((function(e,n){var o=new FileReader;o.addEventListener('load',(function(i){var r,a=t.name,l=s.exec(t.type);if('image'===(r=l?l[1]:t.type)){var c={src:o.result,name:a,type:r,height:0,width:0},u=new Image;u.addEventListener('error',(function(t){n(t)})),u.addEventListener('load',(function(){c.height=u.height,c.width=u.width,e(c)})),u.src=c.src}else e(r?{src:o.result,name:a,type:r}:o.result)})),o.addEventListener('error',(function(t){n(t)})),o.addEventListener('abort',(function(t){n('Aborted')})),o.readAsDataURL(t)}));r.push(e)},l=0,c=o;l<c.length;l++){a(c[l])}return Promise.all(r).then((function(t){i.data=t,n.onUploadResponse(i,e)}),(function(t){n.onUploadError(t)}))}this.onUploadError(new Error('Unsupported platform, FileReader is not defined'))},e}(l.G7);const Sc=xc;var kc,Pc=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Cc=void 0&&(void 0).__assign||function(){return Cc=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Cc.apply(this,arguments)},Tc=void 0&&(void 0).__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))},Ec='asset',Ac="".concat(Ec,":"),Qc="".concat(Ac,"select"),$c="".concat(Ac,"update"),jc="".concat(Ac,"add"),Rc="".concat(Ac,"remove"),Mc="".concat(Rc,":before"),Vc="".concat(Ac,"custom"),Zc="".concat(Ac,"open"),Dc="".concat(Ac,"close"),Ic="".concat(Ac,"upload"),Nc="".concat(Ic,":start"),Wc="".concat(Ic,":end"),Xc="".concat(Ic,":error"),Lc="".concat(Ic,":response"),zc='open-assets',Uc={all:Ec,select:Qc,update:$c,add:jc,remove:Rc,removeBefore:Mc,custom:Vc,open:Zc,close:Dc,uploadStart:Nc,uploadEnd:Wc,uploadError:Xc,uploadResponse:Lc},qc=function(e){function n(n){var o=e.call(this,n,'AssetManager',new vc([],n),Uc,Gl)||this;o.storageKey='assets',o.Asset=Jl,o.Assets=vc;var i=o,r=i.all,s=i.config;o.assetsVis=new vc([]);var a=s.pStylePrefix;return a&&(s.stylePrefix="".concat(a).concat(s.stylePrefix)),r.on('add',(function(t){return o.getAllVisible().add(t)})),r.on('remove',(function(t){return o.getAllVisible().remove(t)})),o.__onAllEvent=(0,t.debounce)((function(){return o.__trgCustom()}),0),o}return Pc(n,e),n.prototype.__propEv=function(t){for(var e,n,o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i];(e=this.em).trigger.apply(e,Tc([t],o,!1)),(n=this.getAll()).trigger.apply(n,Tc([t],o,!1))},n.prototype.__trgCustom=function(){var t=this.__getBehaviour(),e=this.getConfig().custom;(t.container||e.open)&&this.em.trigger(this.events.custom,this.__customData())},n.prototype.__customData=function(){var e=this,n=this.__getBehaviour();return{am:this,open:this.isOpen(),assets:this.getAll().models,types:n.types||[],container:n.container,close:function(){return e.close()},remove:function(t,n){return e.remove(t,n)},select:function(o,i){var r=e.add(o);(0,t.isFunction)(n.select)&&n.select(r,i)},options:n.options||{}}},n.prototype.open=function(t){void 0===t&&(t={}),this.em.Commands.run(zc,Cc({types:['image'],select:function(){}},t))},n.prototype.close=function(){this.em.Commands.stop(zc)},n.prototype.isOpen=function(){var t=this.em.Commands;return!!(null==t?void 0:t.isActive(zc))},n.prototype.add=function(t,e){return void 0===e&&(e={}),void 0===e.at&&(e.at=0),this.all.add(t,e)},n.prototype.get=function(t){return this.all.where({src:t})[0]||null},n.prototype.getAll=function(){return this.all},n.prototype.getAllVisible=function(){return this.assetsVis},n.prototype.remove=function(t,e){return this.__remove(t,e)},n.prototype.store=function(){return this.getProjectData()},n.prototype.load=function(t){return this.loadProjectData(t)},n.prototype.getContainer=function(){var t;return this.__getBehaviour().container||(null===(t=this.am)||void 0===t?void 0:t.el)},n.prototype.getAssetsEl=function(){var t;return null===(t=this.am)||void 0===t?void 0:t.el.querySelector('[data-el=assets]')},n.prototype.render=function(t){if(!this.getConfig().custom){var e=t||this.getAll().models;if(!this.am){var n=this.__viewParams();n.fu=this.FileUploader(),this.am=new Oc(Cc({},n)),this.am.render()}return this.assetsVis.reset(e),this.getContainer()}},n.prototype.__viewParams=function(){return{collection:this.assetsVis,globalCollection:this.all,config:this.config,module:this,fu:void 0}},n.prototype.addType=function(t,e){this.getAll().addType(t,e)},n.prototype.getType=function(t){return this.getAll().getType(t)},n.prototype.getTypes=function(){return this.getAll().getTypes()},n.prototype.AssetsView=function(){return this.am},n.prototype.FileUploader=function(){return this.fu||(this.fu=new Sc(this.__viewParams())),this.fu},n.prototype.onLoad=function(){var t=this;this.getAll().reset(this.config.assets);var e=this.em,n=this.events;e.on("run:".concat(zc),(function(){return t.__propEv(n.open)})),e.on("stop:".concat(zc),(function(){return t.__propEv(n.close)}))},n.prototype.postRender=function(t){var e;this.config.dropzone&&(null===(e=this.fu)||void 0===e||e.initDropzone(t))},n.prototype.setTarget=function(t){this.assetsVis.target=t},n.prototype.onSelect=function(t){this.assetsVis.onSelect=t},n.prototype.onClick=function(t){this.config.onClick=t},n.prototype.onDblClick=function(t){this.config.onDblClick=t},n.prototype.__behaviour=function(t){return void 0===t&&(t={}),this._bhv=Cc(Cc({},this._bhv||{}),t)},n.prototype.__getBehaviour=function(t){return void 0===t&&(t={}),this._bhv||{}},n.prototype.destroy=function(){var t,e;this.all.stopListening(),this.all.reset(),this.assetsVis.stopListening(),this.assetsVis.reset(),null===(t=this.fu)||void 0===t||t.remove(),null===(e=this.am)||void 0===e||e.remove(),this._bhv={}},n}(v);const Yc=qc;var Bc=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Fc=function(e){function n(t,n){void 0===n&&(n={});var o=e.call(this,t,n)||this,i=n.em,r={};o.em=i,t.frames||(r.component=t.component,r.styles=t.styles,['component','styles'].map((function(t){return o.unset(t)})));var s=t.frames||[r],a=new rt(i.Canvas,s);return a.page=o,o.set('frames',a),!o.getId()&&o.set('id',null==i?void 0:i.Pages._createId()),null==i||i.UndoManager.add(a),o}return Bc(n,e),n.prototype.defaults=function(){return{name:'',frames:[],_undo:!0}},n.prototype.onRemove=function(){this.getFrames().reset()},n.prototype.getFrames=function(){return this.get('frames')},n.prototype.getId=function(){return this.id},n.prototype.getName=function(){return this.get('name')},n.prototype.setName=function(t){return this.set({name:t})},n.prototype.getAllFrames=function(){return this.getFrames().models||[]},n.prototype.getMainFrame=function(){return this.getFrames().at(0)},n.prototype.getMainComponent=function(){var t=this.getMainFrame();return null==t?void 0:t.getComponent()},n.prototype.toJSON=function(e){void 0===e&&(e={});var n=l.Hn.prototype.toJSON.call(this,e),o=(0,t.result)(this,'defaults');return(0,t.forEach)(n,(function(t,e){0===e.indexOf('_')&&delete n[e]})),(0,t.forEach)(o,(function(t,e){n[e]===t&&delete n[e]})),n},n}(l.Hn);var Gc=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Hc=void 0&&(void 0).__assign||function(){return Hc=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Hc.apply(this,arguments)},Kc=function(t){function e(e,n){var o=t.call(this,e)||this;return o.on('reset',o.onReset),o.on('remove',o.onRemove),o.model=function(t,e){return void 0===e&&(e={}),new Fc(t,Hc(Hc({},e),{em:n}))},o}return Gc(e,t),e.prototype.onReset=function(t,e){var n,o=this;null===(n=null==e?void 0:e.previousModels)||void 0===n||n.map((function(t){return o.onRemove(t)}))},e.prototype.onRemove=function(t){null==t||t.onRemove()},e}(l.FE);const Jc=Kc;var tu=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),eu=function(t){function e(e,n){var o=t.call(this,e)||this;o.highlightedClass='gjs-three-bg',o.config=n;var i=o,r=i.model,s=i.pfx,a=i.ppfx,l=r.get('type')||'default';return o.className="".concat(a,"layer ").concat(a,"layer__t-").concat(l," no-select ").concat(s,"two-color"),o}return tu(e,t),e.prototype.render=function(){var t=this,e=t.em;t.pfx,t.ppfx,t.model;this.$el.attr('class',this.className);var n=new _n(e).setTarget('name',this.model,{changeProp:!0});return this.$el.append(n.render().el),this},e.prototype.events=function(){var t=this;return{click:function(){return t.trigger('onClick',t)}}},Object.defineProperty(e.prototype,"em",{get:function(){return this.config.em},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ppfx",{get:function(){return this.em.getConfig().stylePrefix},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pfx",{get:function(){return this.config.stylePrefix},enumerable:!1,configurable:!0}),e.prototype.setHighlighted=function(t){t?this.$el.addClass(this.highlightedClass):this.$el.removeClass(this.highlightedClass)},Object.defineProperty(e.prototype,"page",{get:function(){return this.model},enumerable:!1,configurable:!0}),e}(l.G7);const nu=eu;var ou=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),iu=function(t){function e(e,n){var o=t.call(this,e)||this;o.config=n||{};var i=o.config.pStylePrefix||'';o.ppfx=i;var r=o.collection;return o.listenTo(r,'reset',o.render),o.listenTo(r,'remove',o.render),o.em=o.config.em,o}return ou(e,t),e.prototype.events=function(){var t,e=this.buttonAddId,n='click #'+this.buttonRemoveId;return(t={})['click #'+e]=this.__addPage,t[n]=this.__removePage,t},e.prototype.__getModule=function(){return this.em.Pages},Object.defineProperty(e.prototype,"buttonAddId",{get:function(){return this.ppfx+'button-add'},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buttonRemoveId",{get:function(){return this.ppfx+'button-remove'},enumerable:!1,configurable:!0}),e.prototype.__addPage=function(){var t=this.em;this.collection.add(new Fc({},{em:t})),this.render()},e.prototype.__removePage=function(){this.selectedView&&this.collection.remove(this.selectedView.model)},e.prototype.addTo=function(t){this.collection.add(t)},e.prototype.add=function(t,e){var n,o=this.config,i=new nu({model:t},o),r=i.render().el;(null===(n=this.em.Pages.getSelected())||void 0===n?void 0:n.id)==t.id&&(i.setHighlighted(!0),this.selectedView=i),i.on('onClick',this.selectedHandler,this),e.appendChild(r)},e.prototype.selectedHandler=function(t){var e;this.em.Pages.select(t.model),null===(e=this.selectedView)||void 0===e||e.setHighlighted(!1),this.trigger('selected',t.model),this.selectedView=t,this.selectedView.setHighlighted(!0)},e.prototype.getCommandsNav=function(){var t=this.buttonAddId,e=this.buttonRemoveId;return(0,s["default"])("<div data-val-id=\"\">\n    <div><button id=\"".concat(t,"\">Add page</button></div>\n    <div><button id=\"").concat(e,"\">Delete page</button></div>\n    </div>"))},e.prototype.render=function(){var t=this;this.$el.empty();var e=(0,s["default"])('<div class=""></div>');e.className='gps-block',e.append(this.getCommandsNav());var n=document.createDocumentFragment();return this.collection.each((function(e){t.add(e,n)}),this),e.append(n),this.$el.append(e),this.setElement(this.$el),this},e}(l.G7);const ru=iu;const su={stylePrefix:'pg-',appendTo:'',optionsTarget:[{value:!1},{value:'_blank'}],custom:!1};var au=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),lu=function(t){function e(e,n){var o=t.call(this,{model:e})||this;o.highlightedClass='gjs-three-bg',o.config=n;var i=o,r=i.pfx,s=i.ppfx;return o.className="".concat(s,"layer no-select ").concat(r,"two-color"),o}return au(e,t),e.prototype.render=function(){var t=this.em;if(this.$el.empty(),this.$el.attr('class',this.className),this.model){var e=new nn(t,{min:0});e.setTarget('name',this.model,{changeProp:!0}),this.$el.append(e.render().el);var n=new on(t,{min:0,units:['px','%']});n.setTarget('name',this.model,{changeProp:!0}),this.$el.append(n.render().el),this.$el.append(new an(t,{options:['px','%']}).setTarget('name',this.model,{changeProp:!0}).render().el),this.$el.append(new Ye(t).setTarget('name',this.model,{changeProp:!0}).render().el),this.$el.append(new ze(t,{text:'Ok',command:function(){console.log('click')},full:!0}).setTarget('name',this.model,{changeProp:!0}).render().el),this.$el.append(new Je(t,{}).setTarget('name',this.model,{changeProp:!0}).render().el);var o=new _n(t,{}).setTarget('route',this.model,{changeProp:!0});this.$el.append(o.render().el)}return this},e.prototype.events=function(){var t=this;return{click:function(){return t.trigger('onClick',t)}}},e.prototype.changePage=function(t){this.model=t,this.render()},Object.defineProperty(e.prototype,"em",{get:function(){return this.config.em},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ppfx",{get:function(){return this.em.getConfig().stylePrefix},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pfx",{get:function(){return this.config.stylePrefix},enumerable:!1,configurable:!0}),e.prototype.setHighlighted=function(t){t?this.$el.addClass(this.highlightedClass):this.$el.removeClass(this.highlightedClass)},Object.defineProperty(e.prototype,"page",{get:function(){return this.model},enumerable:!1,configurable:!0}),e}(l.G7);const cu=lu;var uu=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),pu=void 0&&(void 0).__assign||function(){return pu=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},pu.apply(this,arguments)},hu=void 0&&(void 0).__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))},du='change:selected',fu='main',gu=function(n){function o(e){var o=n.call(this,e,'PageManager',new Jc([],e),q,su)||this;o.events=q,o.storageKey='pages',(0,t.bindAll)(o,'_onPageChange');var i=new _.Z({_undo:!0});return o.model=i,o.pages.on('reset',(function(t){return t.at(0)&&o.select(t.at(0))})),o.pages.on('all',o.__onChange,o),i.on(du,o._onPageChange),o}return uu(o,n),Object.defineProperty(o.prototype,"pages",{get:function(){return this.all},enumerable:!1,configurable:!0}),o.prototype.getAll=function(){return hu([],this.all.models,!0)},o.prototype.__onChange=function(t,e,n,o){var i=this.em,r=this.events,s=o||n;i.trigger(r.all,{event:t,page:e,options:s})},o.prototype.onLoad=function(){var t,e=this,n=e.pages,o=e.config,i=e.em,r={silent:!0},s=(null===(t=o.pages)||void 0===t?void 0:t.map((function(t){return new Fc(t,{em:i,config:o})})))||[];n.add(s,r);var a=n.length?this.getMain():this.add({type:fu},r);a&&this.select(a,r)},o.prototype._onPageChange=function(t,e,n){var o=this.em,i=this.events,r=o.Layers,s=e.getMainComponent();r&&s&&r.setRoot(s),o.trigger(i.select,e,t.previous('selected')),this.__onChange(du,e,n)},o.prototype.postLoad=function(){var t=this,e=t.em,n=t.model,o=t.pages,i=e.UndoManager;i.add(n),i.add(o),o.on('add remove reset change',(function(t,n,o){return e.changesUp(o||n)}))},o.prototype.add=function(t,e){var n=this;void 0===e&&(e={});var o=this.em,i=this.events;t.id=t.id||this._createId();var r=function(){var o=n.pages.add(new Fc(t,{em:n.em,config:n.config}),e);return e.select&&n.select(o),o};return!e.silent&&o.trigger(i.addBefore,t,r,e),e.abort?void 0:r()},o.prototype.remove=function(e,n){var o=this;void 0===n&&(n={});var i=this.em,r=this.events,s=(0,t.isString)(e)?this.get(e):e,a=function(){return s&&o.pages.remove(s,n),s};return!n.silent&&i.trigger(r.removeBefore,s,a,n),!n.abort&&a()},o.prototype.get=function(t){return this.pages.filter((function(e){return e.get(e.idAttribute)===t}))[0]},o.prototype.getMain=function(){var t=this.pages;return t.filter((function(t){return t.get('type')===fu}))[0]||t.at(0)},o.prototype.getAllWrappers=function(){var e=this.getAll();return(0,t.unique)((0,t.flatten)(e.map((function(t){return t.getAllFrames().map((function(t){return t.getComponent()}))}))))},o.prototype.select=function(e,n){void 0===n&&(n={});var o=this,i=o.em,r=o.model,s=o.events,a=(0,t.isString)(e)?this.get(e):e;return a&&(i.trigger(s.selectBefore,a,n),r.set('selected',a,n)),this},o.prototype.getSelected=function(){return this.model.get('selected')},o.prototype.destroy=function(){var t=this;this.pages.off().reset(),this.model.stopListening(),this.model.clear({silent:!0}),['selected','model'].map((function(e){return t[e]=0}))},o.prototype.store=function(){return this.getProjectData()},o.prototype.load=function(t){var e=this.loadProjectData(t,{all:this.pages,reset:!0});return this.pages.forEach((function(t){return t.getFrames().initRefs()})),e},o.prototype._createId=function(){var t,n=this.getAll().length+16,o=this.getAllMap();do{t=(0,e.createId)(n)}while(o[t]);return t},o.prototype.render=function(t){var e=this.getConfig(),n=this.em,o=this.all,i=new ru({collection:o,module:this},pu(pu({},e),{em:n})),r=new cu(this.getSelected(),pu(pu({},e),{em:n}));i.on('selected',r.changePage,r);var s=document.createElement('div');return s.append(r.render().el),s.append(i.render().el),s},o}(v);const mu=gu;var vu={placeholder:'eg. Text here'};const yu={locale:'en',localeFallback:'en',detectLocale:!0,debug:!1,messages:{en:{assetManager:{addButton:'Add image',inputPlh:'http://path/to/the/image.jpg',modalTitle:'Select Image',uploadTitle:'Drop files here or click to upload'},blockManager:{labels:{},categories:{}},domComponents:{names:{'':'Box',wrapper:'Body',text:'Text',comment:'Comment',image:'Image',video:'Video',label:'Label',link:'Link',map:'Map',tfoot:'Table foot',tbody:'Table body',thead:'Table head',table:'Table',row:'Table row',cell:'Table cell'}},deviceManager:{device:'Device',devices:{desktop:'Desktop',tablet:'Tablet',mobileLandscape:'Mobile Landscape',mobilePortrait:'Mobile Portrait'}},panels:{buttons:{titles:{preview:'Preview',fullscreen:'Fullscreen','sw-visibility':'View components','export-template':'View code','open-sm':'Open Style Manager','open-tm':'Settings','open-layers':'Open Layer Manager','open-blocks':'Open Blocks'}}},selectorManager:{label:'Classes',selected:'Selected',emptyState:'- State -',states:{hover:'Hover',active:'Click','nth-of-type(2n)':'Even/Odd'}},styleManager:{empty:'Select an element before using Style Manager',layer:'Layer',fileButton:'Images',sectors:{general:'General',layout:'Layout',typography:'Typography',decorations:'Decorations',extra:'Extra',flex:'Flex',dimension:'Dimension'},properties:{'text-shadow-h':'X','text-shadow-v':'Y','text-shadow-blur':'Blur','text-shadow-color':'Color','box-shadow-h':'X','box-shadow-v':'Y','box-shadow-blur':'Blur','box-shadow-spread':'Spread','box-shadow-color':'Color','box-shadow-type':'Type','margin-top-sub':'Top','margin-right-sub':'Right','margin-bottom-sub':'Bottom','margin-left-sub':'Left','padding-top-sub':'Top','padding-right-sub':'Right','padding-bottom-sub':'Bottom','padding-left-sub':'Left','border-width-sub':'Width','border-style-sub':'Style','border-color-sub':'Color','border-top-left-radius-sub':'Top Left','border-top-right-radius-sub':'Top Right','border-bottom-right-radius-sub':'Bottom Right','border-bottom-left-radius-sub':'Bottom Left','transform-rotate-x':'Rotate X','transform-rotate-y':'Rotate Y','transform-rotate-z':'Rotate Z','transform-scale-x':'Scale X','transform-scale-y':'Scale Y','transform-scale-z':'Scale Z','transition-property-sub':'Property','transition-duration-sub':'Duration','transition-timing-function-sub':'Timing','background-image-sub':'Image','background-repeat-sub':'Repeat','background-position-sub':'Position','background-attachment-sub':'Attachment','background-size-sub':'Size'}},traitManager:{empty:'Select an element before using Trait Manager',label:'Component settings',categories:{},traits:{labels:{},attributes:{id:vu,alt:vu,title:vu,href:{placeholder:'eg. https://google.com'}},options:{target:{false:'This window',_blank:'New window'}}}},storageManager:{recover:'Do you want to recover unsaved changes?'}}},messagesAdd:void 0};var _u=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ou=function(n){function o(t){var e=n.call(this,t,'I18n',yu)||this,o=e.config.messagesAdd;return o&&e.addMessages(o),e.config.detectLocale&&(e.config.locale=e._localLang()),e}return _u(o,n),o.prototype.setLocale=function(t){var e=this.em,n=this.config,o={value:t,valuePrev:n.locale};return e&&e.trigger('i18n:locale',o),n.locale=t,this},o.prototype.getLocale=function(){return this.config.locale},o.prototype.getMessages=function(t,e){void 0===e&&(e={});var n=this.config.messages;return t&&!n[t]&&this._debug("'".concat(t,"' i18n lang not found"),e),t?n[t]:n},o.prototype.setMessages=function(t){var e=this.em;return this.config.messages=t,e&&e.trigger('i18n:update',t),this},o.prototype.addMessages=function(t){var n=this.em,o=this.config.messages;return n&&n.trigger('i18n:add',t),this.setMessages((0,e.deepMerge)(o,t)),this},o.prototype.t=function(e,n){void 0===n&&(n={});var o=this.config,i=n.params||{},r=n.l||this.getLocale(),s=n.lFlb||o.localeFallback,a=this._getMsg(e,r,n);return a||(a=this._getMsg(e,s,n)),!a&&this._debug("'".concat(e,"' i18n key not found in '").concat(r,"' lang"),n),a=a&&(0,t.isString)(a)?this._addParams(a,i):a},o.prototype._localLang=function(){var t=(0,e.hasWin)()&&window.navigator||{},n=t.language||t.userLanguage;return n?n.split('-')[0]:'en'},o.prototype._addParams=function(t,e){var n=new RegExp('{([\\w\\d-]*)}','g');return t.replace(n,(function(t,n){return e[n]||''})).trim()},o.prototype._getMsg=function(e,n,o){void 0===o&&(o={});var i=this.getMessages(n,o);if(i){var r=i[e];return!r&&e.indexOf('.')>0&&(r=e.split('.').reduce((function(e,n){if(!(0,t.isUndefined)(e))return e[n]}),i)),r}},o.prototype._debug=function(t,e){void 0===e&&(e={});var n=this.em,o=this.config;(e.debug||o.debug)&&n&&n.logWarning(t)},o.prototype.destroy=function(){},o}(m);const bu=Ou;var wu=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),xu=void 0&&(void 0).__assign||function(){return xu=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},xu.apply(this,arguments)},Su=function(){},ku={id:'sorter-target',type:ct.q.Target},Pu=function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return wu(o,n),o.prototype.initialize=function(e){void 0===e&&(e={}),this.opt=e||{},(0,t.bindAll)(this,'startSort','onMove','endMove','rollback','updateOffset','moveDragHelper');var n=e||{};this.elT=0,this.elL=0,this.borderOffset=n.borderOffset||10;var o=n.container;this.el='string'==typeof o?document.querySelector(o):o,this.$el=(0,s["default"])(this.el),this.containerSel=n.containerSel||'div',this.itemSel=n.itemSel||'div',this.draggable=n.draggable||!0,this.nested=!!n.nested,this.pfx=n.pfx||'',this.ppfx=n.ppfx||'',this.freezeClass=n.freezeClass||this.pfx+'freezed',this.onStart=n.onStart||Su,this.onEndMove=n.onEndMove,this.customTarget=n.customTarget,this.onEnd=n.onEnd,this.direction=n.direction||'v',this.onMoveClb=n.onMove,this.relative=n.relative||!1,this.ignoreViewChildren=!!n.ignoreViewChildren,this.plh=n.placer,this.wmargin=n.wmargin||0,this.offTop=n.offsetTop||0,this.offLeft=n.offsetLeft||0,this.document=n.document||document,this.em=n.em,this.canvasRelative=!!n.canvasRelative,this.selectOnEnd=!n.avoidSelectOnEnd,this.scale=n.scale,this.em&&this.em.on&&(this.em.on('change:canvasOffset',this.updateOffset),this.updateOffset())},o.prototype.getScale=function(){return(0,t.result)(this,'scale')||1},o.prototype.getContainerEl=function(t){if(t&&(this.el=t),!this.el){var e=this.opt.container;this.el='string'==typeof e?document.querySelector(e):e,this.$el=(0,s["default"])(this.el)}return this.el},o.prototype.getDocuments=function(t){var e=this.em,n=t?t.ownerDocument:null==e?void 0:e.Canvas.getBody().ownerDocument,o=[document];return n&&o.push(n),o},o.prototype.updateOffset=function(){var t,e=(null===(t=this.em)||void 0===t?void 0:t.get('canvasOffset'))||{};this.offTop=e.top,this.offLeft=e.left},o.prototype.setDropContent=function(t){delete this.dropModel,this.dropContent=t},o.prototype.updateTextViewCursorPosition=function(t){var e=this.em;if(e){var n=e.Canvas,o=n.getDocument(),i=null;if(o.caretRangeFromPoint){var r=(0,yt.VB)(t);i=o.caretRangeFromPoint(r.clientX,r.clientY)}else t.rangeParent&&(i=o.createRange()).setStart(t.rangeParent,t.rangeOffset);var s=n.getWindow().getSelection();n.getFrameEl().focus(),null==s||s.removeAllRanges(),i&&(null==s||s.addRange(i)),this.setContentEditable(this.activeTextModel,!0)}},o.prototype.setContentEditable=function(t,e){if(t){var n=t.getEl();n.contentEditable!=e&&(n.contentEditable=e)}},o.prototype.toggleSortCursor=function(t){var e=this.em,n=null==e?void 0:e.Canvas;n&&(t?n.startAutoscroll():n.stopAutoscroll())},o.prototype.setDragHelper=function(t,e){for(var n=e||'',o=t.cloneNode(!0),i=t.getBoundingClientRect(),r=getComputedStyle(t),a='',l=0;l<r.length;l++){var c=r[l];a+="".concat(c,":").concat(r.getPropertyValue(c),";")}(document.body.appendChild(o),o.className+=" ".concat(this.pfx,"bdrag"),o.setAttribute('style',a),this.dragHelper=o,o.style.width="".concat(i.width,"px"),o.style.height="".concat(i.height,"px"),n&&this.moveDragHelper(n),this.em)&&(0,s["default"])(this.em.Canvas.getBody().ownerDocument).off('mousemove',this.moveDragHelper).on('mousemove',this.moveDragHelper);(0,s["default"])(document).off('mousemove',this.moveDragHelper).on('mousemove',this.moveDragHelper)},o.prototype.moveDragHelper=function(t){var e=t.target.ownerDocument;if(this.dragHelper&&e){var n=t.pageY,o=t.pageX,i=0,r=0,s=(e.defaultView||e.parentWindow).frameElement,a=this.dragHelper.style;if(s){var l=s.getBoundingClientRect();i=l.top+document.documentElement.scrollTop,r=l.left+document.documentElement.scrollLeft,n=t.clientY,o=t.clientX}a.top=n+i+'px',a.left=o+r+'px'}},o.prototype.matches=function(t,n){return e.matches.call(t,n)},o.prototype.closest=function(t,e){if(t)for(var n=t.parentNode;n&&1===n.nodeType;){if(this.matches(n,e))return n;n=n.parentNode}},o.prototype.offset=function(t){var e=t.getBoundingClientRect();return{top:e.top+document.body.scrollTop,left:e.left+document.body.scrollLeft}},o.prototype.createPlaceholder=function(){var t=this.pfx,e=document.createElement('div'),n=document.createElement('div');return e.className=t+'placeholder',e.style.display='none',e.style.pointerEvents='none',n.className=t+'placeholder-int',e.appendChild(n),e},o.prototype.startSort=function(t,e){var n,o;void 0===e&&(e={});var i,r=this,s=r.em,a=r.itemSel,l=r.containerSel,c=r.plh,u=this.getContainerEl(e.container),p=this.getDocuments(t);delete this.dropModel,delete this.target,delete this.prevTarget,this.moved=!1,t&&!this.matches(t,"".concat(a,", ").concat(l))&&(t=this.closest(t,a)),this.sourceEl=t,c||(this.plh=this.createPlaceholder(),u.appendChild(this.plh)),t&&((null==(i=this.getSourceModel(t))?void 0:i.set)&&i.set('status','freezed'),this.srcModel=i),(0,yt.on)(u,'mousemove dragover',this.onMove),(0,yt.on)(p,'mouseup dragend touchend',this.endMove),(0,yt.on)(p,'keydown',this.rollback),this.onStart({sorter:this,target:i,parent:i&&(null===(n=i.parent)||void 0===n?void 0:n.call(i)),index:i&&(null===(o=i.index)||void 0===o?void 0:o.call(i))}),null==s||s.clearSelection(),this.toggleSortCursor(!0),null==s||s.trigger('sorter:drag:start',t,i)},o.prototype.getTargetModel=function(t){var e=t||this.target;return(0,s["default"])(e).data('model')},o.prototype.getSourceModel=function(t,e){var n=this,o=void 0===e?{}:e,i=o.target,r=o.avoidChildren,a=void 0===r?1:r,l=this.em,c=this.sourceEl,u=t||c,p=this.dropModel,h=this.dropContent,d=function(t){return t&&i&&t.opt&&t.opt.avoidChildren&&n.isTextableActive(t,i)};if(h&&l){if(d(p)&&(p=void 0),!p){var f=l.Components.getComponents(),g={avoidChildren:a,avoidStore:1,avoidUpdateStyle:1},m=f.add(h,xu(xu({},g),{temporary:!0}));if(p=(p=f.remove(m,g))instanceof Array?p[0]:p,this.dropModel=p,d(p))return this.getSourceModel(u,{target:i,avoidChildren:0})}return p}return u&&(0,s["default"])(u).data('model')},o.prototype.selectTargetModel=function(t,e){if(!(t instanceof l.FE||e&&e===t)){var n=this.targetModel;if(n&&n!==this.srcModel&&n.set('status',''),null==t?void 0:t.set){var o=this.em.Canvas;[ct.q.Select,ct.q.Hover,ct.q.Spacing].forEach((function(t){return o.removeSpots({type:t})})),o.addSpot(xu(xu({},ku),{component:t})),t.set('status','selected-parent'),this.targetModel=t}}},o.prototype.onMove=function(e){var n=e,o=this,i=o.em,r=o.onMoveClb,a=o.plh,l=o.customTarget;this.moved=!0;var c=a.style.display;c&&'none'!==c||(a.style.display='block');var u=this.offset(this.el);this.elT=this.wmargin?Math.abs(u.top):u.top,this.elL=this.wmargin?Math.abs(u.left):u.left;var p=e.pageY-this.elT+this.el.scrollTop,h=e.pageX-this.elL+this.el.scrollLeft;if(this.canvasRelative&&i){var d=i.Canvas.getMouseRelativeCanvas(e,{noScroll:1});h=d.x,p=d.y}this.rX=h,this.rY=p,this.eventMove=e;var f=this.getSourceModel(),g=l?l({sorter:this,event:e}):e.target,m=this.dimsFromTarget(g,h,p),v=this.target,y=v&&this.getTargetModel(v);if(this.selectTargetModel(y,f),y||(a.style.display='none'),v){this.lastDims=m;var _=this.findPosition(m,h,p);this.isTextableActive(f,y)?(this.activeTextModel=y,a.style.display='none',this.lastPos=_,this.updateTextViewCursorPosition(n)):(this.disableTextable(),delete this.activeTextModel,this.lastPos&&this.lastPos.index==_.index&&this.lastPos.method==_.method||(this.movePlaceholder(this.plh,m,_,this.prevTargetDim),this.$plh||(this.$plh=(0,s["default"])(this.plh)),this.canvasRelative||(this.offTop&&this.$plh.css('top','+='+this.offTop+'px'),this.offLeft&&this.$plh.css('left','+='+this.offLeft+'px')),this.lastPos=_)),(0,t.isFunction)(r)&&r({event:e,target:f,parent:y,index:_.index+('after'==_.method?1:0)}),i&&i.trigger('sorter:drag',{target:v,targetModel:y,sourceModel:f,dims:m,pos:_,x:h,y:p})}},o.prototype.isTextableActive=function(t,e){var n;return(null===(n=null==t?void 0:t.get)||void 0===n?void 0:n.call(t,'textable'))&&(null==e?void 0:e.isInstanceOf('text'))},o.prototype.disableTextable=function(){var t=this.activeTextModel;null==t||t.getView().disableEditing(),this.setContentEditable(t,!1)},o.prototype.isInFlow=function(t,e){if(!t)return!1;e=e||document.body;var n=t;return n.offsetHeight,!!this.styleInFlow(n,e)},o.prototype.styleInFlow=function(t,e){if(!(0,yt.BM)(t)){var n=t.style||{},o=(0,s["default"])(t),i=e&&(0,s["default"])(e);if(!n.overflow||'visible'===n.overflow){var r=o.css('float');if(!(r&&'none'!==r||i&&'flex'==i.css('display')&&'column'!==i.css('flex-direction'))){switch(n.position){case'static':case'relative':case'':break;default:return}switch(t.tagName){case'TR':case'TBODY':case'THEAD':case'TFOOT':return!0}switch(o.css('display')){case'block':case'list-item':case'table':case'flex':case'grid':return!0}}}}},o.prototype.validTarget=function(e,n){var o=this.getTargetModel(e),i=this.getSourceModel(n,{target:o}),r={valid:!0,src:n=i&&i.view&&i.view.el,srcModel:i,trg:e=o&&o.view&&o.view.el,trgModel:o,draggable:!1,droppable:!1,dragInfo:'',dropInfo:''};if(!n||!e)return r.valid=!1,r;var s=i.get('draggable');if((0,t.isFunction)(s)){var a=s(i,o);r.dragInfo=a,r.draggable=a,s=a}else s=s instanceof Array?s.join(', '):s,r.dragInfo=s,s=(0,t.isString)(s)?this.matches(e,s):s,r.draggable=s;var c=o.get('droppable');if((0,t.isFunction)(c)){a=c(i,o);r.droppable=a,r.dropInfo=a,c=a}else c=(c=c instanceof l.FE?1:c)instanceof Array?c.join(', '):c,r.dropInfo=c,c=(0,t.isString)(c)?this.matches(n,c):c,c=s&&this.isTextableActive(i,o)?1:c,r.droppable=c;return c&&s||(r.valid=!1),r},o.prototype.dimsFromTarget=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=0);var o=this.em,i=[];if(!t)return i;if(this.matches(t,"".concat(this.itemSel,", ").concat(this.containerSel))||(t=this.closest(t,this.itemSel)),this.draggable instanceof Array&&(t=this.closest(t,this.draggable.join(','))),!t)return i;if(this.prevTarget&&this.prevTarget!=t&&delete this.prevTarget,!this.prevTarget){this.targetP=this.closest(t,this.containerSel);var r=this.validTarget(t);if(o&&o.trigger('sorter:drag:validation',r),!r.valid&&this.targetP)return this.dimsFromTarget(this.targetP,e,n);this.prevTarget=t,this.prevTargetDim=this.getDim(t),this.cacheDimsP=this.getChildrenDim(this.targetP),this.cacheDims=this.getChildrenDim(t)}if(this.prevTarget==t&&(i=this.cacheDims),this.target=this.prevTarget,this.nearBorders(this.prevTargetDim,e,n)||!this.nested&&!this.cacheDims.length){var s=this.targetP;s&&this.validTarget(s).valid&&(i=this.cacheDimsP,this.target=s)}return delete this.lastPos,i},o.prototype.getTargetFromEl=function(t){var e,n=t,o=this.targetPrev,i=this.em,r=this.containerSel,s=this.itemSel;if(this.matches(n,"".concat(s,", ").concat(r))||(n=this.closest(n,s)),this.draggable instanceof Array&&(n=this.closest(n,this.draggable.join(','))),o&&o!=n&&delete this.targetPrev,!this.targetPrev){e=this.closest(n,r);var a=this.validTarget(n);if(i&&i.trigger('sorter:drag:validation',a),!a.valid&&e)return this.getTargetFromEl(e);this.targetPrev=n}return this.nearElBorders(n)&&(e=this.closest(n,r))&&this.validTarget(e).valid&&(n=e),n},o.prototype.nearElBorders=function(t){var e=10,n=t.getBoundingClientRect(),o=t.ownerDocument.body,i=this.getCurrentPos(),r=i.x,s=i.y,a=n.top+o.scrollTop,l=n.left+o.scrollLeft,c=n.width,u=n.height;if(s<a+e||s>a+u-e||r<l+e||r>l+c-e)return 1},o.prototype.getCurrentPos=function(){var t=this.eventMove;return{x:(null==t?void 0:t.pageX)||0,y:(null==t?void 0:t.pageY)||0}},o.prototype.getDim=function(t){var e,n,o,i,r=this.em,s=this.canvasRelative,a=null==r?void 0:r.Canvas,l=a?a.getElementOffsets(t):{};if(s&&r){var c=a.getElementPos(t,{noScroll:1});e=c.top,n=c.left,o=c.height,i=c.width}else{var u=this.offset(t);e=this.relative?t.offsetTop:u.top-(this.wmargin?-1:1)*this.elT,n=this.relative?t.offsetLeft:u.left-(this.wmargin?-1:1)*this.elL,o=t.offsetHeight,i=t.offsetWidth}return{top:e,left:n,height:o,width:i,offsets:l}},o.prototype.getChildrenDim=function(n){var o=this,i=[];if(!n)return i;var r=this.getTargetModel(n);if(r&&r.view&&!this.ignoreViewChildren){var a=r.getCurrentView?r.getCurrentView():r.view;n=a.getChildrenContainer()}return(0,t.each)(n.children,(function(t,r){var a=t,l=(0,e.getModel)(a,s["default"]),c=l&&l.index?l.index():r;if((0,yt.BM)(a)||o.matches(a,o.itemSel)){var u,p=o.getDim(a),h=o.direction;u='v'==h||'h'!=h&&o.isInFlow(a,n),p.dir=u,p.el=a,p.indexEl=c,i.push(p)}})),i},o.prototype.nearBorders=function(t,e,n){var o=!1,i=this.borderOffset,r=e||0,s=n||0,a=t.top,l=t.left,c=t.height,u=t.width;return(a+i>s||s>a+c-i||l+i>r||r>l+u-i)&&(o=!0),o},o.prototype.findPosition=function(t,e,n){for(var o,i={index:0,indexEl:0,method:'before'},r=0,s=0,a=0,l=0,c=0,u=0,p=0,h=t.length;p<h;p++){var d=(o=t[p]).top,f=o.left,g=o.height,m=o.width;if(u=d+g,l=f+m/2,c=d+g/2,!(s&&f>s||a&&c>=a||r&&f+m<r))if(i.index=p,i.indexEl=o.indexEl,o.dir){if(n<c){i.method='before';break}i.method='after'}else n<u&&(a=u),e<l?(s=l,i.method='before'):(r=l,i.method='after')}return i},o.prototype.movePlaceholder=function(t,e,n,o){var i=0,r=0,s=0,a='',l='',c='px',u=5,p=n.method,h=e[n.index];if(t.classList.remove('vertical'),t.classList.add('horizontal'),h){var d=h.top,f=h.left,g=h.height,m=h.width;h.dir?(a=m+c,l='auto',r='before'==p?d-i:d+g-i,s=f):(a='auto',l=g-2*i+c,r=d+i,s='before'==p?f-i:f+m-i,t.classList.remove('horizontal'),t.classList.add('vertical'))}else{if(!this.nested)return void(t.style.display='none');if(o){var v=o.offsets||{},y=v.paddingTop||u,_=v.paddingLeft||u,O=v.borderTopWidth||0,b=v.borderLeftWidth||0,w=b+(v.borderRightWidth||0);r=o.top+y+O,s=o.left+_+b,a=parseInt("".concat(o.width))-2*_-w+c,l='auto'}}t.style.top=r+c,t.style.left=s+c,a&&(t.style.width=a),l&&(t.style.height=l)},o.prototype.parents=function(t){return t?[t].concat(this.parents(t.parent())):[]},o.prototype.sort=function(t,e){var n=t.parents.filter((function(t){return e.parents.includes(t)}))[0];if(!n)return e.model.index()-t.model.index();var o=t.parents[t.parents.indexOf(n)-1];return e.parents[e.parents.indexOf(n)-1].index()-o.index()},o.prototype.endMove=function(){var e,n,o=this,i=this.sourceEl,r=[],s=this.getDocuments(),a=this.getContainerEl(),l=this.onEndMove,c=this.onEnd,u=this.target,p=this.lastPos;if((0,yt.S1)(a,'mousemove dragover',this.onMove),(0,yt.S1)(s,'mouseup dragend touchend',this.endMove),(0,yt.S1)(s,'keydown',this.rollback),this.plh.style.display='none',i&&(n=this.getSourceModel()),this.moved&&u){var h=this.toMove,d=(0,t.isArray)(h)?h:h?[h]:[i],f=0;1===d.length?r.push(this.move(u,d[0],p)):d.map((function(t){return{model:t,parents:o.parents(t)}})).sort(this.sort).forEach((function(t){var e=t.model,n=e.index(),i=e.parent().getEl();r.push(o.move(u,e,xu(xu({},p),{indexEl:p.indexEl-f,index:p.index-f}))),i===u&&n<=p.index&&f++}))}this.plh&&(this.plh.style.display='none');var g=this.dragHelper;if(g&&(g.parentNode.removeChild(g),delete this.dragHelper),this.disableTextable(),this.selectTargetModel(),this.toggleSortCursor(),null===(e=this.em)||void 0===e||e.Canvas.removeSpots(ku),delete this.toMove,delete this.eventMove,delete this.dropModel,(0,t.isFunction)(l)){var m={target:n,parent:n&&n.parent(),index:n&&n.index()};r.length?r.forEach((function(t){return l(t,o,m)})):l(null,this,xu(xu({},m),{cancelled:1}))}(0,t.isFunction)(c)&&c({sorter:this})},o.prototype.move=function(n,o,i){var r,a,c=this.em,u=this.dropContent,p=(0,e.getElement)(o),h=[],d='after'===i.method?i.indexEl+1:i.indexEl,f=this.validTarget(n,p),g=(0,s["default"])(n).data('collection'),m=f.trgModel,v=f.srcModel,y=f.draggable,_=m instanceof l.FE?1:f.droppable;if(g&&_&&y){var O={at:d,action:'move-component'},b=this.isTextableActive(v,m);if(u)r=(0,t.isFunction)(u)?u():u,O.avoidUpdateStyle=!0,O.action='add-component';else{var w=v.collection.indexOf(v),x=g===v.collection;(!x||!(w===d||w===d-1)||b)&&(r=v.collection.remove(v,{temporary:!0}),x&&d>w&&(O.at=d-1))}r&&(b?(delete O.at,a=m.getView().insertComponent(r,O)):a=g.add(r,O)),delete this.dropContent,delete this.prevTarget}else if(c){var S=f.dropInfo||(null==m?void 0:m.get('droppable')),k=f.dragInfo||(null==v?void 0:v.get('draggable'));!g&&h.push('Target collection not found'),!_&&S&&h.push("Target is not droppable, accepts [".concat(S,"]")),!y&&k&&h.push("Component not draggable, acceptable by [".concat(k,"]")),c.logWarning('Invalid target position',{errors:h,model:v,context:'sorter',target:m})}return null==c||c.trigger('sorter:drag:end',{targetCollection:g,modelToDrop:r,warns:h,validResult:f,dst:n,srcEl:p}),a},o.prototype.rollback=function(t){(0,yt.S1)(this.getDocuments(),'keydown',this.rollback),27==(t.which||t.keyCode)&&(this.moved=!1,this.endMove())},o}(l.G7);const Cu=Pu;var Tu=void 0&&(void 0).__assign||function(){return Tu=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Tu.apply(this,arguments)},Eu=function(){function n(e){void 0===e&&(e={}),this.defOpts={ratioDefault:!1,onUpdateContainer:function(){},step:1,minDim:10,maxDim:1/0,unitHeight:'px',unitWidth:'px',keyHeight:'height',keyWidth:'width',currentUnit:!0,silentFrames:!1,avoidContainerUpdate:!1,keepAutoHeight:!1,keepAutoWidth:!1,autoHeight:!1,autoWidth:!1,tl:!0,tc:!0,tr:!0,cl:!0,cr:!0,bl:!0,bc:!0,br:!0},this.opts=Tu({},this.defOpts),this.setOptions(e),(0,t.bindAll)(this,'handleKeyDown','handleMouseDown','move','stop')}return n.prototype.getConfig=function(){return this.opts},n.prototype.setOptions=function(t,e){void 0===t&&(t={}),this.opts=Tu(Tu({},e?this.defOpts:this.opts),t),this.setup()},n.prototype.setup=function(){var t=this.opts,e=t.prefix||'',n=t.appendTo||document.body,o=this.container;for(o||((o=document.createElement('div')).className="".concat(e,"resizer-c"),n.appendChild(o),this.container=o);o.firstChild;)o.removeChild(o.firstChild);var i={};for(var r in['tl','tc','tr','cl','cr','bl','bc','br'].forEach((function(e){return i[e]=t[e]?function(t,e){void 0===e&&(e={});var n=e.prefix||'',o=document.createElement('i');return o.className=n+'resizer-h '+n+'resizer-h-'+t,o.setAttribute('data-'+n+'handler',t),o}(e,t):null})),i){var s=i[r];s&&o.appendChild(s)}this.handlers=i,this.mousePosFetcher=t.mousePosFetcher,this.updateTarget=t.updateTarget,this.posFetcher=t.posFetcher,this.onStart=t.onStart,this.onMove=t.onMove,this.onEnd=t.onEnd,this.onUpdateContainer=t.onUpdateContainer},n.prototype.toggleFrames=function(e){if(this.opts.silentFrames){var n=document.querySelectorAll('iframe');(0,t.each)(n,(function(t){return t.style.pointerEvents=e?'none':''}))}},n.prototype.isHandler=function(t){var e=this.handlers;for(var n in e)if(e[n]===t)return!0;return!1},n.prototype.getFocusedEl=function(){return this.el},n.prototype.getParentEl=function(){var t;return null===(t=this.el)||void 0===t?void 0:t.parentElement},n.prototype.getDocumentEl=function(){return[this.el.ownerDocument,document]},n.prototype.getElementPos=function(t,e){void 0===e&&(e={});var n=this.posFetcher;return n?n(t,e):function(t,e){var n=e||window,o=t.getBoundingClientRect();return{left:o.left+n.pageXOffset,top:o.top+n.pageYOffset,width:o.width,height:o.height}}(t)},n.prototype.focus=function(t){t&&t===this.el||(this.el=t,this.updateContainer({forceShow:!0}),(0,yt.on)(this.getDocumentEl(),'pointerdown',this.handleMouseDown))},n.prototype.blur=function(){this.container.style.display='none',this.el&&((0,yt.S1)(this.getDocumentEl(),'pointerdown',this.handleMouseDown),delete this.el)},n.prototype.start=function(e){var n=e;if(0===n.button){n.preventDefault(),n.stopPropagation();var o=this.el,i=this.getParentEl(),r=this.opts||{},s=this.mousePosFetcher,a='data-'+r.prefix+'handler',l=this.getElementPos(o,{avoidFrameZoom:!0,avoidFrameOffset:!0}),c=this.getElementPos(i),u=n.target;this.handlerAttr=u.getAttribute(a),this.clickedHandler=u,this.startDim={t:l.top,l:l.left,w:l.width,h:l.height},this.rectDim={t:l.top,l:l.left,w:l.width,h:l.height},this.startPos=s?s(n):{x:n.clientX,y:n.clientY},this.parentDim={t:c.top,l:c.left,w:c.width,h:c.height};var p=this.getDocumentEl();this.docs=p,(0,yt.on)(p,'pointermove',this.move),(0,yt.on)(p,'keydown',this.handleKeyDown),(0,yt.on)(p,'pointerup',this.stop),(0,t.isFunction)(this.onStart)&&this.onStart(n,{docs:p,config:r,el:o,resizer:this}),this.toggleFrames(!0),this.move(n)}},n.prototype.move=function(t){var e=t,n=this.onMove,o=this.mousePosFetcher,i=o?o(e):{x:e.clientX,y:e.clientY};this.currentPos=i,this.delta={x:i.x-this.startPos.x,y:i.y-this.startPos.y},this.keys={shift:e.shiftKey,ctrl:e.ctrlKey,alt:e.altKey},this.rectDim=this.calc(this),this.updateRect(!1),n&&n(e)},n.prototype.stop=function(e){var n=this.el,o=this.opts,i=this.docs||this.getDocumentEl();(0,yt.S1)(i,'pointermove',this.move),(0,yt.S1)(i,'keydown',this.handleKeyDown),(0,yt.S1)(i,'pointerup',this.stop),this.updateRect(!0),this.toggleFrames(),(0,t.isFunction)(this.onEnd)&&this.onEnd(e,{docs:i,config:o,el:n,resizer:this}),delete this.docs},n.prototype.updateRect=function(e){var n=this.el,o=this.opts,i=this.rectDim,r=this.updateTarget,s=this.getSelectedHandler(),a=o.unitHeight,l=o.unitWidth,c=o.keyWidth,u=o.keyHeight;if((0,t.isFunction)(r))r(n,i,{store:e,selectedHandler:s,resizer:this,config:o});else{var p=n.style;p[c]=i.w+l,p[u]=i.h+a}this.updateContainer()},n.prototype.updateContainer=function(t){var e;void 0===t&&(t={});var n=this,o=n.opts,i=n.container,r=n.el,s=i.style;!o.avoidContainerUpdate&&r&&t.forceShow&&(s.display='block'),null===(e=this.onUpdateContainer)||void 0===e||e.call(this,{el:i,resizer:this,opts:Tu(Tu({},o),t)})},n.prototype.getSelectedHandler=function(){var t=this.handlers;if(this.selectedHandler)for(var e in t)if(t[e]===this.selectedHandler)return e},n.prototype.handleKeyDown=function(t){27===t.keyCode&&(this.rectDim=this.startDim,this.stop(t))},n.prototype.handleMouseDown=function(t){var e=t.target;this.isHandler(e)?(this.selectedHandler=e,this.start(t)):e!==this.el&&(delete this.selectedHandler,this.blur())},n.prototype.calc=function(t){var n,o=this.opts||{},i=o.step,r=this.startDim,s=o.minDim,a=o.maxDim,l=t.delta.x,c=t.delta.y,u=this.parentDim.w,p=this.parentDim.h,h=this.opts.unitWidth,d=this.opts.unitHeight,f='%'===h?r.w/100*u:r.w,g='%'===d?r.h/100*p:r.h,m={t:r.t,l:r.l,w:f,h:g};if(t){var v=t.handlerAttr;~v.indexOf('r')&&(n='%'===h?(0,e.normalizeFloat)((f+l*i)/u*100,.01):(0,e.normalizeFloat)(f+l*i,i),n=Math.max(s,n),a&&(n=Math.min(a,n)),m.w=n),~v.indexOf('b')&&(n='%'===d?(0,e.normalizeFloat)((g+c*i)/p*100,.01):(0,e.normalizeFloat)(g+c*i,i),n=Math.max(s,n),a&&(n=Math.min(a,n)),m.h=n),~v.indexOf('l')&&(n='%'===h?(0,e.normalizeFloat)((f-l*i)/u*100,.01):(0,e.normalizeFloat)(f-l*i,i),n=Math.max(s,n),a&&(n=Math.min(a,n)),m.w=n),~v.indexOf('t')&&(n='%'===d?(0,e.normalizeFloat)((g-c*i)/p*100,.01):(0,e.normalizeFloat)(g-c*i,i),n=Math.max(s,n),a&&(n=Math.min(a,n)),m.h=n);var y=o.ratioDefault?!t.keys.shift:t.keys.shift;if(v.indexOf('c')<0&&y){var _=r.w/r.h;m.w/m.h>_?m.h=Math.round(m.w/_):m.w=Math.round(m.h*_)}for(var O in~v.indexOf('l')&&(m.l+=r.w-m.w),~v.indexOf('t')&&(m.t+=r.h-m.h),m){var b=O;m[b]=parseInt("".concat(m[b]),10)}return m}},n}();const Au=Eu;var Qu=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),$u=void 0&&(void 0).__assign||function(){return $u=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},$u.apply(this,arguments)};const ju=function(t){function n(n){var o=t.call(this,n,'Utils')||this;return o.Sorter=Cu,o.Resizer=Au,o.Dragger=Zt.Z,o.helpers=$u({},e),o}return Qu(n,t),n.prototype.destroy=function(){},n}(m);var Ru,Mu={},Vu={16:!1,18:!1,17:!1,91:!1},Zu='all',Du={'⇧':16,shift:16,'⌥':18,alt:18,option:18,'⌃':17,ctrl:17,control:17,'⌘':91,command:91},Iu={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,',':188,'.':190,'/':191,'`':192,'-':189,'=':187,';':186,"'":222,'[':219,']':221,'\\':220},Nu=function(t){return Iu[t]||t.toUpperCase().charCodeAt(0)},Wu=[];for(Ru=1;Ru<20;Ru++)Iu['f'+Ru]=111+Ru;function Xu(t,e){for(var n=t.length;n--;)if(t[n]===e)return n;return-1}function Lu(t,e){if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var zu={16:'shiftKey',18:'altKey',17:'ctrlKey',91:'metaKey'};function Uu(t){for(Ru in Vu)Vu[Ru]=t[zu[Ru]]}function qu(t){var e,n=t.keyCode,o=Xu(Wu,n);if(o>=0&&Wu.splice(o,1),93!=n&&224!=n||(n=91),n in Vu)for(e in Vu[n]=!1,Du)Du[e]==n&&(Bu[e]=!1)}function Yu(){for(Ru in Vu)Vu[Ru]=!1;for(Ru in Du)Bu[Ru]=!1}function Bu(t,e,n){var o,i;o=Gu(t),void 0===n&&(n=e,e='all');for(var r=0;r<o.length;r++)i=[],(t=o[r].split('+')).length>1&&(i=Hu(t),t=[t[t.length-1]]),t=t[0],(t=Nu(t))in Mu||(Mu[t]=[]),Mu[t].push({shortcut:o[r],scope:e,method:n,key:o[r],mods:i})}for(Ru in Du)Bu[Ru]=!1;function Fu(){return Zu||'all'}function Gu(t){var e;return''==(e=(t=t.replace(/\s/g,'')).split(','))[e.length-1]&&(e[e.length-2]+=','),e}function Hu(t){for(var e=t.slice(0,t.length-1),n=0;n<e.length;n++)e[n]=Du[e[n]];return e}function Ku(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent&&t.attachEvent('on'+e,(function(){n(window.event)}))}Bu.setScope=function(t){Zu=t||'all'},Bu.getScope=Fu,Bu.deleteScope=function(t){var e,n,o;for(e in Mu)for(n=Mu[e],o=0;o<n.length;)n[o].scope===t?n.splice(o,1):o++},Bu.filter=function(t){var e=(t.target||t.srcElement).tagName;return!('INPUT'==e||'SELECT'==e||'TEXTAREA'==e)},Bu.isPressed=function(t){return'string'==typeof t&&(t=Nu(t)),-1!=Xu(Wu,t)},Bu.getPressedKeyCodes=function(){return Wu.slice(0)},Bu.unbind=function(t,e){var n,o,i,r,s,a=[];for(n=Gu(t),r=0;r<n.length;r++){if((o=n[r].split('+')).length>1&&(a=Hu(o)),t=o[o.length-1],t=Nu(t),void 0===e&&(e=Fu()),!Mu[t])return;for(i=0;i<Mu[t].length;i++)(s=Mu[t][i]).scope===e&&Lu(s.mods,a)&&(Mu[t][i]={})}},Bu.handlers=Mu,Bu.init=function(t){Ku(t.document,'keydown',(function(t){!function(t){var e,n,o,i,r,s;if(e=t.keyCode,-1==Xu(Wu,e)&&Wu.push(e),93!=e&&224!=e||(e=91),e in Vu)for(o in Vu[e]=!0,Du)Du[o]==e&&(Bu[o]=!0);else if(Uu(t),Bu.filter.call(this,t)&&e in Mu)for(s=Fu(),i=0;i<Mu[e].length;i++)if((n=Mu[e][i]).scope==s||'all'==n.scope){for(o in r=n.mods.length>0,Vu)(!Vu[o]&&Xu(n.mods,+o)>-1||Vu[o]&&-1==Xu(n.mods,+o))&&(r=!1);(0!=n.mods.length||Vu[16]||Vu[18]||Vu[17]||Vu[91])&&!r||!1===n.method(t,n)&&(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation&&t.stopPropagation(),t.cancelBubble&&(t.cancelBubble=!0))}}(t)})),Ku(t.document,'keyup',qu),Ku(t,'focus',Yu)};const Ju=Bu;const tp={defaults:{'core:undo':{keys:'⌘+z, ctrl+z',handler:'core:undo',opts:{prevent:!0}},'core:redo':{keys:'⌘+shift+z, ctrl+shift+z',handler:'core:redo',opts:{prevent:!0}},'core:copy':{keys:'⌘+c, ctrl+c',handler:'core:copy'},'core:paste':{keys:'⌘+v, ctrl+v',handler:'core:paste'},'core:component-next':{keys:'s',handler:'core:component-next'},'core:component-prev':{keys:'w',handler:'core:component-prev'},'core:component-enter':{keys:'d',handler:'core:component-enter'},'core:component-exit':{keys:'a',handler:'core:component-exit'},'core:component-delete':{keys:'backspace, delete',handler:'core:component-delete',opts:{prevent:!0}}}};var ep=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),np=void 0&&(void 0).__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))};(0,e.hasWin)()&&Ju.init(window);var op=function(e){function n(t){var n=e.call(this,t,'Keymaps',tp)||this;return n.keymaster=Ju,n.keymaps={},n}return ep(n,e),n.prototype.onLoad=function(){var t=this.config.defaults;for(var e in t){var n=t[e];this.add(e,n.keys,n.handler,n.opts||{})}},n.prototype.add=function(e,n,o,i){void 0===i&&(i={});var r=this.em,s=r.Commands,a=r.getEditor(),l=r.Canvas,c={id:e,keys:n,handler:o};return this.keymaps[e]&&this.remove(e),this.keymaps[e]=c,Ju(n,(function(n,c){var u={event:n,h:c},p=(0,t.isString)(o)?s.get(o):o;if(!r.isEditing()&&!a.Canvas.isInputFocused()||i.force){i.prevent&&l.getCanvasView().preventDefault(n),(0,t.isFunction)(p)?p(a,0,u):s.runCommand(p,u);var h=[e,c.shortcut,n];r.trigger.apply(r,np(['keymap:emit'],h,!1)),r.trigger.apply(r,np(["keymap:emit:".concat(e)],h,!1))}}),void 0),r.trigger('keymap:add',c),c},n.prototype.get=function(t){return this.keymaps[t]},n.prototype.getAll=function(){return this.keymaps},n.prototype.remove=function(t){var e=this.em,n=this.get(t);if(n)return delete this.keymaps[t],n.keys.split(', ').forEach((function(t){Ju.unbind(t.trim())})),null==e||e.trigger('keymap:remove',n),n},n.prototype.removeAll=function(){var t=this;return Object.keys(this.keymaps).forEach((function(e){return t.remove(e)})),Ju.handlers={},this},n.prototype.destroy=function(){this.removeAll(),this.keymaps={}},n}(m);const ip=op;const rp={stylePrefix:'mdl-',title:'',content:'',backdrop:!0,custom:!1,extend:{}};var sp=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const ap=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return sp(e,t),e.prototype.defaults=function(){return{title:'',content:'',attributes:{},open:!1}},e.prototype.open=function(){this.set('open',!0)},e.prototype.close=function(){this.set('open',!1)},e}(_.Z);var lp=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),cp=void 0&&(void 0).__assign||function(){return cp=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},cp.apply(this,arguments)},up=function(t){function e(e){var n=t.call(this,e)||this,o=n.model;return n.listenTo(o,'change:open',n.updateOpen),n.listenTo(o,'change:title',n.updateTitle),n.listenTo(o,'change:content',n.updateContent),n}return lp(e,t),e.prototype.template=function(t){var e=t.pfx,n=t.ppfx,o=t.content,i=t.title;return"<div class=\"".concat(e,"dialog ").concat(n,"one-bg ").concat(n,"two-color\">\n      <div class=\"").concat(e,"header\">\n        <div class=\"").concat(e,"title\">").concat(i,"</div>\n        <div class=\"").concat(e,"btn-close\" data-close-modal>&Cross;</div>\n      </div>\n      <div class=\"").concat(e,"content\">\n        <div id=\"").concat(e,"c\">").concat(o,"</div>\n        <div style=\"clear:both\"></div>\n      </div>\n    </div>\n    <div class=\"").concat(e,"collector\" style=\"display: none\"></div>")},e.prototype.events=function(){return{click:'onClick','click [data-close-modal]':'hide'}},e.prototype.onClick=function(t){this.config.backdrop&&t.target===this.el&&this.hide()},e.prototype.getCollector=function(){return this.$collector||(this.$collector=this.$el.find('.'+this.pfx+'collector')),this.$collector},e.prototype.getContent=function(){var t=this.pfx;return this.$content||(this.$content=this.$el.find(".".concat(t,"content #").concat(t,"c"))),this.$content},e.prototype.getTitle=function(t){return void 0===t&&(t={}),this.$title||(this.$title=this.$el.find('.'+this.pfx+'title')),t.$?this.$title:this.$title.get(0)},e.prototype.updateContent=function(){var t=this.getContent(),e=t.children(),n=this.getCollector(),o=this.model.get('content');e.length&&n.append(e),t.empty().append(o)},e.prototype.updateTitle=function(){var t=this.getTitle({$:!0});t&&t.empty().append(this.model.get('title'))},e.prototype.updateOpen=function(){this.el.style.display=this.model.get('open')?'':'none'},e.prototype.hide=function(){this.model.close()},e.prototype.show=function(){this.model.open()},e.prototype.updateAttr=function(t){var e=this,n=e.pfx,o=e.$el,i=e.el,r=[].slice.call(i.attributes).map((function(t){return t.name}));o.removeAttr(r.join(' ')),o.attr(cp(cp({},t||{}),{class:"".concat(n,"container ").concat(t&&t.class||'').trim()}))},e.prototype.render=function(){var t=this.$el,e=this.model.toJSON();return e.pfx=this.pfx,e.ppfx=this.ppfx,t.html(this.template(e)),this.updateAttr(),this.updateOpen(),this},e}(vt);const pp=up;var hp=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),dp=function(e){function n(n){var o=e.call(this,n,'Modal',rp)||this;return o.model=new ap(o),o.model.on('change:open',(function(t,e){n.trigger("modal:".concat(e?'open':'close'))})),o.model.on('change',(0,t.debounce)((function(){var e=o._evData(),i=o.config.custom;(0,t.isFunction)(i)&&i(e),n.trigger('modal',e)}),0)),o}return hp(n,e),n.prototype._evData=function(){var e=this,n=this.getTitle(),o=this.getContent(),i=this.model.attributes;return{open:i.open,attributes:i.attributes,title:(0,t.isString)(n)?(0,yt.rw)(n):n,content:(0,t.isString)(o)?(0,yt.rw)(o):o.get?o.get(0):o,close:function(){e.close()}}},n.prototype.postRender=function(t){var e=t.model.config.el||t.el,n=this.render();n&&(null==e||e.appendChild(n))},n.prototype.open=function(t){void 0===t&&(t={});var e=t.attributes||{};return t.title&&this.setTitle(t.title),t.content&&this.setContent(t.content),this.model.set('attributes',e),this.model.open(),this.modal&&this.modal.updateAttr(e),this},n.prototype.close=function(){return this.model.close(),this},n.prototype.onceClose=function(t){return this.em.once('modal:close',t),this},n.prototype.onceOpen=function(t){return this.em.once('modal:open',t),this},n.prototype.isOpen=function(){return!!this.model.get('open')},n.prototype.setTitle=function(t){return this.model.set('title',t),this},n.prototype.getTitle=function(){return this.model.get('title')},n.prototype.setContent=function(t){return this.model.set('content',' '),this.model.set('content',t),this},n.prototype.getContent=function(){return this.model.get('content')},n.prototype.getContentEl=function(){var t;return null===(t=this.modal)||void 0===t?void 0:t.getContent().get(0)},n.prototype.getModel=function(){return this.model},n.prototype.render=function(){var t;if(!this.config.custom){var e=pp.extend(this.config.extend),n=this.modal&&this.modal.el;return this.modal=new e({el:n,model:this.model,config:this.config}),null===(t=this.modal)||void 0===t?void 0:t.render().el}},n.prototype.destroy=function(){var t;null===(t=this.modal)||void 0===t||t.remove()},n}(m);const fp=dp;var gp='sw-visibility',mp='export-template',vp='open-sm',yp='open-tm',_p='open-layers',Op='open-blocks',bp='open-pages',wp='fullscreen',xp='preview';const Sp={stylePrefix:'pn-',defaults:[{id:'commands',buttons:[{}]},{id:'options',buttons:[{active:!0,id:gp,className:'fa fa-square-o',command:'core:component-outline',context:gp,attributes:{title:'View components'}},{id:xp,className:'fa fa-eye',command:xp,context:xp,attributes:{title:'Preview'}},{id:wp,className:'fa fa-arrows-alt',command:wp,context:wp,attributes:{title:'Fullscreen'}},{id:mp,className:'fa fa-code',command:mp,attributes:{title:'View code'}}]},{id:'views',buttons:[{id:vp,className:'fa fa-paint-brush',command:vp,active:!0,togglable:!1,attributes:{title:'Open Style Manager'}},{id:yp,className:'fa fa-cog',command:yp,togglable:!1,attributes:{title:'Settings'}},{id:_p,className:'fa fa-bars',command:_p,togglable:!1,attributes:{title:'Open Layer Manager'}},{id:Op,className:'fa fa-th-large',command:Op,togglable:!1,attributes:{title:'Open Blocks'}},{id:bp,className:'fa fa-th-large',command:bp,togglable:!1,attributes:{title:'Open Pages'}}]}]};var kp=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Pp=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.get('buttons').length&&o.set('buttons',new Ep(o.module,o.get('buttons'))),o}return kp(e,t),e.prototype.defaults=function(){return{id:'',label:'',tagName:'span',className:'',command:'',context:'',buttons:[],attributes:{},options:{},active:!1,dragDrop:!1,togglable:!0,runDefaultCommand:!0,stopDefaultCommand:!1,disable:!1}},Object.defineProperty(e.prototype,"className",{get:function(){return this.get('className')},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"command",{get:function(){return this.get('command')},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"active",{get:function(){return this.get('active')},set:function(t){this.set('active',t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"togglable",{get:function(){return this.get('togglable')},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"runDefaultCommand",{get:function(){return this.get('runDefaultCommand')},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stopDefaultCommand",{get:function(){return this.get('stopDefaultCommand')},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"disable",{get:function(){return this.get('disable')},enumerable:!1,configurable:!0}),e}(_.Z);var Cp=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Tp=function(t){function e(e,n){return t.call(this,e,n,Pp)||this}return Cp(e,t),e.prototype.deactivateAllExceptOne=function(t,e){this.forEach((function(n,o){n!==t&&(n.set('active',!1),e&&n.get('buttons').length&&n.get('buttons').deactivateAllExceptOne(t,e))}))},e.prototype.deactivateAll=function(t,e){var n=t||'';this.forEach((function(t){t.get('context')==n&&t!==e&&t.set('active',!1,{fromCollection:!0})}))},e.prototype.disableAllButtons=function(t){var e=t||'';this.forEach((function(t,n){t.get('context')==e&&t.set('disable',!0)}))},e.prototype.disableAllButtonsExceptOne=function(t,e){this.forEach((function(n,o){n!==t&&(n.set('disable',!0),e&&n.get('buttons').length&&n.get('buttons').disableAllButtonsExceptOne(t,e))}))},e}(F);const Ep=Tp;Tp.prototype.model=Pp;var Ap=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Qp=function(t){function e(e,n){var o=t.call(this,e,n)||this,i=o.get('buttons')||[];return o.buttons=new Ep(e,i),o}return Ap(e,t),e.prototype.defaults=function(){return{id:'',content:'',visible:!0,buttons:[],attributes:{}}},Object.defineProperty(e.prototype,"buttons",{get:function(){return this.get('buttons')},set:function(t){this.set('buttons',t)},enumerable:!1,configurable:!0}),e}(_.Z);var $p=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),jp=function(t){function e(e,n){return t.call(this,e,n,Qp)||this}return $p(e,t),e}(F);const Rp=jp;jp.prototype.model=Qp;var Mp=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Vp=void 0&&(void 0).__assign||function(){return Vp=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Vp.apply(this,arguments)},Zp=function(e){function n(n){var o=e.call(this,n)||this,i=o,r=i.model,s=i.em,a=i.pfx,l=i.ppfx,c=r.className,u=r.attributes,p=u.command,h=u.listen;if(o.id=a+r.get('id'),o.activeCls="".concat(a,"active ").concat(l,"four-color"),o.disableCls="".concat(l,"disabled"),o.btnsVisCls="".concat(a,"visible"),o.className=a+'btn'+(c?' '+c:''),o.listenTo(r,'change',o.render),o.listenTo(r,'change:active updateActive',o.updateActive),o.listenTo(r,'checkActive',o.checkActive),o.listenTo(r,'change:bntsVis',o.updateBtnsVis),o.listenTo(r,'change:attributes',o.updateAttributes),o.listenTo(r,'change:className',o.updateClassName),o.listenTo(r,'change:disable',o.updateDisable),s&&(0,t.isString)(p)&&h){var d={fromListen:!0};o.listenTo(s,"run:".concat(p),(function(){return r.set('active',!0,d)})),o.listenTo(s,"stop:".concat(p),(function(){return r.set('active',!1,d)}))}return s&&s.get&&(o.commands=s.get('Commands')),o}return Mp(n,e),n.prototype.tagName=function(){return this.model.get('tagName')},n.prototype.events=function(){return{click:'clicked'}},n.prototype.updateClassName=function(){var t=this.model,e=this.pfx,n=t.className,o=t.get('attributes').class,i="".concat(o||''," ").concat(e,"btn ").concat(n||'');this.$el.attr('class',i.trim())},n.prototype.updateAttributes=function(){var t=this,e=t.em,n=t.model,o=t.$el,i=n.get('attributes')||{},r=e&&e.t&&e.t("panels.buttons.titles.".concat(n.id));o.attr(i),r&&o.attr({title:r}),this.updateClassName()},n.prototype.updateBtnsVis=function(){this.$buttons&&(this.model.get('bntsVis')?this.$buttons.addClass(this.btnsVisCls):this.$buttons.removeClass(this.btnsVisCls))},n.prototype.updateActive=function(e,n,o){var i;void 0===o&&(o={});var r=this,s=r.model,a=r.commands,l=r.$el,c=r.activeCls,u=o.fromCollection,p=o.fromListen,h=s.get('context'),d=s.get('options'),f=s.command,g={};f&&(a&&(0,t.isString)(f)?g=a.get(f)||{}:(0,t.isFunction)(f)?g=a.create({run:f}):null!==f&&(0,t.isObject)(f)&&(g=a.create(f)),s.active?(!u&&(null===(i=s.collection)||void 0===i||i.deactivateAll(h,s)),s.set('active',!0,{silent:!0}).trigger('checkActive'),!p&&a.runCommand(g,Vp(Vp({},d),{sender:s})),g.noStop&&s.set('active',!1)):(l.removeClass(c),!p&&a.stopCommand(g,Vp(Vp({},d),{sender:s,force:1}))))},n.prototype.updateDisable=function(){var t=this.disableCls,e=this.model.disable;this.$el[e?'addClass':'removeClass'](t)},n.prototype.checkActive=function(){var t=this,e=t.model,n=t.$el,o=t.activeCls;e.active?n.addClass(o):n.removeClass(o)},n.prototype.clicked=function(){var t=this.model;t.get('bntsVis')||t.disable||!t.command||this.toggleActive()},n.prototype.toggleActive=function(){var t=this.model,e=this.em,n=t.active,o=t.togglable;n&&!o||(t.active=!n,n?t.runDefaultCommand&&e.runDefault():t.stopDefaultCommand&&e.stopDefault())},n.prototype.render=function(){var t=this.model,e=t.get('label'),n=this.$el;return!t.get('el')&&n.empty(),this.updateAttributes(),e&&n.append(e),this.checkActive(),this.updateDisable(),this},n}(vt);const Dp=Zp;var Ip=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Np=function(e){function n(t){var n=e.call(this,{collection:t})||this;return n.listenTo(n.collection,'add',n.addTo),n.listenTo(n.collection,'reset remove',n.render),n.className=n.pfx+'buttons',n}return Ip(n,e),n.prototype.addTo=function(t){this.addToCollection(t)},n.prototype.addToCollection=function(t,e){var n=e||null,o=t.get('el'),i=new Dp({el:o,model:t}).render().el;return n?n.appendChild(i):this.$el.append(i),i},n.prototype.render=function(){var e=this,n=document.createDocumentFragment();return this.$el.empty(),this.collection.each((function(t){return e.addToCollection(t,n)})),this.$el.append(n),this.$el.attr('class',(0,t.result)(this,'className')),this},n}(vt);var Wp=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Xp=void 0&&(void 0).__assign||function(){return Xp=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Xp.apply(this,arguments)},Lp=function(t){function e(e){var n=t.call(this,{model:e,el:e.get('el')})||this;return n.className=n.pfx+'panel',n.id=n.pfx+e.get('id'),n.listenTo(e,'change:appendContent',n.appendContent),n.listenTo(e,'change:content',n.updateContent),n.listenTo(e,'change:visible',n.toggleVisible),e.view=n,n}return Wp(e,t),e.prototype.appendContent=function(){this.$el.append(this.model.get('appendContent'))},e.prototype.updateContent=function(){this.$el.html(this.model.get('content'))},e.prototype.toggleVisible=function(){this.model.get('visible')?this.$el.removeClass("".concat(this.ppfx,"hidden")):this.$el.addClass("".concat(this.ppfx,"hidden"))},e.prototype.attributes=function(){return this.model.get('attributes')},e.prototype.initResize=function(){var t=this.em,e=null==t?void 0:t.Editor,n=this.model.get('resizable');if(e&&n){var o=!0===n?[!0,!0,!0,!0]:n,i=o.length,r=void 0,s=void 0,a=void 0,l=!1;if(2==i)r=(c=o)[0],a=c[0],s=c[1],l=c[1];else if(4==i){var c;r=(c=o)[0],s=c[1],a=c[2],l=c[3]}var u=new e.Utils.Resizer(Xp({tc:r,cr:s,bc:a,cl:l,tl:!1,tr:!1,bl:!1,br:!1,appendTo:this.el,silentFrames:!0,avoidContainerUpdate:!0,prefix:e.getConfig().stylePrefix,onEnd:function(){t&&t.trigger('change:canvasOffset')},posFetcher:function(t,e){var n=e.target,o=t.style,i=u.getConfig(),r=i.keyWidth,s=i.keyHeight,a=t.getBoundingClientRect(),l='container'==n,c=o[r],p=o[s];return{left:0,top:0,width:c&&!l?parseFloat(c):a.width,height:p&&!l?parseFloat(p):a.height}}},n&&'boolean'!=typeof n?n:{}));u.blur=function(){},u.focus(this.el)}},e.prototype.render=function(){var t=this.model.buttons,e=this.$el,n=this.ppfx,o="".concat(this.className," ").concat(this.id," ").concat(n,"one-bg ").concat(n,"two-color");if(e.addClass(o),this.toggleVisible(),t.length){var i=new Np(t);e.append(i.render().el)}return e.append(this.model.get('content')),this},e}(vt);const zp=Lp;var Up=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const qp=function(t){function e(e){var n=t.call(this,{collection:e})||this;return n.listenTo(e,'add',n.addTo),n.listenTo(e,'reset',n.render),n.listenTo(e,'remove',n.onRemove),n.className=n.pfx+'panels',n}return Up(e,t),e.prototype.onRemove=function(t){var e=t.view;e&&e.remove()},e.prototype.addTo=function(t){this.addToCollection(t)},e.prototype.addToCollection=function(t,e){var n=e||null,o=t.get('el'),i=new zp(t),r=i.render().el,s=t.get('appendTo');if(o);else if(s){var a=document.querySelector(s);null==a||a.appendChild(r)}else n?n.appendChild(r):this.$el.append(r);return i.initResize(),r},e.prototype.render=function(){var t=this,e=this.$el,n=document.createDocumentFragment();return e.empty(),this.collection.each((function(e){return t.addToCollection(e,n)})),e.append(n),e.attr('class',this.className),this},e}(vt);var Yp=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Bp=function(t){function e(e){var n=t.call(this,e,'Panels',Sp)||this;for(var o in n.panels=new Rp(n,n.config.defaults),Sp)o in n.config||(n.config[o]=Sp[o]);return n}return Yp(e,t),e.prototype.getPanels=function(){return this.panels},e.prototype.getPanelsEl=function(){var t;return null===(t=this.PanelsViewObj)||void 0===t?void 0:t.el},e.prototype.addPanel=function(t){return this.panels.add(t)},e.prototype.removePanel=function(t){return this.panels.remove(t)},e.prototype.getPanel=function(t){var e=this.panels.where({id:t});return e.length?e[0]:null},e.prototype.addButton=function(t,e){var n=this.getPanel(t);return n?n.buttons.add(e):null},e.prototype.removeButton=function(t,e){var n=this.getPanel(t);return n&&n.buttons.remove(e)},e.prototype.getButton=function(t,e){var n=this.getPanel(t);if(n){var o=n.buttons.where({id:e});return o.length?o[0]:null}return null},e.prototype.render=function(){var t;return null===(t=this.PanelsViewObj)||void 0===t||t.remove(),this.PanelsViewObj=new qp(this.panels),this.PanelsViewObj.render().el},e.prototype.active=function(){this.getPanels().each((function(t){t.buttons.each((function(t){t.get('active')&&t.trigger('updateActive')}))}))},e.prototype.disableButtons=function(){this.getPanels().each((function(t){t.buttons.each((function(t){t.get('disable')&&t.trigger('change:disable')}))}))},e.prototype.destroy=function(){this.panels.reset(),this.panels.stopListening(),this.PanelsViewObj&&this.PanelsViewObj.remove()},e}(m);const Fp=Bp;const Gp={stylePrefix:'cm-',optsCodeViewer:{}};var Hp=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Kp=void 0&&(void 0).__rest||function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(t);i<o.length;i++)e.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(t,o[i])&&(n[o[i]]=t[o[i]])}return n};const Jp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Hp(e,t),e.prototype.build=function(t,e){void 0===e&&(e={});var n=e.em,o=Kp(e,["em"]);if(e.cleanId&&n){var i=n.Css.getAll().toJSON().map((function(t){var e=t.selectors,n=e&&1===e.length&&e.models[0];return n&&n.isId()&&n.get('name')})).filter(Boolean);o.attributes||(o.attributes=function(t,e){var n=e.id;return n&&'i'===n[0]&&!t.get('script')&&!t.get('attributes').id&&i.indexOf(n)<0&&delete e.id,e})}return t.toHTML(o)},e}(l.Hn);var th=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),eh=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return th(n,e),n.prototype.build=function(e){var n=this,o=e.toJSON();return this.beforeEach(o),(0,t.each)(o,(function(t,e){var i=o[e];if(i instanceof l.Hn)o[e]=n.build(i);else if(i instanceof l.FE){var r=i;o[e]=[],r.length&&r.forEach((function(t,i){o[e][i]=n.build(t)}))}})),o},n.prototype.beforeEach=function(t){delete t.status},n}(l.Hn);const nh=eh;var oh=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ih=void 0&&(void 0).__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))};const rh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return oh(e,t),e.prototype.collectScripts=function(t){var e=this,n=t.get('components'),o=[];return n.forEach((function(t){return o.push.apply(o,e.collectScripts(t))})),t.scriptSubComp?ih([t.scriptSubComp],o,!0):o},e.prototype.build=function(t){var e=this.collectScripts(t);return re.renderJs(e)},e}(l.Hn);var sh=__webpack_require__(8809),ah=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),lh=void 0&&(void 0).__makeTemplateObject||function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},ch=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e.prototype.template=function(t){var e=t.pfx,o=t.codeName,i=t.label;return n(ph||(ph=lh(["\n      <div class=\"","editor\" id=\"","","\">\n        <div id=\"","title\">","</div>\n        <div id=\"","code\"></div>\n      </div>\n    "],["\n      <div class=\"","editor\" id=\"","","\">\n        <div id=\"","title\">","</div>\n        <div id=\"","code\"></div>\n      </div>\n    "])),e,e,o,e,i,e)},e.prototype.initialize=function(t){this.config=t.config||{},this.pfx=this.config.stylePrefix},e.prototype.render=function(){var t,e,n=this,o=n.model,i=n.pfx,r=n.$el,s=o.toJSON(),a=o.get('input')||(null===(e=(t=o).getElement)||void 0===e?void 0:e.call(t));return s.pfx=i,r.html(this.template(s)),r.attr('class',"".concat(i,"editor-c")),r.find("#".concat(i,"code")).append(a),this},e}(l.G7);const uh=ch;var ph,hh=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),dh=void 0&&(void 0).__assign||function(){return dh=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},dh.apply(this,arguments)},fh='CodeMirror',gh=function(e){function n(t){var n=e.call(this,t,'CodeManager',Gp)||this;n.EditorView=uh;var o=n.config,i=o.pStylePrefix;return i&&(o.stylePrefix=i+o.stylePrefix),n.generators={},n.viewers={},n.defGenerators={html:new Jp,css:new Ar,json:new nh,js:new rh},n.defViewers={CodeMirror:new sh.Z},n.loadDefaultGenerators().loadDefaultViewers(),n}return hh(n,e),n.prototype.addGenerator=function(t,e){return this.generators[t]=e,this},n.prototype.getGenerator=function(t){return this.generators[t]},n.prototype.getGenerators=function(){return this.generators},n.prototype.addViewer=function(t,e){return this.viewers[t]=e,this},n.prototype.getViewer=function(t){return this.viewers[t]},n.prototype.getViewers=function(){return this.viewers},n.prototype.createViewer=function(e){void 0===e&&(e={});var n=(0,t.isUndefined)(e.type)?fh:e.type,o=this.getViewer(n)&&this.getViewer(n).clone(),i=document.createElement('div'),r=document.createElement('textarea');return i.appendChild(r),o.set(dh(dh({},this.config.optsCodeViewer),e)),o.init(r),o.setElement(i),o},n.prototype.updateViewer=function(t,e){t.setContent(e)},n.prototype.getCode=function(t,e,n){void 0===n&&(n={}),n.em=this.em;var o=this.getGenerator(e);return o?o.build(t,n):''},n.prototype.loadDefaultGenerators=function(){for(var t in this.defGenerators)this.addGenerator(t,this.defGenerators[t]);return this},n.prototype.loadDefaultViewers=function(){for(var t in this.defViewers)this.addViewer(t,this.defViewers[t]);return this},n.prototype.destroy=function(){},n}(m);const mh=gh;var vh=__webpack_require__(3410),yh=__webpack_require__.n(vh);const _h={maximumStackLength:500,trackSelection:!0};var Oh=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),bh=void 0&&(void 0).__assign||function(){return bh=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},bh.apply(this,arguments)},wh=void 0&&(void 0).__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))},xh=function(t){return t.avoidStore||t.noUndo},Sh=function(t){return Object.keys(t.changedAttributes())},kh=function(e){function n(n){var o=e.call(this,n,'UndoManager',_h)||this;o.config._disable&&(o.config.maximumStackLength=0);var i=!0;return o.um=new(yh())(bh({track:!0,register:[]},o.config)),o.um.changeUndoType('change',{condition:function(e){var n=e.get('_undo');if(n){var o=e.get('_undoexc');if((0,t.isArray)(o)&&Sh(e).some((function(t){return o.indexOf(t)>=0})))return!1;if((0,t.isBoolean)(n))return!0;if((0,t.isArray)(n)&&Sh(e).some((function(t){return n.indexOf(t)>=0})))return!0}return!1},on:function(e,n,o){var r=this;!this.beforeCache&&(this.beforeCache=e.previousAttributes());var s=o||n||{};if(s.noUndo&&setTimeout((function(){r.beforeCache=null})),!xh(s)){var a=e.toJSON({fromUndo:i}),l={object:e,before:this.beforeCache,after:a};if(this.beforeCache=null,!(0,t.isEmpty)(a))return l}}}),o.um.changeUndoType('add',{on:function(t,e,n){if(void 0===n&&(n={}),!xh(n)&&o.isRegistered(e))return{object:e,before:void 0,after:t,options:bh(bh({},n),{fromUndo:i})}}}),o.um.changeUndoType('remove',{on:function(t,e,n){if(void 0===n&&(n={}),!xh(n)&&o.isRegistered(e))return{object:e,before:t,after:void 0,options:bh(bh({},n),{fromUndo:i})}}}),o.um.changeUndoType('reset',{undo:function(t,e){t.reset(e,{fromUndo:i})},redo:function(t,e,n){t.reset(n,{fromUndo:i})},on:function(t,e){if(void 0===e&&(e={}),!xh(e)&&o.isRegistered(t))return{object:t,before:e.previousModels,after:wh([],t.models,!0),options:bh(bh({},e),{fromUndo:i})}}}),o.um.on('undo redo',(function(){n.trigger('change:canvasOffset'),n.getSelectedAll().map((function(t){return t.trigger('rerender:layer')}))})),['undo','redo'].forEach((function(t){return o.um.on(t,(function(){return n.trigger(t)}))})),o}return Oh(n,e),n.prototype.postLoad=function(){var t=this.config,e=this.em;t.trackSelection&&e&&this.add(e.get('selected'))},n.prototype.add=function(t){return this.um.register(t),this},n.prototype.remove=function(t){return this.um.unregister(t),this},n.prototype.removeAll=function(){return this.um.unregisterAll(),this},n.prototype.start=function(){return this.um.startTracking(),this},n.prototype.stop=function(){return this.um.stopTracking(),this},n.prototype.undo=function(t){void 0===t&&(t=!0);var e=this.em,n=this.um;return!e.isEditing()&&n.undo(t),this},n.prototype.undoAll=function(){return this.um.undoAll(),this},n.prototype.redo=function(t){void 0===t&&(t=!0);var e=this.em,n=this.um;return!e.isEditing()&&n.redo(t),this},n.prototype.redoAll=function(){return this.um.redoAll(),this},n.prototype.hasUndo=function(){return!!this.um.isAvailable('undo')},n.prototype.hasRedo=function(){return!!this.um.isAvailable('redo')},n.prototype.isRegistered=function(t){return!!this.getInstance().objectRegistry.isRegistered(t)},n.prototype.getStack=function(){return this.um.stack},n.prototype.getStackGroup=function(){var t=[],e=[];return this.getStack().forEach((function(n){var o=n.get('magicFusionIndex');e.indexOf(o)<0&&(e.push(o),t.push(n))})),t},n.prototype.skip=function(t){var e=!!this.um.isTracking();e&&this.stop(),t(),e&&this.start()},n.prototype.getGroupedStack=function(){var e={},n=this.getStack();return n.forEach((function(t,n){var o=t.get('magicFusionIndex'),i=function(t,e){var n=t.attributes,o=n.type,i=n.after,r=n.before,s=n.object,a=n.options;return{index:e,type:o,after:i,before:r,object:s,options:void 0===a?{}:a}}(t,n);e[o]?e[o].push(i):e[o]=[i]})),Object.keys(e).map((function(n){var o=e[n];return{index:o[o.length-1].index,actions:o,labels:(0,t.unique)(o.reduce((function(t,e){var n,o=null===(n=e.options)||void 0===n?void 0:n.action;return o&&t.push(o),t}),[]))}}))},n.prototype.goToGroup=function(e){var n=this;if(e){var o=this.getPointer(),i=e.index-o;(0,t.times)(Math.abs(i),(function(){n[i<0?'undo':'redo'](!1)}))}},n.prototype.getPointer=function(){return this.getStack().pointer},n.prototype.clear=function(){return this.um.clear(),this},n.prototype.getInstance=function(){return this.um},n.prototype.destroy=function(){this.clear().removeAll()},n}(m);const Ph=kh;const Ch={stylePrefix:'rte-',adjustToolbar:!0,actions:['bold','italic','underline','strikethrough','link','wrap'],custom:!1};var Th,Eh=void 0&&(void 0).__assign||function(){return Eh=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Eh.apply(this,arguments)};!function(t){t[t["ACTIVE"]=1]="ACTIVE",t[t["INACTIVE"]=0]="INACTIVE",t[t["DISABLED"]=-1]="DISABLED"}(Th||(Th={}));var Ah='_rte',Qh=1,$h=0,jh=-1,Rh=function(t,e){void 0===e&&(e='A');var n=t.selection()||{},o=n.anchorNode,i=n.focusNode,r=null==o?void 0:o.parentNode,s=null==i?void 0:i.parentNode;return(null==r?void 0:r.nodeName)==e||(null==s?void 0:s.nodeName)==e},Mh='data-selectme',Vh={bold:{name:'bold',icon:'<b>B</b>',attributes:{title:'Bold'},result:function(t){return t.exec('bold')}},italic:{name:'italic',icon:'<i>I</i>',attributes:{title:'Italic'},result:function(t){return t.exec('italic')}},underline:{name:'underline',icon:'<u>U</u>',attributes:{title:'Underline'},result:function(t){return t.exec('underline')}},strikethrough:{name:'strikethrough',icon:'<s>S</s>',attributes:{title:'Strike-through'},result:function(t){return t.exec('strikeThrough')}},link:{icon:"<svg viewBox=\"0 0 24 24\">\n          <path fill=\"currentColor\" d=\"M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z\" />\n        </svg>",name:'link',attributes:{style:'font-size:1.4rem;padding:0 4px 2px;',title:'Link'},state:function(t){return t&&t.selection()&&Rh(t)?Qh:$h},result:function(t){Rh(t)?t.exec('unlink'):t.insertHTML("<a href=\"\" ".concat(Mh,">").concat(t.selection(),"</a>"),{select:!0})}},wrap:{name:'wrap',icon:"<svg viewBox=\"0 0 24 24\">\n            <path fill=\"currentColor\" d=\"M20.71,4.63L19.37,3.29C19,2.9 18.35,2.9 17.96,3.29L9,12.25L11.75,15L20.71,6.04C21.1,5.65 21.1,5 20.71,4.63M7,14A3,3 0 0,0 4,17C4,18.31 2.84,19 2,19C2.92,20.22 4.5,21 6,21A4,4 0 0,0 10,17A3,3 0 0,0 7,14Z\" />\n        </svg>",attributes:{title:'Wrap for style'},state:function(t){return(null==t?void 0:t.selection())&&Rh(t,'SPAN')?jh:$h},result:function(t){!Rh(t,'SPAN')&&t.insertHTML("<span ".concat(Mh,">").concat(t.selection(),"</span>"),{select:!0})}}},Zh=function(){function n(e,n,o){void 0===o&&(o={});var i=this;if(this.em=e,this.settings=o,n[Ah])return n[Ah];n[Ah]=this,this.setEl(n),this.updateActiveActions=this.updateActiveActions.bind(this),this.__onKeydown=this.__onKeydown.bind(this),this.__onPaste=this.__onPaste.bind(this);var r=(o.actions||[]).map((function(e){var n=e;return(0,t.isString)(e)?n=Eh({},Vh[e]):Vh[e.name]&&(n=Eh(Eh({},Vh[e.name]),e)),n})),s=r.length?r:Object.keys(Vh).map((function(t){return Vh[t]}));o.classes=Eh({actionbar:'actionbar',button:'action',active:'active',disabled:'disabled',inactive:'inactive'},o.classes);var a=o.classes,l=o.actionbar;if(this.actionbar=l,this.classes=a,this.actions=s,!l){if(!this.isCustom(o.module)){var c=o.actionbarContainer;(l=document.createElement('div')).className=a.actionbar,null==c||c.appendChild(l),this.actionbar=l}s.forEach((function(t){return i.addAction(t)}))}return o.styleWithCSS&&this.exec('styleWithCSS'),this}return n.prototype.isCustom=function(t){var e=t||this.em.RichTextEditor;return!(!(null==e?void 0:e.config.custom)&&!(null==e?void 0:e.customRte))},n.prototype.destroy=function(){},n.prototype.setEl=function(t){this.el=t,this.doc=t.ownerDocument},n.prototype.updateActiveActions=function(){var t=this,e=this.getActions();e.forEach((function(e){var n=e.update,o=e.btn,i=t.classes,r=i.active,s=i.inactive,a=i.disabled,l=e.state,c=e.name,u=t.doc,p=Th.INACTIVE;if(o&&(o.className=o.className.replace(r,'').trim(),o.className=o.className.replace(s,'').trim(),o.className=o.className.replace(a,'').trim()),l){var h=l(t,u);if(p=h,o)switch(h){case Qh:o.className+=" ".concat(r);break;case $h:o.className+=" ".concat(s);break;case jh:o.className+=" ".concat(a)}}else u.queryCommandSupported(c)&&u.queryCommandState(c)&&(o&&(o.className+=" ".concat(r)),p=Th.ACTIVE);e.currentState=p,null==n||n(t,e)})),e.length&&this.em.RichTextEditor.__dbdTrgCustom()},n.prototype.enable=function(t){return this.enabled?this:this.__toggleEffects(!0,t)},n.prototype.disable=function(){return this.__toggleEffects(!1)},n.prototype.__toggleEffects=function(t,e){void 0===t&&(t=!1),void 0===e&&(e={});var n=t?yt.on:yt.S1,o=this.el,i=this.doc,r=this.actionbarEl();if(r&&(r.style.display=t?'':'none'),o.contentEditable="".concat(!!t),n(o,'mouseup keyup',this.updateActiveActions),n(i,'keydown',this.__onKeydown),n(i,'paste',this.__onPaste),this.enabled=t,t){var s=e.event;if(this.syncActions(),this.updateActiveActions(),s){var a=null;if(i.caretRangeFromPoint){var l=(0,yt.VB)(s);a=i.caretRangeFromPoint(l.clientX,l.clientY)}else s.rangeParent&&(a=i.createRange()).setStart(s.rangeParent,s.rangeOffset);var c=i.getSelection();null==c||c.removeAllRanges(),a&&(null==c||c.addRange(a))}o.focus()}return this},n.prototype.__onKeydown=function(t){var e=this.em,n=e.RichTextEditor.getConfig().onKeydown;if(n)return n({ev:t,rte:this,editor:e.getEditor()});var o=this.doc;'Enter'!==t.key||['insertOrderedList','insertUnorderedList'].some((function(t){return o.queryCommandState(t)}))||(o.execCommand('insertLineBreak'),t.preventDefault())},n.prototype.__onPaste=function(t){var e=this.em,n=e.RichTextEditor.getConfig().onPaste;if(n)return n({ev:t,rte:this,editor:e.getEditor()});var o=t.clipboardData,i=o.getData('text'),r=o.getData('text/html');if(i&&!r){t.preventDefault();var s=i.replace(/(?:\r\n|\r|\n)/g,'<br/>');this.doc.execCommand('insertHTML',!1,s)}},n.prototype.syncActions=function(){var t=this;this.getActions().forEach((function(e){if(t.actionbar&&(!e.state||e.state&&e.state(t,t.doc)>=0)){var n=e.event||'click',o=e.btn;o&&(o["on".concat(n)]=function(){e.result(t,e),t.updateActiveActions()})}}))},n.prototype.addAction=function(t,e){void 0===e&&(e={});var n=e.sync,o=this.actionbarEl();if(o){var i=t.icon,r=t.attributes,s=void 0===r?{}:r,a=document.createElement('span');for(var l in a.className=this.classes.button,t.btn=a,s)a.setAttribute(l,s[l]);'string'==typeof i?a.innerHTML=i:a.appendChild(i),o.appendChild(a)}n&&(this.actions.push(t),this.syncActions())},n.prototype.getActions=function(){return this.actions},n.prototype.selection=function(){return this.doc.getSelection()},n.prototype.exec=function(t,e){this.doc.execCommand(t,!1,e)},n.prototype.actionbarEl=function(){return this.actionbar},n.prototype.insertHTML=function(n,o){var i=(void 0===o?{}:o).select,r=this,s=r.em,a=r.doc,l=r.el,c=a.getSelection();if(c&&c.rangeCount){var u=(0,e.getComponentModel)(l)||s.getSelected(),p=a.createElement('div'),h=c.getRangeAt(0);h.deleteContents(),(0,t.isString)(n)?p.innerHTML=n:n&&p.appendChild(n),Array.prototype.slice.call(p.childNodes).forEach((function(t){h.insertNode(t)})),c.removeAllRanges(),c.addRange(h),l.focus(),i&&u&&(u.once('rte:disable',(function(){var t=u.find("[".concat(Mh,"]"))[0];t&&(s.setSelected(t),t.removeAttributes(Mh))})),u.trigger('disable'))}},n}();const Dh=Zh;var Ih=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Nh=void 0&&(void 0).__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function s(t){try{l(o.next(t))}catch(t){r(t)}}function a(t){try{l(o["throw"](t))}catch(t){r(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((o=o.apply(t,e||[])).next())}))},Wh=void 0&&(void 0).__generator||function(t,e){var n,o,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,a[0]&&(s=0)),s;)try{if(n=1,o&&(i=2&a[0]?o["return"]:a[0]?o["throw"]||((i=o["return"])&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,o=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},Xh=void 0&&(void 0).__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))},Lh='change:canvasOffset frame:scroll component:update',zh={enable:'rte:enable',disable:'rte:disable',custom:'rte:custom'},Uh=function(n){function o(e){var o=n.call(this,e,'RichTextEditor',Ch)||this;o.events=zh;var i=o.config,r=i.pStylePrefix;r&&(i.stylePrefix=r+i.stylePrefix),o.pfx=i.stylePrefix,o.actions=i.actions||[];var s=new l.Hn;return o.model=s,s.on('change:currentView',o.__trgCustom,o),o.__dbdTrgCustom=(0,t.debounce)((function(){return o.__trgCustom()}),0),o}return Ih(o,n),o.prototype.onLoad=function(){if((0,e.hasWin)()){var t=this.config,n=t.pStylePrefix,o=t.custom,i=(0,yt.ut)('div',{class:(0,yt.cx)("".concat(n,"rte-toolbar"),!o&&"".concat(n,"one-bg ").concat(n,"rte-toolbar-ui"))});this.toolbar=i,this.initRte((0,yt.ut)('div')),(0,yt.on)(i,'mousedown',(function(t){return t.stopPropagation()}))}},o.prototype.__trgCustom=function(){var t=this,e=t.model,n=t.em,o=t.events;n.trigger(o.custom,{enabled:!!e.get('currentView'),container:this.getToolbarEl(),actions:this.getAll()})},o.prototype.destroy=function(){var t,e,n;null===(t=this.globalRte)||void 0===t||t.destroy(),null===(n=null===(e=this.customRte)||void 0===e?void 0:e.destroy)||void 0===n||n.call(e),this.model.stopListening().clear({silent:!0}),this.__dbdTrgCustom.cancel(),(0,yt.L_)(this.toolbar)},o.prototype.postRender=function(t){var e=t.model.get('Canvas');this.toolbar.style.pointerEvents='all',this.hideToolbar(),e.getToolsEl().appendChild(this.toolbar)},o.prototype.initRte=function(t){var e=this.globalRte,n=this,o=n.em,i=n.pfx,r=n.actionbar,s=n.config,a=this.actions||Xh([],s.actions,!0),l={actionbar:"".concat(i,"actionbar"),button:"".concat(i,"action"),active:"".concat(i,"active"),inactive:"".concat(i,"inactive"),disabled:"".concat(i,"disabled")};return e?(e.em=o,e.setEl(t)):(e=new Dh(o,t,{classes:l,actions:a,actionbar:r,actionbarContainer:this.toolbar,module:this}),this.globalRte=e),e.actionbar&&(this.actionbar=e.actionbar),e.actions&&(this.actions=e.actions),e},o.prototype.add=function(t,e){var n;void 0===e&&(e={}),e.name=t,null===(n=this.globalRte)||void 0===n||n.addAction(e,{sync:!0})},o.prototype.get=function(t){var e,n;return null===(e=this.globalRte)||void 0===e||e.getActions().forEach((function(e){e.name==t&&(n=e)})),n},o.prototype.getAll=function(){var t;return(null===(t=this.globalRte)||void 0===t?void 0:t.getActions())||[]},o.prototype.remove=function(t){var e,n=this.getAll(),o=this.get(t);if(o){var i=o.btn,r=n.indexOf(o);null===(e=null==i?void 0:i.parentNode)||void 0===e||e.removeChild(i),n.splice(r,1)}return o},o.prototype.run=function(e){var n=this.globalRte,o=(0,t.isString)(e)?this.get(e):e;n&&o&&(o.result(n,o),n.updateActiveActions())},o.prototype.getToolbarEl=function(){return this.toolbar},o.prototype.updatePosition=function(){var n=this.em,o=this.toolbar,i='px',r=n.Canvas,s=o.style,a=r.getTargetToElementFixed(this.lastEl,o,{event:'rteToolbarPosUpdate',left:0});['top','left','bottom','right'].forEach((function(n){var o=a[n];(0,e.isDef)(o)&&(s[n]=(0,t.isString)(o)?o:(o||0)+i)}))},o.prototype.enable=function(t,e,n){return void 0===n&&(n={}),Nh(this,void 0,void 0,(function(){var o,i,r,s,a;return Wh(this,(function(l){switch(l.label){case 0:return this.lastEl=t.el,i=(o=this).customRte,r=o.em,s=t.getChildrenContainer(),this.toolbar.style.display='',[4,i?i.enable(s,e):this.initRte(s).enable(n)];case 1:return a=l.sent(),r&&(setTimeout(this.updatePosition.bind(this),0),r.off(Lh,this.updatePosition,this),r.on(Lh,this.updatePosition,this),r.trigger('rte:enable',t,a)),this.model.set({currentView:t}),[2,a]}}))}))},o.prototype.getContent=function(e,n){return Nh(this,void 0,void 0,(function(){var o;return Wh(this,(function(i){switch(i.label){case 0:return(o=this.customRte)&&n&&(0,t.isFunction)(o.getContent)?[4,o.getContent(e.el,n)]:[3,2];case 1:return[2,i.sent()];case 2:return[2,e.getChildrenContainer().innerHTML]}}))}))},o.prototype.hideToolbar=function(){var t=this.toolbar.style,e='-1000px';t.top=e,t.left=e,t.display='none'},o.prototype.disable=function(t,e,n){void 0===n&&(n={});var o=this.em,i=this.customRte,r=t.getChildrenContainer();i?i.disable(r,e):e&&e.disable(),this.hideToolbar(),o&&(o.off(Lh,this.updatePosition,this),!n.fromMove&&o.trigger('rte:disable',t,e)),this.model.unset('currentView')},o}(m);const qh=Uh,Yh={sectors:[{name:'General',open:!1,properties:['display','float','position','top','right','left','bottom']},{name:'Flex',open:!1,properties:['flex-direction','flex-wrap','justify-content','align-items','align-content','order','flex-basis','flex-grow','flex-shrink','align-self']},{name:'Dimension',open:!1,properties:['width','height','max-width','min-height','margin','padding']},{name:'Typography',open:!1,properties:['font-family','font-size','font-weight','letter-spacing','color','line-height','text-align','text-shadow']},{name:'Decorations',open:!1,properties:['background-color','border-radius','border','box-shadow','background']},{name:'Extra',open:!1,properties:['opacity','transition','transform']}],appendTo:'',stylePrefix:'sm-',custom:!1,hideNotStylable:!0,highlightChanged:!0,highlightComputed:!0,showComputed:!0,clearProperties:!0,avoidComputed:['width','height']};var Bh=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Fh=void 0&&(void 0).__assign||function(){return Fh=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Fh.apply(this,arguments)},Gh=void 0&&(void 0).__rest||function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(t);i<o.length;i++)e.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(t,o[i])&&(n[o[i]]=t[o[i]])}return n},Hh=void 0&&(void 0).__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))},Kh=function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return Bh(o,n),o.getDefaults=function(){return(0,t.result)(this.prototype,'defaults')},o.prototype.defaults=function(){return{name:'',property:'',type:'',defaults:'',info:'',value:'',icon:'',functionName:'',status:'',visible:!0,fixedValues:['initial','inherit'],full:!1,important:!1,toRequire:!1,requires:void 0,requiresParent:null,parentTarget:null}},o.prototype.initialize=function(t,n){void 0===t&&(t={}),void 0===n&&(n={}),this.em=n.em;var i=this.getId()||'',r=this.get('name')||this.get('label')||'';!this.get('property')&&this.set('property',(r||i).replace(/ /g,'-'));var s=this.get('property');!this.get('id')&&this.set('id',s),!r&&this.set('name',(0,e.capitalize)(s).replace(/-/g,' ')),this.on('change',this.__upTargets),o.callInit(this,t,n)},o.prototype.__getParentProp=function(){var t,e;return null===(e=null===(t=this.collection)||void 0===t?void 0:t.opts)||void 0===e?void 0:e.parentProp},o.prototype.__upTargets=function(e,n){var o,i=this;void 0===n&&(n={});var r=this.em.Styles,s=this.getName(),a=n.__clear,l=a?'':this.__getFullValue(n),c=this.__getParentProp(),u=this.changedAttributes(),p=(0,t.keys)(u).reduce((function(t,e){return t[e]=i.previous(e),t}),{}),h=Hh(Hh([],(0,t.keys)(this.__getClearProps()),!0),['__p'],!1),d=(0,t.keys)(u),f=!n.__up&&!c&&(a||h.some((function(t){return d.indexOf(t)>=0}))),g=this.get('onChange'),m={property:this,from:p,to:u,value:l,opts:n};r.__trgEv(r.events.propertyUpdate,m),g&&g(m),f&&this.__upTargetsStyle(((o={})[s]=l,o),n)},o.prototype.__upTargetsStyle=function(t,e){var n,o=null===(n=this.em)||void 0===n?void 0:n.get('StyleManager');null==o||o.addStyleTargets(Fh(Fh({},t),{__p:!!e.avoidStore}),e)},o.prototype._up=function(t,e){void 0===e&&(e={}),e.noTarget&&(e.__up=!0);var n=e.partial,o=Gh(e,["partial"]);return t.__p=!(!o.avoidStore&&!n),this.set(t,Fh(Fh({},o),{avoidStore:t.__p}))},o.prototype.up=function(t,e){void 0===e&&(e={}),this.set(t,Fh(Fh({},e),{__up:!0}))},o.prototype.init=function(){},o.prototype.getId=function(){return this.get('id')},o.prototype.getType=function(){return this.get('type')},o.prototype.getName=function(){return this.get('property')},o.prototype.getLabel=function(t){var e;void 0===t&&(t={});var n=t.locale,o=void 0===n||n,i=this.getId(),r=this.get('name')||this.get('label');return o&&(null===(e=this.em)||void 0===e?void 0:e.t("styleManager.properties.".concat(i)))||r},o.prototype.getValue=function(t){void 0===t&&(t={});var e=t.noDefault,n=this.get('value');return this.hasValue()||e?n:this.getDefaultValue()},o.prototype.hasValue=function(e){void 0===e&&(e={});var n=e.noParent&&this.getParentTarget(),o=this.get('value');return!(0,t.isUndefined)(o)&&''!==o&&!n},o.prototype.hasValueParent=function(){return this.hasValue()&&!this.hasValue({noParent:!0})},o.prototype.getStyle=function(t){var n;void 0===t&&(t={});var o=this.getName();return(n={})[t.camelCase?(0,e.camelCase)(o):o]=this.__getFullValue(t),n},o.prototype.getDefaultValue=function(){var e=this.get('default');return"".concat((0,t.isUndefined)(e)?this.get('defaults'):e)},o.prototype.upValue=function(t,e){void 0===e&&(e={});var n=null===t||''===t?this.__getClearProps():this.__parseValue(t,e);return this._up(n,e)},o.prototype.isVisible=function(){return!!this.get('visible')},o.prototype.clear=function(t){return void 0===t&&(t={}),this._up(this.__getClearProps(),Fh(Fh({},t),{__clear:!0})),this},o.prototype.canClear=function(){var t=this.getParent();return t?t.__canClearProp(this):this.hasValue({noParent:!0})},o.prototype.getParent=function(){return this.__getParentProp()},o.prototype.isFull=function(){return!!this.get('full')},o.prototype.__parseValue=function(t,e){return this.parseValue(t,e)},o.prototype.__getClearProps=function(){return{value:''}},o.prototype.setValue=function(t,e,n){void 0===e&&(e=!0),void 0===n&&(n={});var o=this.parseValue(t),i=!e;!i&&this.set({value:void 0},{avoidStore:i,silent:!0}),this.set(o,Fh({avoidStore:i},n))},o.prototype.setValueFromInput=function(t,e,n){void 0===n&&(n={}),this.setValue(t,e,Fh(Fh({},n),{fromInput:1}))},o.prototype.parseValue=function(e,n){void 0===n&&(n={});var o={value:e},i='!important',r=this.get('functionName')||'';if((0,t.isString)(e)&&-1!==e.indexOf(i)&&(o.value=e.replace(i,'').trim(),o.important=!0),!r&&!n.complete)return o;var s=[],a="".concat(o.value).trim(),l=a.indexOf('(')+1,c=r||a.substring(0,l-1);if(c&&(o.functionName=c),!r||0===a.indexOf("".concat(r,"("))){var u=a.lastIndexOf(')');s.push(l),u>=0&&s.push(u),o.value=String.prototype.substring.apply(a,s)}if(n.numeric){var p=parseFloat(o.value);o.unit=o.value.replace(p,''),o.value=p}return o},o.prototype.__getFullValue=function(t){var e=(void 0===t?{}:t).withDefault;return!this.hasValue()&&e?this.getDefaultValue():this.getFullValue()},o.prototype.getFullValue=function(e,n){void 0===n&&(n={});var o=this.get('functionName'),i=this.getDefaultValue(),r=(0,t.isUndefined)(e)?this.get('value'):e,s=!(0,t.isUndefined)(r)&&''!==r;if(r&&i&&r===i)return i;if(o&&s){var a='url'===o?"'".concat(r.replace(/'|"/g,''),"'"):r;r="".concat(o,"(").concat(a,")")}return s&&this.get('important')&&!n.skipImportant&&(r="".concat(r," !important")),r||''},o.prototype.__setParentTarget=function(t){this.up({parentTarget:t})},o.prototype.getParentTarget=function(){return this.get('parentTarget')||null},o.prototype.__parseFn=function(t){void 0===t&&(t='');var e=t.indexOf('(')+1,n=t.lastIndexOf(')');return{name:t.substring(0,e-1).trim(),value:String.prototype.substring.apply(t,[e,n>=0?n:void 0]).trim()}},o.prototype.__checkVisibility=function(n){var o=n.target,i=n.component,r=n.sectors,s=i||o;if(!s)return!1;var a=this.getId(),l=this.getName(),c=this.get('toRequire'),u=this.get('requires'),p=this.get('requiresParent'),h=s.get('unstylable'),d=s.get('stylable-require'),f=s.get('stylable');if((0,t.isArray)(f)&&(f=f.indexOf(l)>=0),(0,t.isArray)(h)&&(f=h.indexOf(l)<0),c&&(f=!o||d&&(d.indexOf(a)>=0||d.indexOf(l)>=0)),r&&u){var g=(0,t.keys)(u);r.forEach((function(e){e.getProperties().forEach((function(e){if((0,t.includes)(g,e.id)){var n=u[e.id];f=f&&(0,t.includes)(n,e.get('value'))}}))}))}if(p){var m=i&&i.parent(),v=m&&m.getEl();if(v){var y=(0,e.hasWin)()?window.getComputedStyle(v):{};(0,t.each)(p,(function(e,n){f=f&&y[n]&&(0,t.includes)(e,y[n])}))}else f=!1}return!!f},o}(l.Hn);const Jh=Kh;Kh.callParentInit=function(t,e,n,o){void 0===o&&(o={}),t.prototype.initialize.apply(e,[n,Fh(Fh({},o),{skipInit:1})])},Kh.callInit=function(t,e,n){void 0===n&&(n={}),!n.skipInit&&t.init(e,n)};var td=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ed=void 0&&(void 0).__assign||function(){return ed=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},ed.apply(this,arguments)},nd=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return td(n,t),n.prototype.defaults=function(){return{values:{}}},n.prototype.initialize=function(){var t=this.collection;this.prop=null==t?void 0:t.prop},n.prototype.getId=function(){return this.cid},n.prototype.getIndex=function(){var t=this.collection;return t?t.indexOf(this):-1},n.prototype.getValues=function(t){void 0===t&&(t={});var n=this.get('values');return t.camelCase?Object.keys(n).reduce((function(t,o){return t[(0,e.camelCase)(o)]=n[o],t}),{}):n},n.prototype.getLabel=function(){var t;return null===(t=this.prop)||void 0===t?void 0:t.getLayerLabel(this)},n.prototype.isSelected=function(){var t;return(null===(t=this.prop)||void 0===t?void 0:t.getSelectedLayer())===this},n.prototype.select=function(){var t;return null===(t=this.prop)||void 0===t?void 0:t.selectLayer(this)},n.prototype.remove=function(){var t;return null===(t=this.prop)||void 0===t?void 0:t.removeLayer(this)},n.prototype.move=function(t){var e;return null===(e=this.prop)||void 0===e?void 0:e.moveLayer(this,t)},n.prototype.getStylePreview=function(t){var e;return void 0===t&&(t={}),null===(e=this.prop)||void 0===e?void 0:e.getStylePreview(this,t)},n.prototype.hasPreview=function(){var t;return!!(null===(t=this.prop)||void 0===t?void 0:t.get('preview'))},n.prototype.upValues=function(t){return void 0===t&&(t={}),this.set('values',ed(ed({},this.getValues()),t))},n}(l.Hn);const od=nd;var id=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),rd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return id(e,t),e.prototype.initialize=function(t,e){void 0===e&&(e={}),this.prop=e.prop},e}(l.FE);const sd=rd;rd.prototype.model=od;var ad=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ld=void 0&&(void 0).__assign||function(){return ld=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},ld.apply(this,arguments)},cd=void 0&&(void 0).__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))},ud=function(t){return'integer'===t||'number'===t},pd=function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return ad(o,n),o.prototype.defaults=function(){return ld(ld({},Jh.getDefaults()),{detached:!1,properties:[],separator:' ',join:null,fromStyle:null,toStyle:null,full:!0})},o.prototype.initialize=function(t,e){void 0===t&&(t={}),void 0===e&&(e={}),Jh.callParentInit(Jh,this,t,e);var n=this.em,o=new Mf(this.get('properties')||[],{em:n,parentProp:this});this.set('properties',o,{silent:!0}),this.listenTo(o,'change',this.__upProperties),Jh.callInit(this,t,e)},Object.defineProperty(o.prototype,"properties",{get:function(){return this.get('properties')||[]},enumerable:!1,configurable:!0}),o.prototype.getProperties=function(){return cd([],this.get('properties').models,!0)},o.prototype.getProperty=function(t){return this.properties.filter((function(e){return e.getId()===t||e.getName()===t}))[0]},o.prototype.getPropertyAt=function(t){return this.get('properties').at(t)},o.prototype.isDetached=function(){return!!this.get('detached')},o.prototype.getValues=function(t){var e=(void 0===t?{}:t).byName;return this.getProperties().reduce((function(t,n){return t[e?n.getName():n.getId()]="".concat(n.__getFullValue()),t}),{})},o.prototype.getSeparator=function(){return this.getSplitSeparator()},o.prototype.getJoin=function(){return this.__getJoin()},o.prototype.getStyleFromProps=function(t){var n;void 0===t&&(t={});var o=this.getName(),i=this.__getJoin(),r=this.get('toStyle'),s=this.getValues(),a={};if(r)a=r(s,{join:i,name:o,property:this});else if(s=this.getValues({byName:!0}),this.isDetached())a=s;else{var l=this.getProperties().map((function(t){return t.__getFullValue({withDefault:1})})).filter(Boolean).join(i);(n={})[o]=l,a=n}return this.isDetached()?a[o]='':(a[o]=a[o]||'',a=ld(ld({},a),this.getProperties().reduce((function(t,e){return t[e.getName()]='',t}),{}))),t.camelCase?Object.keys(a).reduce((function(t,n){return t[(0,e.camelCase)(n)]=a[n],t}),{}):a},o.prototype.getSplitSeparator=function(){return new RegExp("".concat(this.get('separator'),"(?![^\\(]*\\))"))},o.prototype.__upProperties=function(t,e){if(void 0===e&&(e={}),!e.__up&&!e.__clearIn){var n=this.__getParentProp();if(n)return n.__upProperties(this,e);this.__upTargetsStyleProps(e,t)}},o.prototype.__upTargetsStyleProps=function(t,e){var n;void 0===t&&(t={});var o=this.getStyleFromProps();if(this.isDetached()&&e){var i=e.getName();(n={})[i]=o[i],o=n}this.__upTargetsStyle(o,t)},o.prototype._up=function(t,e){return void 0===e&&(e={}),this.__setProperties(this.__getSplitValue(t.value),e),Jh.prototype._up.call(this,t,e),this},o.prototype.getStyle=function(t){return this.getStyleFromProps(t)},o.prototype.__getFullValue=function(t){if(void 0===t&&(t={}),this.isDetached()||t.__clear)return'';var e=this.getStyleFromProps()[this.getName()]||'';return ke(e)},o.prototype.__getJoin=function(){var e=this.get('join');return(0,t.isString)(e)?e:this.get('separator')},o.prototype.__styleHasProps=function(e){void 0===e&&(e={});var n=this.getName(),o=this.getProperties().map((function(t){return t.getName()}));return cd([n],o,!0).some((function(n){return!(0,t.isUndefined)(e[n])&&''!==e[n]}))},o.prototype.__splitValue=function(t,e){return ke(t).split(e).map((function(t){return t.trim()})).filter(Boolean)},o.prototype.__splitStyleName=function(t,e,n){return this.__splitValue(t[e]||'',n)},o.prototype.__getSplitValue=function(e,n){void 0===e&&(e='');var o=(void 0===n?{}:n).byName,i=this.getProperties(),r=4===i.length&&i.every((function(t){return ud(t.getType())})),s=this.__splitValue(e,this.getSplitSeparator()),a={};return i.forEach((function(e,n){var i=s[n],l=(0,t.isUndefined)(i)?'':i;if(r){var c=s.length;l=s[n]||s[n%c+(1!=c&&c%2?1:0)]||l}var u=o?e.getName():e.getId();a[u]=l||''})),a},o.prototype.__getPropsFromStyle=function(e,n){if(void 0===e&&(e={}),void 0===n&&(n={}),!this.__styleHasProps(e))return null;var o=n.byName,i=this.getName(),r=this.getProperties(),s=this.getSplitSeparator(),a=this.get('fromStyle'),l=a?a(e,{property:this,name:i,separator:s}):{};return a||(l=this.__getSplitValue(e[i]||'',{byName:o}),r.forEach((function(n){var i=e[n.getName()],r=o?n.getName():n.getId();(0,t.isUndefined)(i)||''===i||(l[r]=i)}))),l},o.prototype.__setProperties=function(e,n){void 0===e&&(e={}),void 0===n&&(n={}),this.getProperties().forEach((function(t){var o=e[t.getId()];t.__getFullValue()!==o&&t.upValue(o,n)}));var o=(0,t.keys)(e).map((function(t){return e[t]})).join(' ');this.set('value',o,{silent:!0})},o.prototype.clear=function(){var t=this;return this.getProperties().map((function(e){return e.clear({__clearIn:!t.isDetached()})})),Jh.prototype.clear.call(this),this},o.prototype.hasValue=function(t){return this.getProperties().some((function(e){return e.hasValue(t)}))},o.prototype.getFullValue=function(){return this.__getFullValue()},o.prototype.__canClearProp=function(t){return this.isDetached()&&t.hasValue({noParent:!0})},o}(Jh);const hd=pd;var dd=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),fd=void 0&&(void 0).__assign||function(){return fd=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},fd.apply(this,arguments)},gd=void 0&&(void 0).__rest||function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(t);i<o.length;i++)e.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(t,o[i])&&(n[o[i]]=t[o[i]])}return n},md=/,(?![^\(]*\))/,vd=/\s(?![^(]*\))/,yd=function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return dd(o,n),o.prototype.defaults=function(){return fd(fd({},hd.getDefaults()),{layers:[],emptyValue:'unset',layerSeparator:', ',layerJoin:'',prepend:0,preview:!1,layerLabel:null,selectedLayer:null})},o.prototype.initialize=function(t,e){void 0===t&&(t={}),void 0===e&&(e={}),hd.callParentInit(hd,this,t,e);var n=this.get('layers'),o=new sd(n,{prop:this});o.property=this,o.properties=this.get('properties'),this.set('layers',o,{silent:!0}),this.on('change:selectedLayer',this.__upSelected),this.listenTo(o,'add remove',this.__upLayers),hd.callInit(this,t,e)},Object.defineProperty(o.prototype,"layers",{get:function(){return this.get('layers')},enumerable:!1,configurable:!0}),o.prototype.getLayers=function(){return this.layers.models},o.prototype.hasLayers=function(){return this.getLayers().length>0},o.prototype.getLayer=function(t){return void 0===t&&(t=0),this.layers.at(t)||void 0},o.prototype.getSelectedLayer=function(){var t=this.get('selectedLayer');return t&&t.getIndex()>=0?t:void 0},o.prototype.selectLayer=function(t){return this.set('selectedLayer',t,{__select:!0})},o.prototype.selectLayerAt=function(t){void 0===t&&(t=0);var e=this.getLayer(t);return e&&this.selectLayer(e)},o.prototype.moveLayer=function(e,n){void 0===n&&(n=0);var o=this.layers,i=e?e.getIndex():-1;i>=0&&(0,t.isNumber)(n)&&n>=0&&n<o.length&&i!==n&&(this.removeLayer(e),o.add(e,{at:n}))},o.prototype.addLayer=function(e,n){void 0===e&&(e={}),void 0===n&&(n={});var o={};return this.getProperties().forEach((function(n){var i=n.getId(),r=e[i];o[i]=(0,t.isUndefined)(r)?n.getDefaultValue():r})),this.layers.push({values:o},n)},o.prototype.removeLayer=function(t){return this.layers.remove(t)},o.prototype.removeLayerAt=function(t){void 0===t&&(t=0);var e=this.getLayer(t);return e?this.removeLayer(e):null},o.prototype.getLayerLabel=function(t){var e='';if(t){var n=this.get('layerLabel'),o=t.getValues(),i=t.getIndex();if(n)e=n(t,{index:i,values:o,property:this});else{var r=[];this.getProperties().map((function(t){r.push(o[t.getId()])})),e=r.filter(Boolean).join(' ')}}return e},o.prototype.getStyleFromLayer=function(n,o){var i;void 0===o&&(o={});var r,s=this.__getJoin(),a=this.__getJoinLayers(),l=this.get('toStyle'),c=this.getName(),u=n.getValues();if(l)r=l(u,{join:s,joinLayers:a,name:c,layer:n,property:this});else{var p=this.getProperties().map((function(e){var n=e.getName(),i=u[e.getId()],r=(0,t.isUndefined)(i)?e.getDefaultValue():i;if(o.number&&ud(e.getType())){var s=e.parseValue(i,o.number);r="".concat(s.value).concat(s.unit)}return{name:n,value:r}}));r=this.isDetached()?p.reduce((function(t,e){return t[e.name]=e.value,t}),{}):((i={})[this.getName()]=p.map((function(t){return t.value})).join(s),i)}return o.camelCase?Object.keys(r).reduce((function(t,n){return t[(0,e.camelCase)(n)]=r[n],t}),{}):r},o.prototype.getStylePreview=function(t,e){void 0===e&&(e={});var n={};return this.get('preview')&&(n=this.getStyleFromLayer(t,e)),n},o.prototype.getLayerSeparator=function(){var e=this.get('layerSeparator');return(0,t.isString)(e)?new RegExp("".concat(e,"(?![^\\(]*\\))")):e},o.prototype.hasEmptyValue=function(){return!this.hasLayers()&&!!this.attributes.isEmptyValue},o.prototype.__upProperties=function(t,e){var n;void 0===e&&(e={});var o=this.getSelectedLayer();o&&(o.upValues(((n={})[t.getId()]=t.__getFullValue(),n)),e.__up||this.__upTargetsStyleProps(e))},o.prototype.__upLayers=function(t,e,n){this.__upTargetsStyleProps(n||e)},o.prototype.__upTargets=function(t,e){if(void 0===e&&(e={}),!e.__select)return Jh.prototype.__upTargets.call(this,t,e)},o.prototype.__upTargetsStyleProps=function(t){void 0===t&&(t={}),this.__upTargetsStyle(this.getStyleFromLayers(t),t)},o.prototype.__upTargetsStyle=function(t,e){return Jh.prototype.__upTargetsStyle.call(this,t,e)},o.prototype.__upSelected=function(t,e){var n=(void 0===t?{}:t).noEvent;void 0===e&&(e={});var o=this.em.Styles,i=this.getSelectedLayer(),r=null==i?void 0:i.getValues();r&&this.getProperties().forEach((function(t){var n,o=null!==(n=r[t.getId()])&&void 0!==n?n:'';t.__getFullValue()!==o&&t.upValue(o,fd(fd({},e),{__up:!0}))})),!n&&o.__trgEv(o.events.layerSelect,{property:this})},o.prototype._up=function(t,e){void 0===e&&(e={});var n=t.__layers,o=void 0===n?[]:n,i=gd(t,["__layers"]);return!this.isDetached()&&this.__setLayers(o),this.__upSelected({noEvent:!0},e),Jh.prototype._up.call(this,i,e),this},o.prototype.__setLayers=function(t,e){void 0===t&&(t=[]),void 0===e&&(e={});var n=this.layers,o=t.map((function(t){return{values:t}}));n.length===o.length?o.map((function(t,e){var o;return null===(o=n.at(e))||void 0===o?void 0:o.upValues(t.values)})):n.reset(o),this.set({isEmptyValue:!!e.isEmptyValue}),this.__upSelected({noEvent:!0})},o.prototype.__parseValue=function(t){var e=this,n=this.parseValue(t);return n.__layers=t.split(md).map((function(t){return t.trim()})).map((function(t){return e.__parseLayer(t)})).filter(Boolean),n},o.prototype.__parseLayer=function(e){var n=this.get('parseLayer'),o=e.split(vd),i=this.getProperties();return n?n({value:e,values:o}):i.reduce((function(e,n,i){var r=o[i];return e[n.getId()]=(0,t.isUndefined)(r)?n.getDefaultValue():r,e}),{})},o.prototype.__getLayersFromStyle=function(e){var n=this;if(void 0===e&&(e={}),!this.__styleHasProps(e))return null;if(this.isEmptyValueStyle(e))return[];var o=this.getName(),i=this.getProperties(),r=this.getLayerSeparator(),s=this.attributes.fromStyle,a=s?s(e,{property:this,name:o,separatorLayers:r}):[];if(!s){var l=this.__splitStyleName(e,o,r).map((function(t){return t.split(n.getSplitSeparator())})).map((function(e){var n={};return i.forEach((function(o,i){var r=e[i];n[o.getId()]=(0,t.isUndefined)(r)?o.getDefaultValue():r})),n}));i.forEach((function(t){var o=t.getId();n.__splitStyleName(e,t.getName(),r).map((function(e){var n;return(n={})[o]=e||t.getDefaultValue(),n})).forEach((function(t,e){l[e]=l[e]?fd(fd({},l[e]),t):t}))})),a=l}return(0,t.isArray)(a)?a:[a]},o.prototype.getStyle=function(t){return void 0===t&&(t={}),this.getStyleFromLayers(t)},o.prototype.getStyleFromLayers=function(e){var n=this;void 0===e&&(e={});var o={},i=this.getName(),r=this.getLayers(),s=this.getProperties();if(r.map((function(t){return n.getStyleFromLayer(t,e)})).forEach((function(e){(0,t.keys)(e).map((function(t){o[t]||(o[t]=[]),o[t].push(e[t])}))})),(0,t.keys)(o).map((function(t){o[t]=o[t].join(n.__getJoinLayers())})),this.isDetached())o[i]='',!r.length&&s.map((function(t){o[t.getName()]=''}));else{var a=s.reduce((function(t,e){return t[e.getName()]='',t}),{});o[i]=o[i]||'',o=fd(fd({},o),a)}return fd(fd({},o),e.__clear?{}:this.getEmptyValueStyle())},o.prototype.isEmptyValueStyle=function(e){void 0===e&&(e={});var n=this.getEmptyValueStyle({force:!0}),o=(0,t.keys)(n);return!!o.length&&o.every((function(t){return n[t]===e[t]}))},o.prototype.getEmptyValueStyle=function(e){void 0===e&&(e={});var n=this.attributes.emptyValue;if(!n||this.hasLayers()&&!e.force)return{};var o=this.getName(),i=this.getProperties(),r=(0,t.isString)(n)?n:n({property:this});if((0,t.isString)(r)){var s={};return this.isDetached()?i.map((function(t){s[t.getName()]=r})):s[o]=r,s}return r},o.prototype.__getJoinLayers=function(){var e=this.get('layerJoin'),n=this.get('layerSeparator');return e||((0,t.isString)(n)?n:e)},o.prototype.__getFullValue=function(){if(this.get('detached'))return'';var t=this.getStyleFromLayers();return ke(t[this.getName()])},o.prototype.hasValue=function(t){void 0===t&&(t={});var e=t.noParent&&this.getParentTarget();return(this.hasLayers()||this.hasEmptyValue())&&!e},o.prototype.clear=function(t){return void 0===t&&(t={}),this.layers.reset(),this.__upTargetsStyleProps(fd(fd({},t),{__clear:!0})),Jh.prototype.clear.call(this),this},o.prototype.__canClearProp=function(){return!1},o.prototype.__getLayers=function(){return this.layers},o}(hd);const _d=yd;var Od=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),bd=void 0&&(void 0).__assign||function(){return bd=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},bd.apply(this,arguments)},wd=void 0&&(void 0).__rest||function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(t);i<o.length;i++)e.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(t,o[i])&&(n[o[i]]=t[o[i]])}return n},xd=void 0&&(void 0).__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))},Sd='data-clear-style',kd=function(n){function o(e){void 0===e&&(e={});var o=n.call(this,e)||this;(0,t.bindAll)(o,'__change','__updateStyle');var i=e.config||{},r=i.em;o.config=i,o.em=r,o.pfx=i.stylePrefix||'',o.ppfx=i.pStylePrefix||'',o.__destroyFn=o.destroy?o.destroy.bind(o):function(){};var s=o.model;s.view=o,o.onValueChange=(0,t.debounce)(o.onValueChange.bind(o),10),o.updateStatus=(0,t.debounce)(o.updateStatus.bind(o),0),o.listenTo(s,'destroy remove',o.remove),o.listenTo(s,'change:visible',o.updateVisibility),o.listenTo(s,'change:name change:className change:full',o.render),o.listenTo(s,'change:value',o.onValueChange),o.listenTo(s,'change:parentTarget',o.updateStatus),o.listenTo(r,'change:device',o.onValueChange);var a=o.init&&o.init.bind(o);return a&&a(),o}return Od(o,n),o.prototype.events=function(){var t;return(t={change:'inputValueChanged'})["click [".concat(Sd,"]")]='clear',t},o.prototype.template=function(t){var e=this.pfx,n=this.ppfx;return"\n      <div class=\"".concat(e,"label\" data-sm-label></div>\n      <div class=\"").concat(n,"fields\" data-sm-fields></div>\n    ")},o.prototype.templateLabel=function(t){var e=this.pfx,n=this.em,o=t.parent,i=t.attributes,r=i.icon,s=void 0===r?'':r,a=i.info,l=void 0===a?'':a,c=null==n?void 0:n.getConfig().icons,u=(null==c?void 0:c.close)||'';return"\n      <span class=\"".concat(e,"icon ").concat(s,"\" title=\"").concat(l,"\">\n        ").concat(t.getLabel(),"\n      </span>\n      ").concat(o?'':"<div class=\"".concat(e,"clear\" style=\"display: none\" ").concat(Sd,">").concat(u,"</div>"),"\n    ")},o.prototype.templateInput=function(t){return"\n      <div class=\"".concat(this.ppfx,"field\">\n        <input placeholder=\"").concat(t.getDefaultValue(),"\"/>\n      </div>\n    ")},o.prototype.remove=function(){var t=this;return l.G7.prototype.remove.apply(this,arguments),['em','input','$input','view'].forEach((function(e){return t[e]=null})),this.__destroyFn(this._getClbOpts()),this},o.prototype.updateStatus=function(){var t,e=this,n=e.model,o=e.pfx,i=e.ppfx,r=e.config,s="".concat(i,"four-color"),a="".concat(i,"color-warn"),l=this.$el.children(".".concat(o,"label")),c=this.getClearEl(),u=c?c.style:{};l.removeClass("".concat(s," ").concat(a)),u.display='none',n.hasValue({noParent:!0})&&r.highlightChanged?(l.addClass(s),r.clearProperties&&(u.display='')):n.hasValue()&&r.highlightComputed&&l.addClass(a),null===(t=this.parent)||void 0===t||t.updateStatus()},o.prototype.clear=function(t){t&&t.stopPropagation(),this.model.clear()},o.prototype.getClearEl=function(){return this.clearEl||(this.clearEl=this.el.querySelector("[".concat(Sd,"]"))),this.clearEl},o.prototype.inputValueChanged=function(t){t&&t.stopPropagation(),this.emit||this.model.upValue(t.target.value)},o.prototype.onValueChange=function(t,e,n){void 0===n&&(n={}),this.setValue(this.model.getFullValue(void 0,{skipImportant:!0})),this.updateStatus()},o.prototype.setValue=function(e){var n=this.model,o=(0,t.isUndefined)(e)||''===e?n.getDefaultValue():e;if(this.update)return this.__update(o);this.__setValueInput(o)},o.prototype.__setValueInput=function(t){var e=this.getInputEl();e&&(e.value=t)},o.prototype.getInputEl=function(){return this.input||(this.input=this.el.querySelector('input')),this.input},o.prototype.updateVisibility=function(){this.el.style.display=this.model.isVisible()?'':'none'},o.prototype.clearCached=function(){delete this.clearEl,delete this.input,delete this.$input},o.prototype.__unset=function(){var t=this.unset&&this.unset.bind(this);t&&t(this._getClbOpts())},o.prototype.__update=function(t){var e=this.update&&this.update.bind(this);e&&e(bd(bd({},this._getClbOpts()),{value:t}))},o.prototype.__change=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.emit&&this.emit.bind(this);n&&n.apply(void 0,xd([this._getClbOpts()],t,!1))},o.prototype.__updateStyle=function(t,n){void 0===n&&(n={});var o=n.complete,i=n.partial,r=(wd(n,["complete","partial"]),this.model),s=!1!==o&&!0!==i;(0,e.isObject)(t)?r.__upTargetsStyle(t,{avoidStore:!s}):r.upValue(t,{partial:!s})},o.prototype._getClbOpts=function(){var t=this,e=t.model;return{el:t.el,createdEl:t.createdEl,property:e,props:e.attributes,change:this.__change,updateStyle:this.__updateStyle}},o.prototype.render=function(){this.clearCached();var t=this,e=t.pfx,n=t.model,o=t.el,i=t.$el,r=n.getName(),s=n.getType(),a=n.get('className')||'',l="".concat(e,"property"),c='number'===s?"".concat(e).concat(s," ").concat(e,"integer"):"".concat(e).concat(s);this.createdEl&&this.__destroyFn(this._getClbOpts()),i.empty().append(this.template(n)),i.find('[data-sm-label]').append(this.templateLabel(n));var u=this.create&&this.create.bind(this);this.createdEl=u&&u(this._getClbOpts()),i.find('[data-sm-fields]').append(this.createdEl||this.templateInput(n)),o.className="".concat(l," ").concat(c," ").concat(l,"__").concat(r," ").concat(a).trim(),o.className+=n.isFull()?" ".concat(l,"--full"):'';var p=this.onRender&&this.onRender.bind(this);return p&&p(),this.setValue(n.getValue()),this},o.prototype.onRender=function(){},o}(l.G7);const Pd=kd;var Cd=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Td=function(t){function e(e){var n=t.call(this,e)||this;n.config=e.config||{},n.pfx=n.config.stylePrefix||'',n.properties=[],n.parent=e.parent;var o=n.collection;return n.listenTo(o,'add',n.addTo),n.listenTo(o,'reset',n.render),n}return Cd(e,t),e.prototype.addTo=function(t,e,n){this.add(t,null,n)},e.prototype.add=function(t,e,n){void 0===n&&(n={});var o=this.parent,i=this.config,r=e||this.el,s=new t.typeView({model:t,config:i});o&&(s.parent=o),s.render();var a=s.el;this.properties.push(s),(0,yt.$Q)(r,a,n.at)},e.prototype.remove=function(){return l.G7.prototype.remove.apply(this,arguments),this.clearItems(),this},e.prototype.clearItems=function(){this.properties.forEach((function(t){return t.remove()})),this.properties=[]},e.prototype.render=function(){var t=this,e=this.$el,n=this.pfx;this.clearItems();var o=document.createDocumentFragment();return this.collection.forEach((function(e){return t.add(e,o)})),e.empty(),e.append(o),e.attr('class',"".concat(n,"properties")),this},e}(l.G7);const Ed=Td;var Ad=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Qd=void 0&&(void 0).__assign||function(){return Qd=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Qd.apply(this,arguments)},$d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ad(e,t),e.prototype.templateInput=function(){var t=this.pfx;return"\n      <div class=\"".concat(t,"field ").concat(t,"composite\">\n        <span id=\"").concat(t,"input-holder\"></span>\n      </div>\n    ")},e.prototype.remove=function(){var t;return null===(t=this.props)||void 0===t||t.remove(),Pd.prototype.remove.apply(this,arguments),this},e.prototype.onValueChange=function(){},e.prototype.onRender=function(){var t=this.pfx,e=this.model,n=e.get('properties');if(n.length&&!this.props){var o=e.isDetached(),i=new Ed({config:Qd(Qd({},this.config),{highlightComputed:o,highlightChanged:o}),collection:n,parent:this});i.render(),this.$el.find("#".concat(t,"input-holder")).append(i.el),this.props=i}},e.prototype.clearCached=function(){Pd.prototype.clearCached.apply(this,arguments),delete this.props},e}(Pd);const jd=$d;var Rd=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Md=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return Rd(n,e),n.prototype.events=function(){return{click:'select','click [data-close-layer]':'removeItem','mousedown [data-move-layer]':'initSorter','touchstart [data-move-layer]':'initSorter'}},n.prototype.template=function(){var t=this,e=t.pfx,n=t.ppfx,o=t.em,i=null==o?void 0:o.getConfig().icons,r=(null==i?void 0:i.close)||'',s=(null==i?void 0:i.move)||'';return"\n      <div class=\"".concat(e,"label-wrp\">\n        <div id=\"").concat(e,"move\" class=\"").concat(n,"no-touch-actions\" data-move-layer>\n          ").concat(s,"\n        </div>\n        <div id=\"").concat(e,"label\" data-label></div>\n        <div id=\"").concat(e,"preview-box\" class=\"").concat(e,"layer-preview\" style=\"display: none\" data-preview-box>\n          <div id=\"").concat(e,"preview\" class=\"").concat(e,"layer-preview-cnt\" data-preview></div>\n        </div>\n        <div id=\"").concat(e,"close-layer\" class=\"").concat(e,"btn-close\" data-close-layer>\n          ").concat(r,"\n        </div>\n      </div>\n      <div id=\"").concat(e,"inputs\" data-properties></div>\n    ")},n.prototype.initialize=function(t){void 0===t&&(t={});var e=this.model,n=t.config||{};this.em=n.em,this.config=n,this.sorter=t.sorter,this.pfx=n.stylePrefix||'',this.ppfx=n.pStylePrefix||'',this.propertyView=t.propertyView;var o=this.propertyView.model;this.listenTo(e,'destroy remove',this.remove),this.listenTo(e,'change:values',this.updateLabel),this.listenTo(o,'change:selectedLayer',this.updateVisibility),e.view=this,e.set({droppable:0,draggable:1}),this.$el.data('model',e)},n.prototype.initSorter=function(){var t;null===(t=this.sorter)||void 0===t||t.startSort(this.el)},n.prototype.removeItem=function(t){t&&t.stopPropagation(),this.model.remove()},n.prototype.select=function(){this.model.select()},n.prototype.getPropertiesWrapper=function(){return this.propsWrapEl||(this.propsWrapEl=this.el.querySelector('[data-properties]')),this.propsWrapEl},n.prototype.getPreviewEl=function(){return this.previewEl||(this.previewEl=this.el.querySelector('[data-preview]')),this.previewEl},n.prototype.getLabelEl=function(){return this.labelEl||(this.labelEl=this.el.querySelector('[data-label]')),this.labelEl},n.prototype.updateLabel=function(){var e=this.model,n=e.getLabel();if(this.getLabelEl().innerHTML=n,e.hasPreview()){var o=this.getPreviewEl(),i=e.getStylePreview({number:{min:-3,max:3}}),r=(0,t.keys)(i).map((function(t){return"".concat(t,":").concat(i[t])})).join(';');o.setAttribute('style',r)}},n.prototype.updateVisibility=function(){var t,e=this,n=e.pfx,o=e.model,i=e.propertyView,r=this.getPropertiesWrapper(),s=o.isSelected();r.style.display=s?'':'none',this.$el[s?'addClass':'removeClass']("".concat(n,"active")),s&&r.appendChild(null===(t=i.props)||void 0===t?void 0:t.el)},n.prototype.render=function(){var t=this,e=t.el,n=t.pfx,o=t.model;return e.innerHTML=this.template(),e.className="".concat(n,"layer"),o.hasPreview()&&(e.querySelector('[data-preview-box]').style.display=''),this.updateLabel(),this.updateVisibility(),this},n}(l.G7);const Vd=Md;var Zd=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Dd=function(t){function e(e){var n=t.call(this,e)||this,o=n.collection,i=e.config||{},r=i.em,s=i.stylePrefix||'',a=i.pStylePrefix||'';n.config=i,n.pfx=s,n.ppfx=a,n.propertyView=e.propertyView,n.className="".concat(s,"layers ").concat(a,"field"),n.listenTo(o,'add',n.addTo),n.listenTo(o,'reset',n.reset),n.items=[];var l=null==r?void 0:r.Utils;return n.sorter=l?new l.Sorter({container:n.el,ignoreViewChildren:1,containerSel:".".concat(s,"layers"),itemSel:".".concat(s,"layer"),pfx:i.pStylePrefix,em:r}):'',o.view=n,n.$el.data('model',o),n.$el.data('collection',o),n}return Zd(e,t),e.prototype.addTo=function(t){var e=this.collection.indexOf(t);this.addToCollection(t,null,e)},e.prototype.addToCollection=function(t,e,n){var o=e||null,i=this,r=i.propertyView,s=i.config,a=i.sorter,l=i.$el,c=new Vd({model:t,config:s,sorter:a,propertyView:r}),u=c.render().el;if(this.items.push(c),o)o.appendChild(u);else if(void 0!==n){var p='before';l.children().length===n&&(n--,p='after'),n<0?l.append(u):l.children().eq(n)[p](u)}else l.append(u);return u},e.prototype.reset=function(t,e){this.clearItems(),this.render()},e.prototype.remove=function(){return this.clearItems(),l.G7.prototype.remove.apply(this,arguments),this},e.prototype.clearItems=function(){this.items.forEach((function(t){return t.remove()})),this.items=[]},e.prototype.render=function(){var t=this,e=this.$el,n=this.sorter,o=document.createDocumentFragment();return e.empty(),this.collection.forEach((function(e){return t.addToCollection(e,o)})),e.append(o),e.attr('class',this.className),n&&(n.plh=null),this},e}(l.G7);const Id=Dd;var Nd=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Wd=void 0&&(void 0).__assign||function(){return Wd=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Wd.apply(this,arguments)},Xd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Nd(e,t),e.prototype.events=function(){return Wd(Wd({},jd.prototype.events()),{'click [data-add-layer]':'addLayer',change:''})},e.prototype.templateInput=function(){var t=this.pfx,e=this.em,n=null==e?void 0:e.getConfig().icons,o=(null==n?void 0:n.plus)||'+';return"\n      <div class=\"".concat(t,"field ").concat(t,"stack\">\n        <button type=\"button\" id=\"").concat(t,"add\" data-add-layer>\n          ").concat(o,"\n        </button>\n        <div data-layers-wrapper></div>\n      </div>\n    ")},e.prototype.init=function(){var t=this.model;this.listenTo(t.layers,'change reset',this.updateStatus),this.listenTo(t,'change:isEmptyValue',this.updateStatus)},e.prototype.addLayer=function(){this.model.addLayer({},{at:0})},e.prototype.setValue=function(){},e.prototype.remove=function(){var t;return null===(t=this.layersView)||void 0===t||t.remove(),jd.prototype.remove.apply(this,arguments),this},e.prototype.clearCached=function(){jd.prototype.clearCached.apply(this,arguments),delete this.layersView},e.prototype.onRender=function(){var t=this,e=t.model,n=t.el,o=t.config,i=e.get('properties');if(i.length&&!this.props){var r=new Ed({config:Wd(Wd({},o),{highlightComputed:!1,highlightChanged:!1}),collection:i,parent:this});r.render();var s=new Id({collection:e.layers,config:o,propertyView:this});s.render(),n.querySelector('[data-layers-wrapper]').appendChild(s.el),this.props=r,this.layersView=s}},e}(jd);const Ld=Xd;var zd=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ud=void 0&&(void 0).__assign||function(){return Ud=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Ud.apply(this,arguments)},qd=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return zd(n,e),n.prototype.events=function(){return Ud(Ud({},Pd.prototype.events()),{'click [data-clear-asset]':'clear','click [data-open-assets]':'openAssetManager'})},n.prototype.templateInput=function(){var t,e=this.pfx,n=this.em,o=null===(t=this.em)||void 0===t?void 0:t.getConfig().icons,i=null==o?void 0:o.close;return"\n      <div class=\"".concat(e,"field ").concat(e,"file\">\n        <div id='").concat(e,"input-holder'>\n          <div class=\"").concat(e,"btn-c\">\n            <button class=\"").concat(e,"btn\" id=\"").concat(e,"images\" type=\"button\" data-open-assets>\n              ").concat(n.t('styleManager.fileButton'),"\n            </button>\n          </div>\n          <div style=\"clear:both;\"></div>\n        </div>\n        <div id=\"").concat(e,"preview-box\" class=\"").concat(e,"preview-file\" data-preview-box>\n          <div id=\"").concat(e,"preview-file\" class=\"").concat(e,"preview-file-cnt\" data-preview></div>\n          <div id=\"").concat(e,"close\" class=\"").concat(e,"preview-file-close\" data-clear-asset>").concat(i,"</div>\n        </div>\n      </div>\n    ")},n.prototype.__setValueInput=function(t){var e=this.model,n=this.el,o=e.getDefaultValue(),i=n.querySelector('[data-preview-box]'),r=n.querySelector('[data-preview]');i.style.display=t&&t!==o?'':'none',r.style.backgroundImage=t||e.getDefaultValue()},n.prototype.openAssetManager=function(){var e,n=this,o=null===(e=this.em)||void 0===e?void 0:e.Assets;null==o||o.open({select:function(e,i){var r=(0,t.isString)(e)?e:e.get('src');n.model.upValue(r,{partial:!i}),i&&o.close()},types:['image'],accept:'image/*'})},n}(Pd);const Yd=qd;var Bd=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Fd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Bd(e,t),e.prototype.templateInput=function(t){return''},e.prototype.init=function(){var t=this.model;this.listenTo(t,'change:unit',this.onValueChange),this.listenTo(t,'change:units',this.render)},e.prototype.setValue=function(t){},e.prototype.onRender=function(){var t=this,e=t.ppfx,n=t.model,o=t.el;if(!this.inputInst){var i=n.input;i.ppfx=e,i.render(),o.querySelector(".".concat(e,"fields")).appendChild(i.el),this.input=i.inputEl.get(0),this.inputInst=i}},e.prototype.clearCached=function(){Pd.prototype.clearCached.apply(this,arguments),this.inputInst=null},e}(Pd);const Gd=Fd;var Hd=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Kd=function(t){function e(e){void 0===e&&(e={});var n=t.call(this,e)||this,o=e.ppfx||'';return n.opts=e,n.ppfx=o,n.em=e.target||{},!e.onChange&&n.listenTo(n.model,'change:value',n.handleModelChange),n}return Hd(e,t),e.prototype.template=function(){return"<span class=\"".concat(this.holderClass(),"\"></span>")},e.prototype.inputClass=function(){return"".concat(this.ppfx,"field")},e.prototype.holderClass=function(){return"".concat(this.ppfx,"input-holder")},e.prototype.elementUpdated=function(){this.model.trigger('el:change')},e.prototype.setValue=function(t,e){var n=this.model,o=t||n.get('defaults'),i=this.getInputEl();i&&(i.value=o)},e.prototype.handleModelChange=function(t,e,n){this.setValue(e,n)},e.prototype.handleChange=function(t){t.stopPropagation();var e=this.getInputEl().value;this.__onInputChange(e),this.elementUpdated()},e.prototype.__onInputChange=function(t){this.model.set({value:t},{fromInput:1})},e.prototype.getInputEl=function(){if(!this.inputEl){var t=this.model,e=this.opts.type||'text',n=t.get('placeholder')||t.get('defaults')||t.get('default')||'';this.inputEl=(0,s["default"])("<input type=\"".concat(e,"\" placeholder=\"").concat(n,"\">"))}return this.inputEl.get(0)},e.prototype.render=function(){this.inputEl=null;var t=this.$el;return t.addClass(this.inputClass()),t.html(this.template()),t.find(".".concat(this.holderClass())).append(this.getInputEl()),this},e}(l.G7);const Jd=Kd;Kd.prototype.events={change:'handleChange'};var tf=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ef=void 0&&(void 0).__assign||function(){return ef=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},ef.apply(this,arguments)};s["default"]&&Be(s["default"]);var nf=function(t){var e='name'===t.getFormat()&&t.toName(),n=1==t.getAlpha()?t.toHexString():t.toRgbString();return e||n.replace(/ /g,'')},of=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return tf(n,e),n.prototype.template=function(){var t=this.ppfx;return"\n      <div class=\"".concat(this.holderClass(),"\"></div>\n      <div class=\"").concat(t,"field-colorp\">\n        <div class=\"").concat(t,"field-colorp-c\" data-colorp-c>\n          <div class=\"").concat(t,"checker-bg\"></div>\n        </div>\n      </div>\n    ")},n.prototype.inputClass=function(){var t=this.ppfx;return"".concat(t,"field ").concat(t,"field-color")},n.prototype.holderClass=function(){return"".concat(this.ppfx,"input-holder")},n.prototype.remove=function(){return e.prototype.remove.call(this),this.colorEl.spectrum('destroy'),this},n.prototype.handleChange=function(e){e.stopPropagation();var n=e.target.value;(0,t.isUndefined)(n)||this.__onInputChange(n)},n.prototype.__onInputChange=function(t){var e=this.model,n=this.opts.onChange,o=t,i=this.getColorEl();if(i){i.spectrum('set',o);var r=i.spectrum('get'),s=o&&nf(r);s&&(o=s)}n?n(o):e.set({value:o},{fromInput:1})},n.prototype.setValue=function(e,n){void 0===n&&(n={});var o=this.model,i=(0,t.isUndefined)(n.def)?o.get('defaults'):n.def,r=(0,t.isUndefined)(e)?(0,t.isUndefined)(i)?'':i:e,s=this.getInputEl(),a=this.getColorEl(),l='none'!=r?r:'';s.value=r,a.get(0).style.backgroundColor=l,(n.fromTarget||n.fromInput&&!n.avoidStore)&&(a.spectrum('set',l),this.noneColor='none'==r,this.movedColor=l)},n.prototype.getColorEl=function(){var t=this;if(!this.colorEl){var e=this,n=e.em,o=e.model,i=e.opts,r=this.ppfx,a=i.onChange,l=(0,s["default"])("<div class=\"".concat(this.ppfx,"field-color-picker\"></div>")),c=l.get(0).style,u=n&&n.config?n.config.el:'',p=n&&n.getConfig&&n.getConfig().colorPicker||{};this.movedColor='';var h,d=!1;this.$el.find('[data-colorp-c]').append(l);var f=function(t,e){void 0===e&&(e=!0),a?a(t,!e):(e&&o.setValueFromInput(0,!1),o.setValueFromInput(t,e))};l.spectrum(ef(ef(ef({color:o.getValue()||!1,containerClassName:"".concat(r,"one-bg ").concat(r,"two-color"),appendTo:u||'body',maxSelectionSize:8,showPalette:!0,showAlpha:!0,chooseText:'Ok',cancelText:'⨯',palette:[]},p),o.get('colorPicker')||{}),{move:function(e){var n=nf(e);t.movedColor=n,c.backgroundColor=n,f(n,!1)},change:function(e){d=!0;var n=nf(e);c.backgroundColor=n,f(n),t.noneColor=!1},show:function(e){d=!1,t.movedColor='',h=a?o.getValue({noDefault:!0}):nf(e)},hide:function(){d||!h&&!a||(t.noneColor&&(h=''),c.backgroundColor=h,l.spectrum('set',h),f(h,!1))}})),n&&n.on&&this.listenTo(n,'component:selected',(function(){t.movedColor&&f(t.movedColor),d=!0,t.movedColor='',l.spectrum('hide')})),this.colorEl=l}return this.colorEl},n.prototype.render=function(){return Jd.prototype.render.call(this),this.getColorEl(),this},n}(Jd);const rf=of;var sf=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),af=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return sf(e,t),e.prototype.setValue=function(t){var e;null===(e=this.inputInst)||void 0===e||e.setValue(t,{fromTarget:1,def:this.model.getDefaultValue()})},e.prototype.remove=function(){var t=this;Gd.prototype.remove.apply(this,arguments);var e=this.inputInst;return e&&e.remove&&e.remove(),['inputInst','$color'].forEach((function(e){return t[e]=null})),this},e.prototype.__handleChange=function(t,e){this.model.upValue(t,{partial:e})},e.prototype.onRender=function(){var t;if(!this.inputInst){this.__handleChange=this.__handleChange.bind(this);var e=this,n=e.ppfx,o=e.model,i=e.em,r=e.el,s=new rf({target:i,model:o,ppfx:n,onChange:this.__handleChange}).render();r.querySelector(".".concat(n,"fields")).appendChild(s.el),this.input=null===(t=s.inputEl)||void 0===t?void 0:t.get(0),this.inputInst=s}},e}(Gd);const lf=af;var cf=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),uf=void 0&&(void 0).__assign||function(){return uf=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},uf.apply(this,arguments)},pf=void 0&&(void 0).__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))},hf=function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return cf(o,n),o.prototype.defaults=function(){return uf(uf({},Jh.getDefaults()),{options:[],full:0})},o.prototype.getOptions=function(){var t=this.attributes,e=t.options,n=t.list;return(e&&e.length?e:n)||[]},o.prototype.getOption=function(t){var n=this,o=(0,e.isDef)(t)?t:this.getValue();return this.getOptions().filter((function(t){return n.getOptionId(t)===o}))[0]||null},o.prototype.setOptions=function(t){return void 0===t&&(t=[]),this.set('options',t),this},o.prototype.addOption=function(t){if(t){var e=this.getOptions();this.setOptions(pf(pf([],e,!0),[t],!1))}return this},o.prototype.getOptionId=function(t){return(0,e.isDef)(t.id)?t.id:t.value},o.prototype.getOptionLabel=function(e,n){var o;void 0===n&&(n={});var i=n.locale,r=void 0===i||i,s=((0,t.isString)(e)?this.getOption(e):e)||{},a=this.getOptionId(s),l=s.label||s.name||a,c=n.property||this.getId();return r&&(null===(o=this.em)||void 0===o?void 0:o.t("styleManager.options.".concat(c,".").concat(a)))||l},o.prototype.initialize=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Jh.prototype.initialize.apply(this,t),this.listenTo(this,'change:options',this.__onOptionChange)},o.prototype.__onOptionChange=function(){this.set('list',this.get('options'))},o}(Jh);const df=hf;var ff=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const gf=function(t){function e(e){var n=t.call(this,e)||this;return n.listenTo(n.model,'change:options',n.updateOptions),n}return ff(e,t),e.prototype.templateInput=function(){var t=this.pfx,e=this.ppfx;return"\n      <div class=\"".concat(e,"field ").concat(e,"select\">\n        <span id=\"").concat(t,"input-holder\"></span>\n        <div class=\"").concat(e,"sel-arrow\">\n          <div class=\"").concat(e,"d-s-arrow\"></div>\n        </div>\n      </div>\n    ")},e.prototype.updateOptions=function(){delete this.input,this.onRender()},e.prototype.onRender=function(){var t=this.pfx,e=this.model,n=e.getOptions();if(!this.input){var o=[];n.forEach((function(t){var n=e.getOptionId(t),i=e.getOptionLabel(n),r=t.style?t.style.replace(/"/g,'&quot;'):'',s=r?"style=\"".concat(r,"\""):'',a=n.replace(/"/g,'&quot;');o.push("<option value=\"".concat(a,"\" ").concat(s,">").concat(i,"</option>"))}));var i=this.el.querySelector("#".concat(t,"input-holder"));i.innerHTML="<select>".concat(o.join(''),"</select>"),this.input=i.firstChild}},e.prototype.__setValueInput=function(t){var e=this.model,n=this.getInputEl(),o=e.getOptions()[0],i=o?e.getOptionId(o):'';n&&(n.value=t||i)},e}(Pd);var mf=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),vf=void 0&&(void 0).__assign||function(){return vf=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},vf.apply(this,arguments)};const yf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mf(e,t),e.prototype.defaults=function(){return vf(vf({},df.getDefaults()),{full:1})},e}(df);var _f=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Of=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _f(e,t),e.prototype.templateInput=function(){var t=this.ppfx;return"<div class=\"".concat(t,"field ").concat(t,"field-radio\"></div>")},e.prototype.onRender=function(){var t=this.pfx,e=this.ppfx,n=this.model,o="".concat(e,"radio-item-label"),i=n.getName(),r=n.getOptions(),s="".concat(t,"radio ").concat(t,"radio-").concat(i),a=n.cid;if(!this.input){var l=[];r.forEach((function(r){var c=r.className?"".concat(r.className," ").concat(t,"icon ").concat(o):'',u=n.getOptionId(r),p="".concat(i,"-").concat(u,"-").concat(a),h=c?'':n.getOptionLabel(u),d=r.title?"title=\"".concat(r.title,"\""):'',f=n.getValue()===u?'checked':'';l.push("\n          <div class=\"".concat(e,"radio-item\">\n            <input type=\"radio\" class=\"").concat(s,"\" id=\"").concat(p,"\" name=\"").concat(i,"-").concat(a,"\" value=\"").concat(u,"\" ").concat(f,"/>\n            <label class=\"").concat(c||o,"\" ").concat(d," for=\"").concat(p,"\">").concat(h,"</label>\n          </div>\n        "))}));var c=this.el.querySelector(".".concat(e,"field"));c.innerHTML="<div class=\"".concat(e,"radio-items\">").concat(l.join(''),"</div>"),this.input=c.firstChild}},e.prototype.__setValueInput=function(t){var e,n=this.model,o=t||n.getDefaultValue(),i=null===(e=this.getInputEl())||void 0===e?void 0:e.querySelector("[value=\"".concat(o,"\"]"));i&&(i.checked=!0)},e}(gf);const bf=Of;var wf=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),xf=function(e){function n(n){void 0===n&&(n={});var o=e.call(this,n)||this;return(0,t.bindAll)(o,'moveIncrement','upIncrement'),o.doc=document,o.listenTo(o.model,'change:unit',o.handleModelChange),o}return wf(n,e),n.prototype.template=function(){var t=this.ppfx;return"\n      <span class=\"".concat(t,"input-holder\"></span>\n      <span class=\"").concat(t,"field-units\"></span>\n      <div class=\"").concat(t,"field-arrows\" data-arrows>\n        <div class=\"").concat(t,"field-arrow-u\" data-arrow-up></div>\n        <div class=\"").concat(t,"field-arrow-d\" data-arrow-down></div>\n      </div>\n    ")},n.prototype.inputClass=function(){var t=this.ppfx;return this.opts.contClass||"".concat(t,"field ").concat(t,"field-integer")},n.prototype.setValue=function(t,e){var n=e||{},o=this.validateInputValue(t,{deepCheck:1}),i={value:o.value,unit:''};(o.unit||o.force)&&(i.unit=o.unit),this.model.set(i,n),n.silent&&this.handleModelChange()},n.prototype.handleChange=function(t){t.stopPropagation(),this.setValue(this.getInputEl().value),this.elementUpdated()},n.prototype.handleUnitChange=function(t){t.stopPropagation();var e=this.getUnitEl().value;this.model.set('unit',e),this.elementUpdated()},n.prototype.handleKeyDown=function(t){'ArrowUp'===t.key&&(t.preventDefault(),this.upArrowClick()),'ArrowDown'===t.key&&(t.preventDefault(),this.downArrowClick())},n.prototype.elementUpdated=function(){this.model.trigger('el:change')},n.prototype.handleModelChange=function(){var t=this.model;this.getInputEl().value=t.get('value');var e=this.getUnitEl();e&&(e.value=t.get('unit')||'')},n.prototype.getUnitEl=function(){if(!this.unitEl){var t=this.model,e=t.get('units')||[];if(e.length){var n=['<option value="" disabled hidden>-</option>'];e.forEach((function(e){var o=e==t.get('unit')?'selected':'';n.push("<option ".concat(o,">").concat(e,"</option>"))}));var o=document.createElement('div');o.innerHTML="<select class=\"".concat(this.ppfx,"input-unit\">").concat(n.join(''),"</select>"),this.unitEl=o.firstChild}}return this.unitEl},n.prototype.upArrowClick=function(){var t=this.model,e=t.get('step'),n=parseFloat(t.get('value'));this.setValue(this.normalizeValue(n+e)),this.elementUpdated()},n.prototype.downArrowClick=function(){var t=this.model,e=t.get('step'),n=parseFloat(t.get('value'));this.setValue(this.normalizeValue(n-e)),this.elementUpdated()},n.prototype.downIncrement=function(t){t.preventDefault(),this.moved=!1;var e=this.model.get('value')||0;e=this.normalizeValue(e),this.current={y:t.pageY,val:e},(0,yt.on)(this.doc,'mousemove',this.moveIncrement),(0,yt.on)(this.doc,'mouseup',this.upIncrement)},n.prototype.moveIncrement=function(t){this.moved=!0;var e=this.model,n=e.get('step'),o=this.current,i=this.normalizeValue(o.val+(o.y-t.pageY)*n),r=this.validateInputValue(i),s=r.value,a=r.unit;return this.prValue=s,e.set({value:s,unit:a},{avoidStore:1}),!1},n.prototype.upIncrement=function(){var t=this.model,e=t.get('step');if((0,yt.S1)(this.doc,'mouseup',this.upIncrement),(0,yt.S1)(this.doc,'mousemove',this.moveIncrement),this.prValue&&this.moved){var n=this.prValue-e;t.set('value',n,{avoidStore:1}).set('value',n+e),this.elementUpdated()}},n.prototype.normalizeValue=function(t,e){void 0===e&&(e=0);var n=this.model.get('step'),o=0;if(isNaN(t))return e;if(t=parseFloat(t),Math.floor(t)!==t){var i=n.toString().split('.')[1];o=i?i.length:0}return o?parseFloat(t.toFixed(o)):t},n.prototype.validateInputValue=function(e,n){void 0===n&&(n={});var o=0,i=n||{},r=this.model,s='',a=(0,t.isUndefined)(e)?s:e,l=n.units||r.get('units')||[],c=r.get('unit')||l.length&&l[0]||'',u=(0,t.isUndefined)(n.max)?r.get('max'):n.max,p=(0,t.isUndefined)(n.min)?r.get('min'):n.min,h=!!r.get('limitlessMax'),d=!!r.get('limitlessMin');if(i.deepCheck){var f=r.get('fixedValues')||[];if(''===a&&(c=''),a){var g=new RegExp('^'+f.join('|'),'g');if(f.length&&g.test(a))a=a.match(g)[0],c='',o=1;else{var m=a+'';a+='',a=parseFloat(a.replace(',','.')),a=isNaN(a)?s:a;var v=m.replace(a,'');(0,t.indexOf)(l,v)>=0&&(c=v)}}}return h||(0,t.isUndefined)(u)||''===u||(a=a>u?u:a),d||(0,t.isUndefined)(p)||''===p||(a=a<p?p:a),{force:o,value:a,unit:c}},n.prototype.render=function(){Jd.prototype.render.call(this),this.unitEl=null;var t=this.getUnitEl();return t&&this.$el.find(".".concat(this.ppfx,"field-units")).get(0).appendChild(t),this},n}(Jd);const Sf=xf;xf.prototype.events={'change input':'handleChange','change select':'handleUnitChange','click [data-arrow-up]':'upArrowClick','click [data-arrow-down]':'downArrowClick','mousedown [data-arrows]':'downIncrement',keydown:'handleKeyDown'};var kf=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Pf=void 0&&(void 0).__assign||function(){return Pf=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Pf.apply(this,arguments)},Cf=function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return kf(o,n),o.prototype.defaults=function(){return Pf(Pf({},Jh.getDefaults()),{units:[],unit:'',min:'',max:'',step:1})},o.prototype.getUnits=function(){return this.get('units')||[]},o.prototype.getUnit=function(){return this.get('unit')},o.prototype.getMin=function(){return this.get('min')},o.prototype.getMax=function(){return this.get('max')},o.prototype.getStep=function(){return this.get('step')},o.prototype.upUnit=function(t,e){return void 0===e&&(e={}),this._up({unit:t},e)},o.prototype.initialize=function(t,n){void 0===t&&(t={}),void 0===n&&(n={}),Jh.callParentInit(Jh,this,t,n);var o=this.get('unit'),i=this.getUnits();this.input=(0,e.hasWin)()?new Sf({model:this}):void 0,i.length&&!o&&this.set('unit',i[0],{silent:!0}),Jh.callInit(this,t,n)},o.prototype.__getClearProps=function(){return Pf(Pf({},Jh.prototype.__getClearProps()),{unit:''})},o.prototype.parseValue=function(t,e){void 0===e&&(e={});var n=Jh.prototype.parseValue.apply(this,arguments),o=this.input.validateInputValue(n.value,Pf({deepCheck:1},e)),i=o.value,r=o.unit;return n.value=i,n.unit=r,n},o.prototype.getFullValue=function(){var e=this.get('value'),n=this.get('unit'),o=(0,t.isUndefined)(e)?'':"".concat(e),i=!(0,t.isUndefined)(n)&&o?n:'',r="".concat(o).concat(i);return Jh.prototype.getFullValue.apply(this,[r])},o}(Jh);const Tf=Cf;var Ef=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Af=void 0&&(void 0).__assign||function(){return Af=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Af.apply(this,arguments)};const Qf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ef(e,t),e.prototype.defaults=function(){return Af(Af({},Tf.getDefaults()),{showInput:1})},e}(Tf);var $f=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),jf=void 0&&(void 0).__assign||function(){return jf=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},jf.apply(this,arguments)};const Rf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return $f(e,t),e.prototype.events=function(){return jf(jf({},Gd.prototype.events()),{'change [type=range]':'inputValueChanged','input [type=range]':'inputValueChangedSoft',change:''})},e.prototype.templateInput=function(t){var e=this.ppfx;return"\n      <div class=\"".concat(e,"field ").concat(e,"field-range\">\n        <input type=\"range\" min=\"").concat(t.get('min'),"\" max=\"").concat(t.get('max'),"\" step=\"").concat(t.get('step'),"\"/>\n      </div>\n    ")},e.prototype.getSliderEl=function(){return this.slider||(this.slider=this.el.querySelector('input[type=range]')),this.slider},e.prototype.inputValueChanged=function(t){t.stopPropagation(),this.model.upValue(this.getSliderEl().value)},e.prototype.inputValueChangedSoft=function(t){t.stopPropagation(),this.model.upValue(this.getSliderEl().value,{partial:!0})},e.prototype.setValue=function(t){var e=this.model,n=e.parseValue(t);this.getSliderEl().value=''===t?e.getDefaultValue():parseFloat(n.value),Gd.prototype.setValue.apply(this,arguments)},e.prototype.onRender=function(){Gd.prototype.onRender.apply(this,arguments),this.model.get('showInput')||(this.inputInst.el.style.display='none')},e.prototype.clearCached=function(){Gd.prototype.clearCached.apply(this,arguments),delete this.slider},e}(Gd);const Mf=l.FE.extend(fc).extend({extendViewApi:1,init:function(){var t=this.opts,e=this.em,n=t.module||(null==e?void 0:e.get('StyleManager'));n&&(n.__listenAdd(this,n.events.propertyAdd),n.__listenRemove(this,n.events.propertyRemove))},types:[{id:'stack',model:_d,view:Ld,isType:function(t){if(t&&'stack'==t.type)return t}},{id:'composite',model:hd,view:jd,isType:function(t){if(t&&'composite'==t.type)return t}},{id:'file',model:Jh,view:Yd,isType:function(t){if(t&&'file'==t.type)return t}},{id:'color',model:Jh,view:lf,isType:function(t){if(t&&'color'==t.type)return t}},{id:'select',model:df,view:gf,isType:function(t){if(t&&'select'==t.type)return t}},{id:'radio',model:yf,view:bf,isType:function(t){if(t&&'radio'==t.type)return t}},{id:'slider',model:Qf,view:Rf,isType:function(t){if(t&&'slider'==t.type)return t}},{id:'integer',model:Tf,view:Gd,isType:function(t){if(t&&'integer'==t.type)return t}},{id:'number',model:Tf,view:Gd,isType:function(t){if(t&&'number'==t.type)return t}},{id:'base',model:Jh,view:Pd,isType:function(t){return t.type='base',t}}]});var Vf=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Zf=void 0&&(void 0).__assign||function(){return Zf=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Zf.apply(this,arguments)},Df=void 0&&(void 0).__rest||function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(t);i<o.length;i++)e.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(t,o[i])&&(n[o[i]]=t[o[i]])}return n},If=void 0&&(void 0).__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))},Nf=function(e){function n(n,o){void 0===o&&(o={});var i=e.call(this,n)||this,r=o.em;i.em=r;var s=n||{},a=i.buildProperties(s.buildProps),l=i.get('name')||'',c=[];!i.get('id')&&i.set('id',l.replace(/ /g,'_').toLowerCase()),c=(c=a?i.extendProperties(a):i.get('properties').map((function(e){return(0,t.isString)(e)?i.buildProperties(e)[0]:e})).filter(Boolean)).map((function(t){return i.checkExtend(t)}));var u=new Mf(c,{em:r});return u.sector=i,i.set('properties',u),i}return Vf(n,e),n.prototype.defaults=function(){return{id:'',name:'',open:!0,visible:!0,extendBuilded:!0,properties:[]}},Object.defineProperty(n.prototype,"properties",{get:function(){return this.get('properties')},enumerable:!1,configurable:!0}),n.prototype.getId=function(){return this.get('id')},n.prototype.getName=function(){var t,e=this.getId();return(null===(t=this.em)||void 0===t?void 0:t.t("styleManager.sectors.".concat(e)))||this.get('name')},n.prototype.setName=function(t){return this.set('name',t)},n.prototype.isOpen=function(){return!!this.get('open')},n.prototype.setOpen=function(t){return this.set('open',t)},n.prototype.isVisible=function(){return!!this.get('visible')},n.prototype.getProperties=function(t){void 0===t&&(t={});var e=this.properties;return(e.models?If([],e.models,!0):e).filter((function(e){var n=!0;(t.withValue&&(n=e.hasValue({noParent:!0})),t.withParentValue)&&(n=!e.hasValue({noParent:!0})&&e.hasValue());return n}))},n.prototype.getProperty=function(t){return this.getProperties().filter((function(e){return e.get('id')===t}))[0]||void 0},n.prototype.addProperty=function(t,e){return this.properties.add(this.checkExtend(t),e)},n.prototype.extendProperties=function(e,n,o){void 0===o&&(o=!1);for(var i=e.length,r=n||this.get('properties'),s=this.get('extendBuilded'),a=[],l=0,c=r.length;l<c;l++){for(var u=r[l],p=0,h=0;h<i;h++){var d=e[h];if(u.property!=d.property&&u.id!=d.property);else{var f=u.properties;f&&f.length&&(u.properties=this.extendProperties(d.properties||[],f,1)),e[h]=s?(0,t.extend)(d,u):u,a[h]=e[h],p=1}}p||(e.push(u),a.push(u))}return o?a.filter((function(t){return t})):e},n.prototype.checkExtend=function(e){var n=((0,t.isString)(e)?{extend:e}:e)||{},o=n.extend,i=Df(n,["extend"]);return o?Zf(Zf({},this.buildProperties([o])[0]||{}),i):e},n.prototype.buildProperties=function(t){var e,n=t||[];if(!n.length)return[];var o=null===(e=this.em)||void 0===e?void 0:e.Styles.builtIn;return null==o?void 0:o.build(n)},n}(l.Hn);const Wf=Nf;var Xf=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Lf=void 0&&(void 0).__assign||function(){return Lf=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Lf.apply(this,arguments)};const zf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Xf(e,t),e.prototype.initialize=function(t,e){void 0===e&&(e={});var n=e.module,o=e.em;this.em=o,this.module=n,this.listenTo(this,'reset',this.onReset)},e.prototype.model=function(t,e){void 0===e&&(e={});var n=e.collection.em;return new Wf(t,Lf(Lf({},e),{em:n}))},e.prototype.onReset=function(t,e){void 0===e&&(e={}),(e.previousModels||[]).forEach((function(t){return t.get('properties').reset()}))},e}(l.FE);var Uf=void 0&&(void 0).__assign||function(){return Uf=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Uf.apply(this,arguments)},qf=void 0&&(void 0).__rest||function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(t);i<o.length;i++)e.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(t,o[i])&&(n[o[i]]=t[o[i]])}return n},Yf=void 0&&(void 0).__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))},Bf=function(t){return t.map((function(t){return{id:t}}))},Ff=function(){function e(){this.props={},this.typeNumber='number',this.typeColor='color',this.typeRadio='radio',this.typeSelect='select',this.typeFile='file',this.typeSlider='slider',this.typeComposite='composite',this.typeStack='stack',this.unitsSize=['px','%','em','rem','vh','vw'],this.unitsSizeNoPerc=['px','em','rem','vh','vw'],this.unitsTime=['s','ms'],this.unitsAngle=['deg','rad','grad'],this.fixedValues=['initial','inherit','auto'];var t=', sans-serif',e=['flex-start','flex-end','center'],n=Yf(Yf([],e,!0),['baseline','stretch'],!1);this.optsBgSize=Bf(['auto','cover','contain']),this.optsBgAttach=Bf(['scroll','fixed','local']),this.optsBgRepeat=Bf(['repeat','repeat-x','repeat-y','no-repeat']),this.optsWrap=Bf(['nowrap','wrap','wrap-reverse']),this.optsOverflow=Bf(['visible','hidden','scroll','auto']),this.optsDir=Bf(['row','row-reverse','column','column-reverse']),this.opstDisplay=Bf(['block','inline','inline-block','flex','none']),this.optsTransitFn=Bf(['linear','ease','ease-in','ease-out','ease-in-out']),this.optsCursor=Bf(['auto','pointer','copy','crosshair','grab','grabbing','help','move','text']),this.optsFloat=Bf(['none','left','right']),this.optsPos=Bf(['static','relative','absolute','fixed']),this.optsTextAlign=Bf(['left','center','right','justify']),this.optsFlexAlign=Bf(n),this.optsJustCont=Bf(Yf(Yf([],e,!0),['space-between','space-around','space-evenly'],!1)),this.optsAlignCont=Bf(Yf(Yf([],e,!0),['space-between','space-around','stretch'],!1)),this.optsAlignSelf=Bf(Yf(['auto'],n,!0)),this.optsTransitProp=Bf(['all','width','height','background-color','transform','box-shadow','opacity']),this.optsBorderStyle=Bf(['none','solid','dotted','dashed','double','groove','ridge','inset','outset']),this.optsBgPos=Bf(['left top','left center','left bottom','right top','right center','right bottom','center top','center center','center bottom']),this.optsWeight=[{id:'100',label:'Thin'},{id:'200',label:'Extra-Light'},{id:'300',label:'Light'},{id:'400',label:'Normal'},{id:'500',label:'Medium'},{id:'600',label:'Semi-Bold'},{id:'700',label:'Bold'},{id:'800',label:'Extra-Bold'},{id:'900',label:'Ultra-Bold'}],this.optsShadowType=[{id:'',label:'Outside'},{id:'inset',label:'Inside'}],this.optsFonts=['Arial, Helvetica'+t,'Arial Black, Gadget'+t,'Brush Script MT'+t,'Comic Sans MS, cursive'+t,'Courier New, Courier, monospace','Georgia, serif','Helvetica'+t,'Impact, Charcoal'+t,'Lucida Sans Unicode, Lucida Grande'+t,'Tahoma, Geneva'+t,'Times New Roman, Times, serif','Trebuchet MS, Helvetica'+t,'Verdana, Geneva'+t].map((function(t){return{id:t,label:t.split(',')[0]}})),this.fixedFontSizes=['medium','xx-small','x-small','small','large','x-large','xx-large','smaller','larger','length','initial','inherit'],this.fixedLetSpace=['normal','initial','inherit'],this.requireFlex={display:['flex']},this.init()}return e.prototype.__sub=function(e){var n=this;return function(){return e.map((function(e){if((0,t.isString)(e))return n.get(e);var o=e.extend,i=qf(e,["extend"]);return Uf(Uf({},n.get(o)),i)}))}},e.prototype.init=function(){var t=this,e=this,n=e.fixedValues,o=e.requireFlex,i=e.typeNumber;this.props={};var r=[['text-shadow-h',{type:i,default:'0',units:this.unitsSizeNoPerc}],['top',{default:'auto',units:this.unitsSize,fixedValues:n},'text-shadow-h'],['right',{},'top'],['bottom',{},'top'],['left',{},'top'],['margin-top',{default:'0'},'top'],['margin-right',{},'margin-top'],['margin-bottom',{},'margin-top'],['margin-left',{},'margin-top'],['padding-top',{min:0},'margin-top'],['padding-right',{},'padding-top'],['padding-bottom',{},'padding-top'],['padding-left',{},'padding-top'],['width',{min:0},'top'],['min-width',{},'width'],['max-width',{},'width'],['height',{},'width'],['min-height',{},'width'],['max-height',{},'width'],['flex-basis',{requiresParent:o},'width'],['font-size',{default:'medium',fixedValues:this.fixedFontSizes},'width'],['letter-spacing',{default:'normal',fixedValues:this.fixedLetSpace},'top'],['line-height',{},'letter-spacing'],['text-shadow-v',{},'text-shadow-h'],['text-shadow-blur',{min:0},'text-shadow-h'],['border-radius-c',{property:'border-radius',fixedValues:void 0},'padding-top'],['border-top-left-radius',{},'border-radius-c'],['border-top-right-radius',{},'border-radius-c'],['border-bottom-left-radius',{},'border-radius-c'],['border-bottom-right-radius',{},'border-radius-c'],['border-width',{units:this.unitsSizeNoPerc},'border-radius-c'],['box-shadow-h',{},'text-shadow-h'],['box-shadow-v',{},'text-shadow-h'],['box-shadow-blur',{default:'5px'},'text-shadow-blur'],['box-shadow-spread',{},'text-shadow-h'],['transition-duration',{default:'2s',units:this.unitsTime},'border-radius-c'],['perspective',{},'border-radius-c'],['order',{type:i,default:'0',requiresParent:o}],['flex-grow',{},'order'],['flex-shrink',{default:'1'},'order'],['float',{type:this.typeRadio,default:'none',options:this.optsFloat}],['position',{default:'static',options:this.optsPos},'float'],['text-align',{default:'left',options:this.optsTextAlign},'float'],['color',{type:this.typeColor,default:'black',full:!0}],['text-shadow-color',{},'color'],['border-color',{},'color'],['box-shadow-color',{},'color'],['background-color',{default:'none'},'color'],['background-image',{type:this.typeFile,functionName:'url',default:'none',full:!0}],['opacity',{type:this.typeSlider,default:'1',min:0,max:1,step:.01,full:!0}],['display',{type:this.typeSelect,default:'block',options:this.opstDisplay}],['flex-direction',{default:'row',options:this.optsDir,requires:o},'display'],['flex-wrap',{default:'nowrap',options:this.optsWrap},'flex-direction'],['justify-content',{default:'flex-start',options:this.optsJustCont},'flex-wrap'],['align-items',{default:'stretch',options:this.optsFlexAlign},'flex-wrap'],['align-content',{options:this.optsAlignCont},'align-items'],['align-self',{default:'auto',options:this.optsAlignSelf,requiresParent:o},'display'],['font-family',{default:'Arial, Helvetica, sans-serif',options:this.optsFonts},'display'],['font-weight',{default:'400',options:this.optsWeight},'display'],['border-style',{default:'solid',options:this.optsBorderStyle},'display'],['box-shadow-type',{default:'',options:this.optsShadowType},'display'],['background-repeat',{default:'repeat',options:this.optsBgRepeat},'display'],['background-position',{default:'left top',options:this.optsBgPos},'display'],['background-attachment',{default:'scroll',options:this.optsBgAttach},'display'],['background-size',{default:'auto',options:this.optsBgSize},'display'],['transition-property',{default:'width',options:this.optsTransitProp},'display'],['transition-timing-function',{default:'ease',options:this.optsTransitFn},'display'],['cursor',{default:'auto',options:this.optsCursor},'display'],['overflow',{default:'visible',options:this.optsOverflow},'display'],['overflow-x',{},'overflow'],['overflow-y',{},'overflow'],['margin',{type:this.typeComposite,properties:this.__sub([{extend:'margin-top',id:'margin-top-sub'},{extend:'margin-right',id:'margin-right-sub'},{extend:'margin-bottom',id:'margin-bottom-sub'},{extend:'margin-left',id:'margin-left-sub'}])}],['padding',{properties:this.__sub([{extend:'padding-top',id:'padding-top-sub'},{extend:'padding-right',id:'padding-right-sub'},{extend:'padding-bottom',id:'padding-bottom-sub'},{extend:'padding-left',id:'padding-left-sub'}])},'margin'],['border',{properties:this.__sub([{extend:'border-width',id:'border-width-sub'},{extend:'border-style',id:'border-style-sub'},{extend:'border-color',id:'border-color-sub'}])},'margin'],['border-radius',{properties:this.__sub([{extend:'border-top-left-radius',id:'border-top-left-radius-sub'},{extend:'border-top-right-radius',id:'border-top-right-radius-sub'},{extend:'border-bottom-right-radius',id:'border-bottom-right-radius-sub'},{extend:'border-bottom-left-radius',id:'border-bottom-left-radius-sub'}])},'margin'],['transition',{type:this.typeStack,properties:this.__sub([{extend:'transition-property',id:'transition-property-sub'},{extend:'transition-duration',id:'transition-duration-sub'},{extend:'transition-timing-function',id:'transition-timing-function-sub'}])}],['box-shadow',{preview:!0,layerLabel:function(t,e){var n=e.values,o=n['box-shadow-h'],i=n['box-shadow-v'],r=n['box-shadow-blur'],s=n['box-shadow-spread'];return"".concat(o," ").concat(i," ").concat(r," ").concat(s)},properties:this.__sub(['box-shadow-h','box-shadow-v','box-shadow-blur','box-shadow-spread','box-shadow-color','box-shadow-type'])},'transition'],['text-shadow',{default:'none',layerLabel:function(t,e){var n=e.values,o=n['text-shadow-h'],i=n['text-shadow-v'],r=n['text-shadow-blur'];return"".concat(o," ").concat(i," ").concat(r)},properties:this.__sub(['text-shadow-h','text-shadow-v','text-shadow-blur','text-shadow-color'])},'box-shadow'],['background',{detached:!0,layerLabel:function(t,e){var n=e.values;return[n['background-repeat-sub']||'',n['background-position-sub']||'',n['background-attachment-sub']||'',n['background-size-sub']||''].join(' ')},properties:this.__sub([{extend:'background-image',id:'background-image-sub'},{extend:'background-repeat',id:'background-repeat-sub'},{extend:'background-position',id:'background-position-sub'},{extend:'background-attachment',id:'background-attachment-sub'},{extend:'background-size',id:'background-size-sub'}])},'box-shadow'],['transform',{type:'stack',layerSeparator:' ',fromStyle:function(t,e){var n=e.property,o=t[e.name]||'',i=n.getLayerSeparator();return o?o.split(i).map((function(t){var e=n.__parseFn(t);return{'transform-type':e.name,'transform-value':e.value}})):[]},toStyle:function(t,e){var n;return(n={})[e.name]="".concat(t['transform-type'],"(").concat(t['transform-value'],")"),n},properties:[{property:'transform-type',name:'Type',type:this.typeSelect,default:'rotateZ',full:!0,options:[{id:'scaleX',propValue:{units:[''],step:.01}},{id:'scaleY',propValue:{units:[''],step:.01}},{id:'scaleZ',propValue:{units:[''],step:.01}},{id:'rotateX',propValue:{units:this.unitsAngle,step:1}},{id:'rotateY',propValue:{units:this.unitsAngle,step:1}},{id:'rotateZ',propValue:{units:this.unitsAngle,step:1}},{id:'translateX',propValue:{units:this.unitsSize,step:1}},{id:'translateY',propValue:{units:this.unitsSize,step:1}}],onChange:function(t){var e=t.property;if(t.to.value){var n=e.getOption(),o=Uf({},n.propValue||{}),i=e.getParent().getProperty('transform-value'),r=i.getUnit();(!r||(null==o?void 0:o.units.indexOf(r))<0)&&(o.unit=(null==o?void 0:o.units[0])||''),i.up(o)}}},{property:'transform-value',type:this.typeNumber,default:'0',full:!0}]}]];return r.forEach((function(e){var n=e[0],o=e[1],i=e[2];t.add(n,o||{},{from:i})})),this},e.prototype.add=function(e,n,o){void 0===n&&(n={}),void 0===o&&(o={});var i=o.from||'',r=this.props[i||e]||{},s=Uf(Uf(Uf({},r),{property:e}),n);return s.properties&&(0,t.isFunction)(s.properties)&&(s.properties=s.properties()),this.props[e]=s,s},e.prototype.get=function(t){return this.props[t]},e.prototype.build=function(e){var n=this,o=[];return((0,t.isString)(e)?[e]:e).forEach((function(t){o.push(n.get(t)||{property:t})})),o},e}();const Gf=Ff;var Hf=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Kf=void 0&&(void 0).__makeTemplateObject||function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},Jf=function(t){function e(e){var n=t.call(this,e)||this,o=e.config||{},i=n.model,r=o.em;return n.config=o,n.em=r,n.pfx=o.stylePrefix||'',n.listenTo(i,'destroy remove',n.remove),n.listenTo(i,'change:open',n.updateOpen),n.listenTo(i,'change:visible',n.updateVisibility),n}return Hf(e,t),e.prototype.template=function(t){var e,o=t.pfx,i=t.label,r=null===(e=this.em)||void 0===e?void 0:e.getConfig().icons,s=(null==r?void 0:r.caret)||'',a="".concat(o,"sector-");return n(eg||(eg=Kf(["\n      <div class=\"","title\" data-sector-title>\n        <div class=\"","caret\">$","</div>\n        <div class=\"","label\">","</div>\n      </div>\n    "],["\n      <div class=\"","title\" data-sector-title>\n        <div class=\"","caret\">$","</div>\n        <div class=\"","label\">","</div>\n      </div>\n    "])),a,a,s,a,i)},e.prototype.events=function(){return{'click [data-sector-title]':'toggle'}},e.prototype.updateOpen=function(){var t=this,e=t.$el,n=t.model,o=t.pfx,i=n.isOpen();e[i?'addClass':'removeClass']("".concat(o,"open")),this.getPropertiesEl().style.display=i?'':'none'},e.prototype.updateVisibility=function(){this.el.style.display=this.model.isVisible()?'':'none'},e.prototype.getPropertiesEl=function(){var t=this.$el,e=this.pfx;return t.find(".".concat(e,"properties")).get(0)},e.prototype.toggle=function(){var t=this.model;t.setOpen(!t.get('open'))},e.prototype.renderProperties=function(){var t=this.model,e=this.config,n=t.get('properties');if(n){var o=new Ed({collection:n,config:e});this.$el.append(o.render().el)}},e.prototype.render=function(){var t=this,e=t.pfx,n=t.model,o=t.$el,i=n.getId(),r=n.getName();return o.html(this.template({pfx:e,label:r})),this.renderProperties(),o.attr('class',"".concat(e,"sector ").concat(e,"sector__").concat(i," no-select")),this.updateOpen(),this},e}(l.G7);const tg=Jf;var eg,ng=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),og=function(t){function e(e){void 0===e&&(e={});var n=t.call(this,e)||this,o=e.module,i=e.config,r=n.collection;return n.pfx=(null==i?void 0:i.stylePrefix)||'',n.ppfx=(null==i?void 0:i.pStylePrefix)||'',n.config=i,n.module=o,n.listenTo(r,'add',n.addTo),n.listenTo(r,'reset',n.render),n}return ng(e,t),e.prototype.remove=function(){var t=this;return l.G7.prototype.remove.apply(this,arguments),['config','module','em'].forEach((function(e){return t[e]={}})),this},e.prototype.addTo=function(t,e,n){void 0===n&&(n={}),this.addToCollection(t,null,n)},e.prototype.addToCollection=function(t,e,n){void 0===n&&(n={});var o=this.config,i=this.el,r=e||i,s=new tg({model:t,config:o}).render().el;return(0,yt.$Q)(r,s,n.at),s},e.prototype.render=function(){var t=this,e=this,n=e.$el,o=e.pfx,i=e.ppfx;n.empty();var r=document.createDocumentFragment();return this.collection.each((function(e){return t.addToCollection(e,r)})),n.append(r),n.addClass("".concat(o,"sectors ").concat(i,"one-bg ").concat(i,"two-color")),this},e}(l.G7);const ig=og;var rg=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),sg=void 0&&(void 0).__assign||function(){return sg=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},sg.apply(this,arguments)},ag=void 0&&(void 0).__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))},lg='style',cg="".concat(lg,":"),ug="".concat(cg,"sector"),pg="".concat(ug,":add"),hg="".concat(ug,":remove"),dg="".concat(ug,":update"),fg="".concat(cg,"property"),gg="".concat(fg,":add"),mg="".concat(fg,":remove"),vg="".concat(fg,":update"),yg="".concat(cg,"layer:select"),_g="".concat(cg,"target"),Og="".concat(cg,"custom"),bg=function(t){return t||0===t},wg={all:lg,sectorAdd:pg,sectorRemove:hg,sectorUpdate:dg,propertyAdd:gg,propertyRemove:mg,propertyUpdate:vg,layerSelect:yg,target:_g,custom:Og},xg=function(n){function o(e){var o=n.call(this,e,'StyleManager',new zf([],{em:e}),wg,Yh)||this;o.Sector=Wf,o.storageKey='',(0,t.bindAll)(o,'__clearStateTarget');var i=o.config,r=i.pStylePrefix;r&&(i.stylePrefix=r+i.stylePrefix),o.builtIn=new Gf,o.properties=new Mf([],{em:e,module:o}),o.sectors=o.all;var s=new l.Hn({targets:[]});o.model=s;o.upAll=(0,t.debounce)((function(){return o.__upSel()}),0),s.listenTo(e,'component:toggled component:update:classes change:state change:device frame:resized selector:type',o.upAll),s.listenTo(e,'component:toggled',o.__clearStateTarget);var a=(0,t.debounce)((function(){o.__upProps(),o.__trgCustom()}),0);s.listenTo(e,'styleable:change undo redo',a);var c=(0,t.debounce)((function(){return o.__trgCustom()}),0);return s.listenTo(e,"".concat(yg," ").concat(_g),c),s.on('change:lastTarget',(function(){return e.trigger(_g,o.getSelected())})),o}return rg(o,n),o.prototype.__upSel=function(){this.select(this.em.getSelectedAll())},o.prototype.__trgCustom=function(t){void 0===t&&(t={}),this.__ctn=this.__ctn||t.container,this.em.trigger(this.events.custom,{container:this.__ctn})},o.prototype.__trgEv=function(t){for(var e,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];(e=this.em).trigger.apply(e,ag([t],n,!1))},o.prototype.__clearStateTarget=function(){var t=this,e=this.em,n=this.__getStateTarget();n&&(null==e||e.skip((function(){e.Css.remove(n),t.model.set({stateTarget:null})})))},o.prototype.onLoad=function(){this.sectors.add(this.config.sectors,{silent:!0})},o.prototype.postRender=function(){this.__appendTo()},o.prototype.addSector=function(t,e,n){void 0===n&&(n={});var o=this.getSector(t);return o||(e.id=t,o=this.sectors.add(e,n)),o},o.prototype.getSector=function(t,e){void 0===e&&(e={});var n=this.sectors.where({id:t})[0];return!n&&e.warn&&this._logNoSector(t),n||null},o.prototype.getSectors=function(t){void 0===t&&(t={});var e=this.sectors,n=e&&e.models?t.array?ag([],e.models,!0):e:[];return t.visible?n.filter((function(t){return t.isVisible()})):n},o.prototype.removeSector=function(t){return this.getSectors().remove(this.getSector(t,{warn:!0}))},o.prototype.addProperty=function(t,e,n){void 0===n&&(n={});var o,i=this.getSector(t,{warn:!0});return i&&(o=i.addProperty(e,n)),o},o.prototype.getProperty=function(t,e){var n,o=this.getSector(t,{warn:!0});return o&&(n=o.properties.filter((function(t){return t.get('property')===e||t.get('id')===e}))[0]),n},o.prototype.getProperties=function(t){var e,n=this.getSector(t,{warn:!0});return n&&(e=n.properties),e},o.prototype.removeProperty=function(t,e){var n=this.getProperties(t);return n?n.remove(this.getProperty(t,e)):null},o.prototype.select=function(n,o){var i=this;void 0===o&&(o={});var r=this.em,s=(0,t.isArray)(n)?n:[n],a=o.stylable,l=r.Css,c=[];s.filter(Boolean).forEach((function(e){var n=e;if((0,t.isString)(e)){var o=l.getRule(e)||l.setRule(e);!(0,t.isUndefined)(a)&&o.set({stylable:a}),n=o}c.push(n)}));var u=o.component||c.filter((function(t){return(0,e.isComponent)(t)})).reverse()[0];c=c.map((function(t){return i.getModelToStyle(t)}));var p=r.getState(),h=c.slice().reverse()[0],d=this.getParentRules(h,{state:p,component:u}),f=this.__getStateTarget();return r.skip((function(){var t;if(p&&(null===(t=null==h?void 0:h.getState)||void 0===t?void 0:t.call(h))){var e=h.getStyle();f?f.setStyle(e):f=l.getAll().add({selectors:'gjs-selected',style:e,shallow:!0,important:!0})}else f&&(l.remove(f),f=void 0)})),this.model.set({targets:c,lastTarget:h,lastTargetParents:d,stateTarget:f,component:u}),this.__upProps(o),c},o.prototype.getSelected=function(){return this.model.get('lastTarget')},o.prototype.getSelectedAll=function(){return this.model.get('targets')},o.prototype.getSelectedParents=function(){return this.model.get('lastTargetParents')||[]},o.prototype.__getStateTarget=function(){return this.model.get('stateTarget')},o.prototype.addStyleTargets=function(t,e){this.getSelectedAll().map((function(n){return n.addStyle(t,e)}));var n=this.getSelected();n&&this.__emitCmpStyleUpdate(t);var o=this.__getStateTarget();n&&(null==o||o.setStyle(n.getStyle(),e))},o.prototype.getBuiltIn=function(t){return this.builtIn.get(t)},o.prototype.getBuiltInAll=function(){return this.builtIn.props},o.prototype.addBuiltIn=function(t,e){return this.builtIn.add(t,e)},o.prototype.getModelToStyle=function(t,e){void 0===e&&(e={});var n=this.em,o=e.skipAdd;if(n&&(null==t?void 0:t.toHTML)){var i=n.getConfig(),r=n.UndoManager,s=n.Css,a=n.Selectors,l=a?a.getConfig():{},c=i.devicePreviewMode?'':n.get('state'),u=t.get('classes').getStyleable(),p=u.length,h=!l.componentFirst||e.useClasses,d={noCount:1},f={state:c,addOpts:d};r.skip((function(){var e;if(p&&h){var r=n.getCurrentMedia();(e=s.get(u,c,r))||o||(e=s.add(u,c,r,{},d))}else if(i.avoidInlineStyle){var a=t.getId();!(e=s.getIdRule(a,f))&&!o&&(e=s.setIdRule(a,{},f)),t.is('wrapper')&&e.set('wrapper',1,d)}e&&(t=e)}))}return t},o.prototype.getParentRules=function(e,n){var o=void 0===n?{}:n,i=o.state,r=o.component,s=this.em,a=[];if(s&&e){var l=r,c=s.Css,u=s.CodeManager.getGenerator('css'),p=e.toHTML?e:e.getComponent(),h={array:!0},d=[],f=[],g=[],m=function(t){return c.getRules().filter((function(e){return e.getSelectors().map((function(t){return t.getFullName()})).every((function(e){return t.indexOf(e)>=0}))}))};p?(d=c.getRules("#".concat(p.getId())),g=(f=l?m(l.getSelectors().getFullName(h)):[]).concat(d)):(d=l?c.getRules("#".concat(l.getId())):[],f=m(e.getSelectors().getFullName(h)),g=d.concat(f));var v=g.filter((function(e){return(0,t.isUndefined)(i)?1:e.get('state')===i})).sort(u.sortRules).reverse();a=v.slice(v.indexOf(e)+1)}return a},o.prototype.addType=function(t,e){this.properties.addType(t,e)},o.prototype.getType=function(t){return this.properties.getType(t)},o.prototype.getTypes=function(){return this.properties.getTypes()},o.prototype.createType=function(t,e){var n=void 0===e?{}:e,o=n.model,i=void 0===o?{}:o,r=n.view,s=void 0===r?{}:r,a=this.config,l=this.getType(t);if(l)return new l.view(sg({model:new l.model(i),config:a},s))},o.prototype.render=function(){var t=this,e=t.config,n=t.em,o=t.SectView,i=o&&o.el;return this.SectView=new ig({el:i,em:n,config:e,module:this,collection:this.sectors}),this.SectView.render().el},o.prototype._logNoSector=function(t){var e=this.em;e&&e.logWarning("'".concat(t,"' sector not found"))},o.prototype.__emitCmpStyleUpdate=function(t,e){void 0===e&&(e={});var n=this.em;if(!t.__p){var o=this.getSelectedAll(),i=e.components||n.getSelectedAll(),r=Array.isArray(i)?i:[i],s=sg({},t);delete s.__p,r.forEach((function(t){return!o.includes(t)&&t.__onStyleChange(s)}))}},o.prototype.__upProps=function(t){var e=this;void 0===t&&(t={});var n=this.getSelected();if(n){var o=this.sectors,i=this.model.get('component'),r=this.getSelectedParents(),s=n.getStyle(),a=r.map((function(t){return{target:t,style:t.getStyle()}}));o.map((function(n){n.getProperties().map((function(n){e.__upProp(n,s,a,t)}))})),o.forEach((function(t){var e=t.getProperties();e.forEach((function(t){var e=t.__checkVisibility({target:n,component:i,sectors:o});t.set('visible',e)}));var r=e.some((function(t){return t.isVisible()}));t.set('visible',r)}))}},o.prototype.__upProp=function(t,e,n,o){var i=this,r=t.getName(),s=e[r],a=bg(s),l='stack'===t.getType(),c='composite'===t.getType(),u=sg(sg({},o),{__up:!0}),p=!c&&!l,h=t,d=t,f=l?h.__getLayersFromStyle(e):[],g=c?d.__getPropsFromStyle(e):{},m=a?s:null,v=null;if(l&&null===f||c&&null===g){var y=l?'__getLayersFromStyle':'__getPropsFromStyle';if(O=n.filter((function(t){return null!==h[y](t.style)}))[0]){m=O.style[r],v=O.target;var _=h[y](O.style);l?f=_:g=_}}else if(!a){var O;m=null,(O=n.filter((function(t){return bg(t.style[r])}))[0])&&(m=O.style[r],v=O.target)}if(t.__setParentTarget(v),p&&t.__getFullValue()!==m&&t.upValue(m,u),l&&h.__setLayers(f||[],{isEmptyValue:h.isEmptyValueStyle(e)}),c){var b=d.getProperties();if(d.isDetached()){var w=d.__getPropsFromStyle(e,{byName:!0})||{},x=n.map((function(t){return sg(sg({},t),{style:d.__getPropsFromStyle(t.style,{byName:!0})||{}})}));b.map((function(t){return i.__upProp(t,w,x,o)}))}else d.__setProperties(g||{},u),d.getProperties().map((function(t){return t.__setParentTarget(v)}))}},o.prototype.destroy=function(){var t;[this.properties,this.sectors].forEach((function(t){t.reset(),t.stopListening()})),null===(t=this.SectView)||void 0===t||t.remove(),this.model.stopListening(),this.upAll.cancel()},o}(v);const Sg=xg;var kg=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Pg=void 0&&(void 0).__assign||function(){return Pg=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Pg.apply(this,arguments)},Cg=void 0&&(void 0).__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function s(t){try{l(o.next(t))}catch(t){r(t)}}function a(t){try{l(o["throw"](t))}catch(t){r(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((o=o.apply(t,e||[])).next())}))},Tg=void 0&&(void 0).__generator||function(t,e){var n,o,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,a[0]&&(s=0)),s;)try{if(n=1,o&&(i=2&a[0]?o["return"]:a[0]?o["throw"]||((i=o["return"])&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,o=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},Eg=void 0&&(void 0).__rest||function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(t);i<o.length;i++)e.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(t,o[i])&&(n[o[i]]=t[o[i]])}return n},Ag=void 0&&(void 0).__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))};r().$=s["default"];var Qg=[ju,bu,ip,Ph,ul,z,Ta,Sg,oa,fp,mh,Fp,qh,vl,Fl,fe,jl,ws],$g=[Yc,zr,mu,kr];!function(e){var n=e.$;if(n&&n.prototype&&'jQuery'!==n.prototype.constructor.name){var o=n.fn;o.hide=function(){return this.css('display','none')},o.show=function(){return this.css('display','block')},o.focus=function(){var t=this.get(0);return t&&t.focus(),this},o.bind=function(t,e){return this.on(t,e)},o.unbind=function(e,n){if((0,t.isObject)(e)){for(var o in e)e.hasOwnProperty(o)&&this.off(o,e[o]);return this}return this.off(e,n)},o.click=function(t){return t?this.on('click',t):this.trigger('click')},o.change=function(t){return t?this.on('change',t):this.trigger('change')},o.keydown=function(t){return t?this.on('keydown',t):this.trigger('keydown')},o.delegate=function(t,e,n,o){return o||(o=n),this.on(e,t,(function(t){t.data=n,o(t)}))},o.scrollLeft=function(){var t=this.get(0),e=(t=9==t.nodeType?t.defaultView:t)instanceof Window?t:null;return e?e.pageXOffset:t.scrollLeft||0},o.scrollTop=function(){var t=this.get(0),e=(t=9==t.nodeType?t.defaultView:t)instanceof Window?t:null;return e?e.pageYOffset:t.scrollTop||0};var i=n.prototype.offset;o.offset=function(t){var e,n;return t&&(e=t.top,n=t.left),void 0!==e&&this.css('top',"".concat(e,"px")),void 0!==n&&this.css('left',"".concat(n,"px")),i.call(this)},n.map=function(t,e){for(var n=[],o=0;o<t.length;o++)n.push(e(t[o],o));return n};var r=Array.prototype.indexOf;n.inArray=function(t,e,n){return null==e?-1:r.call(e,t,n)},n.Event=function(t,e){if(!(this instanceof n.Event))return new n.Event(t,e);this.type=t,this.isDefaultPrevented=function(){return!1}}}}({$:s["default"]});var jg={debug:console.log,info:console.info,warning:console.warn,error:console.error},Rg=function(n){function o(e){void 0===e&&(e={});var o=n.call(this)||this;o.__skip=!1,o.defaultRunning=!1,o.destroyed=!1,o._config=e;var i=o.config;o.set('Config',e),o.set('modules',[]),o.set('toLoad',[]),o.set('storables',[]),o.set('selected',new p),o.set('dmode',i.dragMode);var r=i.el,s=i.log,a=!0===s?(0,t.keys)(jg):(0,t.isArray)(s)?s:[];return(0,t.bindAll)(o,'initBaseColorPicker'),r&&i.fromElement&&(i.components=r.innerHTML),o.attrsOrig=r?(0,t.toArray)(r.attributes).reduce((function(t,e){return t[e.nodeName]=e.nodeValue,t}),{}):'',i.components&&!i.pageManager&&(i.pageManager={pages:[{component:i.components}]}),Qg.forEach((function(t){return o.loadModule(t)})),$g.forEach((function(t){return o.loadStorableModule(t)})),o.on('change:componentHovered',o.componentHovered,o),o.on('change:changesCount',o.updateChanges,o),o.on('change:readyLoad change:readyCanvas',o._checkReady,o),a.forEach((function(t){return o.listenLog(t)})),[{from:'change:selectedComponent',to:'component:toggled'}].forEach((function(t){var e=t.from,n=t.to;o.listenTo(o,e,(function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];o.trigger.apply(o,Ag([n],t,!1)),o.logWarning("The event '".concat(e,"' is deprecated, replace it with '").concat(n,"'"))}))})),o}return kg(o,n),o.prototype.defaults=function(){return{editing:0,selected:0,clipboard:null,dmode:0,componentHovered:null,previousModel:null,changesCount:0,storables:[],modules:[],toLoad:[],opened:{},device:''}},Object.defineProperty(o.prototype,"storables",{get:function(){return this.get('storables')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"modules",{get:function(){return this.get('modules')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"toLoad",{get:function(){return this.get('toLoad')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"selected",{get:function(){return this.get('selected')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"shallow",{get:function(){return this.get('shallow')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"I18n",{get:function(){return this.get('I18n')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Utils",{get:function(){return this.get('Utils')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Commands",{get:function(){return this.get('Commands')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Keymaps",{get:function(){return this.get('Keymaps')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Modal",{get:function(){return this.get('Modal')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Panels",{get:function(){return this.get('Panels')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"CodeManager",{get:function(){return this.get('CodeManager')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"UndoManager",{get:function(){return this.get('UndoManager')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"RichTextEditor",{get:function(){return this.get('RichTextEditor')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Canvas",{get:function(){return this.get('Canvas')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Editor",{get:function(){return this.get('Editor')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Components",{get:function(){return this.get('DomComponents')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Css",{get:function(){return this.get('CssComposer')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Blocks",{get:function(){return this.get('BlockManager')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Selectors",{get:function(){return this.get('SelectorManager')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Storage",{get:function(){return this.get('StorageManager')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Traits",{get:function(){return this.get('TraitManager')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Parser",{get:function(){return this.get('Parser')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Layers",{get:function(){return this.get('LayerManager')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Assets",{get:function(){return this.get('AssetManager')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Devices",{get:function(){return this.get('DeviceManager')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Pages",{get:function(){return this.get('PageManager')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Styles",{get:function(){return this.get('StyleManager')},enumerable:!1,configurable:!0}),o.prototype._checkReady=function(){this.get('readyLoad')&&this.get('readyCanvas')&&!this.get('ready')&&this.set('ready',!0)},o.prototype.getContainer=function(){return this.config.el},o.prototype.listenLog=function(t){this.listenTo(this,"log:".concat(t),jg[t])},Object.defineProperty(o.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),o.prototype.getConfig=function(e){var n=this.config;return(0,t.isUndefined)(e)?n:n[e]},o.prototype.loadOnStart=function(){var t=this,e=this.config,n=e.projectData,i=e.headless,r=this.Storage;this.toLoad.reverse().forEach((function(t){return t.onLoad()}));var s=function(){t.modules.forEach((function(e){return e.postLoad&&e.postLoad(t)})),t.set('readyLoad',1)};i?(n&&this.loadData(n),s()):this._storageTimeout=setTimeout((function(){return Cg(t,void 0,void 0,(function(){var t;return Tg(this,(function(e){switch(e.label){case 0:return n?(this.loadData(n),[3,5]):[3,1];case 1:if(!(null==r?void 0:r.canAutoload()))return[3,5];e.label=2;case 2:return e.trys.push([2,4,,5]),[4,this.load()];case 3:return e.sent(),[3,5];case 4:return t=e.sent(),this.logError(t),[3,5];case 5:return s(),[2]}}))}))}));var a=new o({noticeOnUnload:!1,storageManager:!1,undoManager:!1});a.Pages.onLoad(),a.Canvas.postLoad(),this.set('shallow',a)},o.prototype.updateChanges=function(t,e,n){var o=this,i=this.Storage,r=this.getDirtyCount();n.isClear||(this.updateItr&&clearTimeout(this.updateItr),this.updateItr=setTimeout((function(){return o.trigger('update')}))),this.config.noticeOnUnload&&(window.onbeforeunload=r?function(){return!0}:null),i.isAutosave()&&r>=i.getStepsBeforeSave()&&this.store().catch((function(t){return o.logError(t)}))},o.prototype.loadModule=function(t){var e=new t(this);return this.set(e.name,e),e.onLoad&&this.toLoad.push(e),this.modules.push(e),e},o.prototype.loadStorableModule=function(t){var e=this.loadModule(t);return this.storables.push(e),e},o.prototype.init=function(t,e){void 0===e&&(e={}),this.destroyed&&(this.initialize(e),this.destroyed=!1),this.set('Editor',t)},o.prototype.getEditor=function(){return this.get('Editor')},o.prototype.handleUpdates=function(t,e,n){var o=this;void 0===n&&(n={}),this.__skip||n.temporary||n.noCount||n.avoidStore||!this.get('ready')||(this.timedInterval&&clearTimeout(this.timedInterval),this.timedInterval=setTimeout((function(){var t=o.getDirtyCount()||0,e=(n.unset,Eg(n,["unset"]));o.set('changesCount',t+1,e)}),0))},o.prototype.changesUp=function(t){this.handleUpdates(0,0,t)},o.prototype.componentHovered=function(t,e,n){var o=this.previous('componentHovered');o&&this.trigger('component:unhovered',o,n),e&&this.trigger('component:hovered',e,n)},o.prototype.getSelected=function(){return this.selected.lastComponent()},o.prototype.getSelectedAll=function(){return this.selected.allComponents()},o.prototype.setSelected=function(e,n){var o=this;void 0===n&&(n={});var i=n.event,r=i&&(i.ctrlKey||i.metaKey),s=(i||{}).shiftKey,a=((0,t.isArray)(e)?e:[e]).map((function(t){var e,n;return(null===(n=null===(e=null==t?void 0:t.delegate)||void 0===e?void 0:e.select)||void 0===n?void 0:n.call(e,t))||t})).filter(Boolean),l=this.getSelectedAll(),c=this.getConfig().multipleSelection,u=(0,t.isArray)(e);!u&&e||this.removeSelected(l.filter((function(e){return!(0,t.contains)(a,e)}))),a.forEach((function(e){if(e&&(o.trigger('component:select:before',e,n),!e.get('selectable')||n.abort)){if(!n.useValid)return;for(var i=e.parent();i&&!i.get('selectable');)i=i.parent();e=i}if(r&&c)return o.toggleSelected(e);if(s&&c){o.clearSelection(o.Canvas.getWindow());var a,p,h=e.collection,d=e.index();if(o.getSelectedAll().forEach((function(e){var n=e.collection,o=e.index();n===h&&(o<d?a=(0,t.isUndefined)(a)?o:Math.max(a,o):o>d&&(p=(0,t.isUndefined)(p)?o:Math.min(p,o)))})),!(0,t.isUndefined)(a))for(;a!==d;)o.addSelected(h.at(a)),a++;if(!(0,t.isUndefined)(p))for(;p!==d;)o.addSelected(h.at(p)),p--;return o.addSelected(e)}!u&&o.removeSelected(l.filter((function(t){return t!==e}))),o.addSelected(e,n)}))},o.prototype.addSelected=function(e,n){var o=this;void 0===n&&(n={}),((0,t.isArray)(e)?e:[e]).forEach((function(e){var i=o.selected;e&&e.get('selectable')&&!e.parents().some((function(t){return i.hasComponent(t)}))&&(n.forceChange&&o.removeSelected(e,n),i.allComponents().filter((function(n){return(0,t.contains)(n.parents(),e)})).forEach((function(t){return o.removeSelected(t,n)})),i.addComponent(e,n),o.trigger('component:select',e,n),o.Canvas.addSpot({type:ct.q.Select,component:e}))}))},o.prototype.removeSelected=function(e,n){var o=this;void 0===n&&(n={}),this.selected.removeComponent(e,n),((0,t.isArray)(e)?e:[e]).forEach((function(t){return o.Canvas.removeSpots({type:ct.q.Select,component:t})}))},o.prototype.toggleSelected=function(e,n){var o=this;void 0===n&&(n={}),((0,t.isArray)(e)?e:[e]).forEach((function(t){o.selected.hasComponent(t)?o.removeSelected(t,n):o.addSelected(t,n)}))},o.prototype.setHovered=function(t,e){var n=this;void 0===e&&(e={});var o=function(t,e){var o=n,i=o.config,r=o.Canvas,s=n.getHovered(),a=n.getSelectedAll(),l=ct.q.Hover,c=ct.q.Spacing;n.set('componentHovered',t||null,e),s&&(r.removeSpots({type:l,component:s}),r.removeSpots({type:c,component:s})),t&&(r.addSpot({type:l,component:t}),a.includes(t)&&!i.showOffsetsSelected||r.addSpot({type:c,component:t}))};if(!t)return o();var i='component:hover';if(e.forceChange&&o(),this.trigger("".concat(i,":before"),t,e),!t.get('hoverable')){if(!e.useValid||e.abort)return;for(var r=t.parent();r&&!r.get('hoverable');)r=r.parent();t=r}e.abort||(o(t,e),this.trigger(i,t,e))},o.prototype.getHovered=function(){return this.get('componentHovered')},o.prototype.setComponents=function(t,e){return void 0===e&&(e={}),this.Components.setComponents(t,e)},o.prototype.getComponents=function(){var t=this.Components,e=this.CodeManager;if(t&&e){var n=t.getComponents();return e.getCode(n,'json')}},o.prototype.setStyle=function(t,e){void 0===e&&(e={});var n=this.Css;return n.clear(e),n.getAll().add(t,e),this},o.prototype.addStyle=function(e,n){void 0===n&&(n={});var o=this.getStyle().add(e,n);return(0,t.isArray)(o)?o:[o]},o.prototype.getStyle=function(){return this.Css.getAll()},o.prototype.setState=function(t){return this.set('state',t),this},o.prototype.getState=function(){return this.get('state')||''},o.prototype.getHtml=function(t){void 0===t&&(t={});var e=this.config,n=e.optsHtml,o=e.jsInHtml?this.getJs(t):'',i=t.component||this.Components.getComponent(),r=i?this.CodeManager.getCode(i,'html',Pg(Pg({},n),t)):'';return r+=o?"<script>".concat(o,"<\/script>"):''},o.prototype.getCss=function(e){void 0===e&&(e={});var n=this.config,o=n.optsCss,i=e.avoidProtected,r=(0,t.isUndefined)(e.keepUnusedStyles)?n.keepUnusedStyles:e.keepUnusedStyles,s=this.Css,a=e.component||this.Components.getComponent(),l=i?'':n.protectedCss,c=a&&this.CodeManager.getCode(a,'css',Pg(Pg({cssc:s,keepUnusedStyles:r},o),e));return a?e.json?c:l+c:''},o.prototype.getJs=function(t){void 0===t&&(t={});var e=t.component||this.Components.getWrapper();return e?this.CodeManager.getCode(e,'js').trim():''},o.prototype.store=function(t){return Cg(this,void 0,void 0,(function(){var e;return Tg(this,(function(n){switch(n.label){case 0:return e=this.storeData(),[4,this.Storage.store(e,t)];case 1:return n.sent(),this.clearDirtyCount(),[2,e]}}))}))},o.prototype.load=function(t,n){return void 0===n&&(n={}),Cg(this,void 0,void 0,(function(){var o;return Tg(this,(function(i){switch(i.label){case 0:return[4,this.Storage.load(t)];case 1:return o=i.sent(),this.loadData(o),[4,(0,e.wait)()];case 2:return i.sent(),n.clear&&(this.UndoManager.clear(),this.clearDirtyCount()),[2,o]}}))}))},o.prototype.storeData=function(){var t={},e=this.getEditing();return e&&e.trigger('sync:content',{noCount:!0}),this.storables.forEach((function(e){t=Pg(Pg({},t),e.store(1))})),console.log(t),JSON.parse(JSON.stringify(t))},o.prototype.loadData=function(t){return void 0===t&&(t={}),(0,e.isEmptyObj)(t)||(this.storables.forEach((function(t){return t.clear()})),this.storables.forEach((function(e){return e.load(t)}))),t},o.prototype.getDeviceModel=function(){var t=this.get('device');return this.Devices.get(t)},o.prototype.runDefault=function(t){void 0===t&&(t={});var e=this.get('Commands').get(this.config.defaultCommand);e&&!this.defaultRunning&&(e.stop(this,this,t),e.run(this,this,t),this.defaultRunning=!0)},o.prototype.stopDefault=function(t){void 0===t&&(t={});var e=this.get('Commands').get(this.config.defaultCommand);e&&this.defaultRunning&&(e.stop(this,this,t),this.defaultRunning=!1)},o.prototype.refreshCanvas=function(t){void 0===t&&(t={}),this.set('canvasOffset',null),this.set('canvasOffset',this.Canvas.getOffset()),t.tools&&this.trigger('canvas:updateTools')},o.prototype.clearSelection=function(t){var e;null===(e=(t||window).getSelection())||void 0===e||e.removeAllRanges()},o.prototype.getCurrentMedia=function(){var t=this.config,e=this.getDeviceModel(),n=t.mediaCondition,o=t.devicePreviewMode,i=e&&e.get('widthMedia');return e&&i&&!o?"(".concat(n,": ").concat(i,")"):''},o.prototype.getWrapper=function(){return this.Components.getWrapper()},o.prototype.setCurrentFrame=function(t){return this.set('currentFrame',t)},o.prototype.getCurrentFrame=function(){return this.get('currentFrame')},o.prototype.getCurrentFrameModel=function(){var t;return null===(t=this.getCurrentFrame()||{})||void 0===t?void 0:t.model},o.prototype.getIcon=function(t){return(this.config.icons||{})[t]||''},o.prototype.getDirtyCount=function(){return this.get('changesCount')},o.prototype.clearDirtyCount=function(){return this.set({changesCount:0},{isClear:!0})},o.prototype.getZoomDecimal=function(){return this.Canvas.getZoomDecimal()},o.prototype.getZoomMultiplier=function(){return this.Canvas.getZoomMultiplier()},o.prototype.setDragMode=function(t){return this.set('dmode',t)},o.prototype.getDragMode=function(t){return(null==t?void 0:t.getDragMode())||this.get('dmode')||''},o.prototype.t=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.get('I18n');return null==n?void 0:n.t.apply(n,t)},o.prototype.inAbsoluteMode=function(t){return'absolute'===this.getDragMode(t)},o.prototype.destroyAll=function(){var t=this,n=this.config,o=this.view,i=this.getEditor(),r=(n.grapesjs||{}).editors,a=void 0===r?[]:r,l=this.get('shallow');this._storageTimeout&&clearTimeout(this._storageTimeout),null==l||l.destroyAll(),this.stopListening(),this.stopDefault(),this.modules.slice().reverse().forEach((function(t){return t.destroy()})),o&&o.remove(),this.clear({silent:!0}),this.destroyed=!0,['_config','view','_previousAttributes','_events','_listeners'].forEach((function(e){return t[e]={}})),a.splice(a.indexOf(i),1),(0,e.hasWin)()&&(0,s["default"])(n.el).empty().attr(this.attrsOrig)},o.prototype.getEditing=function(){var t=this.get('editing');return t&&t.model||void 0},o.prototype.setEditing=function(t){return this.set('editing',t),this},o.prototype.isEditing=function(){return!!this.get('editing')},o.prototype.log=function(t,e){void 0===e&&(e={});var n=e.ns,o=e.level,i=void 0===o?'debug':o;if(this.trigger('log',t,e),i&&this.trigger("log:".concat(i),t,e),n){var r="log-".concat(n);this.trigger(r,t,e),i&&this.trigger("".concat(r,":").concat(i),t,e)}},o.prototype.logInfo=function(t,e){this.log(t,Pg(Pg({},e),{level:'info'}))},o.prototype.logWarning=function(t,e){this.log(t,Pg(Pg({},e),{level:'warning'}))},o.prototype.logError=function(t,e){this.log(t,Pg(Pg({},e),{level:'error'}))},o.prototype.initBaseColorPicker=function(t,e){void 0===e&&(e={});var n=this.config,o=n.colorPicker,i=void 0===o?{}:o,r=n.el,a=n.stylePrefix;return(0,s["default"])(t).spectrum(Pg(Pg({containerClassName:"".concat(a,"one-bg ").concat(a,"two-color"),appendTo:r||'body',maxSelectionSize:8,showPalette:!0,palette:[],showAlpha:!0,chooseText:'Ok',cancelText:'⨯'},e),i))},o.prototype.skip=function(t){this.__skip=!0;var e=this.UndoManager;e?e.skip(t):t(),this.__skip=!1},o.prototype.data=function(e,n,o){var i='_gjs-data';if(e[i]||(e[i]={}),(0,t.isUndefined)(o))return e[i][n];e[i][n]=o},o}(l.Hn);const Mg=Rg;var Vg=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Zg=function(t){function n(e){var n=t.call(this,{model:e})||this,o=e.attributes,i=o.Panels,r=o.UndoManager;return e.view=n,e.once('change:ready',(function(){i.active(),i.disableButtons(),r.clear(),setTimeout((function(){e.trigger('load',e.get('Editor')),e.clearDirtyCount()}))})),n}return Vg(n,t),n.prototype.render=function(){var t=this,n=this.$el,o=this.model,i=o.attributes,r=i.Panels,a=i.Canvas,l=o.config,c=o.modules,u=l.stylePrefix,p=["".concat(u,"editor")];!l.customUI&&p.push("".concat(u,"one-bg ").concat(u,"two-color"));var h=(0,s["default"])(l.el||"body ".concat(l.container));l.cssIcons&&(0,e.appendStyles)(l.cssIcons,{unique:!0,prepand:!0}),n.empty(),l.width&&h.css('width',l.width),l.height&&h.css('height',l.height),n.append(a.render()),n.append(r.render());var d=o.get('shallow').get('Canvas').render();return d.style.display='none',n.append(d),n.attr('class',p.join(' ')),h.addClass("".concat(u,"editor-cont")).empty().append(n),c.forEach((function(e){return e.postRender&&e.postRender(t)})),this},n}(l.G7);const Dg=Zg;var Ig=void 0&&(void 0).__assign||function(){return Ig=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Ig.apply(this,arguments)},Ng=void 0&&(void 0).__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function s(t){try{l(o.next(t))}catch(t){r(t)}}function a(t){try{l(o["throw"](t))}catch(t){r(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((o=o.apply(t,e||[])).next())}))},Wg=void 0&&(void 0).__generator||function(t,e){var n,o,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,a[0]&&(s=0)),s;)try{if(n=1,o&&(i=2&a[0]?o["return"]:a[0]?o["throw"]||((i=o["return"])&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,o=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},Xg=void 0&&(void 0).__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))},Lg=function(){function t(t,e){var i;void 0===t&&(t={}),void 0===e&&(e={}),this.html=n,this.config=Ig(Ig(Ig({},o),t),{pStylePrefix:null!==(i=t.stylePrefix)&&void 0!==i?i:o.stylePrefix}),this.em=new Mg(this.config),this.$=e.$,this.em.init(this),this.editor=this.em}return Object.defineProperty(t.prototype,"Config",{get:function(){return this.em.config},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"I18n",{get:function(){return this.em.I18n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Utils",{get:function(){return this.em.Utils},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Commands",{get:function(){return this.em.Commands},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Keymaps",{get:function(){return this.em.Keymaps},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Modal",{get:function(){return this.em.Modal},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Panels",{get:function(){return this.em.Panels},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Canvas",{get:function(){return this.em.Canvas},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Parser",{get:function(){return this.em.Parser},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"CodeManager",{get:function(){return this.em.CodeManager},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"UndoManager",{get:function(){return this.em.UndoManager},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"RichTextEditor",{get:function(){return this.em.RichTextEditor},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Pages",{get:function(){return this.em.Pages},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Components",{get:function(){return this.em.Components},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"DomComponents",{get:function(){return this.em.Components},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Layers",{get:function(){return this.em.Layers},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"LayerManager",{get:function(){return this.em.Layers},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Css",{get:function(){return this.em.Css},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"CssComposer",{get:function(){return this.em.Css},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Storage",{get:function(){return this.em.Storage},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"StorageManager",{get:function(){return this.em.Storage},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Assets",{get:function(){return this.em.Assets},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"AssetManager",{get:function(){return this.em.Assets},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Blocks",{get:function(){return this.em.Blocks},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"BlockManager",{get:function(){return this.em.Blocks},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Traits",{get:function(){return this.em.Traits},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"TraitManager",{get:function(){return this.em.Traits},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Selectors",{get:function(){return this.em.Selectors},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"SelectorManager",{get:function(){return this.em.Selectors},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Styles",{get:function(){return this.em.Styles},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"StyleManager",{get:function(){return this.em.Styles},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Devices",{get:function(){return this.em.Devices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"DeviceManager",{get:function(){return this.em.Devices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"EditorModel",{get:function(){return this.em},enumerable:!1,configurable:!0}),t.prototype.getConfig=function(t){return this.em.getConfig(t)},t.prototype.getHtml=function(t){return this.em.getHtml(t)},t.prototype.getCss=function(t){return this.em.getCss(t)},t.prototype.getJs=function(t){return this.em.getJs(t)},t.prototype.getComponents=function(){return this.Components.getComponents()},t.prototype.getWrapper=function(){return this.Components.getWrapper()},t.prototype.setComponents=function(t,e){return void 0===e&&(e={}),this.em.setComponents(t,e),this},t.prototype.addComponents=function(t,e){return this.getWrapper().append(t,e)},t.prototype.getStyle=function(){return this.em.Css.getAll()},t.prototype.setStyle=function(t,e){return void 0===e&&(e={}),this.em.setStyle(t,e),this},t.prototype.addStyle=function(t,e){return void 0===e&&(e={}),this.em.addStyle(t,e)},t.prototype.getSelected=function(){return this.em.getSelected()},t.prototype.getSelectedAll=function(){return this.em.getSelectedAll()},t.prototype.getSelectedToStyle=function(){var t=this.em.getSelected();if(t)return this.StyleManager.getModelToStyle(t)},t.prototype.select=function(t,e){return this.em.setSelected(t,e),this},t.prototype.selectAdd=function(t){return this.em.addSelected(t),this},t.prototype.selectRemove=function(t){return this.em.removeSelected(t),this},t.prototype.selectToggle=function(t){return this.em.toggleSelected(t),this},t.prototype.getEditing=function(){return this.em.getEditing()},t.prototype.setDevice=function(t){return this.em.set('device',t),this},t.prototype.getDevice=function(){return this.em.get('device')},t.prototype.runCommand=function(t,e){return void 0===e&&(e={}),this.Commands.run(t,e)},t.prototype.stopCommand=function(t,e){return void 0===e&&(e={}),this.Commands.stop(t,e)},t.prototype.store=function(t){return Ng(this,void 0,void 0,(function(){return Wg(this,(function(e){switch(e.label){case 0:return[4,this.em.store(t)];case 1:return[2,e.sent()]}}))}))},t.prototype.load=function(t,e){return void 0===e&&(e={}),Ng(this,void 0,void 0,(function(){return Wg(this,(function(n){switch(n.label){case 0:return[4,this.em.load(t,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.getProjectData=function(){return this.em.storeData()},t.prototype.loadProjectData=function(t){return this.em.loadData(t)},t.prototype.storeData=function(){return this.em.storeData()},t.prototype.loadData=function(t){return this.em.loadData(t)},t.prototype.getContainer=function(){return this.config.el},t.prototype.getDirtyCount=function(){return this.em.getDirtyCount()},t.prototype.clearDirtyCount=function(){return this.em.clearDirtyCount()},t.prototype.refresh=function(t){this.em.refreshCanvas(t)},t.prototype.setCustomRte=function(t){this.RichTextEditor.customRte=t},t.prototype.setCustomParserCss=function(t){return this.Parser.getConfig().parserCss=t,this},t.prototype.setDragMode=function(t){return this.em.setDragMode(t),this},t.prototype.log=function(t,e){return void 0===e&&(e={}),this.em.log(t,e),this},t.prototype.t=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this.em).t.apply(t,e)},t.prototype.on=function(t,e){return this.em.on(t,e),this},t.prototype.once=function(t,e){return this.em.once(t,e),this},t.prototype.off=function(t,e){return this.em.off(t,e),this},t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return this.em.trigger.apply(this.em,Xg([t],e,!0)),this},t.prototype.destroy=function(){this.em&&(this.em.destroyAll(),this.editorView=void 0)},t.prototype.getEl=function(){var t;return null===(t=this.editorView)||void 0===t?void 0:t.el},t.prototype.getModel=function(){return this.em},t.prototype.render=function(){var t;return null===(t=this.editorView)||void 0===t||t.remove(),this.editorView=new Dg(this.em),this.editorView.render().el},t.prototype.onReady=function(t){this.em.get('ready')?t(this):this.em.on('load',t)},t}();const zg=Lg;var Ug=function(n,o){return(0,t.isString)(n)?function(t,n){var o=n.get(t);if(!o){var i=(0,e.getGlobal)()[t];o=(null==i?void 0:i.default)||i}return o}(n,o):(null==n?void 0:n.default)||n},qg=function(t,e){t.getModel().logWarning("Plugin ".concat(e," not found"),{context:'plugins',plugin:e})};const Yg=function(){function t(){this.plugins={}}return t.prototype.add=function(t,e){var n=this.get(t);return n||(this.plugins[t]=e,e)},t.prototype.get=function(t){return this.plugins[t]},t.prototype.getAll=function(){return this.plugins},t}();var Bg=void 0&&(void 0).__assign||function(){return Bg=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Bg.apply(this,arguments)};!function(){if((0,e.hasWin)()&&function(){for(var t,e=window.navigator.userAgent,n=[['edge',/Edge\/([0-9\._]+)/],['ie',/MSIE\s(7\.0)/],['ie',/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],['ie',/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/]],o=0;o<n.length;o++){if(t=n[o][1].exec(e))break}return!!t}()){var t=DOMImplementation.prototype.createHTMLDocument;DOMImplementation.prototype.createHTMLDocument=function(e){return e||(e=''),t.apply(document.implementation,[e])}}}();var Fg=new Yg,Gg=[],Hg={$:s["default"],editors:Gg,plugins:Fg,usePlugin:function(t,e){var n=Ug(t,Fg);return function(o){n?n(o,e||{}):qg(o,t)}},version:'0.21.106',init:function(e){void 0===e&&(e={});var n=e.headless,o=e.container;if(!o&&!n)throw new Error("'container' is required");var i=Bg(Bg({autorender:!0,plugins:[],pluginsOpts:{}},e),{grapesjs:this,el:n?void 0:(0,t.isElement)(o)?o:document.querySelector(o)}),r=new zg(i,{$:s["default"]}),a=r.getModel();return i.plugins.forEach((function(t){var e=Ug(t,Fg),n=i.pluginsOpts[t]||{};e?e(r,n):qg(r,t)})),a.loadOnStart(),i.autorender&&!n&&r.render(),Gg.push(r),r}};const Kg=Hg})(),__webpack_exports__=__webpack_exports__["default"],__webpack_exports__})()));
//# sourceMappingURL=grapes.min.js.map